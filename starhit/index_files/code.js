var _tmr=_tmr||[];
(function(){function n(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)}function y(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent&&a.detachEvent("on"+b,c)}function mb(a,b){try{if(a.nodeName.toLowerCase()===b.toLowerCase())return a;if(a.parentNode)return mb(a.parentNode,b)}catch(c){p&&console.warn("[TopMailRu] Error#1.25",c)}return null}function nb(a,b){if(null===a.offsetParent||(0==a.offsetHeight||0==a.offsetWidth||0==a.clientHeight||
0==a.clientWidth)||b&&(0==a.offsetLeft||0==a.offsetTop))return!1;if(void 0!==e.getComputedStyle){var c=e.getComputedStyle(a,null);return"none"!==c.display&&"hidden"!==c.visibility}return!0}function ia(a,b){for(var c=0,d=b.length;c<d;c++)if(b[c]==a)return!0;return!1}function G(a){var b=typeof a;return!("number"===b||"boolean"===b||"string"===b||a.nodeType||a===a.window)}function S(a){return"[object Array]"===Object.prototype.toString.call(a)}function ja(){var a=arguments,b=a[0]||{},c=!1,d=1,g=a.length,
l,h,m,e,f;"boolean"===typeof b&&(c=b,b=a[d++]||{});for(G(b)||(b={});d<g;d++)if(null!=(l=a[d]))for(h in l)m=b[h],e=l[h],b!==e&&(c&&e&&(G(e)||(f=S(e)))?(f?(f=!1,m=m&&S(m)?m:[]):m=m&&G(m)?m:{},b[h]=ja(c,m,e)):void 0!==e&&(b[h]=e));return b}function Vb(a,b,c){if(!a)return null;var d=a.match(b),g=2<arguments.length?c:0;return d&&d.length>g?d[g]:null}function ob(a){return(""+a).replace(/[\/\^\$\*\+\?\.\|\(\)\[\]\{\}\\]/g,"\\$&")}function pb(a){var b="";try{var c=new Uint8Array(a);e.crypto.getRandomValues(c);
for(var d=0;d<a;d++)b+=(c[d]%16).toString(16)}catch(g){b="";for(d=0;d<a;d++)c=Math.floor(16*Math.random()),b+=c.toString(16)}return b}function z(){return(new Date).getTime()}function M(a,b){var c={data:b,raw:a,url:Ra(a)},d;d=!0;if("function"!==typeof navigator.sendBeacon)d=!1;else{c.dataSplitter=";";var g=Sa(c);try{d=!0===navigator.sendBeacon(c.url,g)}catch(l){d=!1}}d||(void 0===b?(c.dataSplitter=";",c.open=Wb,c.connect=Xb,c.startListen=Yb,c.stopListen=Zb,c.open(c),c.connect(c)):("function"===typeof e.XMLHttpRequest?
(c.dataSplitter=";",c.open=$b,c.connect=ac,c.startListen=bc,c.stopListen=cc,c.open(c),c.connect(c),d=!0):d=!1,d||dc(c)))}function dc(a){var b=f.createElement("iframe"),c=f.createElement("div");c.setAttribute("style","position: absolute !important; top: -9999px !important; left: -9999px !important; width: 1px !important; height: 1px !important;");c.appendChild(b);f.body.appendChild(c);try{var d=b.contentWindow.document,g=d.createElement("div"),l;for(l in a.data)if(a.data.hasOwnProperty(l)){var h=a.data[l],
e=typeof h;if("string"===e||"number"===e){var B=d.createElement("input");B.setAttribute("type","hidden");B.setAttribute("name",l);B.value=h;g.appendChild(B)}}var pa=d.createElement("form");pa.setAttribute("action",a.url);pa.setAttribute("method",qb);pa.setAttribute("enctype",rb);pa.appendChild(g);var k=d.createElement("div");k.appendChild(pa);d.body.appendChild(k);var t=function(){try{y(b,"load",t),f.body.removeChild(c)}catch(a){p&&console.warn("[TopMailRu] Error#1.2",a)}};n(b,"load",t);pa.submit()}catch(r){p&&
console.warn("[TopMailRu] Error#1.3",r)}}function $b(a){a._connection=new e.XMLHttpRequest}function ac(a){a._connection.open(qb,a.url);a._connection.setRequestHeader("Content-Type",rb);a._connection.send(Sa(a))}function bc(a){n(a._connection,"load",a._onload);n(a._connection,"error",a._onerror)}function cc(a){y(a._connection,"load",a._onload);y(a._connection,"error",a._onerror)}function Wb(a){a._connection=new Image}function Xb(a){a._connection.src=a.url+Sa(a)}function Yb(a){a._connection.onload=
a._onload;a._connection.onerror=a._onerror}function Zb(a){a._connection.onload=null;a._connection.onerror=null}function Sa(a){var b=a.data;a=a.dataSplitter||";";var c="",d;for(d in b)if(b.hasOwnProperty(d)){var g=b[d],l=typeof g;if("string"===l||"number"===l)c+=a+escape(d)+"="+escape(g)}return c}function Ra(a){return"https://top-fwz1.mail.ru"+a}function Q(a){return(a=f.cookie.match(RegExp("(?:^|; )"+a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)")))?decodeURIComponent(a[1]):null}function ka(a,
b,c){c=c||{};var d=c.expires;"number"===typeof c.expires&&(d=new Date,d.setTime(d.getTime()+c.expires));d&&d.toUTCString&&(d=d.toUTCString());c.expires=d;a=a+"="+encodeURIComponent(b);for(var g in c)if((b=c[g])||0===b)a+="; "+g,!0!==b&&(a+="="+b);f.cookie=a}function Ta(a,b){var c=b||{};c.expires=-1;ka(a,"",c)}function ec(){var a="tmr"+(""+Math.random()).slice(2);try{return T=e.localStorage||null,T.setItem(a,a),T.removeItem(a),!0}catch(b){return T=null,p&&console.warn("[TopMailRu] Error#1.4",b),!1}}
function Ja(a){try{return T.getItem(a)}catch(b){p&&console.warn("[TopMailRu] Error#1.5",b)}return null}function Ka(a,b){try{T.setItem(a,b)}catch(c){p&&console.warn("[TopMailRu] Error#1.6",c)}}function fc(){if(!U)return null;for(var a=C.hostname.split(".").reverse(),b,c=1,d=a.length;c<d;c++){b=a[0];for(var g=1;g<=c;g++)b=a[g]+"."+b;var g=""+z(),l={domain:b,path:"/",expires:3E5};try{ka("tmr_tcdhn",g,l);var h=Q("tmr_tcdhn");Ta("tmr_tcdhn",l);if(h===g)return b}catch(e){p&&console.warn("[TopMailRu] Error#1.8",
e)}}return null}function sb(a,b){U&&ka(a,b,Ua);qa&&Ka(a,b)}function tb(a){var b=f.createElement("script");b.type="text/javascript";b.async=!0;b.src=a;document.body.appendChild(b)}function ub(a){var b=";e="+escape("detect");M(J(a,"/tracker",!1,!1)+b)}function vb(a,b){if(a.length&&null!==b.ecom_data){var c=ya(b.ecom_data),c=c?(""+c).substring(1,c.length-1):"";if(!(4096<c.length||-1===c.search(/\S/))){var d=Va("_m",b.ecom_method),g=Va("_t",b.ecom_type),l=Va("_jst",wb()),c="{"+c+d+g+l+"}";M(J({id:a[0]},
"/datalayer",!1,!0)+(";ids="+escape(a.join()))+(";e="+escape(c)))}}}function Va(a,b){var c=',"'+a+'":';if(!b||!b.length)return c+"[]";try{return c+'["'+b.join('","')+'"]'}catch(d){}return c+"false"}function gc(){var a=Q(xb);if(null===a)return null;a=a.split("|");if(3!==a.length)return null;var b=a[2],b=z()-b;return 0>b||b>yb?null:{id:a[0],version:a[1]}}function zb(a){Wa=!0;a.length&&tb(Ra("/js/dyn-goal-config.js?ids="+a.join(",")))}function k(){}function ta(a){a&&"object"===typeof a&&(!V&&"id"in a)&&
(V=a.id)}function hc(a){return(a=!W?void 0:W[a])&&Xa?a-Xa:void 0}function Ab(){if(W){for(var a=0,b="domInteractive domContentLoadedEventStart domContentLoadedEventEnd domComplete loadEventStart loadEventEnd".split(" "),c=0;c<b.length;c++){var d=!W?void 0:W[b[c]];if(0<d&&(d<a||0==a))a=d}return a?a:void 0}}function X(a,b){var c=1<arguments.length?b:V;return a&&"object"===typeof a&&("id"in a&&a.id||c)}function J(a,b,c,d){qa&&Ka(ua,++O);var g="id"in a?a.id:V,l="url"in a?a.url:C.href,h="referrer"in a?
a.referrer:f.referrer,m="title"in a?a.title:f.title,B;B=Ya;null===B&&(B=ic());B=null!==B?B?1:0:null;var pa="userid"in a?a.userid:Y||0===Y?Y:void 0,k=Z?Z:void 0,t;t=la&&a.bfCache;var r="pageView"===a.type&&a.timespent,q=[];V&&g!==V&&q.push("sec");"dataLayer"in e&&q.push("dl");E&&q.push(["ecom"].concat(E).join("-"));var s=jc();s&&s.length&&q.push(["jst"].concat(s).join("-"));t&&q.push("bfc");N&&r&&q.push("ts");q.push(Bb);t=q.join(",");s=e.screen;r=(new Date).getTimezoneOffset();q="";if(e.Intl)try{q=
e.Intl.DateTimeFormat().resolvedOptions().timeZone||""}catch(za){p&&console.warn("[TopMailRu] Error#1.1",za)}q=r+"/"+q;r=Cb;r=null!==r?r:gc();a.start=Ab();b=b+"?js=13"+(g?";id="+escape(g):"")+(l?";u="+escape(l):"")+(h?";r="+escape(h):"")+(a.start?";st="+escape(a.start):"")+("gender"in a?";gender="+escape(a.gender):"")+("age"in a?";age="+escape(a.age):"")+("pid"in a?";pid="+escape(a.pid):"")+(void 0!==pa?";userid="+escape(pa):"")+(void 0!==k?";uparams="+escape(ya(k)):"")+(d&&m?";title="+encodeURIComponent(m):
"")+(s?";s="+s.width+"*"+s.height:"")+";vp=";g=d=0;f.documentElement&&(f.documentElement.clientWidth||f.documentElement.clientHeight)?(d=f.documentElement.clientWidth,g=f.documentElement.clientHeight):"number"==typeof e.innerWidth&&(d=e.innerWidth,g=e.innerHeight);b=b+(""+d+"*"+g)+";touch="+kc+";hds="+lc+";frame="+mc+";flash=";if(null===va)if(va="",K.plugins&&K.plugins["Shockwave Flash"])va=K.plugins["Shockwave Flash"].description.split(" ")[2];else if(e.ActiveXObject)try{var w=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),
w=w.GetVariable("$version"),w=w.split(" ")[1].split(",");va=w[0]+"."+w[1]}catch(nc){p&&console.warn("[TopMailRu] Error#1.12",nc)}w=b+va+";sid="+Za+";ver="+oc+";tz="+encodeURIComponent(q);if(c){if(!W||!$a)c="";else{c=[];c.push($a.type);c.push($a.redirectCount);c.push(Xa);for(b=0;b<Db.length;b++)c.push(hc(Db[b]));c=c.join("/")}c=";nt="+c}else c="";c=w+c+("device"in a?";device="+escape(a.device):"")+";ni=";if(!K||!K.connection)w="";else{w=K.connection;b=[];for(g=0;g<Eb.length;g++){d=w[Eb[g]];if(void 0!==
d)switch(d){case !0:d=1;break;case !1:d=0;break;default:d=(""+d).replace(/\//g,"_")}b.push(d)}w=b.join("/")}return c+w+("params"in a?";params="+escape(ya(a.params)):"")+(null!==B?";detect="+B:"")+(U||qa?";lvid="+escape([Aa,z(),O,ma].join(":")):"")+(t?";opts="+escape(t):"")+(r?";flocid="+escape(r.id)+";flocv="+escape(r.version):"")+("version"in a?";appver="+escape(a.version):"")+(na.support?";visible="+na.getValue():"")+";_="+Math.random()}function Fb(a){a=";e="+escape("PVT/"+a);for(var b=0;b<H.length;b++)M(J(H[b],
"/tracker",!1,!0)+a)}function pc(){Ya=!0;Gb(1);if(!ab&&!Ba){Ba=!0;for(var a=0;a<H.length;a++)ub(H[a])}}function qc(){Gb(0);Ya=!1}function ic(){var a=Q(Hb);if(null===a)return null;a=a.split("|");if(2!==a.length)return null;var b=a[1],b=z()-b;if(0>b||b>Ib)return null;a=parseInt(a[0],10);return isNaN(a)?null:a}function Gb(a){var b=z();a=[a,b].join("|");ka(Hb,a,{path:"/",expires:Ib})}function rc(){sc||(D.pvt2=setTimeout(function(){Fb(2)},2E3));tc||(D.pvt15=setTimeout(function(){Fb(15)},15E3))}function Jb(){bb||
setInterval(function(){_tmr.beat()},6E4)}function uc(a,b,c,d){if(!b||!d||d===cb&&b===cb&&c===cb)return null;b={goal:vc+b,value:c||0,params:{product_id:d}};a&&(b.id=a);return b}function La(){f.addEventListener?(y(f,"DOMContentLoaded",La),_tmr.onready()):f.attachEvent&&"complete"===f.readyState&&(y(f,"readystatechange",La),_tmr.onready());Kb()}function db(a){if(la){if(a.persisted){Ca=Da=Ma=0;eb=fb=!1;N&&v.launch();a=gb;gb=[];for(var b=0,c=a.length;b<c;b++)_tmr.callbackOnReady(a[b]);a=Na;Na={};for(b in a)_tmr.pageView(a[b]);
Jb()}}else y(e,"load",db);_tmr.onready();_tmr.onload()}function Ea(){la||(y(e,"unload",Ea),y(e,"beforeunload",Ea));_tmr.unload()}function Kb(){N&&v.launch();if(wc){window.addEventListener("message",function(a){var c=null;try{if(c=a.data,G(c)||(c=Lb(c)),"LOAD_BUTTONS_SCRIPT"===c.type){var d,g=(""+c.lang).toLowerCase(),l;a:{a=0;for(var e=hb.length;a<e;a++)if(hb[a]===g){l=!0;break a}l=!1}l||(g=hb[0]);d=Ra("/js/dyn-goal-wizard-"+g+".js");tb(d)}}catch(m){}});if(window.opener)try{window.opener.postMessage({type:"READY"},
document.referrer)}catch(a){}Wa||zb(Fa)}}if("[object Array]"===Object.prototype.toString.call(_tmr)){var hb=["ru","en"],e=window,K=navigator,f=document,C=location,$="string"===typeof C.hostname?C.hostname:"",Ga=-1!=$.search(/(^|\.)odnoklassniki\.ru$/)||-1!=$.search(/(^|\.)ok\.ru$/),Mb=-1!=$.search(/(^|\.)vk\.com$/);$.search(/(^|\.)mail\.ru$/);var xc=-1!=$.search(/(^|\.)lamoda\.ru$/),yc=-1!=$.search(/(^|\.)kommersant\.ru$/);$.search(/(^|\.)top\.mail\.ru$/);$.search(/(^|\.)journal\.tinkoff\.ru$/);var zc=
"string"===typeof C.search&&-1!=C.search.search(/[?&]rb_clickid=/),p="string"===typeof C.search&&-1!=C.search.search(/[?&]tmr_debug=1(?:&|$)/),bb=Ga||Mb||xc||yc,sc=!zc,tc=Ga,ab=!1,N=e.performance&&"visibilityState"in f,Ac=[36383],Bc=!(Ga||Mb),wc=!0,Nb=e.JSON&&e.JSON.stringify&&e.JSON.parse,la="onpageshow"in e&&"onpagehide"in e,ya=Nb?e.JSON.stringify.bind(e.JSON):function(a){return""},Lb=Nb?e.JSON.parse.bind(e.JSON):function(a){return{}},qb="POST",rb="application/x-www-form-urlencoded",U=!(0===C.hostname.search(/^(\d+.)+\d+$/g)||
-1!==C.hostname.search(/:/g)),T=null,qa=ec(),Ua={domain:fc(),path:"/",expires:287712E5};(function(){var a;if(a=f.cookie.match(RegExp("(?:^|; )(tmr_tcdhn\\d+)=([^;]*)","g"))){for(var b=[],c,d=0,g=a.length;d<g;d++)c=a[d],(c=c.match(/(?:^|; )(tmr_tcdhn\d+)=([^;]*)/))&&b.push(c.slice(1));a=b}else a=null;if(a){d=0;for(g=a.length;d<g;d++)b=a[d][0],Ta(b,Ua)}})();var Ba=!1,Ya=null,Ib=864E5,Hb="tmr_detect",Cc=function(){function a(a,b){for(var c=a.length,e,m,f=0;f<b;f++)m=Math.floor(Math.random()*c),e=a[f],
a[f]=a[m],a[m]=e;return a.slice(0,b)}function b(b,g){var e=f.createElement("div"),h=String.fromCharCode(97,100,118,98,108,111,99,107,32,97,100,118,101,114,116,98,108,111,99,107,32,97,100,118,101,114,116,66,108,111,99,107,32,98,45,114,98,32,98,97,110,110,101,114,95,50,52,48,32,112,45,116,97,114,103,101,116,32,112,117,98,95,51,48,48,120,50,53,48,32,112,117,98,95,51,48,48,120,50,53,48,109,32,112,117,98,95,55,50,56,120,57,48,32,114,98,95,98,111,100,121,32,114,98,45,102,108,111,97,116,105,110,103,32,114,
98,45,115,108,111,116,32,114,98,45,118,105,100,101,111,45,119,105,100,103,101,116,32,116,101,120,116,45,97,100,32,116,101,120,116,45,97,100,45,108,105,110,107,115,32,116,101,120,116,45,97,100,115,32,116,101,120,116,45,98,97,110,110,101,114,32,116,101,120,116,95,97,100,32,116,101,120,116,95,97,100,115,32,116,101,120,116,65,100,32,116,101,120,116,97,100,32,116,101,120,116,65,100,115,32,116,101,120,116,97,100,115,32,116,103,98,45,98,97,110,110,101,114,32,116,114,103,45,98,45,98,97,110,110,101,114,45,
98,108,111,99,107).split(" "),h=a(h,c);e.setAttribute("class",h.join(" "));e.setAttribute("style","position: absolute !important; top: -9999px !important; left: -9999px !important; width: 1px !important; height: 1px !important;");e.setAttribute("id","trg-b-banners-1");e.setAttribute("data-view","SlotView.mimic");this.bait=f.body.appendChild(e);this.bait.offsetParent;this.bait.offsetHeight;this.bait.offsetLeft;this.bait.offsetTop;this.bait.offsetWidth;this.bait.clientHeight;this.bait.clientWidth;this.loopNumber=
0;this.fnPositive=b||null;this.fnNegative=g||null;var m=this;setTimeout(function(){m._checkBait.call(m)},1)}var c=7;b.prototype._checkBait=function(){if(Ba)this._stop();else{var a=null!==f.body.getAttribute("abp")||!nb(this.bait,!0);(!0===a||10<=++this.loopNumber)&&this._stop();var b;if(a&&this.fnPositive)try{b=this.fnPositive,b()}catch(c){p&&console.warn("[TopMailRu] Error#1.9",c)}else if(!a&&10>this.loopNumber){var e=this;setTimeout(function(){e._checkBait.call(e)},50*this.loopNumber)}else try{b=
this.fnNegative,b()}catch(m){p&&console.warn("[TopMailRu] Error#1.10",m)}}};b.prototype._stop=function(){try{f.body.removeChild(this.bait)}catch(a){p&&console.warn("[TopMailRu] Error#1.11",a)}};return function(a,c){new b(a,c)}}(),E=null,Ob="ecommerce",R="dataLayer",ca=null,ib=!1,Oa=[],Dc=[36383,2540645,3171181,3074137,2057653],Ec=[],jb;(function(){function a(a,b){for(var c=0,d=b.length;c<d;c++)-1===a.indexOf(b[c])&&a.push(b[c])}function b(b,c,d){for(var g={ecom_method:[],ecom_type:[],ecom_data:{events:[]}},
e=0,r=b.length;e<r;e++){var l=s[b[e]];if(l){a(g.ecom_method,[b[e]]);for(var q=0,h=l.length;q<h;q++)for(var f=0,m=d.length;f<m;f++){var B=l[q][d[f]];if(B)for(var u=0,k=c.length;u<k;u++)if(-1!==l[q].type.indexOf(c[u])){a(g.ecom_type,[c[u]]);a(g.ecom_data.events,B);break}}}}return g}function c(a,b,c){if(!a||!c||!(b in s))return null;for(var d,g=0,e=s[b].length;g<e;g++)if(d=s[b][g],c in d&&-1!==d[c].indexOf(a))return{ecom_method:[b],ecom_type:d.type.slice(),ecom_data:{}};return null}function d(a){for(var d=
[],e,h,s=0,Fc=a.length;s<Fc;s++)if(h=a[s]){e=null;try{if(h.ecommerce)e=g(h)||l(h);else if(null===h.ecommerce)e=null;else if(h.event){var aa={event:h.event,ecommerce:{}};e=g(aa)||l(aa)}else if("event"===h[0]){var Pb=h[1],Gc=h[2],x=c(Pb,f,r);x&&(x.ecom_data[Pb]=Gc);e=x}else if(h.event===Ob)a:{for(var Ha=b([m],[k],[q]),F=0,u=Ha.ecom_data.events.length;F<u;F++)if(!h.hasOwnProperty(Ha.ecom_data.events[F])){e=null;break a}delete Ha.ecom_data.events;Ha.ecom_data[Ob]=h;e=Ha}}catch(t){p&&console.warn("[TopMailRu] Error#1.23",
t),e=null}e&&(d.push(e),Oa.push(e))}if(d.length){a=0;for(e=d.length;a<e;a++)vb(Pa,d[a]);E||(E=[0,0,R]);E[0]+=d.length;e=a=0;for(s=d.length;e<s;e++)a+=ya(d[e].ecom_data).length;E[1]+=a}}function g(a){var b,d;for(d in a.ecommerce)if(a.ecommerce.hasOwnProperty(d)&&(b=c(d,m,n))){if(a.event&&(d=c(a.event,m,t)))for(var e=0,g=b.ecom_type.length;e<g;e++)-1===d.ecom_type.indexOf(b.ecom_type[e])&&(b.ecom_type.splice(e,1),g--,e--);b.ecom_data=a.ecommerce;return b}return null}function l(a){var b=a.event,d=c(b,
m,t);d&&(d.ecom_data[b]=a.ecommerce);return d}function h(a){if((a=e[a])&&"function"===typeof a.push)d(a),ca=a.push,a.push=function(){var a=ca.apply(this,arguments);d([].slice.call(arguments,0));return a}}var m="push",f="gtag",k="gse",n="inner",t="outer",r="external",q="required",s={};s[f]=[{type:["gee"],external:"add checkout checkout_option checkout_progress click detail promo_click remove select_content set_checkout_option view_refund".split(" ")},{type:["ga4"],external:"earn_virtual_currency join_group level_end level_start level_up post_score select_content spend_virtual_currency tutorial_begin tutorial_complete unlock_achievement ad_impression login search share sign_up add_payment_info add_shipping_info add_to_wishlist generate_lead select_item select_promotion view_cart view_item_list".split(" ")},
{type:["gee","ga4"],external:"add_to_cart begin_checkout purchase refund remove_from_cart view_item view_promotion".split(" ")}];s[m]=[{type:[k],required:["transactionId","transactionTotal"]},{type:["ga4"],outer:b([f],["ga4"],[r]).ecom_data.events},{type:["gee"],inner:"click checkout checkout_option impressions promoClick promoView refund".split(" "),outer:"addToCart checkout checkoutOption productClick productDetail ProductImpressions promotionClick promotionView removeFromCart transactionPush".split(" ")},
{type:["ym","gee"],inner:["add","detail","purchase","remove"]},{type:["mt"],outer:["mt_order","mt_refund"]}];jb=function(a){if(!(a===R&&ca)){a!==R&&(Oa=[]);var b=e[R];b&&"function"===typeof b.push&&ca&&(b.push=ca,ca=null);h(a);ib=!0}}})();var wb=function(){var a=[{id:"gtag",globalVars:["google_tag_manager"]},{id:"ga",globalVars:["GoogleAnalyticsObject"]},{id:"ym",globalVars:["Ya",{re:"yaCounter\\d+"}]},{id:"vk",globalVars:["VK"]},{id:"vk",globalVars:["vkAsyncInit"]}],b={};return function(){var c;
try{c=Object.keys(e).join(",")}catch(d){c=null}for(var g=[],l,h=0,f=a.length;h<f;h++){l=b[a[h].id];if(void 0===l)a:{l=a[h].globalVars;for(var B=c,k=0,p=l.length;k<p;k++){var t=l[k];if("string"===typeof t&&!(t in e)||"string"===typeof t.re&&(B&&-1===B.search(RegExp("($|,)"+t.re+"(,|^)","m"))||1===p)){l=!1;break a}}l=!0}l&&(b[a[h].id]=!0,ia(a[h].id,g)||g.push(a[h].id))}return g}}(),jc=wb,yb=864E5,xb="tmr_floc",Cb=null;(function(a){try{f.interestCohort&&"function"===typeof f.interestCohort&&f.interestCohort().then(function(a){Cb=
{id:a.id,version:a.version};a=[a.id,a.version];var b=z();a=a.concat(b).join("|");ka(xb,a,{path:"/",expires:yb})},function(){})}catch(b){}})();var Bb=function(){function a(a){try{var e=a.state;Bb="gl="+(e in c?c[e]:b)}catch(l){}}var b="u",c={denied:"d",granted:"g",prompt:"p"};return function(){try{if(!("geolocation"in K))return"gl=n";K.permissions&&K.permissions.query({name:"geolocation"}).then(function(b){a(b);b.onchange=function(){a(b)}})}catch(c){}return"gl="+b}()}(),na={support:!1},na=function(){function a(){g(h)}
function b(){g(h,r)}function c(a){a.persisted&&(q[h]=null,q[m]=null,g(h,v))}function d(){return k?!f[k]:null}function g(a,b){var c=z(),e="undefined"===typeof b?d():b;if(null===q[a])q[a]={ts:c,state:e,total:0};else{var g=q[a];if(g.state!==e&&!(g.state===r&&e!==v)){var h=c-g.ts,f=g.state;g.ts=c;g.state=e;h<l||(f===v?(g.total+=h,s&&s(c,h)):f===t&&za&&za(c,h))}}}var l=5,h="auto",m="user",k=null,p=null,v=!0,t=!1,r=null;"hidden"in f?(k="hidden",p="visibilitychange"):"mozHidden"in f?(k="mozHidden",p="mozvisibilitychange"):
"webkitHidden"in f?(k="webkitHidden",p="webkitvisibilitychange"):"msHidden"in f&&(k="msHidden",p="msvisibilitychange");var q={};q[h]=null;var s=q[m]=null,za=null;return{support:!!k,auto:function(d,g){s=d||null;za=g||null;k&&(a(),n(f,p,a));la?(n(e,"pageshow",c),n(e,"pagehide",b)):(n(e,"beforeunload",b),n(e,"unload",b))},set:function(a){g(m,!!a)},getLog:function(){var a=z(),b={},c,d;for(d in q)c=q[d],b[d]=c?c.total:0,c&&c.state&&(b[d]+=a-c.ts);return b},getValue:d}}();na.auto();var Qb={enabled:!1},
da=function(){function a(a,b){var c=(""+a).match(e),d={};d[h]=c;for(var f=0,l=c.length;f<l;f++)c[f]&&(d[k[f]]=c[f]);c=1<arguments.length&&void 0!==b;delete d[h];return c&&!0!==b?d[b]||null:d}function b(a,b){var d;d=(""+a).match(l)||[];var e={};e[h]=d;if(d.length){for(var g=0,f=d.length;g<f;g++)d[g]&&(e[p[g]]=d[g]);d=e}else d=null;if(!d)return null;if((e=1<arguments.length&&void 0!==b)&&(-1!==n.indexOf(b)||!0===b))for(var g=d,m=0,k=n.length;m<k;m++)(f=c(t[m]||"",g,m))&&(g[n[m]]=f);delete d[h];return e&&
!0!==b?d[b]||null:d}function c(a,b,d){var e="",g;if(G(a)&&"data"in a)e="index"in a?(b[a.data]||[])[a.index]||"":c(a.data,b,d),"re"in a&&(e=Vb(e,a.re,a.reMatchIndex)||""),e&&(g=c(a.pre||"",b,d),a=c(a.post||"",b,d),e=g+e+a);else if(S(a)){g=0;for(var h=a.length;g<h;g++)e+=c(a[g],b,d)}else e=p.indexOf(a),-1===e&&(e=n.indexOf(a),e>=d&&(e=-1)),e=-1!==e?b[a]||"":""+a;return e}function d(a){var b;if(S(a)){b=[];for(var c=0,e=a.length;c<e;c++)b.push(d(a[c]));return b}b=a instanceof RegExp?a:RegExp("^"+ob(a)+
"$");return b.test(da.parse(C.href,"domain"))?null:b}var e=/^((mailto|tel|fax|modem)\:)(.*)$/,l=/^(?:([a-z]+):(?:([a-z]*):)?\/\/)?(?:([^:@]*)(?::([^:@]*))?@)?(?:((?:[a-z0-9_-]+\.)+[a-z]{2,}|localhost|(?:(?:[01]?\d\d?|2[0-4]\d|25[0-5])\.){3}(?:(?:[01]?\d\d?|2[0-4]\d|25[0-5]))))(?::(\d+))?(?:([^:\?\#]+))?(?:\?([^\#]+))?(?:\#([^\s]+))?$/i,h="_raw",f="hash",f="hash",k=["href","protocol","contactBy","contactTo"],p=["href","scheme","subscheme","user","pass","hostname","port","pathname","query",f],n=["protocol",
"auth","host","domain","path","search",f,"fileExtension"],t=[{data:["scheme",{pre:":",data:"subscheme"}],post:":"},[{data:"user",post:{pre:":",data:"pass"}}],[{data:h,index:5,post:{pre:":",data:"port"}}],{data:"host",re:/^(?:w{3}.)?(.*)$/,reMatchIndex:1},["pathname",{pre:"?",data:"query"}],{pre:"?",data:"query"},{pre:"#",data:f},{data:"pathname",re:/.\.([^\.]+)$/,reMatchIndex:1}];return{parse:function(c,d){return!c?null:e.test(""+c)?a(c,d):b(c,d)},getIsDomainRE:d,getDomainMask:function(a,b,c){b=(b&&
0<b?b:2)-1;var d=1;a=(""+a).replace(RegExp("^.*(?:\\.((?:[^\\.]+\\.){"+b+"}[^\\.]+$))"),"$1");if(d=a.match(/\./g))d=d.length;a="(?:^|\\.{"+(b-d+1)+"})"+ob(a)+"$";return RegExp(c?"^((?!"+a+").)*$":a)}}}(),Rb=function(){var a="checkbox color date datetime-local email file month number password radio range search tel text time url week".split(" ");return{analyze:function(b){if(!b)return null;for(var c=[].slice.apply(b.elements),d=[],e=[],f=0,h=c.length;f<h;f++){var m;a:switch(m=c[f],m.tagName.toLowerCase()){case "button":m=
!1;break a;case "input":var k=m.type.toLowerCase();if(k&&-1===a.indexOf(k)){m=!1;break a}default:m=nb(m,!1)&&m.name&&!1===m.disabled}m&&(d.push(c[f].name),e.push(c[f].type))}return{node:b,inputsName:d.length?d:null,inputsType:e.length?e:null}},getFormByInput:function(a){if(!a)return null;a=a.form||a.getAttribute("form");return"string"===typeof a?document.getElementById(a)||null:a instanceof HTMLElement?a:null}}}(),Qb=function(){function a(a){a=a||e.event;var c=(a.which||a.keyCode)===H;if("which"in
a&&a.which===J||"button"in a&&a.button&J||c){a:{a=a.target||a.srcElement;for(var c=0,d=h.length;c<d;c++){var f;b:{f=a;for(var x=h[c],q=0,F=x.types.length;q<F;q++){var u;c:{var r=f;u=x.types[q];var n=null;if(u.filter.tagName)for(var s=0,w=u.filter.tagName.length;s<w&&!(n=mb(r,u.filter.tagName[s]));s++);else n=r;if(n){if(u.filter.attr)for(r in r=void 0,u.filter.attr)if(u.filter.attr.hasOwnProperty(r)&&(s=u.filter.attr[r],w=n[r],!0===s&&!w||!1===s&&w||S(s)&&-1===s.indexOf(w))){u=null;break c}u={source:n,
type:u.type,detail:n.tagName}}else u=null}if(u){u.category=x.category;f=u;break b}}f=null}if(f){a=f;break a}}a=null}if(a){if(a.category===g){if(a.data=da.parse(a.source.href,!0),!a.data)return}else if(a.category===l){if(a.data=Rb.analyze(Rb.getFormByInput(a.source)),!a.data)return}else return;c=M;if(c.enabled&&c.modes){d=0;for(f=c.modes.length;d<f;d++)if(x=a,q=c.modes[d],x.category===q.mode)if(x.category===g||x.category===l){if(q=q.categories,x.data){F=void 0;c:{F=0;for(u=q.length;F<u;F++){for(var n=
x,r=q[F],s={category:x.category},w=[],C=0,ea=r.types.length;C<ea;C++){var y=r.types[C],E=ja({type:r.category},s),K=t in y,D;z in y?D=b(n,y,E,z):K&&(D=ja({source:n.source,data:n.data,detail:y.type},E));if(D&&(!K||!b(n,y,E,t)))if(w.push(D),(y.rule&A)!==A)break}if(n=w.length?w:null){F=n;break c}}F=null}if(F){x=0;for(q=F.length;x<q;x++)c:{u=F[x];n={type:"sendEvent",category:"_"+u.category,action:u.detail};if(u.category===g&&(u.type===m||u.type===k)){if(n.label=u.data.href,!n.label)break c}else if(u.category===
v&&(n.label=u.data.node.action,!n.label))break c;_tmr.push(n)}}}}else p&&console.warn("[TopMailRu] Error#1.24","Not found tracking for type",x.type)}}}}function b(a,b,d,e){var g=!1,f=b[e];if(S(f)){var h=b[e+"Rule"]||w;e=(h&r)===r;for(var h=(h&q)===q,l=0,m=f.length;l<m&&!(g=c(a,f[l]),e&&g);l++)if(h&&!g)return null}else g=c(a,f);return!g?null:ja({source:a.source,data:a.data,detail:b.type},d)}function c(a,b){var c=b.rule||w,e=(c&r)===r,c=(c&q)===q,g=!1,f;for(f in b)if(b.hasOwnProperty(f)&&"rule"!==f){var g=
b[f],h=a.data[f],g=!0===g?!!(S(h)?h.length:h):!1===g?!(S(h)?h.length:h):d(h,g);if(e&&g)break;else if(c&&!g)return!1}return g}function d(a,b){var c=a;if(c)if(S(c)){if(!c.length)return!1}else c=[c];else return!1;var d=b,e=w;if(G(d)&&!S(d)){if(!S(d.value))return!1;e=d.rule||e;d=d.value}a:{for(var g=(e&s)===s,f=(e&r)===r,e=(e&q)===q,h=!1,l=0,m=d.length;l<m;l++){var k=d[l];if(k){var n="string"===typeof k;n&&!g&&(k=k.toLowerCase());var p=k instanceof RegExp;if(n||p){var h=!0,t;b:{t=c;for(var B=g,v=0,z=
t.length;v<z;v++){var y=B?t[v]:t[v].toLowerCase();if(p&&k.test(y)||n&&k===y){t=!0;break b}}t=!1}if(f&&t){c=!0;break a}else if(e&&!t){c=!1;break a}}}}c=f?!1:e?h?!0:!1:void 0}return c}var g="click",l="submit",h=[{category:l,types:[{type:"button",filter:{tagName:["input","button"],attr:{type:["submit","image"]}}}]},{category:g,types:[{type:"a",filter:{tagName:["a"],attr:{href:!0}}}]}],m="file",k="resource",v="submit",z="filter",t="stop",r=1,q=2,s=4,A=8,w=r,M={enabled:!0,modes:[{mode:l,categories:[{category:v,
types:[{type:"lead",filter:[{inputsName:["phone"],inputsType:["tel"],rule:r},{inputsName:["email"],inputsType:["email"],rule:r}],filterRule:q,stop:{inputsName:{value:["password"]}}},{type:"form",filter:{inputsName:!0}}]}]},{mode:g,categories:[{category:"contact",types:[{type:"email",filter:{contactBy:["mailto"]}},{type:"phone",filter:{contactBy:["tel"]}}]},{category:m,types:[{type:"file",filter:{fileExtension:"7z bz2 gz apk iso cab dmg msi rar tar zip exe txt doc docx ppt pptx xls xlsx csv pdf psd rtf ods djvu eps 3gp aac ac3 avi flac flv divx midi mka mkv mp3 mp4 mpeg mpg mov ogg vob wav webm wma wmf wmv torrent".split(" ")}}]},
{category:k,types:[{type:"outgoing",rule:A,stop:{domain:[da.getDomainMask(da.parse(C.href,"domain"),3,!1)],href:[/password/]}},{type:"messenger",filter:{domain:da.getIsDomainRE("vk.me t.me telegram.me telegram.im web.telegram.org m.me web.whatsapp.com api.whatsapp.com chat.whatsapp.com wa.me".split(" "))},stop:{href:[/password/]}},{type:"social",filter:{domain:da.getIsDomainRE("vk.com vkontakte.ru m.vk.com vk.ru ok.ru m.ok.ru odnoklassniki.ru facebook.com m.facebook.com fb.com twitter.com linkedin.com instagram.com tiktok.com youtube.com youtu.be m.youtube.com".split(" "))},
stop:{href:[/password/]}}]}]}]},J=1,H=13;return{enabled:!0,start:function(){n(f,"click",a);n(f,"keypress",a)}}}();Bc&&Qb.start();var v=function(){function a(){b(null)}function b(a){g();a?(U=a===ea,oa=a):oa=Z&&null!==U?U?ea:$:f.visibilityState;a=aa();for(var b in fa)s(b,a)}function c(){if(!1!==Q){y(e,Y,ka);ka=null;e.clearInterval(ma);na=ma=null;y(f,N,ca);ca=null;Z&&(y(e,V,da),y(e,W,ha),ha=da=null);l(!0);for(var a in ba){var b=a,c=ba[b];c&&(c=c.key,O(b),G(),delete ba[b],x(null,c))}I=null;ga=[];wa=[];
L={};ba={};fa={};Q=!1}}function d(a,b,c){var d=a+"_"+b;if(d in L)return!1;var e=z(),g=aa(),f=D(d,e,Za);b=L[d]={id:a||null,name:b,key:f,canUseInBackground:!!c,startTS:e,updateTS:g,timespent:{}};if(a)if(wa.push(d),d=b.canUseInBackground,b=fa[a]){if(c=b.isActive,!c&&(e=I&&ia(a,I)))if(c=oa===ea||d)b.updateTS=g,b.isActive=!0}else e=I&&ia(a,I),c=oa===ea||d,fa[a]={isActive:e&&c,updateTS:g,timespent:{}};else ga.push(d);return!0}function g(a,b){var c,d;2>arguments.length?(c=wa.concat(ga),d=F):(c=[a+"_"+b],
d=R);h(c,d)}function l(a,b,c){var d=!1,e=[],g=[];2>arguments.length?(e=wa.slice(),(d=!!arguments[0])&&(e=e.concat(ga))):(d=a+"_"+b,-1!==wa.indexOf(d)?e=[d]:-1!==ga.indexOf(d)&&(c?e=[d]:g=[d]));h(e,X);h(g,R)}function h(a,b){var c=aa(),d=[],e,g,f;e=0;for(g=a.length;e<g;e++)f=a[e],-1!==wa.indexOf(f)?k(f,b,c):-1!==ga.indexOf(f)&&d.push(f);e=0;for(g=d.length;e<g;e++)f=d[e],k(f,b,c);if(b===F&&(T=c,T-Q>=sa)){for(var h in L)v(h);for(h in ba)if(c=h,d=ba[c])O(c),x(c,d.key);Q=T}}function k(a,b,c){var d=L[a];
if(d&&!1!==d.updateTS)if(d.timespent[oa]=(d.timespent[oa]||0)+(c-(d.updateTS||T)),-1!==ga.indexOf(a)&&C(null,c),b===X)d.updateTS=!1,v(a);else if(b===u){d.updateTS=c;var e;a:{if(b=L[a])for(e in b.timespent)if(b.timespent[e]>ra){e=!1;break a}e=!0}e?(p(a),G()):v(a)}else d.updateTS=b===F?null:c,p(a),G()}function p(a,b,c){var d=L[a];if(!d)return null;var e=b||d.key;b=P[e];P[e]={uid:a,name:d.name,counterID:c||d.id||I,canUseInBackground:d.canUseInBackground,isActive:!1!==d.updateTS,startTime:d.startTS,timespent:{}};
a=P[e].timespent;var d=d.timespent,g;for(g in d)a[g]=d[g];if(c&&(c=fa[c]))if(e=P[e]){e.common={};e=e.common;c=c.timespent;for(var f in c)e[f]=c[f]}return b||null}function v(a){var b=L[a];b&&(p(a),A(a,b.key))}function A(a,b){var c=P[b];if(c)if(S(c.counterID)){var d=P[b];if(d){var c=d.counterID,e=[],g,f,h,l;if(c){h=0;for(l=c.length;h<l;h++){f=c[h];g=D(b,f);e.push(g);f=p(a||d.uid,g,f);var k=void 0;f&&(k=P[g],H(k.timespent,f.timespent),f.common&&(k.common=k.common||{},H(k.common,f.common)))}}delete P[b];
G();if(a&&a in L)if(d.isActive){r(a);h=0;for(l=c.length;h<l;h++)if(d=fa[c[h]])for(var m in d.timespent)d.timespent[m]=0}else q(a);h=0;for(l=e.length;h<l;h++)t(e[h])}}else if(m=P[b])(c=a&&a in L)&&!m.isActive&&q(a),e=t(b),c&&(e&&m.isActive)&&r(a)}function t(a){var b;if(b=P[a]){var c=K(b.timespent);if(!1===b.canUseInBackground&&b.isActive&&0===c.fg)b=null;else{c=[b.name,b.startTime,b.canUseInBackground?1:0,c.fg,c.bg];if(b.common){var d=K(b.common);(d.fg||d.bg)&&c.push(d.fg,d.bg)}b={id:b.counterID,msg:c.join("/")}}}else b=
!1;if(!b)return!1;c=";e="+escape("TS:"+b.msg);M(J({id:b.id},"/tracker",!1,!1)+c);delete P[a];G();return!0}function r(a){if(a=L[a])for(var b in a.timespent)a.timespent[b]=0}function q(a){if(a in L){var b;-1!==(b=ga.indexOf(a))&&ga.splice(b,1);if(-1!==(b=wa.indexOf(a)))if(wa.splice(b,1),b=L[a].id){var c=fa[b];if(c){var d=c.isActive;d&&E(c,aa());d=w(b,a);d||(c.isActive=!1)}}delete L[a]}}function s(a,b){var c=fa[a];if(c){var d=I&&ia(a,I),e=w(a);c.isActive=d&&e;c.updateTS=b}}function C(a,b){if(a){var c=
fa[a];c&&(c.isActive?E(c,aa()):c.updateTS=b)}else for(c in fa)C(c,b)}function w(a,b){for(var c in L)if(c!==b&&L[c].id===a&&(oa===ea||L[c].canUseInBackground))return!0;return!1}function E(a,b){a&&(a.timespent[oa]=(a.timespent[oa]||0)+(b-a.updateTS),a.updateTS=b)}function D(a){return[].join.call(arguments,"_")}function H(a,b){for(var c in b)a[c]=(a[c]||0)+(b[c]||0)}function K(a){var b=a[ea]||0,c=0,d;for(d in a)d!==ea&&(c+=a[d]);return{fg:b,bg:c}}function aa(){return Math.floor(e.performance.now())}
function G(){if(qa){var a={};a[ua]=P;a[va]=xa;Ka(ta,ya(a)||"")}}function O(a){var b=ba[a];b&&(xa[b.key]={uid:a,name:b.name,counterID:b.id,value:b.value})}function x(a,b){if(xa[b]){var c;if(c=xa[b])if(0===c.value)c=null;else{var d=[c.name,c.value].join("/");c={id:c.counterID,msg:d}}else c=!1;c&&(d=";e="+escape("TS:"+c.msg),M(J({id:c.id},"/tracker",!1,!1)+d));!1!==c&&(delete xa[b],G());if(c&&a&&(c=ba[a]))c.value=0}}var R=1,F=2,u=4,X=8,Y=la?"pagehide":"unload",N="visibilitychange";"mozHidden"in f?N=
"mozvisibilitychange":"webkitHidden"in f?N="webkitvisibilitychange":"msHidden"in f&&(N="msvisibilitychange");var V="focus",W="blur";"onfocusin"in f&&(V="focusin",W="focusout");var ea="visible",$="hidden",ja=["0"],Z=!1,ra=100,sa=12E4,Q=!1,T=!1,I=null,ga=[],wa=[],L={},oa,U=null,ma,na,ca,da,ha,ka,ta="tmr_tslog",ua="activity",va="count",P={},ba={},xa={},fa={};return{init:function(){if(qa){var a=Lb(Ja(ta)||"{}");P=a[ua]||{};xa=a[va]||{}}for(var b in P)A(null,b);for(b in xa)x(null,b)},launch:function(){!1===
Q&&(Q=aa(),T=aa(),oa=Z&&null!==U?U?ea:$:f.visibilityState,ka=c.bind(e),n(e,Y,ka),na=a.bind(e),ma=e.setInterval(na,1E4),ca=b.bind(e,null),n(f,N,ca),Z&&(da=b.bind(e,ea),ha=b.bind(e,$),n(e,V,da),n(e,W,ha)))},enable:function(a){if(I){if(ia(a,I))return;h(ga,u)}else{for(var b=0,c=ja.length;b<c;b++)d(null,ja[b],!1);I=[]}I.push(a);s(a,aa())},disable:function(a){if(I){var b;a:{b=0;for(var c=I.length;b<c;b++)if(I[b]==a)break a;b=-1}if(-1!==b&&(h(ga,u),I.splice(b,1),b=aa(),a=fa[a]))a.isActive=!1,a.updateTS=
b}},startActivity:d,updateActivity:g,stopActivity:l,incCount:function(a,b){var c=a+"_"+b,d;if(!(d=ba[c]))if(c in ba)d=ba[c];else{d=z();var e=D(b,d,Za);d=ba[c]={id:a,name:b,key:e,startTS:d,value:0}}d&&d.id===a&&(d.value++,O(c),G())},defaultID:function(){return I?I[0]:void 0}}}(),Wa=!1,oc="60.3.0",Ma=0,Da=0,Za=pb(16),Y=null,Z=null,Ca=0,ua="tmr_reqNum",O=null;U&&(O=Q(ua)||null,null!==O&&Ta(ua,Ua));qa&&null===O&&(O=Ja(ua)||null);O=null===O?0:parseInt(O,10);qa&&Ka(ua,O);var ma=(U?Q("tmr_lvid"):null)||
(qa?Ja("tmr_lvid"):null),Aa=(U?Q("tmr_lvidTS"):null)||(qa?Ja("tmr_lvidTS"):null);if(null===ma||-1===ma.search(/^[0-9a-fA-F]+$/))ma=pb(32);sb("tmr_lvid",ma);if(null===Aa||-1===Aa.search(/^\d+$/))Aa=""+z();sb("tmr_lvidTS",Aa);var V=0,H=[],Fa=[],Qa=[],Pa=[],Na={},kc="ontouchstart"in e||1<(K.maxTouchPoints||K.msMaxTouchPoints)?"1":"0",lc=e.devicePixelRatio||0,mc=e.top===e?0:1,va=null,Sb=e.performance||e.mozPerformance||e.msPerformance||e.webkitPerformance||{},W=Sb.timing||{},$a=Sb.navigation||{},Db="unloadEventStart unloadEventEnd redirectStart redirectEnd fetchStart domainLookupStart domainLookupEnd connectStart connectEnd secureConnectionStart requestStart responseStart responseEnd domLoading domInteractive domContentLoadedEventStart domContentLoadedEventEnd domComplete loadEventStart loadEventEnd".split(" "),
Xa=!W?void 0:W.navigationStart,Eb="downlink downlinkMax effectiveType rtt saveData type".split(" "),ra,kb;ra=function(a,b,c){if(b&&"object"===typeof b){var d="id"in b&&b.id||V,e=c.title||null,f,h=kb(b,{params:c.required,fn:c.fn});if(h.missed.length)console.warn("[TopMailRu]"+(d?"["+d+"]":"")+" Error#1.14","Unspecified "+(1<h.missed.length&&h.missed.slice(0,-1).join(", ")+" and "||"")+h.missed.slice(-1)+" in "+a);else{var k=kb(b,{params:c.optional,fn:c.fn});f=[].concat(h.values).concat(k.values);h=
[].concat(h.missed).concat(k.missed);c.value&&(b="value"in b&&b.value,!0!==c.value&&(b=b||c.value),b?f.push("value: "+b):h.push("value"));c=f.length?"{ "+f.join(", ")+" }":"";f=h.length?"("+(1<h.length?h.slice(0,-1).join(", ")+" and "+h.slice(-1)+" are":h.slice(-1)+" is")+" empty)":"";d?console.info("[TopMailRu]["+d+"]: "+(e||a)+" "+c+" "+f):console.warn("[TopMailRu] Error#1.15","Undefined counter ID of "+a+" "+c)}}else console.warn("[TopMailRu][]["+a+"] Error#1.13")};kb=function(a,b){var c=[],d=
[],e,f,h;if(b.params)for(e in b.params)if(b.params.hasOwnProperty(e)&&!1!==b.params[e])if(f=e in a&&a[e],!0!==b.params[e]&&(f=f||b.params[e]),f)try{h=b.fn?b.fn:null,c.push(e+': "'+(h?h(e,f):f)+'"')}catch(k){console.warn("[TopMailRu] Error#1.16",k)}else d&&d.push(e);return{values:c,missed:d}};var D={},gb=[];k.prototype.callbackOnReady=function(a){p&&ra("onReady",a,{title:"OnReady callback"});a&&"object"===typeof a&&"function"===typeof a.callback&&(a.callback.call(a.context||null),la&&gb.push(a))};
k.prototype.pageView=function(a){ta(a);a:if(a&&"object"===typeof a&&a.id){5>Fa.length&&!ia(a.id,Fa)&&(Fa.push(a.id),!1!==a.beat&&Qa.push(a.id),H.push(a),Ba&&ub(a));la&&(Na[a.id]=ja(!0,{},a),Na[a.id].bfCache=!0);"detectBlocker"in a&&!a.detectBlocker&&(ab=!0);var b="string"===typeof a.ecommerce,c=b&&-1!==a.ecommerce.search(/\S/);if(5>Pa.length&&!ia(a.id,Pa)&&(!0===a.ecommerce||b&&!c||b&&c||!1!==a.ecommerce&&!b&&(ia(a.id,Dc)||!ia(a.id,Ec)))){Pa.push(a.id);if(b&&c){if(ib&&(jb(a.ecommerce),R!==a.ecommerce)){R=
a.ecommerce;E&&(E=[0,0,R]);break a}R=a.ecommerce;E&&(E=[0,0,R])}b=[a.id];if(ib)for(var c=0,d=Oa.length;c<d;c++)vb(b,Oa[c])}a.timespent=N&&(a.timespent||ia(a.id,Ac)&&!1!==a.timespent);a.timespent?v.enable(a.id):v.disable(a.id);Wa&&5>Fa.length&&zb([a.id])}p&&ra("pageView",a,{title:"Page view",optional:{url:C.href}});X(a)&&(M(J(a,"/counter",!1,!0)),Da=z())};k.prototype.reachGoal=function(a){ta(a);p&&ra("reachGoal",a,{title:"Reach goal",value:!0,required:{goal:!0}});if(X(a)&&"goal"in a&&a.goal){var b=
"value"in a&&a.value?parseInt(a.value)||"":"";M(J(a,"/tracker",!1,!0)+(";e="+escape("RG:"+b+"/"+a.goal)))}};var cb="VALUE";k.prototype.itemView=function(a){p&&ra("itemView",a,{title:"Item view",optional:{list:!0,pagetype:!0,productid:!0,totalvalue:!0},fn:function(a,b){return(""+b).replace(/;/g," ")}});if(X(a)){var b=a.list||"",c=a.productid||"",d=a.pagetype||"",e=a.totalvalue||0,f=uc(a.id,d,e,c);f&&this.reachGoal(f);(new Image).src="https://ad.mail.ru/retarget/?counter="+(a.id||V)+"&list="+b+"&productid="+
c+"&pagetype="+d+"&totalvalue="+e+"&_="+Math.random();b="IV:"+e+"/"+(""+b).replace(/;/g," ")+";"+(""+c).replace(/;/g," ")+";"+(""+d).replace(/;/g," ");M(J(a,"/tracker",!1,!0)+(";e="+escape(b)))}};var vc="vk_ecom_";k.prototype.sendEvent=function(a){ta(a);p&&ra("sendEvent",a,{title:"Send event",value:!0,required:{category:!0,action:!0},optional:{label:!0},fn:function(a,b){return(""+b).substring(0,300).replace(/;/g," ")}});if(X(a)&&"category"in a&&a.category&&"action"in a&&a.action){var b=(""+a.category).substring(0,
300),c=(""+a.action).substring(0,300),d="label"in a&&a.label?(""+a.label).substring(0,300):"",b="CE:"+("value"in a&&a.value?parseInt(a.value)||"":"")+"/"+(""+b).replace(/;/g," ")+";"+(""+c).replace(/;/g," ")+";"+(""+d).replace(/;/g," ");M(J(a,"/tracker",!1,!0)+(";e="+escape(b)))}};k.prototype.setUserID=function(a){if(null===a||!1===a||void 0===a)this.deleteUserID();else{var b=typeof a;"number"!==b&&"string"!==b?p&&console.warn("[TopMailRu] Error#1.17","Invalid user ID in setUserID"):(Y=a,p&&console.info("[TopMailRu]: Global user ID = "+
Y))}};k.prototype.getUserID=function(){return Y||0===Y?Y:void 0};k.prototype.deleteUserID=function(){Y=null;p&&console.info("[TopMailRu]: Reset global user ID to null")};k.prototype.setUserParams=function(a){if(null===a||!1===a||void 0===a)this.deleteUserParams();else if(G(a)){try{Z=ja(!0,{},a)}catch(b){p&&console.warn("[TopMailRu] Error#1.22","Invalid user params in setUserParams");return}p&&console.info("[TopMailRu]: Global user params = "+ya(Z))}else p&&console.warn("[TopMailRu] Error#1.21","Invalid user params in setUserParams")};
k.prototype.getUserParams=function(){var a=Z?Z:void 0;return a?ja(!0,{},a):void 0};k.prototype.deleteUserParams=function(){Z=null;p&&console.info("[TopMailRu]: Reset global user params to null")};k.prototype.getClientID=function(){var a=ma;return a||0===a?a:void 0};k.prototype._MT_event=function(a,b,c){ta(a);p&&ra(b,a,{title:c});X(a)&&M(J(a,"/tracker",!1,!0)+(";e="+escape("MT:/"+b)))};k.prototype.miniAppEvent=function(a){this._MT_event(a,"miniAppEvent","VK Mini App Event")};var lb=function(a,b){if(N){var c=
v.defaultID();X(a,c)&&(!G(a)||!("activity"in a&&a.activity)?p&&console.warn("[TopMailRu] Error#1.27","Invalid startActivity command: ID of activity is required"):v.startActivity(a.id||c,""+a.activity,null===b?!!a.canUseInBackground:b))}};k.prototype.startTimespent=function(a){lb(a,null)};k.prototype.startForegroundTimespent=function(a){lb(a,!1)};k.prototype.startAnytimeTimespent=function(a){lb(a,!0)};k.prototype.updateTimespent=function(a){if(N){var b=v.defaultID();X(a,b)&&(!G(a)||!("activity"in a&&
a.activity)?v.updateActivity():"number"===typeof a.activity||"string"===typeof a.activity?v.updateActivity(a.id||b,""+a.activity):p&&console.warn("[TopMailRu] Error#1.28","Invalid updateActivity command: ID of activity should be number or string"))}};k.prototype.stopTimespent=function(a){if(N){var b=v.defaultID();X(a,b)&&(!G(a)||!("activity"in a&&a.activity)?v.stopActivity(!1):"number"===typeof a.activity||"string"===typeof a.activity?v.stopActivity(a.id||b,""+a.activity,!1):p&&console.warn("[TopMailRu] Error#1.29",
"Invalid stopActivity command: ID of activity should be number or string"))}};k.prototype.incrementEventTimespent=function(a){if(N){var b=v.defaultID();X(a,b)&&(!a||!("activity"in a&&a.activity)?p&&console.warn("[TopMailRu] Error#1.31","Invalid incrementEventTimespent command: ID of countable activity is required"):v.incCount(a.id||b,""+a.activity))}};k.prototype.processEvent=function(a,b){if(a&&"object"===typeof a)if("type"in a){if("onready"===a.type){if(b&&0>b)return;this.callbackOnReady(a)}else if(b&&
0<b)return;switch(a.type){case "pageView":this.pageView(a);break;case "reachGoal":this.reachGoal(a);break;case "itemView":this.itemView(a);break;case "sendEvent":this.sendEvent(a);break;case "setUserID":"userid"in a&&this.setUserID(a.userid);break;case "deleteUserID":this.deleteUserID();break;case "setUserParams":"params"in a&&this.setUserParams(a.params);break;case "deleteUserParams":this.deleteUserParams();break;case "miniAppEvent":this.miniAppEvent(a);break;case "startTimespent":this.startTimespent(a);
break;case "startForegroundTimespent":this.startForegroundTimespent(a);break;case "startAnytimeTimespent":this.startAnytimeTimespent(a);break;case "updateTimespent":this.updateTimespent(a);break;case "stopTimespent":this.stopTimespent(a);break;case "incrementEventTimespent":this.incrementEventTimespent(a)}}else p&&console.warn("[TopMailRu] Error#1.19","Unspecified type of push event");else p&&console.warn("[TopMailRu] Error#1.18","Invalid push event")};k.prototype.push=function(a){for(var b=0,c=arguments.length;b<
c;b++)this.processEvent(arguments[b])};var Tb=!1;k.prototype.onready=function(){Tb||(Tb=!0,!ab&&!Ba&&Cc(pc,qc),jb(R))};var fb=!1;k.prototype.onload=function(){if(!fb){fb=!0;Ca=z();if(!Ga&&0<H.length){for(var a=";e="+escape("RT/load")+";et="+Ca,b=0;b<H.length;b++)M(J(H[b],"/tracker",!0,!0)+a);Da=Ca}rc()}};k.prototype.beat=function(){var a;if(!bb&&Ma){var b=z();if(!(12E4<b-Ma)){if(12E4<b-Da){a=";e="+escape("RT/resend")+";et="+Ca;for(var c=0;c<H.length;c++)!1!==H[c].beat&&M(J(H[c],"/tracker",!1,!0)+
a)}else 0<Qa.length&&(a=";e="+escape("RT/beat")+";ids="+escape(Qa.join()),M(J({id:Qa[0]},"/tracker",!1,!0)+a));Da=b}}};var eb=!1;k.prototype.unload=function(){if(!eb){eb=!0;if(!Ga){var a;a=(a=Ab())?z()-a:void 0;a=";e="+escape("RT/unload")+";et="+z()+(a?";pvt="+escape(a):"");if(na.support){var b=na.getLog();a+=";vtauto="+b.auto}for(b=0;b<H.length;b++)M(J(H[b],"/tracker",!1,!0)+a)}la&&(D.pvt2&&(clearTimeout(D.pvt2),delete D.pvt2),D.pvt15&&(clearTimeout(D.pvt15),delete D.pvt15),D.beat&&(clearInterval(D.beat),
delete D.beat))}};k.prototype.activity=function(a){Ma=z()};var ha=_tmr;_tmr=new k;N&&v.init();for(var A=0,Ia=ha.length,sa;A<Ia;A++)(sa=ha[A])&&"object"===typeof sa&&ta(sa);A=0;for(Ia=ha.length;A<Ia;A++)sa=ha[A],_tmr.processEvent(sa,1);A=0;for(Ia=ha.length;A<Ia;A++)sa=ha[A],_tmr.processEvent(sa,-1);"complete"===f.readyState||"loading"!==f.readyState&&!f.documentElement.doScroll?(_tmr.onready(),Kb()):f.addEventListener?n(f,"DOMContentLoaded",La):f.attachEvent&&n(f,"readystatechange",La);if("complete"===
f.readyState)_tmr.onload();else la?n(e,"pageshow",db):n(e,"load",db);la?n(e,"pagehide",Ea):(n(e,"unload",Ea),n(e,"beforeunload",Ea));Jb();if(!bb)try{for(var Ub="scroll gesturechange touchmove mousedown mousemove mouseup touch".split(" "),Hc=function(a){n(f,a,function(){_tmr.activity(a)})},A=0;A<Ub.length;A++)Hc(Ub[A]);n(e,"scroll",function(){_tmr.activity("scallback")})}catch(Ic){p&&console.warn("[TopMailRu] Error#1.20",Ic)}}})();
