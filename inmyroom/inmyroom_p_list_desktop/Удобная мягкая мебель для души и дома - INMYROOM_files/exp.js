"use strict";var __assign=this&&this.__assign||function(){return __assign=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},__assign.apply(this,arguments)};!function(e,t){var n,r,i;!function(e){e.CssInsert="css-insert",e.TextInsert="text-insert",e.Href="href-insert",e.ImageSrc="image-insert",e.Html="html-replace",e.JS="js-insert"}(r||(r={})),function(e){e.Init="init",e.Param="getParam",e.Flags="getFlags",e.Experiments="getExperiments",e.SetConfig="setConfig",e.GetConfig="getConfig"}(i||(i={}));var a={},c={},o={},s={enableRedir:!0,enableVisual:!0,enableHTML:!0,enableJS:!1,enableWatch:!1},u={},l="https://uaas.yandex.ru/v1/exps/";var f,v="_ymab_param",h=new RegExp("(?:^|; )".concat(v,"=([^;]*)")),m=/\/$/;function p(e,t){var n=e.indexOf(t);return-1===n?[]:[e.slice(0,n).trim(),e.slice(n+1)]}function d(e,t){return e.reduce((function(e,n){var i=n.t,a=n.n,c=n.v;function o(){var t=e.flags[a];t||(e.flags[a]=t=[]),t.push(c)}if("visual"===i&&t.enableVisual){var s=p(c,"|"),u=s[0],l=s[1];if(!u||void 0===l)return e;switch(a){case r.CssInsert:e.cssInsert.push({selector:u,value:l});break;case r.TextInsert:e.textInsert.push({selector:u,value:l});break;case r.Href:e.hrefInsert.push({selector:u,value:l});break;case r.ImageSrc:e.imageSrcInsert.push({selector:u,value:l});break;case r.Html:t.enableHTML?e.htmlReplace.push({selector:u,value:l}):o();break;case r.JS:t.enableJS?e.jsInsert.push({selector:u,value:l}):o()}return e}return"redir"===i&&t.enableRedir?(e.redirect.push(c),e):(o(),e)}),{cssInsert:[],textInsert:[],redirect:[],hrefInsert:[],imageSrcInsert:[],htmlReplace:[],jsInsert:[],flags:{}})}function g(e,n,r,i){try{var a=t.createElement("script");a.nonce=e,a.setAttribute("type","text/javascript"),a.innerHTML="\n            (function(element) {\n                ".concat(r,"\n            })(document.querySelector('").concat(i,"'));"),t.body.appendChild(a)}catch(n){}}var b=new Set([r.JS,r.CssInsert]),y={cache:{},getItem:function(e,t){var n=this.cache[e];n||(n=this.cache[e]={});var r=n[t.selector];r||(r=n[t.selector]={});var i=r[t.value];return i||(i=r[t.value]=new Set),i},has:function(e,t,n){return b.has(e)&&this.getItem(e,t).has(n)},add:function(e,t,n){return this.getItem(e,t).add(n)}};function I(e,n,r,i){var a=r.selector,c=r.value;if(a&&void 0!==c){var o=function(e){return e?t.querySelector(e):void 0}(a);o?y.has(e,r,o)||(n(o,c,a),y.add(e,r,o)):i>0&&setTimeout((function(){return I(e,n,r,i-1)}),100)}}function x(e,t,n,r){n.length&&n.forEach((function(n){return I(e,t,n,r?100:0)}))}var S,T={},w=0;var _=x.bind(null,r.TextInsert,(function(e,t){return e.textContent===t||(e.textContent=t)})),j=x.bind(null,r.Href,(function(e,t){return e.getAttribute("href")===t.trim()||e.setAttribute("href",t.trim())})),E=x.bind(null,r.ImageSrc,(function(e,t){return e.getAttribute("src")===t.trim()||e.setAttribute("src",t.trim())})),C=x.bind(null,r.Html,(function(e,t){return e.innerHTML===t||(e.innerHTML=t)})),k=x.bind(null,r.CssInsert,(function(e,t){try{for(var n=t.trim().split(";"),r=0,i=n;r<i.length;r++){var a=i[r];if(a){var c=p(a,":"),o=c[0],s=c[1];o&&void 0!==s&&(e.style[o]=s)}}}catch(e){}})),L=function(e,t,n){x(r.JS,g.bind(null,t),e,n)};var R=!1;function H(t,n){var r=p(t,"."),i=(r[0],r[1]);!function r(){if(i){var a=function(t){var n,r,i="yaCounter".concat(t),a=e[i];if(!a)try{var c=(null===(r=null===(n=e.Ya)||void 0===n?void 0:n._metrika)||void 0===r?void 0:r.counters)||{};return c[Object.keys(c).find((function(e){return 0===e.indexOf("".concat(t,":"))}))||""]}catch(e){}return a}(i);if(a){try{a.experiments(n)}catch(e){}R=!0}else setTimeout(r,10)}else console.error("Bad clientId = ".concat(t))}()}function O(t,n){if(void 0===n&&(n=e.location.href),0!==t.length){var r=new URL(n),i=r.pathname;r.pathname="";var a=new URL(t,r.toString());a.protocol=r.protocol,a.hostname=r.hostname;var c=0,o=!0;return r.searchParams.forEach((function(e,t){"ab__exp_flags"!==t&&(c++,a.searchParams.has(t)?o&&a.searchParams.get(t)!==e&&(o=!1):a.searchParams.set(t,e))})),o&&(o=c===Array.from(a.searchParams.keys()).length),o&&i.replace(m,"")===a.pathname.replace(m,"")?void 0:a.toString()}}function A(e,t,n){var r=6,i=0;!function e(){var a;try{for(;i<n.length;i++)null===(a=n[i])||void 0===a||a.call(null,t)}catch(t){r-- >0?setTimeout(e,50):console.error(t)}}(),function(e){if(f&&"object"==typeof f){!0===f[e]&&(f[e]=!1);var t=f.callback;if(t){for(var n=0,r=Object.entries(f);n<r.length;n++){var i=r[n],a=i[0],c=i[1],o=p(a,"."),s=o[0],u=o[1];if(s&&u&&!0===c&&s.length>0&&!isNaN(Number(u)))return}setTimeout(t,0)}}}(e)}function P(n,r,i,f){if("string"!=typeof n)throw new Error("clientId: should be string");o[n]=!0;var m,p=10,g=new URL(l),b=g.searchParams;b.set("client_id",String(n)),b.set("url",e.location.href),b.set("i",r||((m=t.cookie.match(h))&&m[1]||void 0)||""),i&&b.set("client_features",JSON.stringify(i));var y=g.toString(),I=c[y];if(I)return f(I);var x=a[y];if(x)x.push(f);else{x=[f],a[y]=x;var P=setTimeout(F,5e3);J(y,M,(function e(){if(--p>0)return J(y,M,e);clearTimeout(P),F()}))}function F(){if(!c[y]){var e={flags:{},i:r,experiments:void 0};c[y]=e,H(n,"wSIKtymTfos,"),x&&A(n,e,x)}}function M(i){var a,o,l=u[n]||s,f=d(i.flags,l),h=f.flags,m=f.cssInsert,p=f.textInsert,g=f.hrefInsert,b=f.jsInsert,I=f.imageSrcInsert,J=f.redirect,F=f.htmlReplace,M={i:i.i,experiments:i.experiments,flags:h};function N(e){void 0===e&&(e=!1),C(F,e),j(g,e),E(I,e),_(p,e),k(m,e),L(b,l.nonce,e)}i.i&&(r=i.i),H(n,i.experiments),clearTimeout(P),c[y]=M,M.i&&(a=M.i,o=new Date(Date.now()+31536e6).toUTCString(),t.cookie="".concat(v,"=").concat(a,"; path=/; expires=").concat(o,";")),function(t){if(!t||!t.length)return!1;for(var n,r=0,i=t;r<i.length&&!(n=O(i[r]));r++);if(!n)return!1;var a,c,o=n;function s(){clearTimeout(c),clearTimeout(a),e.location.replace(o)}return c=setTimeout(s,50),function e(){R?s():a=setTimeout(e,10)}(),!0}(J)||(!function(e,n){if(e.length){for(var r=[],i=0,a=e;i<a.length;i++){var c=a[i],o=c.selector,s=c.value.trim();r.push("".concat(o," {").concat(s,"}"))}try{var u=t.createElement("style");u.nonce=n,u.setAttribute("type","text/css"),u.textContent=r.join("\n").replace(/;/g," !important;"),t.body.appendChild(u)}catch(e){}}}(m,l.nonce),l.enableWatch&&function(e,n){var r;null===(r=T[e])||void 0===r||r.disconnect();var i=new MutationObserver((function(){w++>=5||(n(),clearTimeout(S),S=setTimeout((function(){w=0}),0))}));T[e]=i,i.observe(t.body,{subtree:!0,childList:!0,characterData:!0,attributes:!0,attributeFilter:["class"]})}(n,(function(){return N()})),N(!l.enableWatch)),x&&A(n,M,x)}}function J(e,t,n){var r=new XMLHttpRequest;return r.open("GET",e),r.addEventListener("load",(function(){if(200!==r.status)n(r.statusText);else try{var e=JSON.parse(r.responseText);t(e)}catch(e){e instanceof Error&&n(e.message)}})),r.addEventListener("error",(function(){return n(r.statusText)})),r.send()}var F=((n={})[i.Init]=function(e,t,n,r){P(e,t,n,(function(e){return r&&r(e)}))},n[i.Flags]=function(e,t,n,r){P(e,t,n,(function(e){return r&&r(e.flags)}))},n[i.Experiments]=function(e,t,n,r){P(e,t,n,(function(e){return r&&r(e.experiments)}))},n[i.Param]=function(e,t,n,r){P(e,t,n,(function(e){return r&&r(e.i)}))},n[i.SetConfig]=function(e,t,n,r){M(e,n),r&&r()},n[i.GetConfig]=function(e,t,n,r){var i=u[e]||s,a=__assign({},i);delete a.nonce,r&&r(a)},n);function M(e,t){"object"==typeof t&&(u[e]=__assign(__assign({},s),t))}function N(e,t,n,r,i){if("object"==typeof e)return function(e){var t=e.clientId,n=e.config;if(!t)throw new Error("clientId is required");M(t,n),F.init(t,e.i,e.clientFeatures,e.callback)}(e);if(!t)throw new Error("method not specified");if(!(t in F))throw new Error("unknown method");"function"==typeof r&&(i=r,r={}),"function"==typeof n&&(i=n,n=void 0),"object"==typeof n&&(r=n,n=void 0),r||(r={}),F[t](e,n,r,i)}"ymab"in e&&"object"==typeof e.ymab&&e.ymab.inited||(e.ymab&&(Array.isArray(e.ymab.a)&&e.ymab.a.forEach((function(e){return N.apply(null,e)})),"object"==typeof e.ymab.antiFlicker&&(f=e.ymab.antiFlicker)),N.inited=!0,e.ymab=N,function(e,t){var n;!function(e){e.AppendRemote="appendremote"}(n||(n={}));var r=["ru","ua","by","kz","com","com.tr"];var i={};function a(e){var t=new URL(e),n=t.hostname,i=t.protocol,a=(null==n?void 0:n.split("."))||[];"test"===a[1]&&a.splice(1,1);var c=a[0],o=a[1],s=a.slice(2).join(".");return"https:"===i&&"ab"===c&&"yandex"===o&&-1!==r.indexOf(s)}e.addEventListener("message",(function(e){var r=e.origin;if(r&&a(r)){var c=function(e){if(!e)return null;if("string"!=typeof e)return e;try{return JSON.parse(e)}catch(e){return null}}(e.data);if(c&&o[c.clientId]&&c.type===n.AppendRemote)!function(e){if(e&&function(e){return e&&/^https:\/\/abt\.s3\.yandex\.net\/(\w|-|\/|(\.)(?!\.))+\.js$/.test(e)}(e)&&!i[e]){var n=t.createElement("script");n.async=!0,n.type="text/javascript",n.src=e;var r=t.head;r.insertBefore(n,r.firstChild),i[e]=!0}}(c.url)}}))}(e,t))}(window,document);