(window.webpackJsonp=window.webpackJsonp||[]).push([[106],{601:function(e,t,n){"use strict";n.r(t),n.d(t,"PaginationPointService",(function(){return y}));var r=n(2),i=n.n(r),a=n(6),o=n(67),c=n(644),u=n(274),l=n(10),s=n(277);function d(e){var t=e.title,n=e.url;document.title=t,history.pushState({_type:"PostableLoad",id:n},"",n),Object(l.c)(s.a)}var f=n(658),h=n(682);function p(e){var t,n,r;(r=(null===(t=e.nextElementSibling)||void 0===t?void 0:t.classList.contains("b-Article"))?e.nextElementSibling:null===(n=e.nextElementSibling)||void 0===n?void 0:n.querySelector(".b-Article"))&&Object(f.a)({selector:r,points:h.POINTS,cond:function(){return!0},mapper:h.mapper})}var v=["adfox","IMR","div-gpt-ad"].map((function(e){return'.b-Article [id^="'.concat(e,'_"]:not([id$="').concat("_loaded",'"])')})).join(", ");var b=n(1),m=n(273);function w(e,t,n,r,i,a,o){try{var c=e[a](o),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,i)}function x(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){w(a,r,i,o,c,"next",e)}function c(e){w(a,r,i,o,c,"throw",e)}o(void 0)}))}}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var y=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.watcherIds=null,this.nextActive=!1,this.loadPromise=null,this.nextMeta=null,this.handleChangePrev=function(){r.nextActive&&(r.nextActive=!1,d(r.props.meta))},this.handlePreloadNext=x(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(c.a)(r.el),r.loadPromise=a.b.get(r.props.loadUrl),e.next=4,r.loadPromise;case 4:t=e.sent,n=t.data.content,r.el.insertAdjacentHTML("afterend",n);case 7:case"end":return e.stop()}}),e)}))),this.enableScroll=function(){Object(c.b)(r.el),u.a.disable()},this.handleNextArticleReady=function(){document.removeEventListener(m.a,r.handleNextArticleReady),r.enableScroll()},this.handleChangeNext=x(i.a.mark((function e(){var t,n,a,o,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.nextActive){e.next=2;break}return e.abrupt("return");case 2:if(r.nextActive=!0,!r.nextMeta){e.next=5;break}return e.abrupt("return",d(r.nextMeta));case 5:return r.loadPromise||r.handlePreloadNext(),u.a.enable(),e.prev=7,e.next=10,r.loadPromise;case 10:n=e.sent,a=n.data,o=a.meta,c=a.dataLayer,r.nextMeta=o,r.loadPromise=null,d(r.nextMeta),document.querySelectorAll(v).forEach((function(e){return e.id=e.id+"_loaded"})),document.addEventListener(m.a,r.handleNextArticleReady),Object(b.c)(r.el.parentElement),window.dataLayer=(null!==(t=window.dataLayer)&&void 0!==t?t:[]).concat(c),setTimeout((function(){return p(r.el)}),100),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(7),r.enableScroll();case 27:case"end":return e.stop()}}),e,null,[[7,24]])}))),this.props=t,this.el=n,this.watcherIds=o.b.watch([this.preloadWatcher,this.changeWatcher])}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.watcherIds&&o.b.unwatch(this.watcherIds)}},{key:"elPageYOffset",get:function(){return this.el.offsetTop+this.el.getBoundingClientRect().top-window.innerHeight}},{key:"preloadWatcher",get:function(){var e=this;return{getPoint:function(){return e.elPageYOffset-2e3},onDown:this.handlePreloadNext,onUp:function(){},once:!0}}},{key:"changeWatcher",get:function(){var e=this;return{getPoint:function(){return e.elPageYOffset},onDown:this.handleChangeNext,onUp:this.handleChangePrev}}}])&&g(t.prototype,n),r&&g(t,r),e}()},644:function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;(null==e?void 0:e.parentNode)&&requestAnimationFrame((function(){var n=document.createElement("div");n.classList.add("b-AjaxLoader"),n.style.display="block",n.innerHTML=new Array(t).fill("<div></div>").join("\n"),e.parentNode.insertBefore(n,e.nextSibling)}))}function i(e){requestAnimationFrame((function(){var t,n;null===(n=null===(t=null==e?void 0:e.parentNode)||void 0===t?void 0:t.querySelector(".b-AjaxLoader"))||void 0===n||n.remove()}))}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}))},658:function(e,t,n){"use strict";var r=n(190),i=n(53);t.a=function(e){var t=e.selector,n=e.cond,a=e.points,o=e.mapper;if(n()){var c=[],u=[],l=Object(i.a)((function(){var e=window.pageYOffset,n=function(){if(u.length)return u;var e=$(t),n=((e.offset()?e.offset().top:0)+e.height())/100,r=window.innerHeight/2;return u=a.map((function(e){return{percent:e,position:n*e-r}}))}().filter((function(e){return!function(e){return c.indexOf(e)>-1}(e)})).filter((function(t){return e>t.position}));n.forEach((function(e){return function(e){c.push(e)}(e)})),n.length&&Object(r.c)(o(n))}),300);window.addEventListener("scroll",l,{passive:!0})}}},682:function(e,t,n){"use strict";n.r(t),n.d(t,"POINTS",(function(){return i})),n.d(t,"mapper",(function(){return a}));var r=n(658),i=[10,30,70,100],a=function(e){return e.map((function(e){return{event:"postScroll",post:{scrollPercent:e.percent}}}))};Object(r.a)({selector:".b-Article",points:i,cond:function(){return/^\/(posts|products\/offers)\/\d+/.test(document.location.pathname)},mapper:a})}}]);
//# sourceMappingURL=sourcemap.site_s-PaginationPointService.a6c60ef7.map