(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{552:function(t,e,n){"use strict";n(534),n(44),n(496),n(140),n(141),n(142),n(57),n(92),n(52);var r=n(499);function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)};function i(){return null!==s&&s.apply(this,arguments)||this}var s=r.d,c=i,u=s;if("function"!=typeof u&&null!==u)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");function a(){this.constructor=c}o(c,u),c.prototype=null===u?Object.create(u):(a.prototype=u.prototype,new a),u=function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(s=(i<3?o(s):3<i?o(e,n,s):o(e,n))||s);return 3<i&&s&&Object.defineProperty(e,n,s),s}([r.a],i),r=n(504),n=Object(r.a)(u,function(){var t=this,e=t._self._c;return t._self._setupProxy,e("span",{staticStyle:{display:"none"}},[t._v("Loading")])},[],!1,null,null,null),e.a=n.exports},553:function(t,e,n){"use strict";n(534),n(44),n(496),n(140),n(141),n(142),n(57),n(92),n(52);var r=n(499);function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)};function i(){return null!==s&&s.apply(this,arguments)||this}var s=r.d,c=i,u=s;if("function"!=typeof u&&null!==u)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");function a(){this.constructor=c}o(c,u),c.prototype=null===u?Object.create(u):(a.prototype=u.prototype,new a),u=function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(s=(i<3?o(s):3<i?o(e,n,s):o(e,n))||s);return 3<i&&s&&Object.defineProperty(e,n,s),s}([r.a],i),r=n(504),n=Object(r.a)(u,function(){var t=this._self._c;return this._self._setupProxy,t("span",{staticStyle:{display:"none"}},[this._v("Error")])},[],!1,null,null,null),e.a=n.exports},767:function(t,e,n){"use strict";function r(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(s=(i<3?o(s):3<i?o(e,n,s):o(e,n))||s);return 3<i&&s&&Object.defineProperty(e,n,s),s}function o(t,s,c,l){return new(c=c||Promise)(function(n,e){function r(t){try{i(l.next(t))}catch(t){e(t)}}function o(t){try{i(l.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof c?e:new c(function(t){t(e)})).then(r,o)}i((l=l.apply(t,s||[])).next())})}function l(r,o){var i,s,c,l={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]},u={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function t(n){return function(t){var e=[n,t];if(i)throw new TypeError("Generator is already executing.");for(;l=u&&e[u=0]?0:l;)try{if(i=1,s&&(c=2&e[0]?s.return:e[0]?s.throw||((c=s.return)&&c.call(s),0):s.next)&&!(c=c.call(s,e[1])).done)return c;switch(s=0,(e=c?[2&e[0],c.value]:e)[0]){case 0:case 1:c=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,s=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(c=0<(c=l.trys).length&&c[c.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!c||e[1]>c[0]&&e[1]<c[3]))l.label=e[1];else if(6===e[0]&&l.label<c[1])l.label=c[1],c=e;else{if(!(c&&l.label<c[2])){c[2]&&l.ops.pop(),l.trys.pop();continue}l.label=c[2],l.ops.push(e)}}e=o.call(r,l)}catch(t){e=[6,t],s=0}finally{i=c=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}}function i(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||((r=r||Array.prototype.slice.call(e,0,o))[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))}n.r(e),n(534),n(44),n(496),n(140),n(141),n(142),n(57),n(92),n(52);var s,c=n(499),u=n(554),a=n(282),p=n(552),f=n(553),y=(s=function(t,e){return(s=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},n(216)),h=y.apiUrl,d=y.apiUrlPersonal,b=y.apiUrlBusiness;function v(){var t=null!==w&&w.apply(this,arguments)||this;return t.tabVisible=!0,t.visibleTabArticlesCount=-1,t}var w=c.d,g=v;if("function"!=typeof(m=w)&&null!==m)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");function _(){this.constructor=g}function O(t){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}s(g,m),g.prototype=null===m?Object.create(m):(_.prototype=m.prototype,new _),v.prototype.wait=function(e){return void 0===e&&(e=5e3),o(this,void 0,void 0,function(){return l(this,function(t){switch(t.label){case 0:return[4,new Promise(function(t){return setTimeout(t,e)})];case 1:return t.sent(),[2]}})})},v.prototype.switchLentaHandler=function(){this.setIncreaseNewArticlesCounter(0)},v.prototype.subscribePolling=function(c){return o(this,void 0,void 0,function(){var e,n,r,o,i,s;return l(this,function(t){switch(t.label){case 0:return e=this.getIsPersonalOnly,n=this.getIsBusinessOnly,r=e?d:n?b:h,this.tabVisible&&!this.checkVisibleTab()&&(this.visibleTabArticlesCount=this.getNewArticlesCounter),this.tabVisible=this.checkVisibleTab(),this.tabVisible?[3,4]:this.getNewArticlesCounter>this.visibleTabArticlesCount?(document.dispatchEvent(new Event("kommersant:update")),[4,this.wait()]):[3,3];case 1:return t.sent(),[4,this.subscribePolling(c)];case 2:return t.sent(),[2];case 3:return[3,5];case 4:this.visibleTabArticlesCount=-1,t.label=5;case 5:return t.trys.push([5,17,,20]),[4,fetch("".concat(r),{method:"GET",credentials:"include"})];case 6:return 502!=(o=t.sent()).status?[3,9]:[4,this.wait()];case 7:return t.sent(),[4,this.subscribePolling(c)];case 8:return t.sent(),[3,16];case 9:return 200==o.status?[3,12]:[4,this.wait()];case 10:return t.sent(),[4,this.subscribePolling(c)];case 11:return t.sent(),[3,16];case 12:return[4,o.json()];case 13:return s=t.sent(),i=this.getArticlesData.docs||[],s=s.docs||[],(s=this.checkNew(this.extractIds(s),this.extractIds(i)))&&e===this.getIsPersonalOnly&&n===this.getIsBusinessOnly&&this.setIncreaseNewArticlesCounter(s),[4,this.wait(c)];case 14:return t.sent(),[4,this.subscribePolling(c)];case 15:t.sent(),t.label=16;case 16:return[3,20];case 17:return t.sent(),[4,this.wait()];case 18:return t.sent(),[4,this.subscribePolling(c)];case 19:return t.sent(),[3,20];case 20:return[2]}})})},v.prototype.sendNewNewsEvent=function(t,e){if(t&&!e)try{window.kommersant.sendEvent("new_news","show")}catch(t){}},v.prototype.checkVisibleTab=function(){for(var t,e=!1,n=0,r=["hidden","webkitHidden","mozHidden","msHidden"];n<r.length;n++){var o=r[n];document[o]&&(t=o,e=!0)}return!(e&&document[t])},v.prototype.checkNew=function(t,e){return new Set(i(i([],t,!0),e,!0)).size-new Set(e).size},v.prototype.extractIds=function(t){return t.map(function(t){return t.DocId}).filter(function(t){return!!t})},v.prototype.authorizedHandler=function(){var t=this.getAuthorized;this.setAuthorized(!0),t||this.fetchArticlesData()},v.prototype.unauthorizedHandler=function(){var t=this.getAuthorized;this.setAuthorized(!1),this.setIsPersonalOnly(!1),t&&this.fetchArticlesData()},v.prototype.created=function(){window.addEventListener(y.authorizedEvent,this.authorizedHandler),window.addEventListener(y.unauthorizedEvent,this.unauthorizedHandler),Object(a.a)(y.authorizedCookie)?this.setAuthorized(!0):(this.setAuthorized(!1),this.setIsPersonalOnly(!1)),window.addEventListener("resize",this.onResizeHandler),this.setLentaIsVertical()},v.prototype.beforeDestroy=function(){window.removeEventListener(y.authorizedEvent,this.authorizedHandler),window.removeEventListener(y.unauthorizedEvent,this.unauthorizedHandler),window.removeEventListener("resize",this.onResizeHandler)},v.prototype.onResizeHandler=function(){clearTimeout(this.throttlingTimeout),this.throttlingTimeout=setTimeout(this.setLentaIsVertical,500)},v.prototype.mounted=function(){var t=this;setTimeout(function(){t.subscribePolling(1e3*y.pollingPeriod)},1e3*y.pollingPeriod)},r([u.b],v.prototype,"getArticlesData",void 0),r([u.c],v.prototype,"setAuthorized",void 0),r([u.c],v.prototype,"setIsPersonalOnly",void 0),r([u.b],v.prototype,"getIsBusinessOnly",void 0),r([u.b],v.prototype,"getIsPersonalOnly",void 0),r([u.c],v.prototype,"setIncreaseNewArticlesCounter",void 0),r([u.c],v.prototype,"setClearNewArticlesCounter",void 0),r([Object(u.a)("fetchArticlesData")],v.prototype,"fetchArticlesData",void 0),r([u.b],v.prototype,"getLentaIsVertical",void 0),r([u.c],v.prototype,"setLentaIsVertical",void 0),r([u.b],v.prototype,"getNewArticlesCounter",void 0),r([u.b],v.prototype,"getAuthorized",void 0),r([Object(c.e)("getIsBusinessOnly"),Object(c.e)("getIsPersonalOnly")],v.prototype,"switchLentaHandler",null),r([Object(c.e)("getNewArticlesCounter")],v.prototype,"sendNewNewsEvent",null);var m=r([Object(c.a)({components:{LentaHorizontal:function(){return{component:n.e(37).then(n.bind(null,770)),loading:p.a,error:f.a}},LentaVertical:function(){return{component:n.e(38).then(n.bind(null,768)),loading:p.a,error:f.a}}}})],v),u=n(504),m=Object(u.a)(m,function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",[e("aside",{staticClass:"grid-col-lenta aside_column"},[e("section",{staticClass:"aside_news"},[t.getLentaIsVertical?e("LentaVertical"):t._e()],1)]),t._v(" "),t.getLentaIsVertical?t._e():e("LentaHorizontal")],1)},[],!1,null,null,null).exports,P=function(t,e){return(P=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)};function j(){return null!==A&&A.apply(this,arguments)||this}var A=c.d,z=j,S=A;if("function"!=typeof S&&null!==S)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");function I(){this.constructor=z}P(z,S),z.prototype=null===S?Object.create(S):(I.prototype=S.prototype,new I),S=function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":O(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(s=(i<3?o(s):3<i?o(e,n,s):o(e,n))||s);return 3<i&&s&&Object.defineProperty(e,n,s),s}([Object(c.a)({components:{Lenta:m}})],j),c=Object(u.a)(S,function(){var t=this._self._c;return this._self._setupProxy,t("Lenta")},[],!1,null,null,null),e.default=c.exports}}]);