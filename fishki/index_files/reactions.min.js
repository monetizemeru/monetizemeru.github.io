!function(t){function e(e){for(var s,a,r=e[0],l=e[1],c=e[2],d=0,p=[];d<r.length;d++)a=r[d],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&p.push(o[a][0]),o[a]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);for(u&&u(e);p.length;)p.shift()();return n.push.apply(n,c||[]),i()}function i(){for(var t,e=0;e<n.length;e++){for(var i=n[e],s=!0,r=1;r<i.length;r++){var l=i[r];0!==o[l]&&(s=!1)}s&&(n.splice(e--,1),t=a(a.s=i[0]))}return t}var s={},o={2:0},n=[];function a(e){if(s[e])return s[e].exports;var i=s[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=t,a.c=s,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)a.d(i,s,function(e){return t[e]}.bind(null,s));return i},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/dist/";var r=window.webpackJsonp=window.webpackJsonp||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=l;n.push([56,0]),i()}({0:function(t,e,i){"use strict";(function(t){var s,o,n,a,r,l,c=i(4),u=i.n(c),d=i(23),p=i.n(d),h=i(24),f=i.n(h),v=i(29),m=[],g={lightbox:"/public/assets/js/lightbox.min.js",jgrowl:"/public/assets/js/jquery.jgrowl.min.js"},_=new p.a(f.a),k=t.env.VUE_APP_PROFILE||"",w={favicon:"",imgloader:"/assets/images/loading.gif"};if(t.env.VUE_APP_DEV_HOST){var y="http://";t.env.VUE_APP_DEV_SSL&&parseInt(t.env.VUE_APP_DEV_SSL)&&(y="https://"),s=y+t.env.VUE_APP_DEV_HOST,o=y+t.env.VUE_APP_DEV_HOST,n=y+t.env.VUE_APP_DEV_HOST,a=y+t.env.VUE_APP_DEV_TN_HOST,w.imgloader="/images/loader-h.svg"}else switch(w.imgloader="/images/loader-h.svg",location.hostname){case"m.fishki.net":k="fishki",s="https://m.fishki.net",o="https://sos.fishki.net",n="https://sos.fishki.net",a="https://tn.fishki.net";break;case"old.fishki.net":k="fishki",s="https://old.fishki.net",o="https://sos.fishki.net",n="https://sos.fishki.net",a="https://tn.fishki.net";break;case"realfishki.net":s="https://realfishki.net",o="https://s.realfishki.net",n="https://s.realfishki.net",a="https://tn.realfishki.net";break;default:k="fishki",s="https://fishki.net",o="https://sos.fishki.net",n="https://sos.fishki.net",a="https://tn.fishki.net"}"undefined"!=typeof window&&window&&window.fishki&&window.fishki.app&&window.fishki.app.hostUrl&&(k=window.fishki.app.envProfile,s=window.fishki.app.hostUrl,a=window.fishki.app.tnHostUrl,o=window.fishki.app.staticHostUrl,n=window.fishki.app.sourceStaticHostUrl,g=window.fishki.app.scripts);for(var b=[s,o,n,a],C=0;C<4;C++){var S=b[C].replace(/^http[s\u017F]?:\/\//i,"//");m.indexOf(S)<0&&(m.push(S),m.push("http:"+S),m.push("https:"+S))}function x(){return a}function E(t){return o}function L(t){var e=t.trim();return e.length&&(e.indexOf(a)>-1&&(e=e.replace(l,"")),0===e.indexOf("/tn")&&(e=e.replace(/tn\/\d+/,"")),e=e.replace(r,"")),e}r=new RegExp("("+m.join("|")+")"),l=new RegExp("^"+a+"/d+"),"anews"===k?w.favicon="//cdn.anews.com/favicon.ico ":"fishki"===k&&(w.favicon="//cdn.fishki.net/favicon_fishki.ico"),console.log("Config env",{NODE_ENV:"production",host:s,site:w}),e.a={isDev:!1,isM:s.indexOf("m.fishki")>-1,hostUrl:s,domain:function(){return this.hostUrl.replace("http://","").replace("https://","")},tnUrl:a,staticUrl:o,getImageLink:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=L(t),s=0===t.indexOf("//");if(e.tn_size&&(i!=t||s)&&(t=i),0===t.indexOf("/")){var o=parseInt(e.sync?e.sync:1,10);t=e.tn_size?x(o)+"/"+e.tn_size+t:E()+t}return t},getStaticTnHost:x,site:w,endpoint:{editorApi:"editor/api",api:"api-req",file:"api-req/upload.imagecomment"},urlEndpoint:function(t){return this.hostUrl+"/"+this.endpoint[t]},url:function(t){return this.hostUrl+t},file:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";"random"===e.toLowerCase()&&(e=Math.random(1e7));var s=e?(t.indexOf("?")>=0?"&":"?")+e:"";return 0===t.indexOf("//")&&(t="https:"+t),0!==t.indexOf("http")&&(t=o+t),i&&(t+=i),t+s},mime:function(t){return v.lookup(t)},user:{cookies:{sid:"PHPSESSID",autologin:"iam"}},ssrContext:null,setContext:function(t){this.ssrContext=t},isSSR:function(){return!!ssrContext},categories:u.a.categories||[],enable:{lazyLoad:!0},getUAData:function(){return{platform:navigator.platform||"",ua:navigator.userAgent||navigator.appVersion||"",ua_width:window.innerWidth||window.width||0,ua_height:window.innerHeight||window.height||0,screen_width:screen.width||0,screen_height:screen.height||0,host:window.location.host}},tn:u.a.tn||[],votes:u.a.votes||[],recaptchav3:u.a.recaptchav3||"",version:{facebook:"v12.0"},hypher_ru:_,myTrim:function(t,e,i){if(e=e||0,i=i||!1,(t=t||"").length>e){if(!i)return t.substr(0,e-3)+"...";var s=(t=t.replace("\r","")).replace("\n"," ").substr(0,e-3).split(" "),o=(s=count(s)>1?s.slice(0,count(s)-1):s).join(" ").length;t=t.substr(0,o)+"..."}return t},upload:{image:{size:u.a.upload_limit.upload_image.size_limit,autoCompress:u.a.upload_limit.upload_image.size_limit/2,accept:"image/png,image/gif,image/jpeg,image/webp",extensions:"gif,jpg,jpeg,png,webp"},video:{size:u.a.upload_limit.upload_video.size_limit,accept:"video/wmv,video/mp4,video/webm",extensions:"wmv,mp4,webm"},mp3:{size:u.a.upload_limit.upload_mp3.size_limit,accept:"audio/mpeg",extensions:"mp3"},gif:{size:u.a.upload_limit.upload_animated_gif.size_limit,accept:"image/gif",extensions:"gif"},compress:{convertSize:1/0,maxWidth:1024,maxHeight:1024}},scripts:g,imagespath:"/public/assets/images/"}}).call(this,i(28))},1:function(t,e){t.exports=videojs},15:function(t,e,i){"use strict";var s=i(1),o=i.n(s);i(31),i(33),i(34),i(35);e.a={loadVideo:function(t,e,i,s,n,a,r,l){if(n){n.vast_preroll||(n.vast_preroll="https://fishki.net/files/fishki.net/vmap.php?flv="+encodeURIComponent(window.location.href)+"&r="+Math.random());var c=document.getElementById("gallery_"+l);(c=c&&c.id?c:window)&&c.clientWidth<n.width&&(n.height=Math.round(c.clientWidth/n.width*n.height),n.width=c.clientWidth);var u=o()(t,n);if(!r){"function"==typeof u.ima&&u.ima({id:t,adTagUrl:n.vast_preroll,adLabel:"Реклама",vastLoadTimeout:1e4});var d="click";(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/Android/i))&&(d="touchend"),u.one(d,(function(){u.ima.initializeAdDisplayContainer()})),u.on("adstart",(function(t){u.ima.getAdsManager().setVolume(.3)}))}var p=document.getElementById(t+"_html5_api");(navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/Android/i))&&p&&p.hasAttribute("controls")&&p.removeAttribute("controls")}}}},20:function(t,e,i){"use strict";var s=i(0),o=i(15);e.a={bind:function(t,e,i){function n(t,e,i){for(var s=0;s<t.length;s++){var o=t[s];if(o.children&&o.children.length)return n(Array.from(o.children),e,i);if("class"==i&&o.classList.contains(e)||o.nodeName===e)return o}}function a(){switch(t.dataset.type){case"facebook":n(Array.from(t.children),"fb-post","class")&&window.FB&&window.FB.init({xfbml:!0,version:s.a.version.facebook}),t.classList.remove("content__figure__wrap__lazy");break;case"instagram":n(Array.from(t.children),"instagram-media","class")&&window.instgrm&&window.instgrm.Embeds.process(),t.classList.remove("content__figure__wrap__lazy");break;case"twitter":n(Array.from(t.children),"twitter-tweet","class")&&window.twttr&&window.twttr.widgets.load(),t.classList.remove("content__figure__wrap__lazy");break;case"vk":var e=n(Array.from(t.children),"vk-post","class");e&&window.VK&&VK.Widgets.Post(e.attributes.id.value,e.dataset.ownerId,e.dataset.postId,e.dataset.hash),t.classList.remove("content__figure__wrap__lazy");break;case"tiktok":n(Array.from(t.children),"tiktok-embed","class");t.classList.remove("content__figure__wrap__lazy");break;case"tme":if(t.dataset.telegramPost){var i=document.createElement("script");i.async="async",i.defer="defer",i.src=t.dataset.src,i.dataset.telegramPost=t.dataset.telegramPost,i.type="text/javascript",i.onreadystatechange=i.onload=i.onerror=function(){t.classList.remove("content__figure__wrap__lazy")},t.appendChild(i)}break;case"iframe":var a=n(Array.from(t.children),"IFRAME","name");a&&(a.src=a.dataset.src),t.classList.remove("content__figure__wrap__lazy");break;case"video":var r=t.getElementsByTagName("source");if(r)for(var l=0;l<r.length;l++)r[l].src=r[l].dataset.src;var c=t.getElementsByTagName("video");if(c)for(l=0;l<c.length;l++)if(c[l].attributes.id){var u={autoplay:!1,controls:!0,preload:"auto"};c[l].attributes.width&&c[l].attributes.width.value&&(u.width=c[l].attributes.width.value),c[l].attributes.height&&c[l].attributes.height.value&&(u.height=c[l].attributes.height.value),c[l].attributes.poster&&c[l].attributes.poster.value&&(u.poster=c[l].attributes.poster.value),o.a.loadVideo(c[l].attributes.id.value,!0,!1,!1,u,!1,0,c[l].dataset.post_id)}t.classList.remove("content__figure__wrap__lazy");break;default:var d=n(Array.from(t.children),"IMG","name");d&&d.dataset&&d.dataset.src&&(d.addEventListener("error",(function(){return t.classList.remove("content__figure__wrap__lazy")})),d.addEventListener("load",(function(){return t.classList.remove("content__figure__wrap__lazy")})),d.src=d.dataset.src)}}function r(e,i){e.forEach((function(e){e.isIntersecting&&(a(),i.unobserve(t))}))}e.value&&(window.IntersectionObserver?new IntersectionObserver(r,{root:null,threshold:"0"}).observe(t):a())}}},21:function(t,e,i){"use strict";e.a={bind:function(t,e,i){t.clickOutsideEvent=function(s){t==s.target||t.contains(s.target)||i.context[e.expression](s)},document.body.addEventListener("click",t.clickOutsideEvent)},unbind:function(t){document.body.removeEventListener("click",t.clickOutsideEvent)}}},3:function(t,e,i){"use strict";var s=i(25),o=i.n(s),n=i(18),a=i.n(n),r=i(26),l=i.n(r),c=i(27),u=i.n(c),d=i(0),p=i(9),h=i(8);function f(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return v(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return v(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var s=0,o=function(){};return{s:o,n:function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,a=!0,r=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return a=t.done,t},e:function(t){r=!0,n=t},f:function(){try{a||null==i.return||i.return()}finally{if(r)throw n}}}}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}function m(){return(m=o()(a.a.mark((function t(e,i){var s,o=arguments;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=o.length>2&&void 0!==o[2]?o[2]:null,i||(i={}),t.abrupt("return",new Promise((function(t,o){if(e){var n;s&&s instanceof FormData?(n=s).append("params",JSON.stringify(i)):n=l.a.stringify({params:JSON.stringify(i)});var a={headers:{},withCredentials:!0},r=h.a.get(d.a.user.cookies.sid);return r&&(a.headers["X-Sid"]=r),u.a.post(d.a.urlEndpoint("api")+"/"+e,n,a).then((function(s){d.a.isDev&&console.log("API CALL",{cfg:a,method:e,params:i,response:s.data}),s.data&&void 0!==s.data.status&&!s.data.status?(k(s),o(s)):t(s)}),(function(t){return k(t),o(t)}))}o(new Error("Method is undefined"))})));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function g(t,e,i,s){try{"undefined"!=typeof window&&window.$&&window.$.jGrowl?_(t,e,i,s):p.a.loadScript(d.a.scripts.jgrowl,(function(){_(t,e,i,s)}))}catch(t){}}function _(t,e,i,s){if(t){var o="green";i||(i="default"),"error"==i&&(o="red");window.$.jGrowl.defaults.position="top-left",window.$.jGrowl.defaults.closer=!1,window.$.jGrowl(t,{glue:"before",header:e||"",life:s||1e4,sticky:!1,animateOpen:{height:"show",width:"show"},animateClose:{height:"hide",width:"show"},theme:i,closeTemplate:'<span class="close1"><img src="'+d.a.imagespath+"fishki/"+o+'_cross.gif" alt="close" /></span>'})}}function k(t){if(t.data&&(t.data.errors||t.data.message)){var e,i=f(t.data.errors||[{message:t.data.message,code:t.data.code}]);try{for(i.s();!(e=i.n()).done;){var s;g(e.value.message,"","error")}}catch(s){i.e(s)}finally{i.f()}}}e.a={call:function(t,e){return m.apply(this,arguments)},processErrors:k,showMessage:g}},30:function(t,e,i){"use strict";e.a={methods:{copyToClipboard:function(t){t.preventDefault();var e=t.target,i=this;document.getElementsByTagName("body")[0];if("undefined"!=typeof window&&void 0!==window.getSelection){window.getSelection();var s=e.innerText;e.innerText="Ссылка скопирована",e.parentElement.style.background="yellow";var o=document.createElement("input");return o.setAttribute("value",this.eUrl),document.body.appendChild(o),o.select(),document.execCommand("copy"),document.body.removeChild(o),window.setTimeout((function(){e.innerText=s,e.parentElement.style.background="",i.shareShow=!1}),2e3),!1}}}}},32:function(t,e){},4:function(t,e){t.exports={categories:[{id:34,title:"Солянка",alias:"mix"},{id:43,title:"Ссылочная солянка",alias:"linkmix"},{id:44,title:"Праздники",alias:"celebration"},{id:45,title:"Рецепты",alias:"recipe"},{id:46,title:"Трейлеры",alias:"trailers"},{id:47,title:"Каско",alias:"kasko"},{id:1,title:"Авто",alias:"auto"},{id:9,title:"Демотиваторы",alias:"demotivation"},{id:12,title:"Фото",alias:"photo"},{id:15,title:"Открытки",alias:"cards"},{id:18,title:"Смс",alias:"sms"},{id:20,title:"Анекдоты",alias:"anekdot"},{id:21,title:"Статусы",alias:"status"},{id:22,title:"Видео",alias:"video"},{id:23,title:"Гифки",alias:"gif"},{id:24,title:"Мем",alias:"mem"},{id:11,title:"Антифишки",alias:"anti"}],upload_limit:{upload_image:{min_width:450,min_height:90,size_limit:1048576},upload_video:{size_limit:5368709120},upload_mp3:{size_limit:10485760},upload_animated_gif:{min_width:100,min_height:90,size_limit:20971520}},tn:{enabled_webp:1,default_video_turborss:"https://cdn.fishki.net/images/tn/default-fishki.jpg",replaced_domains:{"":["fishki.net","avatars.img.fishki.net","ru.fishki.net","cdn.fishki.net","s.fishki.net","sos.fishki.net"],"/pics":["pics.fishki.net"]}},recaptchav3:"6LebZpEeAAAAAH2TeG3XvOO-I-LKdWORyRrflVD8",votes:{options:{globalTestOpen:{no:"Нет",yes:"Да"},autoStartTest:{no:"Нет",yes:"Да",defaultadmin:"yes"},showOnMain:{no:"Нет",yes:"Да"},authNeed:{no:"Нет",yes:"Да"},onHead:{no:"Нет",yes:"Да"},hintInImage:{no:"Нет",yes:"Да"},noResult:{no:"Нет",yes:"Да"},explainQuestionList:{no:"Нет",yes:"Да"},showStageResult:{no:"Нет",yes:"Да"},emptyCheckbox:{no:"Нет",yes:"Да"},counterCheckbox:{no:"Нет",yes:"Да"},skipCheckbox:{no:"Нет",yes:"Да"},resultOnImage:{no:"Нет",yes:"Да"},noSharingResult_image:{no:"Нет",yes:"Да"},showFirst:{no:"Нет",yes:"Да"},showQImage:{no:"Нет",yes:"Да"},isIchieve:{no:"Нет",yes:"Да",defaultinput:""},branding98:{no:"Нет",yes:"Да",is_digit:1,placeholder:"Укажите ID брендирования, в виде id[_subid]"},mixedMode:{no:"Нет",yes:"Да"},templateType:{no:"Нет",yes:"Да",is_digit:1,placeholder:"Укажите номер верстки",defaultselect:2,select:["Новая","Старая","Vue"]}},g_types:["Тест с последовательным выводом всех вопросов","Тест где все вопросы в единой ленте","Опрос с последовательным выводом всех вопросов, не поддерживается в /add/","Опрос где все вопросы в единой ленте","Facebook-тест, в админке может только редактироваться"],subtypes:["Обычный тест или опрос, созданный редактором","Тест где ответ влияет на несколько результатов (Импорт с playbuzz)","Результат цифрами на картинке (Труп)","Результат цифрами в центре картинки","Тест с результатами в формате JSON"]}}},41:function(t,e,i){"use strict";var s=i(0),o=i(3),n=i(14),a=i(7),r=i(30),l={data:function(){return{shareShow:!1,emotesShow:!1,emotesDisShow:!1,reactionsShow:!1}},components:{},props:{post:{type:Object,required:!0},rateOnly:{type:Boolean,default:!1},commentBlock:{type:Boolean,default:!0},likeBlock:{type:Boolean,default:!0},shareBlock:{type:Boolean,default:!0},reactClass:{type:[String,Array,Object]},popClass:{type:[String,Array,Object]}},mixins:[r.a],computed:{postEnabled:function(){return!!this.post.flags.allow_rate&&!this.post.flags.is_mix_erotic},authClass:function(){return this.user&&(this.user.is_superuser||this.user.id&&this.user.id!=this.post.user_id)?"":" disabledel"},user:function(){return a.a.get()},commentUrl:function(){return s.a.isM?"/comment/mobile/"+this.post.post_id+"/"+this.post.gallery_id+"/":this.post.post_link+"#comments"},emoteCurrent:function(){return this.post.groupLikes&&this.post.groupLikes.mylike[this.post.gallery_id]&&["like","omg","lol","love"].indexOf(this.post.groupLikes.mylike[this.post.gallery_id].type)>-1?this.post.groupLikes.mylike[this.post.gallery_id].type:"like-o"},emoteDisCurrent:function(){return this.post.groupLikes&&this.post.groupLikes.mylike[this.post.gallery_id]&&["sad","nasty","dislike","angry"].indexOf(this.post.groupLikes.mylike[this.post.gallery_id].type)>-1?this.post.groupLikes.mylike[this.post.gallery_id].type:"dislike-o"},reactionsCount:function(){return[{icon:"like",text:"нравится",count:this.post.groupLikes&&this.post.groupLikes.postlike[this.post.gallery_id]?this.post.groupLikes.postlike[this.post.gallery_id].like.count:0},{icon:"omg",text:"любопытно",count:this.post.groupLikes&&this.post.groupLikes.postlike[this.post.gallery_id]?this.post.groupLikes.postlike[this.post.gallery_id].omg.count:0},{icon:"lol",text:"насмешило",count:this.post.groupLikes&&this.post.groupLikes.postlike[this.post.gallery_id]?this.post.groupLikes.postlike[this.post.gallery_id].lol.count:0},{icon:"sad",text:"печально",count:this.post.groupLikes&&this.post.groupLikes.postlike[this.post.gallery_id]?this.post.groupLikes.postlike[this.post.gallery_id].sad.count:0},{icon:"nasty",text:"Противно",count:this.post.groupLikes&&this.post.groupLikes.postlike[this.post.gallery_id]?this.post.groupLikes.postlike[this.post.gallery_id].nasty.count:0},{icon:"dislike",text:"не нравится",count:this.post.groupLikes&&this.post.groupLikes.postlike[this.post.gallery_id]?this.post.groupLikes.postlike[this.post.gallery_id].dislike.count:0},{icon:"angry",text:"бесит",count:this.post.groupLikes&&this.post.groupLikes.postlike[this.post.gallery_id]?this.post.groupLikes.postlike[this.post.gallery_id].angry.count:0},{icon:"love",text:"влюбило",count:this.post.groupLikes&&this.post.groupLikes.postlike[this.post.gallery_id]?this.post.groupLikes.postlike[this.post.gallery_id].love.count:0}]},reactionsRate:function(){return{count:this.reactionsValue,text:"рейтинг поста"}},comments:function(){var t=parseInt(this.post.comments,10);return t||(this.post.comments&&this.post.comments.total_number_comments?this.post.comments.total_number_comments:0)},title:function(){return this.post.post_title?this.post.post_title:this.post.title},eTitle:function(){return encodeURI(s.a.myTrim(this.title,140))},encTitle:function(){return encodeURI(this.title)},eUrl:function(){return encodeURI(this.post.post_link)},isFavored:function(){return!!parseInt(this.post.favorite[this.post.gallery_id],10)},hasFavored:function(){return!0},reactionsValue:function(){return this.post.groupLikes&&this.post.groupLikes.postlike[this.post.gallery_id]?this.post.groupLikes.postlike[this.post.gallery_id].total.value:0},reactionsTotal:function(){return this.post.groupLikes&&this.post.groupLikes.postlike[this.post.gallery_id]?this.post.groupLikes.postlike[this.post.gallery_id].total.count:0},reactionsIcons:function(){var t=this.reactionsCount.slice().filter((function(t){return t.count>0})).sort((function(t,e){return e.count-t.count}));return t[3]&&t[3].count>0?t.slice(0,3).sort((function(t,e){return t.count-e.count})):t.sort((function(t,e){return t.count-e.count}))},reactionsCountSort:function(){return this.reactionsCount.slice().sort((function(t,e){return e.count-t.count}))},debounceShare:function(){return Object(n.debounce)((function(){this.shareShow=!1}),500)},debounceMenu:function(){return Object(n.debounce)((function(){this.reactionsShow=!1}),500)},debouncePanel:function(){return Object(n.debounce)((function(){this.emotesShow=!1}),3e3)},debounceDisPanel:function(){return Object(n.debounce)((function(){this.emotesDisShow=!1}),3e3)}},methods:{popoverClass:function(t){var e=["popover"];if("string"==typeof t)e.push(t);else if(t&&"Object"==typeof t)for(var i in t)t[i]&&e.push(t[i]);return e.join(" ")},setFavorite:function(){var t=this;o.a.call("user.favorite",{post_id:this.post.post_id,gallery_id:this.post.gallery_id,is_fav:parseInt(this.post.favorite[this.post.gallery_id],10)?1:0}).then((function(e){e&&e.data&&void 0!==e.data.is_fav&&t.$set(t.post.favorite,t.post.gallery_id,parseInt(e.data.is_fav,10)?1:0)}))},showShare:function(t){t.preventDefault(),this.shareShow=!0,this.debounceShare.clear()},hideShare:function(){this.debounceShare()},showMenu:function(){this.reactionsShow=!0,this.debounceMenu.clear()},hideMenu:function(){this.debounceMenu()},hideLike:function(){this.debouncePanel()},hideDisLike:function(){this.debounceDisPanel()},handleLike:function(){"like-o"==this.emoteCurrent?this.handleEmote("like",!0):(this.emotesShow=!0,this.debouncePanel.clear())},showEmote:function(){this.debouncePanel.clear()},handleDisLike:function(){"dislike-o"==this.emoteDisCurrent?this.handleEmote("dislike",!0):(this.emotesDisShow=!0,this.debounceDisPanel.clear())},showDisEmote:function(){this.debounceDisPanel.clear()},handleEmote:function(t,e){var i=this;e=e||!0;var s=this.post.groupLikes.mylike[this.post.gallery_id].type;this.post.groupLikes&&this.post.groupLikes.mylike[this.post.gallery_id]&&(this.post.groupLikes.mylike[this.post.gallery_id].type=t),["sad","nasty","dislike","angry"].indexOf(t)>-1?(i.emotesDisShow?(i.debounceDisPanel.clear(),e=!1):i.debounceDisPanel(),i.emotesShow=!1,i.emotesDisShow=e):(i.emotesShow?(i.debouncePanel.clear(),e=!1):i.debouncePanel(),i.emotesShow=e,i.emotesDisShow=!1),o.a.call("post.like",{like:t,post_id:this.post.post_id,gallery_id:this.post.gallery_id}).then((function(t){t&&t.data&&void 0!==t.data.groupLikes&&(i.post.rates=t.data.rates,i.post.likes=t.data.likes,i.post.unlikes=t.data.unlikes,i.post.groupLikes=t.data.groupLikes)})).catch((function(t){t&&t.data&&0==t.data.status&&(i.post.groupLikes.mylike[i.post.gallery_id].type=s,i.emotesShow=!1,i.emotesDisShow=!1)}))}},mounted:function(){}},c=i(2),u=Object(c.a)(l,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content__reactions"},[t.likeBlock&&t.postEnabled?i("div",{class:"emotes-wrap mr-a emotes-wrap-left"+t.authClass,on:{mouseleave:t.hideLike}},[i("button",{on:{click:function(e){return t.handleLike()}}},[i("svg",{class:{invertable:"like-o"==t.emoteCurrent}},[i("use",{attrs:{href:"#emote-"+t.emoteCurrent}})])]),t._v(" "),i("transition",{attrs:{duration:1e3,name:"animation-fade"}},[t.emotesShow?i("div",{staticClass:"emotes-container",on:{mouseover:t.showEmote}},[i("button",{class:{current:"like"==t.emoteCurrent},on:{click:function(e){return t.handleEmote("like")}}},[i("svg",{staticClass:"emote-outline invertable"},[i("use",{attrs:{href:"#emote-like-o"}})]),t._v(" "),i("svg",{staticClass:"emote-normal"},[i("use",{attrs:{href:"#emote-like"}})])]),t._v(" "),i("button",{class:{current:"lol"==t.emoteCurrent},on:{click:function(e){return t.handleEmote("lol")}}},[i("svg",{staticClass:"emote-outline invertable"},[i("use",{attrs:{href:"#emote-lol-o"}})]),t._v(" "),i("svg",{staticClass:"emote-normal"},[i("use",{attrs:{href:"#emote-lol"}})])]),t._v(" "),i("button",{class:{current:"omg"==t.emoteCurrent},on:{click:function(e){return t.handleEmote("omg")}}},[i("svg",{staticClass:"emote-outline invertable"},[i("use",{attrs:{href:"#emote-omg-o"}})]),t._v(" "),i("svg",{staticClass:"emote-normal"},[i("use",{attrs:{href:"#emote-omg"}})])]),t._v(" "),i("button",{class:{current:"love"==t.emoteCurrent},on:{click:function(e){return t.handleEmote("love")}}},[i("svg",{staticClass:"emote-outline invertable"},[i("use",{attrs:{href:"#emote-love-o"}})]),t._v(" "),i("svg",{staticClass:"emote-normal"},[i("use",{attrs:{href:"#emote-love"}})])])]):t._e()])],1):t._e(),t._v(" "),t.likeBlock&&t.postEnabled?i("div",{class:"emotes-wrap mr-a"+t.authClass,on:{mouseleave:t.hideDisLike}},[t.emotesShow?t._e():i("button",{on:{click:function(e){return t.handleDisLike()}}},[i("svg",{class:{invertable:"dislike-o"==t.emoteDisCurrent}},[i("use",{attrs:{href:"#emote-"+t.emoteDisCurrent}})])]),t._v(" "),i("transition",{attrs:{duration:1e3,name:"animation-fade"}},[t.emotesDisShow?i("div",{staticClass:"emotes-container",on:{mouseover:t.showDisEmote}},[i("button",{class:{current:"dislike"==t.emoteDisCurrent},on:{click:function(e){return t.handleEmote("dislike")}}},[i("svg",{staticClass:"emote-outline invertable"},[i("use",{attrs:{href:"#emote-dislike-o"}})]),t._v(" "),i("svg",{staticClass:"emote-normal"},[i("use",{attrs:{href:"#emote-dislike"}})])]),t._v(" "),i("button",{class:{current:"sad"==t.emoteDisCurrent},on:{click:function(e){return t.handleEmote("sad")}}},[i("svg",{staticClass:"emote-outline invertable"},[i("use",{attrs:{href:"#emote-sad-o"}})]),t._v(" "),i("svg",{staticClass:"emote-normal"},[i("use",{attrs:{href:"#emote-sad"}})])]),t._v(" "),i("button",{class:{current:"angry"==t.emoteDisCurrent},on:{click:function(e){return t.handleEmote("angry")}}},[i("svg",{staticClass:"emote-outline invertable"},[i("use",{attrs:{href:"#emote-angry-o"}})]),t._v(" "),i("svg",{staticClass:"emote-normal"},[i("use",{attrs:{href:"#emote-angry"}})])]),t._v(" "),i("button",{class:{current:"nasty"==t.emoteDisCurrent},on:{click:function(e){return t.handleEmote("nasty")}}},[i("svg",{staticClass:"emote-outline invertable"},[i("use",{attrs:{href:"#emote-nasty-o"}})]),t._v(" "),i("svg",{staticClass:"emote-normal"},[i("use",{attrs:{href:"#emote-nasty"}})])])]):t._e()])],1):t._e(),t._v(" "),t.postEnabled?i("div",{staticClass:"popover-wrap u-flex u-justify-center",on:{mouseleave:t.hideMenu,mouseover:t.showMenu}},[t.reactionsTotal>0?[i("button",{staticClass:"reactions-wrap"},[i("div",{staticClass:"reactions-count"},[t._v(t._s(t.reactionsTotal))]),t._v(" "),t._l(t.reactionsIcons,(function(e,s){return e.count>0?i("svg",{key:s},[i("use",{attrs:{href:"#emote-"+e.icon}})]):t._e()}))],2)]:t._e(),t._v(" "),t._e(),t._v(" "),i("transition",{attrs:{duration:1e3,name:"animation-fade"}},[t.reactionsShow?i("div",{class:t.popoverClass(this.reactClass)},[i("div",{staticClass:"popover-arrow"}),t._v(" "),t._l(t.reactionsCountSort,(function(e,s){return e.count>0?i("div",{key:s,staticClass:"popover-info"},[i("div",{staticClass:"popover-icon"},[i("svg",[i("use",{attrs:{href:"#emote-"+e.icon}})])]),t._v(" "),i("div",{staticClass:"popover-text nowrap"},[t._v(t._s(e.count+" "+e.text))])]):t._e()})),t._v(" "),t.reactionsValue?i("div",{staticClass:"popover-info"},[i("div",{staticClass:"popover-icon"},[i("svg",{staticClass:"invertable"},[i("use",{attrs:{href:"#icon-o-info"}})])]),t._v(" "),i("div",{staticClass:"popover-text nowrap"},[t._v(t._s(t.reactionsValue+" "+t.reactionsRate.text))])]):t._e()],2):t._e()])],2):t._e(),t._v(" "),t.commentBlock&&t.post.flags.allow_comments&&!t.rateOnly?i("a",{staticClass:"comments-wrap ml-1 mr-1",attrs:{href:t.commentUrl,title:"Комментарии"}},[i("svg",{staticClass:"invertable"},[i("use",{attrs:{href:"#icon-comments"}})]),t._v(" "),i("div",{staticClass:"comments-count"},[t._v(t._s(t.comments))])]):t._e(),t._v(" "),t.shareBlock?i("div",{staticClass:"popover-wrap mr-1",on:{mouseleave:t.hideShare,mouseover:t.showShare}},[i("div",{staticClass:"favorite-wrap"},[i("button",[i("svg",{staticClass:"invertable"},[i("use",{attrs:{"xlink:href":"#icon-o-share"}})])])]),t._v(" "),t.shareShow?i("div",{class:t.popoverClass(this.popClass)},[i("div",{staticClass:"popover-arrow"}),t._v(" "),i("a",{staticClass:"popover-action",attrs:{target:"_blank",href:"https://vk.com/share.php?url="+t.eUrl},on:{click:t.hideShare}},[i("div",{staticClass:"popover-icon"},[i("svg",{staticClass:"cl-vk"},[i("use",{attrs:{"xlink:href":"#social-vk"}})])]),t._v(" "),i("div",{staticClass:"popover-text nowrap"},[t._v("Поделиться Вконтакте")])]),t._v(" "),i("a",{staticClass:"popover-action",attrs:{target:"_blank",href:"https://connect.ok.ru/offer?url="+t.eUrl},on:{click:t.hideShare}},[i("div",{staticClass:"popover-icon"},[i("svg",{staticClass:"cl-ok"},[i("use",{attrs:{"xlink:href":"#social-ok"}})])]),t._v(" "),i("div",{staticClass:"popover-text nowrap"},[t._v("Поделиться в Одноклассниках")])]),t._v(" "),i("a",{staticClass:"popover-action",attrs:{target:"_blank",href:"https://twitter.com/share?text="+t.eTitle+"&url="+t.eUrl},on:{click:t.hideShare}},[i("div",{staticClass:"popover-icon"},[i("svg",{staticClass:"cl-tw"},[i("use",{attrs:{"xlink:href":"#social-tw"}})])]),t._v(" "),i("div",{staticClass:"popover-text nowrap"},[t._v("Поделиться в Twitter")])]),t._v(" "),i("a",{staticClass:"popover-action",attrs:{target:"_blank",href:"https://t.me/share/url?url="+t.eUrl},on:{click:t.hideShare}},[i("div",{staticClass:"popover-icon"},[i("svg",{staticClass:"cl-tg"},[i("use",{attrs:{"xlink:href":"#social-tg"}})])]),t._v(" "),i("div",{staticClass:"popover-text nowrap"},[t._v("Поделиться в Telegram")])]),t._v(" "),i("a",{staticClass:"popover-action",attrs:{target:"_blank",href:"whatsapp://send?text="+t.encTitle+" | "+t.eUrl},on:{click:t.hideShare}},[i("div",{staticClass:"popover-icon"},[i("svg",{staticClass:"cl-wa"},[i("use",{attrs:{"xlink:href":"#social-wa"}})])]),t._v(" "),i("div",{staticClass:"popover-text nowrap"},[t._v("Поделиться в WhatsApp")])]),t._v(" "),i("a",{staticClass:"popover-action",attrs:{target:"_blank",href:"viber://forward?text="+t.encTitle+" | "+t.eUrl},on:{click:t.hideShare}},[i("div",{staticClass:"popover-icon"},[i("svg",{staticClass:"cl-vb"},[i("use",{attrs:{"xlink:href":"#social-vb"}})])]),t._v(" "),i("div",{staticClass:"popover-text nowrap"},[t._v("Поделиться в Viber")])]),t._v(" "),i("a",{staticClass:"popover-action",attrs:{target:"_blank",href:"javascript:void(0);"},on:{click:t.copyToClipboard}},[i("div",{staticClass:"popover-icon"},[i("svg",{staticClass:"cl-vb"},[i("use",{attrs:{"xlink:href":"#icon-link"}})])]),t._v(" "),i("div",{staticClass:"popover-text nowrap"},[t._v("Скопировать ссылку")])])]):t._e()]):t._e(),t._v(" "),t.hasFavored?i("div",{staticClass:"favorite-wrap"},[i("button",{class:{"is-favored":t.isFavored},on:{click:function(e){return t.setFavorite()}}},[t.isFavored?t._e():i("svg",{staticClass:"invertable"},[i("use",{attrs:{href:"#icon-favorites"}})]),t._v(" "),t.isFavored?i("svg",{staticClass:"invertable"},[i("use",{attrs:{href:"#icon-favorited"}})]):t._e()])]):t._e()])}),[],!1,null,null,null);e.a=u.exports},56:function(t,e,i){"use strict";i.r(e),function(t){i.d(e,"install",(function(){return a}));var s=i(20),o=i(21),n=i(41);function a(t){a.installed||(a.installed=!0,t.directive("lazyload",s.a),t.directive("clickOutside",o.a),t.component("Reactions",n.a))}var r={install:a},l=null;"undefined"!=typeof window?l=window.Vue:void 0!==t&&(l=t.Vue),l&&l.use(r),e.default=n.a}.call(this,i(22))},7:function(t,e,i){"use strict";var s={STATUS_DISABLED:0,STATUS_ACTIVE:1,USERGROUP_USER:0,USERGROUP_ADMIN:1,USER_GROUP_EDITOR:2,USER_GROUP_COMMENT_MODERATOR:3,USER_GROUP_COMMENT_MODERATOR_NOT_SOL:4,USER_GROUP_ADV_ADMIN:5,USER_GROUP_COMMUNITY:6,USER_GROUP_COMMENT_GLOBAL:7,USER_REWRITER:8,isGuest:function(){return!(window&&window.fishki&&window.fishki.app&&window.fishki.app.user&&window.fishki.app.user.id)},isAdmin:function(){var t=window&&window.fishki&&window.fishki.app&&window.fishki.app.user||{};return t&&1===t.usergroup},isGlobalCommentModerator:function(){var t=window&&window.fishki&&window.fishki.app&&window.fishki.app.user||{};return t&&7===t.usergroup},get:function(){return window&&window.fishki&&window.fishki.app&&window.fishki.app.user||{}},sid:function(t){if(void 0===t&&window&&window.fishki&&window.fishki.cookie)return window.fishki.cookie.get(config.user.cookies.sid)}};e.a=s},8:function(t,e,i){"use strict";var s=i(11),o=i.n(s),n=i(0);function a(t,e){var i=new Date(t);return i.setDate(t.getDate()+e),i}function r(t){return n.a.ssrContext?n.a.ssrContext.cookies.get(t):o.a.get(t)}e.a={set:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(void 0!==e)if(e){var s={httpOnly:!1,domain:"."+n.a.domain()};n.a.ssrContext?(i&&(s.expires=a(new Date,i)),n.a.ssrContext.cookies.set(t,e,s)):(i&&(s.expires=i),o.a.set(t,e,s))}else n.a.ssrContext?n.a.ssrContext.cookies.set(t,null,{expires:new Date(0),domain:"."+n.a.domain()}):o.a.remove(t);return r(t)},get:r,remove:function(t,e){return n.a.ssrContext?n.a.ssrContext.cookies.remove(t,e):o.a.remove(t,e)}}},9:function(t,e,i){"use strict";i(0);var s=[],o=[];function n(t,e){if(o[t].ready){for(var i in o[t].callback){var s=o[t].callback[i];"function"==typeof s&&s(e)}o[t].callback=[]}}e.a={loadScript:function(t,e,i){for(var a in void 0===i&&(i=Math.random(1e7)),s)if("string"==typeof s[a]&&-1!=s[a].indexOf(t)&&null!=o[a])return o[a].callback.push(e),void n(a,!0);i&&-1==t.indexOf("?")&&(t=t+"?"+i);var r=s.push(t)-1;o[r]={callback:[e],ready:!1};var l=document.createElement("script"),c=document.getElementsByTagName("script")[0];l.async=1,l.onload=l.onreadystatechange=function(t,e){(e||!l.readyState||/loaded|complete/.test(l.readyState))&&(l.onload=l.onreadystatechange=null,l=void 0,e||(o[r].ready=!0,n(r,!1)))},l.src=t,c.parentNode.insertBefore(l,c)}}}});