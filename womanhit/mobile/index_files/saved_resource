/*! For license information please see vn_module.js.LICENSE.txt */
(()=>{"use strict";var t={667:(t,e,i)=>{i.d(e,{Z:()=>l,k:()=>d});var r=i(506),o=i(113),n=i(118);t=i.hmd(t);var a="vnCreativeBlock",s="::Extension["+a+"]";const l=function(t){return new Promise((function(e){var i,o=t&&t.getAPI&&t.getAPI().logger||r.ZP;((null==o||null===(i=o.getChildWriter)||void 0===i?void 0:i.call(o,s))||o).trace(""+s);var l,d=(t._getLastParameters()||{})[a]||{},c=d.urls,u=d.global,h=d.important;(c&&c.length||u||h)&&t.setControlData(a,((l={urls:c})[n.uz]=h,l),u);e(t)}))};function d(e){var i=t&&t.getAPI&&t.getAPI().logger||r.ZP;i.trace(s+".parseVnCreativeBlock()");var n=e&&e.querySelector('Extension[type="'+a+'"]'),l=n&&Array.from(n.querySelectorAll("urls > url"));if(l&&l.length){var d=(0,o.sQ)(n,"global"),c=(0,o.sQ)(n,"important"),u=l.map((function(t){return(0,o.sQ)(t).split("?")[0].replace(/^(https*:)*\/\//,"").toLowerCase()}));return i.trace(s+" set control data "+u+" global="+d),{urls:u,global:d,important:c}}return null}},731:(t,e,i)=>{i.d(e,{L2:()=>c,RY:()=>u,Xs:()=>h,eL:()=>l,qd:()=>p});var r,o,n,a,s="videonow-config";try{r=localStorage,o=sessionStorage}catch(t){o=r={getItem:function(){return""},setItem:function(){return""}}}try{n=top.localStorage,a=top.sessionStorage}catch(t){a=n=null}var l=(n?[n]:[]).concat(r),d=(a?[a]:[]).concat(o);function c(t,e,i){var r;return void 0===e&&(e=l),void 0===i&&(i=s),[].concat(e).some((function(t){try{var e=t.getItem(i);return r=JSON.parse(e)}catch(t){r=null}})),(r||{})[t]}function u(t,e,i,r){var o,n;void 0===i&&(i=l),void 0===r&&(r=s),(i=[].concat(i)).some((function(t){try{var e=t.getItem(r);if(e)return n=t,o=JSON.parse(e)}catch(t){o=null}})),o||(o={}),(!(o[t]=""+e)||!o[t].length)&&delete o[t],(n||i[0]).setItem(r,JSON.stringify(o))}var h=function(t){return c(t,d)},p=function(t,e){return u(t,e,d)}},260:(t,e,i)=>{i.d(e,{CE:()=>P,Ke:()=>w,Ud:()=>y,a1:()=>m,ai:()=>A,e9:()=>b,tW:()=>f,vF:()=>v,zf:()=>S});var r="undefined"!=typeof window&&window||{},o="undefined"!=typeof navigator&&navigator||{},n=o.userAgent,a=o.vendor,s=o.plugins,l=o.appVersion,d=r.opera,c=r.MSStream,u=(r.devicePixelRatio,r.VN&&r.VN.debug&&r.VN.debug.userAgent||n||a||d||""),h=/iPod/.test(u)&&!c,p=/iPhone/.test(u)&&!c,g=/iPad/.test(u)&&!c,v=h||p||g,f=/android/i.test(u),m=/safari/i.test(u)&&/apple/i.test(a),b=/chrome/i.test(u),y=/firefox|mozilla/i.test(u)&&(!a||!/google/i.test(a)),A=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(u)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(u.substr(0,4)),w=void 0===s||0===s.length?!("undefined"==typeof ActiveXObject||!new ActiveXObject("ShockwaveFlash.ShockwaveFlash")):s["Shockwave Flash"],P=function(){if(!b)return!1;var t=l.match(/Chrome\/(\d+)\.(\d+)/i);return t&&t.length&&t.length>2?parseFloat(t[1]+"."+t[2]):84}(),O=function(){if(!v)return!1;if("string"!=typeof l)return!1;var t=l.match(/OS (\d+)_(\d+)_?(\d+)?/);return t&&t.length&&t.length>2?parseFloat(t[1]+"."+t[2]):11}(),S=!A||v&&O>10.2;r.document&&r.document.addEventListener("touchstart",(function(){!0})),r.document&&r.document.addEventListener("touchend",(function(){!1}))},816:(t,e,i)=>{i.d(e,{GA:()=>g,ID:()=>m,KT:()=>w,N$:()=>h,Pg:()=>D,Qt:()=>T,Re:()=>p,V4:()=>O,VB:()=>f,Xv:()=>b,Zs:()=>v,aT:()=>E,al:()=>_,eE:()=>V,hU:()=>A,nD:()=>C,nZ:()=>y,rS:()=>k,rj:()=>S,wK:()=>P});var r,o=i(506),n=i(180),a=i(260);function s(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function l(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?s(Object(i),!0).forEach((function(e){d(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function d(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var c="DOM",u=(null===o.ZP||void 0===o.ZP||null===(r=o.ZP.getChildWriter)||void 0===r?void 0:r.call(o.ZP,c))||o.ZP,h=function(t){t.preventDefault(),t.stopPropagation()},p=function(t,e){return t&&("object"==typeof t||"function"==typeof t)&&"string"==typeof t.innerHTML&&(!e||e.toUpperCase()===t.tagName)},g=function(t){return t&&t.parentNode&&t.parentNode.removeChild(t),null},v=function(t,e){var i=[].concat(t).filter((function(t){return t&&t.style}));return Object.keys(e).forEach((function(t){var r=e[t];void 0!==r&&i.forEach((function(e){var i=e.style;if(i[t]=r,-1!==["transform","transition","userSelect"].indexOf(t)){var o=""+t[0].toUpperCase()+t.substr(1);["Webkit","Moz","Ms","O"].forEach((function(t){i[""+t+o]=r}))}}))})),t},f=function(t,e){if(void 0===e&&(e=!1),t&&t.load&&t.play&&t.pause){u.trace("mediaSafePlay() element.volume="+t.volume+" element.muted="+t.muted,2,"pink");var i=t.play();return void 0!==i?i.then((function(){return u.trace("DOM.mediaSafePlay() Autoplay started! element.volume="+t.volume+" element.muted="+t.muted),i})).catch((function(r){if(e)throw u.warn("DOM.mediaSafePlay() element.volume="+t.volume+" element.muted="+t.muted+" error:"+(r.message||r)),r;return i})):void 0}return!1},m=function(t,e,i,r){var o=document.createElement(t);switch(typeof e){case"object":v(o,e);break;case"string":o.className=e}return o.innerHTML=i||"",o.addEventListener("click",r),o},b=function(t,e,i,r,o){var n=m(e,i,r,o);return t.appendChild(n)},y=function(t,e,i,r,o){var n=m(e,i,r,o);return t.parentElement.insertBefore(n,t.nextSibling)},A=function(t,e){var i=t.ownerDocument||t.document,r=i.createElement("style");r.type="text/css",r.styleSheet?r.styleSheet.cssText=e:r.appendChild(i.createTextNode(e)),i.head.appendChild(r)},w=function(t,e){t&&"object"==typeof e&&Object.keys(e).forEach((function(i){return t.setAttribute(i,e[i])}))},P=function(t,e,i){if(void 0===e&&(e=document.body),void 0===i&&(i=1),!t)return u.warn("DOM.getElementsByComplexSelector: Invalid complexSelector ("+t+")"),[];if(!p(e))return u.warn("DOM.getElementsByComplexSelector: Invalid lookupNode ("+e+")"),[];var r=[];return t.split("|").some((function(t){if(function(t,e){var i=Element.prototype;return(i.matches||i.webkitMatchesSelector||i.mozMatchesSelector||i.msMatchesSelector||function(t){return-1!==[].indexOf.call(document.querySelectorAll(t),void 0)}).call(t,e)}(e,t))return r=[e],!0;var o=e.querySelectorAll(t);if(o.length>0){if(!(o.length<i))return r=Array.from(o),!0;u.trace("DOM.getElementsByComplexSelector: Found target nodes "+o.length+" < "+i)}return!1})),r},O=function(t,e,i,r){if(void 0===e&&(e="100%"),void 0===i&&(i=document.body),void 0===r&&(r=1),!t)return null;if(p(t))return u.trace("DOM.getElementFromOptions() Returning provided DOM node"),t;if("string"==typeof t){var o=P(t,i,r),n=parseInt(e,10)/100;return isNaN(n)?(u.warn("DOM.getElementFromOptions() Invalid playerSelectorPercent ("+n+")"),null):o[n?Math.ceil(o.length*n)-1:0]}return u.warn("DOM.getElementFromOptions() Invalid selector ("+t+")"),null},S=function(t){return b(t,"div",{position:"absolute",transform:"translate(-50%, -50%)",top:"50%",left:"50%"},n.Z)},_={position:"absolute",visibility:"hidden"},C={position:"absolute",visibility:"initial"},E=function(t,e){for(var i=[];t.parentNode;)if(i.push(t.parentNode),(t=t.parentNode)===e)return i;return i},D=function(t,e){void 0===e&&(e={});var i,r,o=l(l({},{iframeLoadedTimeout:50,maxAttempt:10,manualCheck:!1,onloadCheck:!0}),e),n=o.iframeLoadedTimeout,s=o.maxAttempt,d=o.onload,c=o.onerror,u=o.manualCheck,h=o.onloadCheck,p=s;if(d){if(I(t))return d(),null;a.a1&&(u=!0,h=!1),u&&(i=setInterval((function(){--p;var e=I(t);if(e&&(r&&t.removeEventListener("load",r),d()),(0==--p||e)&&clearInterval(i),!p&&!e&&(c&&c(new Error(".setIframeEventsHandlers() fail loading iframe")),!c))throw new Error(".setIframeEventsHandlers() fail loading iframe")}),n)),h&&(r=function(){clearInterval(i),d()},t.addEventListener("load",r))}return t.addEventListener("error",(function(e){if(clearInterval(i),a.Ud)d();else if(c&&c(new Error(".setIframeEventsHandlers() fail loading iframe")),!c)throw new Error(".setIframeEventsHandlers() fail loading iframe");r&&t.removeEventListener("load",r),clearInterval(i)})),i};function I(t){return p(t,"IFRAME")&&t.contentWindow&&"complete"===t.contentWindow.document.readyState||p(t,"DIV")&&t}function T(t,e){return V(t,e&&e.offsetParent)}function V(t,e){var i=0,r=0,o=document;if(e){var n=window,a=e.closest&&e.closest("body"),s=k(document,a);s&&s.length&&(n=s.pop().contentWindow),o=n.document;var l=(getComputedStyle(e)||{}).position;if(~["absolute","relative","fixed"].indexOf(l)){var d=e.getBoundingClientRect(),c=d.top,u=d.left;i=c+n.pageYOffset,r=u+n.pageXOffset}}var h=function(t,e){void 0===e&&(e=document);var i,r={top:0,left:0},o=t&&t.getBoundingClientRect&&t.getBoundingClientRect()||r,n=o.top,a=o.left;if(document===e)i=window;else{var s=k(document,e.body);i=s.length&&s.pop().contentWindow}if(i){var l=i,d=l.pageXOffset;n+=l.pageYOffset,a+=d}var c=t&&t.closest&&t.closest("body"),u=k(e,c);if(u.length){var h=u.reduceRight((function(t,e){var i=e&&e.getBoundingClientRect()||r,o=i.top,n=i.left;t||(t={top:0,left:0});var a=e&&getComputedStyle(e)||{},s=a.paddingLeft,l=a.paddingTop;return t.top+=o+(e&&e.clientTop||0)+(s&&parseFloat(s)||0)+(e&&e.scrollTop||0),t.left+=n+(e&&e.clientLeft||0)+(l&&parseFloat(l)||0)+(e&&e.scrollLeft||0),t}),null);n+=h.top,a+=h.left}return{top:n,left:a}}(t,o);return h.top-=i,h.left-=r,h}function k(t,e){return!e||t&&t.body===e?[]:x(t,e)}function x(t,e,i){void 0===i&&(i={}),i||(i={}),i.children||(i.children=[]);var r=t.querySelectorAll("iframe"),o=!1;return r.length&&Array.from(r).some((function(t){var r;try{r=(t.contentWindow||{}).document}catch(t){return!1}if(r){if(r.body===e){o=[t];for(var n=i;n&&n.element;){o.push(n.element),n=n.parent}return!0}var a={element:t,children:[]};if(a.parent=i,i.children.push(a),(o=x(r,e,a)).length)return!0}return!1})),o}},118:(t,e,i)=>{i.d(e,{HT:()=>c,Os:()=>n,cL:()=>g,l7:()=>h,ny:()=>s,uz:()=>a,wb:()=>l,xS:()=>p});var r=i(816),o=i(196),n="__overwrite_type";"undefined"!=typeof exports&&(exports.OVERWRITE_FLAG=n);var a="__important";"undefined"!=typeof exports&&(exports.IMPORTANT_FLAG=a);var s="__value";"undefined"!=typeof exports&&(exports.VALUE_FLAG=s);var l="__primitive";"undefined"!=typeof exports&&(exports.PRIMITIVE_FLAG=l);var d=function(t){var e=(t||{})[n];return e&&e.toLowerCase&&"solid"===e.toLowerCase()},c="__remove";"undefined"!=typeof exports&&(exports.REMOVE_FLAG=c);var u=function(t){return t&&!0===t[a]},h=function t(e){if(void 0===e&&(e={}),e){for(var i=arguments.length,a=new Array(i>1?i-1:0),s=1;s<i;s++)a[s-1]=arguments[s];a.forEach((function(i){void 0===i&&(i={});var a=!u(e)||u(i),s=d(i);s&&a?e=i:Array.isArray(e)&&Array.isArray(i)?e=Array.from(new Set(e.concat(i))):Object.keys(i).forEach((function(l){var c=i[l];if(void 0!==c&&c!==n)if(!c||"object"!=typeof c||(0,o.xb)(c)||(0,r.Re)(c))l!==n&&a&&(e[l]=c);else{var h=Object.prototype.hasOwnProperty.call(e,l)&&e[l]||(e[l]=Array.isArray(c)?[]:{}),p=typeof h;e[l]="string"===p||"number"===p||(!u(h)||u(c))&&(s||d(c))?c:t(h,c)}}))}))}return e};"undefined"!=typeof exports&&(exports.extend=h);var p=function t(e,i,n){return void 0===i&&(i={}),window.WeakSet&&!n&&(n=new WeakSet),Array.isArray(e)?e.map((function(i,r){return t(i,e[r])})):e&&"object"==typeof e?!0===e[c]?null:!0===e[l]?e[s]:(Object.keys(e).forEach((function(a){var d=e[a],u=null!=d&&!0===d[l];if(d&&!0===d[c])delete i[a];else if(u&&null!=d[s])i[a]=d[s];else if(void 0!==d){var h,p;if(!d||Array.isArray(d)||"object"!=typeof d||(0,o.xb)(d)||(0,r.Re)(d)||window.WeakSet&&!1!==(null===(h=n)||void 0===h||null===(p=h.has)||void 0===p?void 0:p.call(h,d)))i[a]=d;else{var g,v;null===(g=n)||void 0===g||null===(v=g.add)||void 0===v||v.call(g,d);var f=Object.prototype.hasOwnProperty.call(i,a)&&i[a]||(i[a]={});t(d,f,n)}}})),i&&i[l]?i[s]:i):e};function g(t,e,i,r){if("global"===e)return t[e]=!0===i,t;var n=i.global,d=null!=n,u=(0,o.MV)(n);if(r=d&&u||r,"remove"===e)t[c]=!0===i;else{if("object"==typeof i&&null!==i)return t[e]=Object.entries(i).reduce((function(t,e){return g(t,e[0],e[1],r)}),{}),t;var h;t[e]=((h={})[s]=i,h[l]=!0,h)}return r&&(t[e][a]=!0),t}"undefined"!=typeof exports&&(exports.finalize=p)},698:(t,e,i)=>{i.d(e,{ZP:()=>y,d:()=>u,pO:()=>c,sY:()=>h});var r,o=i(731);function n(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a="background: #f2f2f2; color: #564545",s="background: #f6f1cd; color: #414042",l="L"+Math.random().toString(36).substring(2,4),d="undefined"!=typeof window&&window||{},c={NONE:0,ERROR:1,WARN:2,LOG:3,TRACK:4,TRACE:5},u="logLevel",h="loglevel-changed",p=0,g=1,v=2,f="color:{{color}}",m=((r={})[p]="",r[g]=f,r[v]=f+";font-weight:bold",r);function b(t,e,i){void 0===e&&(e="black");var r=m[t]||"";return i&&(~i.indexOf(":")?r+=";"+i:(e=i,~r.indexOf(f)||(r+=f))),r&&r.replace("{{color}}",e)||""}var y=function(){function t(e){var i=this,r=e.maxLevel,n=void 0===r?0:r,f=e.header,m=void 0===f?l:f,y=e.archive,A=void 0===y?[]:y,w=e.logs,P=void 0===w?[]:w,O=e.rootLogger,S=void 0===O?null:O;this.write=d.vnLoggerHook||function(t,e,r){var o=new Date,n="%c["+o.toLocaleTimeString("ru")+"."+o.getMilliseconds()+"]%c"+i._header+"%c"+e;i.archive.push(n),i.logs.push({date:o.toISOString(),level:t,header:i._header,message:e,css:r}),t<=i._maxLevel&&(console.info(n,a,s,""+r),t===c.ERROR&&console.error("Stack trace"))},this.writeArchive=function(){console.groupCollapsed(i._header+" Logger messages hidden by previous logLevel:"),i.archive.forEach((function(t,e){return console.info(t,a,s,""+i.logs[e].css)})),console.groupEnd()},this.getChildWriter=function(e){var r=new t({maxLevel:i._maxLevel,header:i._header+">"+e,archive:i.archive,logs:i.logs,rootLogger:i.rootLogger||i});return i.children.push(r),r},this.none=function(){},this.error=function(t,e,r){return void 0===e&&(e=v),i.write(c.ERROR,t,b(e,"red",r))},this.warn=function(t,e,r){return void 0===e&&(e=g),i.write(c.WARN,t,b(e,"red",r))},this.log=function(t,e,r){return void 0===e&&(e=p),i.write(c.LOG,t,b(e,e===g?"green":"#333",r))},this.track=function(t,e,r){return void 0===e&&(e=g),i.write(c.TRACK,t,b(e,"darkblue",r))},this.trace=function(t,e,r){return void 0===e&&(e=g),i.write(c.TRACE,t,b(e,e>g?"#aaa":"lightgray",r))},this.getLevel=function(){return i._maxLevel},this.setLevel=function(t){i.isRootLogger&&(i.write(c.TRACE,"Log level set to "+t),(0,o.RY)(u,t),(0,o.qd)(h,!0),t>i._maxLevel&&i.writeArchive()),i.children.forEach((function(e){e.setLevel(t)})),i._maxLevel=t},this.rootLogger=S,this._header=m,this._maxLevel=n,this.archive=A,this.logs=P,this.children=[]}var e,i,r;return e=t,(i=[{key:"isRootLogger",get:function(){return null===this.rootLogger}}])&&n(e.prototype,i),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}()},506:(t,e,i)=>{i.d(e,{ZP:()=>h,hw:()=>p});var r,o=i(731),n=i(698);try{r=window.location.search;try{r=window.top.location.search}catch(t){}}catch(t){}var a,s,l=r?/[?&]vn_debug\b(?:=(\d+))?/.exec(r):null,d=l&&l[1];null==d||(0,o.Xs)(n.sY)?(d=parseInt((0,o.L2)(n.d),10)||0)&&(s=" logger: vn_debug("+d+") was restored from localStorage"):(a=" logger: vn_debug="+(d=parseInt(d,10)||0)+" is using and saved to localStorage",(0,o.RY)(n.d,d));var c;try{c=window.videonow=window.videonow||{}}catch(t){c={}}if(!c.logger){var u=function(t,e,i){void 0===i&&(i=!0);var r=new n.ZP({maxLevel:t,header:e}),o=(new Date).getTimezoneOffset()/60,a=o>0?"-":"+";return i&&r.write(n.pO.LOG," Videonow logger started with log level "+t+" ("+function(t){return Object.keys(n.pO).find((function(e){return n.pO[e]==t}))}(t)+") v2.51.17 built "+new Date(1694688389228).toLocaleDateString()+" user timezone UTC"+a+Math.abs(o),"font-weight: bold"),r}(d);a&&u.warn(a,2,"color:#ff5722;font-size:1.5em;font-weight:bold"),s&&u.warn(s,2,"color:#ff5722; font-size:1.5em"),c.logger=u}const h=c.logger;var p=d},113:(t,e,i)=>{i.d(e,{Ag:()=>h,FB:()=>p,GM:()=>O,ON:()=>m,Ou:()=>_,TD:()=>P,UV:()=>b,bW:()=>S,en:()=>v,hd:()=>A,mq:()=>y,o3:()=>f,sQ:()=>g});var r,o=i(506),n=i(196),a=i(118);function s(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function l(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?s(Object(i),!0).forEach((function(e){d(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function d(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var c="parse",u=(null===o.ZP||void 0===o.ZP||null===(r=o.ZP.getChildWriter)||void 0===r?void 0:r.call(o.ZP,c))||o.ZP,h=["global","orderIndex","overwrite","important",a.uz,a.Os,a.ny,a.wb],p=function(t,e,i){var r=t&&e?t.querySelector(e):t,o=r&&r.textContent;return"string"==typeof o?o.trim():i},g=function(t,e,i){var r=p(t,e,i);try{return JSON.parse(r)}catch(t){return r}},v=function(t){void 0===t&&(t="");var e=t.includes("?")?t.split("?")[1]||"":t,i=e?e.split("&"):[];return i&&i.length&&i.reduce((function(t,e){var i=e.split("=");try{var r=i[0]&&decodeURIComponent(i[0]),o=i[1]&&decodeURIComponent(i[1]);(r||o)&&(t[r]=o&&o.replace(/\+/g," "))}catch(t){}return t}),{})||{}},f=function(t,e){void 0===t&&(t=""),void 0===e&&(e={});var i=[];Object.keys(e).forEach((function(t){var r=e[t],o=[encodeURIComponent(t)];null!=r&&o.push(encodeURIComponent(r)),i.push(o.join("="))}));var r=t.indexOf("?")>-1?"&":"?";return i.length?t+r+i.join("&"):t},m=function(t){if(!t)return null;if(window.DOMParser){var e=(new window.DOMParser).parseFromString(t,"application/xml");return!e||e.querySelector("parsererror")?(u.warn("parse.parseXml() Parse error"),null):e}if(void 0!==window.ActiveXObject&&new window.ActiveXObject("Microsoft.XMLDOM")){var i=new window.ActiveXObject("Microsoft.XMLDOM");return i.async="false",i.loadXML(t),i}return u.warn("parse.parseXml() XML Parser not available"),null},b=function(t,e){if(void 0===e&&(e={}),!t)return null;var i=l({optionName:"option",onlyTopLevel:!1},e),r=i.optionName,o=i.onlyTopLevel,s=t&&(g(t,"important")||t.getAttribute("important")),d=t.querySelector(r+"s"),c=d&&(g(d,"important")||d.getAttribute("important")),u=d&&d.getAttribute("overwrite"),h=t.querySelectorAll(r+"s > "+r);if(!h||!h.length)return null;if(o)return Array.from(h);var v=Array.from(h).reduce((function(t,e){var i,r=e.getAttribute("name"),o=e.getAttribute("important"),l=t[r]=((i={})[a.ny]=p(e),i[a.wb]=!0,i);return w(e,l),null!=o?l[a.uz]=(0,n.MV)(o):null!=c?l[a.uz]=(0,n.MV)(c):null!=s&&(l[a.uz]=(0,n.MV)(s)),t}),{});return u&&(v[a.Os]=u),c?v[a.uz]=(0,n.MV)(c):s&&(v[a.uz]=(0,n.MV)(s)),v};"undefined"!=typeof exports&&(exports.parseXmlOptions=b);var y=function(t,e,i){void 0===i&&(i="");var r=i+'Extension[type="'+e+'"]',o=t&&t.querySelector(r),n=0;if(o){var a=t.querySelectorAll(i+"Extension"),s=t.querySelectorAll(r+" ~ Extension");n=a.length-s.length-1}return{xml:o,orderIndex:n}};function A(t,e,i,r){var o=this,n=r||{},a=n.parentPrefix,s=n.multipleOptionName,d=y(t,e,a||""),c=d.xml,u=d.orderIndex;if(c){var h=s&&b(c,{optionName:s,onlyTopLevel:!0});return h?w(c,h.reduce((function(t,e){return p.call(o,e,u,t)}),{})):p.call(this,c,u)}return null;function p(t,e,i){var r=g.call(this,t)||{};void 0!==e&&(r.orderIndex=e);var o=r.name;if(!o&&!i)return r;if(!o&&i)throw Error(" getToContainer() the name property does not found");return o&&!i&&(i={}),o&&o.length&&(i[o]=r),i}function g(t){var e=i.call(this,t);if(!e)return null;var r=w(t)||{};return l(l({},e),{},{orderIndex:u},r)}}function w(t,e){void 0===e&&(e={});var i=g(t,"global")||(0,n.MV)(t.getAttribute("global"));i&&(e.global=i);var r=g(t,"important")||(0,n.MV)(t.getAttribute("important"));r&&(e[a.uz]=r);var o=g(t,"overwrite")||t.getAttribute("overwrite");null!=o&&(e[a.Os]=o);var s=g(t,"remove")||(0,n.MV)(t.getAttribute("remove"));return s&&(e[a.HT]=s),e}var P=function(t){var e=/^\s*(?:(?:(\d\d):)?(\d\d):)?(\d\d)(?:[.,](\d+))?\s*$/.exec(t);return e?60*(+e[1]||0)*60+60*(+e[2]||0)+(+e[3]||0)+ +("0."+(e[4]||0)):1/0},O=function(t){var e=/^\s*([\d.]+)%\s*$/.exec(t);return e?(+e[1]||0)/100:null},S=function(t){var e=t&&t.querySelectorAll("Ad");if(!e||!e.length)return[];var i=t&&t.querySelectorAll("Extensions > Extension > Ad");return i&&i.length?(e=Array.from(e),i=Array.from(i),e.reduce((function(t,e){return i.includes(e)||t.push(e),t}),[])):Array.from(e)};function _(t){var e=t&&t.querySelector("InLine > Creatives > Creative > Linear > AdParameters");return e?p(e):null}},196:(t,e,i)=>{i.d(e,{BH:()=>V,Dp:()=>F,I6:()=>D,Ku:()=>k,MV:()=>j,Me:()=>T,NA:()=>L,Ug:()=>f,Wn:()=>b,Yj:()=>C,dN:()=>w,er:()=>P,h_:()=>_,hd:()=>H,ht:()=>p,k:()=>A,k$:()=>y,pL:()=>m,pP:()=>E,s6:()=>M,tS:()=>h,uZ:()=>g,wf:()=>v,xb:()=>x,xl:()=>N});var r,o=i(816),n=i(731),a=i(506);function s(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function l(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?s(Object(i),!0).forEach((function(e){d(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function d(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var c="utils",u=(null===a.ZP||void 0===a.ZP||null===(r=a.ZP.getChildWriter)||void 0===r?void 0:r.call(a.ZP,c))||a.ZP,h=function(t,e){return t.reduce((function(t,e){return t.then(e)}),Promise.resolve(e))},p=function(t,e){var i=t&&t.length;if(!i)return Promise.resolve(!1);var r=[];return new Promise((function(o,n){var a=0,s=function(t){if(t>=i)if(r.length){var e=r.filter((function(t){return t.fatal}));n(e.length&&e[0]||r[0])}else o()};t.forEach((function(t){t(e).then((function(){return s(++a)})).catch((function(e){var i=e.message;i&&(e.message=(t&&t.name&&'Extension "'.concat(t.name).concat('": '))+" "+i+". "+(t&&!t.name&&t.toString&&t.toString())),r.push(e),s(++a)}))}))}))},g=function(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=1),Math.max(e,Math.min(i,t))},v=function(t){return t.mozHasAudio||t.webkitAudioDecodedByteCount||t.audioTracks&&t.audioTracks.length},f=function(t){return void 0===t&&(t=""),0===(""+t).length||/%|px/.test(""+t)?""+t:t+"px"},m=function(t){return void 0===t&&(t=""),""+t&&!/ms|s/.test(""+t)?t+"ms":""+t};function b(t,e){try{return t.top.location.href}catch(t){}try{var i=t.location.ancestorOrigins;if(i.length>0)return i[i.length-1]}catch(t){}try{if(e.referrer)return e.referrer}catch(t){}return null}function y(t,e){return t||(t=window),e||(e=t.document),b(t,e)||t.location.href}function A(t,e,i){void 0===i&&(i=null),i||(i=t);var r=document.documentElement,o=null,n=null,a=null,s=null;try{o=i.offsetHeight||i.innerHeight||window.innerHeight,n=i.innerWidth||window.innerWidth,s=(a=!isNaN(i.scrollTop)&&i.scrollTop||(window.pageYOffset||r.scrollTop)-(r.clientTop||0))+o}catch(t){u.error("getModuleDimensions() "+t+" ")}var l=e.getBoundingClientRect(),d=t.getBoundingClientRect&&t.getBoundingClientRect().top||0;return{viewportHeight:o,viewportWidth:n,viewportTop:a,viewportBottom:s,moduleTop:l.top+d}}function w(t,e){t&&(0,o.Zs)(t,{width:f(e.width),height:f(e.height)})}function P(t){if(!(0,o.Re)(t))return{};var e=getComputedStyle(t),i=e.paddingTop,r=e.paddingRight,n=e.paddingBottom,a=e.paddingLeft,s=e.marginTop,l=e.marginRight,d=e.marginBottom,c=e.marginLeft,u=e.borderTopWidth,h=e.borderRightWidth,p=e.borderBottomWidth,g=e.borderLeftWidth,v=e.width,f=e.height,m=t.getBoundingClientRect(),b=m.width,y=m.height;v=parseFloat(v)||0,f=parseFloat(f)||0,u=parseFloat(u)||0,h=parseFloat(h)||0,p=parseFloat(p)||0,g=parseFloat(g)||0,i=parseFloat(i)||0,r=parseFloat(r)||0,n=parseFloat(n)||0,a=parseFloat(a)||0,s=parseFloat(s)||0,l=parseFloat(l)||0,d=parseFloat(d)||0,c=parseFloat(c)||0;var A=t.clientWidth,w=t.clientHeight,P=t.offsetHeight,O=t.offsetWidth,S=function(t){return t<0?0:t};return{paddingTop:i,paddingRight:r,paddingBottom:n,paddingLeft:a,marginTop:s,marginRight:l,marginBottom:d,marginLeft:c,top:i+S(s),right:r+S(l),bottom:n+S(d),left:a+S(c),clientWidth:A,clientHeight:w,width:b,height:y,offsetHeight:P,offsetWidth:O,insideWidth:O-a-r-g-h,insideHeight:P-i-n-u-p,floatInsideWidth:b-a-r-g-h,floatInsideHeight:y-i-n-u-p,outsideWidth:O?O+S(c)+S(l):Math.max(S(c),S(l)),outsideHeight:P?P+S(s)+S(d):Math.max(S(s),S(d)),floatOutsideWidth:b?b+S(c)+S(l):Math.max(S(c),S(l)),floatOutsideHeight:y?y+S(s)+S(d):Math.max(S(s),S(d)),borderTopWidth:u,borderRightWidth:h,borderBottomWidth:p,borderLeftWidth:g,widthFromStyle:v,heightFromStyle:f,rect:t.getBoundingClientRect()}}function O(t,e){var i=t.getBoundingClientRect(),r=i.bottom-i.top,o=[C(i)];o[0].element=t,E(window,(function(t){if(t){var e=C(t.getBoundingClientRect());e.win=t,o.push(e)}})),o.reverse();var n=o[0].win&&T(o[0].win),a=n&&n.clientWidth||null,s=n&&n.clientHeight||null,l=s?s+o[0].top:null,d=a?a+o[0].left:null;o.reduce((function(t,e){return e.bottom+=t.top,e.top+=t.top,e.right+=t.left,e.left+=t.left,e}));var c=Math.max.apply(null,o.map((function(t){return t.top}))),h=Math.max.apply(null,o.map((function(t){return t.left}))),p=Math.min.apply(null,o.map((function(t){return t.bottom})));null!==l&&(p=Math.min(p,l));var g=Math.min.apply(null,o.map((function(t){return t.right})));null!==d&&(g=Math.min(g,d));var v=c,f=h,m=p,b=g,y=(i.bottom-i.top)*(i.right-i.left),A=(m-v)*(b-f),w=A<=0?0:A/y,P=a*s;if(!A&&!r){var O=o.filter((function(t){return t.element})),S=o.filter((function(t){return!t.element}));O.length&&S.length&&S.some((function(t){return t.top<=O[0].top}))&&S.some((function(t){return t.bottom>=O[0].bottom}))&&(w=1)}u.none(".getVisibilityByRect() intersectionRatio="+w,1);var _={intersectionRatio:w,visibility:100*w^0,moduleSquare:y,screenSquare:P,relationSize:y/P*100^0,boundingClientRect:i};return u.none(".getVisibilityByRect() result="+JSON.stringify(_)),e&&e(_),_;function C(t){return{top:t.top,bottom:t.bottom,left:t.left,right:t.right}}}function S(t,e,i){u.none("._getVisibilityByIntersectionObserver");var r=l(l({},{continueWatch:!1,threshold:[]}),i).threshold;W&&u.trace("._getVisibilityByIntersectionObserver threshold="+r.join(",")+" ");var o=new IntersectionObserver(function(t){t.forEach((function(t){var i=t.boundingClientRect,r=t.rootBounds,o=t.intersectionRatio,n=t.target,a=R(i.width)*R(i.height),s=r?r.width*r.height:null;if(null!==s){W&&u.trace(".onEntry() entry.intersectionRatio="+o+" target="+N(n)+" screenSquare="+s,1,"pink");var l={intersectionRatio:o,visibility:0^Math.round(100*o),moduleSquare:a,screenSquare:s,relationSize:s?a/s*100^0:null,boundingClientRect:i};e(l)}}))}.bind(this),{threshold:r.sort()});return o.observe(t),o}function _(t,e){var i=this;void 0===e&&(e=100);var r=new Promise((function(t){return setTimeout(t,e,null)})),o=new Promise((function(e){window.IntersectionObserver?S.call(i,t,e,{threshold:[0,1]}):O.call(null,t,e)}));return Promise.race([r,o]).then((function(t){return n.call(i,t)})).catch((function(t){var e=t&&(t.message||t);return u.error(".getVisibility() "+e),n.call(i)}));function n(e){return void 0===e&&(e=null),(e&&Promise.resolve(e)||window.IntersectionObserver&&(e=O.call(null,t))&&Promise.resolve(e)||Promise.resolve(null)).catch((function(t){var e=t&&(t.message||t);return u.error(".getVisibility() "+e),null}))}}function C(t,e,i){var r=l(l({},{threshold:[],continueWatch:!0,registerHandle:function(){throw Error("utils watchVisibility() registerHandle must be defined")}}),e),o=r.threshold,n=r.registerHandle,a=r.continueWatch;if(W&&u.trace(".watchVisibility() window.IntersectionObserver="+window.IntersectionObserver+" threshold=["+o.join(",")+"] "),window.IntersectionObserver)return S.call(this,t,i,{continueWatch:a,threshold:o});var s=n(O.bind(null,t,i)),d=s.handler,c=s.event,h=s.scrollNode;return O.call(null,t,i),{disconnect:function(){W&&u.trace("watchVisibility():disconnect() event="+c+" element="+t,1,"pink"),h&&h.removeEventListener(c,d)}}}function E(t,e){for(var i=t,r=t;;){try{i=r.parent&&r.parent.document||r.parent&&r.parent.contentWindow?r.parent:r,i=r,r=r.parent}catch(t){return e&&e(null),T(r)}if(e&&e(I(r,i)),r===i)return T(i)}}function D(t){try{if(t.top&&T(t.top))return t.top}catch(t){return null}return null}function I(t,e){if(!t||!t.frames)return null;if(t===e)return T(t);var i=T(t).querySelectorAll("iframe"),r=[].filter.call(i,(function(t){return t.contentWindow===e}));return r.length?r[0]:null}function T(t){return t&&t.document&&t.document.documentElement||t&&t.contentWindow&&t.contentWindow.document.documentElement||t}var V=function(){var t=null,e=null;this.promise=new Promise((function(i,r){t=i,e=r})),this.resolve=t,this.reject=e};function k(t,e,i){var r=Error(e+" ("+(t&&t.message)+")");return i?r.code=i:t&&t.code&&(r.code=t.code),t&&t.name&&(r.name=t.name),r}var x=function(t){return!t||"object"==typeof t&&(Array.isArray(t)&&!t.length||!Object.keys(t).length)},j=function(t){return t&&(!0===t||"true"===t||"1"===t||1===t)||!1};function R(t,e,i){return void 0===e&&(e=.1),void 0===i&&(i=0),Math.abs(t)>=e?t:i}function M(t,e,i){return void 0===i&&(i=.1),Math.abs(t-e)>i}function N(t,e){void 0===e&&(e=["display","visibility"]);var i=t&&getComputedStyle(t)||{},r=e&&e.length&&Object.keys(i).filter((function(t){return e.includes(t)})).map((function(t){return t+"='"+i[t]+"'"})).join(" ")||"";return t&&t.tagName&&"("+t+")("+t.tagName+"."+(t.className&&t.className.split&&t.className.split(" ").join("."))+") "+r||"[not HTMLElement]"}function L(t,e){if("string"==typeof t){if(t.includes("%")){var i=t.split("%")[0];return parseFloat(i)*parseFloat(e)*.01}return parseFloat(t)}return parseFloat(t)}function F(t,e,i){e&&e.trace("."+(i||"")+". restoreSavedAdParams() Restoring containers");var r=t||[];return r.forEach((function(t){if("function"==typeof t)t();else{var r=t||{},n=r.node,a=r.styles;n&&a&&((0,o.Zs)(n,a||{}),e&&e.trace("."+(i||"")+" restoreSavedAdParams() node:"+N(n)+" was restores with styles:\n"+JSON.stringify(a,null,2)+")"))}})),r.length}var W=j((0,n.L2)("intersections.trace")),H=function(t){t&&"function"!=typeof(null==t?void 0:t._subscribe)&&"function"!=typeof(null==t?void 0:t._subscribeOnce)&&(t._subscribe=t.subscribe,t._subscribeOnce=t.subscribeOnce)}},180:(t,e,i)=>{i.d(e,{Z:()=>r});const r='<style>@keyframes videonow-spin{0%{transform:rotate(0deg);-webkit-transform:rotate(0deg)}to{transform:rotate(360deg);-webkit-transform:rotate(360deg)}}</style><svg style="animation:videonow-spin 1s linear infinite" viewBox="0 0 128 128"><path fill="none" stroke="url(#a)" stroke-width="2.77" d="M1252.52 595.235a31.93 31.93 0 0 1-17.5 5.2c-17.7 0-32.07-14.368-32.07-32.064 0-17.694 14.37-32.06 32.07-32.06 15.31 0 28.13 10.756 31.3 25.118" transform="translate(-2164.94 -961.788) scale(1.8048)"/><defs><radialGradient id="a" cx="0" cy="0" r="1" gradientTransform="rotate(-3.67 9382.41 -18979.953) scale(36.57698)" gradientUnits="userSpaceOnUse"><stop offset="0%" stop-color="#79669C" stop-opacity="0"/><stop offset="95%" stop-color="#79669C"/><stop offset="100%" stop-color="#fff"/></radialGradient></defs></svg>'}},e={};function i(r){var o=e[r];if(void 0!==o)return o.exports;var n=e[r]={id:r,loaded:!1,exports:{}};return t[r](n,n.exports,i),n.loaded=!0,n.exports}i.d=(t,e)=>{for(var r in e)i.o(e,r)&&!i.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.hmd=t=>((t=Object.create(t)).children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t=function(){function t(){this._eventListeners={},this._internalEventListeners={}}var e=t.prototype;return e._subscribe=function(t,e,i){void 0===i&&(i=null),t=i&&t.bind(i)||t,this._eventListeners[e]=[].concat(this._eventListeners[e]||[],t),this._internalEventListeners[e]=[].concat(this._internalEventListeners[e]||[],t)},e.subscribe=function(t,e,i){var r,o;void 0===i&&(i=null),null==this||null===(r=this.logger)||void 0===r||null===(o=r.trace)||void 0===o||o.call(r,"External subscribe on event type "+e),t=i&&t.bind(i)||t,this._eventListeners[e]=[].concat(this._eventListeners[e]||[],t)},e._subscribeOnce=function(t,e){var i=this;this._subscribe((function r(){t.apply(void 0,arguments),i.unsubscribe(r,e)}),e)},e.subscribeOnce=function(t,e){var i,r,o=this;null==this||null===(i=this.logger)||void 0===i||null===(r=i.trace)||void 0===r||r.call(i,"External subscribeOnce on event type "+e);this.subscribe((function i(){t.apply(void 0,arguments),o.unsubscribe(i,e)}),e)},e.unsubscribe=function(t,e){this&&(this._eventListeners[e]=[].concat(this._eventListeners[e]||[]).filter((function(e){return e!==t})),this._internalEventListeners[e]=[].concat(this._internalEventListeners[e]||[]).filter((function(e){return e!==t})))},e.unsubscribeType=function(t){this&&(this._eventListeners[t]=[],this._internalEventListeners[t]=[])},e.unsubscribeAll=function(){this._eventListeners={},this._internalEventListeners={}},e._trigger=function(t,e){for(var i=this,r=arguments.length,o=new Array(r>2?r-2:0),n=2;n<r;n++)o[n-2]=arguments[n];(t[e]||[]).forEach((function(t){try{t.apply(i,o)}catch(o){var r,n,a,s;null==i||null===(r=i.logger)||void 0===r||null===(n=r.warn)||void 0===n||n.call(r,'Error in the handler of event "'+e+'" '+t),null==i||null===(a=i.logger)||void 0===a||null===(s=a.warn)||void 0===s||s.call(a,o.stack)}}))},e.trigger=function(){for(var t,e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];(t=this._trigger).call.apply(t,[this,this._eventListeners].concat(i))},e.triggerInternal=function(){for(var t,e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];(t=this._trigger).call.apply(t,[this,this._internalEventListeners].concat(i))},t}(),e=i(816),r=i(731),o=i(506),n=i(196);function a(t,e){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},a(t,e)}var s="Managed",l=function(t){var i,l;function d(e){var i;void 0===e&&(e={});var a=(0,n.MV)((0,r.L2)("managed.trace")),l=e&&e.ancestor&&""+e.ancestor||s,d=e&&(e.logger||e.moduleAPI&&e.moduleAPI.logger)||o.ZP;return a&&d.trace(l+".constrictor()"),(i=t.call(this)||this).logger=d,i.Managed=l,i.traceLogEnabled=a,i._vpaidEventListeners=[],i._domEventListeners=[],i._patchedMethods=[],i._domNodes=[],i._timeouts=[],i._destroyableObjects=[],i}l=t,(i=d).prototype=Object.create(l.prototype),i.prototype.constructor=i,a(i,l);var c=d.prototype;return c._addDOMNode=function(t,e){return void 0===e&&(e=0),this._domNodes.push({node:t,removeDelay:e}),t},c._removeDOMNode=function(t){(0,e.GA)(t),this._domNodes=this._domNodes.filter((function(e){return e!==t}))},c._addDOMEventListener=function(t,e,i,r){return this.traceLogEnabled&&this.logger.trace(this.Managed+".addDOMEventListener("+e+")"),this._domEventListeners.push({node:t,name:e,listener:i}),t.addEventListener(e,i,r),i},c._removeDOMEventListener=function(t,e,i){this.traceLogEnabled&&this.logger.trace(this.Managed+".removeDOMEventListener("+e+")"),this._domEventListeners=this._domEventListeners.filter((function(r){return r.node!==t||r.name!==e||r.listener!==i||(t.removeEventListener(e,i),!1)}))},c._addVPAIDEventListener=function(t,e,i){return(0,n.hd)(t),this.traceLogEnabled&&this.logger.trace(this.Managed+".addVPAIDEventListener("+e+")"),this._vpaidEventListeners.push({vpaid:t,name:e,listener:i}),t._subscribe(i,e),i},c._removeVPAIDEventListener=function(t,e,i){this.traceLogEnabled&&this.logger.trace(this.Managed+".removeVPAIDEventListener("+e+")"),this._vpaidEventListeners=this._vpaidEventListeners.filter((function(r){return r.vpaid!==t||r.name!==e||r.listener!==i||(t.unsubscribe(i,e),!1)}))},c._patchMethod=function(t,e,i){this.traceLogEnabled&&this.logger.trace(this.Managed+".patchMethod("+e+")");var r=t[e];return i._originalHandler=r,t[e]=i,this._patchedMethods.push({object:t,method:e}),r.bind(t)},c._restoreMethod=function(t,e){this.traceLogEnabled&&this.logger.trace(this.Managed+".restoreMethod("+e+")"),this._patchedMethods=this._patchedMethods.filter((function(i){return i.object!==t||i.method!==e||(t[e]=t[e]._originalHandler,!1)}))},c._removeEventListeners=function(){var t=this;this.traceLogEnabled&&this.logger.trace(this.Managed+"._removeEventListeners");var e=this._vpaidEventListeners,i=this._domEventListeners;e.length&&(this.traceLogEnabled&&this.logger.trace(this.Managed+".destroy() Removing VPAID event listeners ("+e.length+")"),e.forEach((function(e){var i=e.vpaid,r=e.name,o=e.listener;t._removeVPAIDEventListener(i,r,o)}))),i.length&&(this.traceLogEnabled&&this.logger.trace(this.Managed+".destroy() Removing DOM event listeners ("+i.length+")"),i.forEach((function(e){var i=e.node,r=e.name,o=e.listener;t._removeDOMEventListener(i,r,o)})))},c._destroy=function(){var t=this;this.traceLogEnabled&&this.logger.trace(this.Managed+"._destroy()");var i=this._patchedMethods,r=this._domNodes,o=this._timeouts,n=this._destroyableObjects;if(this._removeEventListeners(),i.length&&(this.traceLogEnabled&&this.logger.trace(this.Managed+".destroy() Restoring patched methods ("+i.length+")"),i.forEach((function(e){var i=e.object,r=e.method;t._restoreMethod(i,r)}))),r.length&&(this.traceLogEnabled&&this.logger.trace(this.Managed+".destroy() Removing DOM elements ("+r.length+")"),r.forEach((function(i){var r=i||{},o=r.node,n=r.removeDelay;n>0?(t.traceLogEnabled&&t.logger.trace(t.Managed+".destroy() Removing DOM element {"+o+") after "+n+" ms"),setTimeout((function(){t.traceLogEnabled&&t.logger.trace(t.Managed+".destroy() timeout "+n+" ms is finished. Removing DOM element {"+o+")"),(0,e.GA)(o)}),n)):(0,e.GA)(o)}))),o.length&&(this.traceLogEnabled&&this.logger.trace(this.Managed+".destroy() Removing timeouts ("+o.length+")"),o.forEach((function(e){t._removeTimeout(e.name)}))),n.length){var a=this._delayRemovingControls;this.traceLogEnabled&&this.logger.trace(this.Managed+".destroy() Removing destroyableObjects ("+n.length+")"),n.forEach((function(e){var i=e.getName&&e.getName(),r=(i&&a&&a[i]||{}).delay;r&&r>0?(t.traceLogEnabled&&t.logger.trace(t.Managed+".destroy() Removing destroyableObject ("+i+") with delay "+r+" ms"),setTimeout((function(){t._removeDestroyableObject(e),t.traceLogEnabled&&t.logger.trace(t.Managed+".destroy() Removed destroyableObject ("+i+") after delay "+r+" ms")}),r)):t._removeDestroyableObject(e)}))}},c._addTimeout=function(t,e,i){this.logger.none(this.Managed+".addTimeout("+t+")"),this._removeTimeout(t);var r=setTimeout(e,i);return this._timeouts.push({name:t,timeoutId:r}),e},c._removeTimeout=function(t){this.logger.none(this.Managed+".removeTimeout("+t+")"),this._timeouts=this._timeouts.filter((function(e){return e.name!==t||(clearTimeout(e.timeoutId),!1)}))},c._addDestroyableObject=function(t){this.logger.none(this.Managed+"._addDestroyableObject("+t+")"),t&&t._destroy&&this._destroyableObjects.push(t)},c._removeDestroyableObject=function(t){this._destroyableObjects=this._destroyableObjects.filter((function(e){var i=e===t;return i&&e&&e._destroy&&e._destroy(),!i}))},d}(t),d=i(113);function c(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function u(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?c(Object(i),!0).forEach((function(e){h(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function h(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function p(t,e){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},p(t,e)}var g="Vpaid",v=function(t){var e,i;function r(e){var i;void 0===e&&(e={});var r=e&&e.ancestor&&""+e.ancestor||"Module::Vpaid",n=e&&(e.logger||e.moduleAPI&&e.moduleAPI.logger)||o.ZP;return n.trace(r+".constructor() options.ancestor="+r),(i=t.call(this,u(u({},e),{},{ancestor:r,logger:n}))||this).Vpaid=r,i.options=e,i.logger=n,i.adLinear=!0,i.adWidth=0,i.adHeight=0,i.adExpanded=!1,i.adSkippableState=!0,i.adRemainingTime=0,i.adDuration=0,i.adVolume=0,i.adCompanions="",i.adIcons=!1,i.tapholdTimer=null,i}i=t,(e=r).prototype=Object.create(i.prototype),e.prototype.constructor=e,p(e,i);var n=r.prototype;return n.getAdLinear=function(){return this.adLinear},n.getAdWidth=function(){return this.adWidth},n.getAdHeight=function(){return this.adHeight},n.getAdAspectRatio=function(){var t=this.getAdWidth(),e=this.getAdHeight();return isNaN(t)||isNaN(e)||0===t?9/16:e/t},n.getAdExpanded=function(){return this.adExpanded},n.getAdSkippableState=function(){return this.adSkippableState},n.getAdRemainingTime=function(){return this.adRemainingTime},n.getAdDuration=function(){return this.adDuration},n.getAdElapsedTime=function(){var t=this.getAdDuration(),e=this.getAdRemainingTime();return t===1/0||e===1/0?0:t-e},n.getAdVolume=function(){return this.adVolume},n.getAdCompanions=function(){return this.adCompanions},n.getAdIcons=function(){return this.adIcons},n.handshakeVersion=function(t){return"2.0"},n.initAd=function(t,e,i,r,o,n){return void 0===o&&(o={}),void 0===n&&(n={}),this.adLinear=!0,this.adWidth=t,this.adHeight=e,this.adExpanded=!1,this.adSkippableState=!0,this.adRemainingTime=0,this.adDuration=0,this.adVolume=this.adVolume||0,this.adCompanions="",this.adIcons=!1,this.viewMode=i,this.desiredBitrate=r,this.creativeData=o,this.environmentVars=n,this.useExistsVideoSlot=n.useExistsVideoSlot,this.options=u(u({},this.options),n.options),Promise.resolve()},n.resizeAd=function(t,e,i){void 0===i&&(i=this.viewMode),this.adWidth=t,this.adHeight=e,this.viewMode=i,this.trigger("AdSizeChange")},n.startAd=function(){this.trigger("AdStarted")},n.stopAd=function(){this.trigger("AdStopped")},n.pauseAd=function(){this.trigger("AdPaused")},n.resumeAd=function(){this.trigger("AdResumed"),this.trigger("AdPlaying")},n.expandAd=function(){this.setAdExpanded(!0)},n.collapseAd=function(){this.setAdExpanded(!1)},n.skipAd=function(){this.trigger("AdSkipped")},n.setAdExpanded=function(t){this.adExpanded!==t&&(this.adExpanded=t,this.trigger("AdExpandedChange"))},n.setAdSkippableState=function(t){return this.adSkippableState!==t&&(this.logger.trace("."+this.Vpaid+" setAdSkippableState("+t+") prev="+this.adSkippableState),this.adSkippableState=t,this.trigger("AdSkippableStateChange"),!0)},n.setAdVolume=function(t,e){var i=this;return void 0===e&&(e={}),this.adVolume!==t?(this.adVolume=t,setTimeout((function(){return i.trigger("AdVolumeChange")}),1),t):(e.forceTrigger&&this.trigger("AdVolumeChange"),null)},n._destroy=function(){this.logger.trace(this.Vpaid+"._destroy()"),t.prototype._destroy.call(this),this.trigger("AdDestroyed"),this.creativeData=null,this.environmentVars=null,this.options=null},r.create=function(){throw new Error("Abstract method call Vpaid.create()")},n.getMediaInfo=function(){return Promise.resolve(this.media||{})},n.getDebugInfo=function(){return Promise.resolve({options:this.options})},n.getAdIframes=function(){return Promise.resolve(null)},n.toString=function(){return g},r}(l),f="InLine > Creatives > Creative > Linear > MediaFiles",m=function(t){return t&&(0,d.FB)(t,"InLine>Creatives>Creative>Linear>Duration")},b=function(t){return t&&["handshakeVersion","initAd","startAd","stopAd","skipAd","resizeAd","pauseAd","resumeAd","expandAd","collapseAd"].every((function(e){return"function"==typeof t[e]}))},y="video",A=[y,"audio","hybrid"];const w={GENERAL_WRAPPER_ERROR:300,TIMEOUT_OF_VAST_URI:301,NO_ADS_RESPONSE:303,GENERAL_LINEAR_ERROR:400,TIMEOUT_OF_MEDIA:402,MEDIA_FILE_NOT_FOUND:403,FAIL_MEDIA_DISPLAY:405,GENERAL_VPAID_ERROR:901,VPAID_JS_ERROR:1010,GLOBAL_TIMEOUT_HAPPENED:1011,VPAID_INIT_AD_TIMEOUT_HAPPENED:1012,START_AD_TIMEOUT_HAPPENED:1013,FORMAT_ERROR:1020,AD_SIZE_ERROR:1030,AD_IMPRESSION_NOT_HAPPENED_ERROR:1040,AD_STARTED_NOT_HAPPENED_ERROR:1041,AD_STAT_ERROR:1050,DEFAULT_AD_NEXT_WITHOUT_ERROR_CODE:1060,FAIL_MEDIA_START:3e3};function P(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function O(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?P(Object(i),!0).forEach((function(e){S(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):P(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function S(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function _(t,e){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_(t,e)}var C="Vpaid",E="Format[Vpaid]",D=function(t){var e,i;function r(e,i){var r,n=i&&i.ancestor&&i.ancestor+":"+E||"Module::Format[Vpaid]",a=i&&(i.logger||i.moduleAPI&&i.moduleAPI.logger)||o.ZP;a.trace(n+".constructor()");var s=O(O({},i),{},{ancestor:n});return(r=t.call(this,s)||this)["Format[Vpaid]"]=n,r.options=s,r.module=e,r.logger=a,r}i=t,(e=r).prototype=Object.create(i.prototype),e.prototype.constructor=e,_(e,i);var n=r.prototype;return n.toString=function(){return E},n.waitBeforeLoadUrl=function(t){return this.logger.trace(this["Format[Vpaid]"]+".waitBeforeLoadUrl("+t+")"),Promise.resolve(t)},n._initDataXml=function(){return this.logger.trace(this["Format[Vpaid]"]+".initDataXml()"),Promise.resolve()},n._vpaidInitAd=function(){return this.logger.trace(this["Format[Vpaid]"]+".vpaidInitAd()"),Promise.resolve()},n.getReachInventoryFactory=function(){return null},n.hasReachInventoryFactory=function(){return!1},n._destroy=function(){this.logger.trace(this["Format[Vpaid]"]+".destroy()"),t.prototype._destroy.call(this)},n.abort=function(){},n.isFloatingMode=function(){return!1},n.getModuleOptions=function(){var t;return{isInsideTextContent:!1,startingVolume:null!=(t=this.options.startingVolume)?t:0}},n.getSlotSize=function(){return{width:0,height:0}},n.correctAdSize=function(t,e){return{adWidth:t,adHeight:e}},n.getOptions=function(){return O({},this.options)},n.getBaseName=function(){return C.toLowerCase()},r}(l);function I(t,e){return I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},I(t,e)}var T,V="InStream",k=function(t){var e,i;function r(e,i){var r;(r=t.call(this,e,i)||this).onAdStarted=function(){var t,e;r.options.startingVolume&&(r.logger.trace("InStream onAdStarted() setting adVolume=startingVolume="+r.options.startingVolume,2),null===(t=r.module)||void 0===t||null===(e=t.setAdVolume)||void 0===e||e.call(t,r.options.startingVolume))};var o=r.options.moduleAPI||{},n=o.addVPAIDEventListener,a=o.resizeAd;return n("slotSizeChanged",(function(t){var e=t||{},i=e.height,r=e.width,o=e.src,n=o&&o.toLowerCase();n&&("vpaidgoogletag"===n||"vpaidyandexcontext"===n)&&i&&r&&setTimeout((function(){return a(r,i)}))}),function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(r)),r}i=t,(e=r).prototype=Object.create(i.prototype),e.prototype.constructor=e,I(e,i);var o=r.prototype;return o._vpaidInitAd=function(){var e=(this.options||{}).moduleAPI,i=e.getControlNode,r=e.resizeAd,o=e.getVideoSlot,a=e.addVPAIDEventListener,s=i("slot")||i("vpaidSlot");if(!s){var l=o();s=l&&l.parentElement}if(s){var d=(0,n.er)(s),c=d.floatInsideWidth,u=d.floatInsideHeight;c&&u&&r(c,u)}return a("AdStarted",this.onAdStarted,this),t.prototype._vpaidInitAd.call(this)},o.getSlotSize=function(){var t=(this.options||{}).moduleAPI,e=t.getControlNode,i=t.getVideoSlot,r=e("slot")||e("vpaidSlot")||i(),o=(0,n.er)(r);return{width:o.floatInsideWidth,height:o.floatInsideHeight}},o.toString=function(){return"Format[InStream]"},o.getBaseName=function(){return V.toLowerCase()},r}(D),x=i(260),j="initModuleNode",R=(null===o.ZP||void 0===o.ZP||null===(T=o.ZP.getChildWriter)||void 0===T?void 0:T.call(o.ZP,j))||o.ZP;function M(t,i){try{return function(t){var i=t.initScriptParentNode,r=t.lookupNode,o=t.lookupElement,a=t.playerElement,s=t.playerAfter,l=t.playerBefore,d=t.playerSelectorPercent,c=t.playerSelectorTotalMin,u=t.playerDefaultClass,h=t.transitionDuration,p=t.extraSelector,g=t.ignoreCreatePlayerElement,v=t.forceFillingBoundariesModel;r=r||(0,e.V4)(o)||document.body;var f,m,b,y,A=function(){var t=!1;window!==window.top&&(window.document.documentElement.clientHeight>0||x.Ud)&&(t=!0,R.log("initModuleNode.initModuleNode(). Module entered inside iframe and can not change height of the document.",1));return t}(),w=(0,n.MV)(v)||A,P=document.createElement("div");if(a||s||l)if(f=(0,e.V4)(a,d,r,c),(0,e.Re)(f))f.appendChild(P);else if(a&&R.trace("initModuleNode.initModuleNode() playerElement not found ("+a+")"),b=(0,e.V4)(s,d,r,c),(0,e.Re)(b))b.parentNode.insertBefore(P,b.nextSibling);else if(R.trace("initModuleNode.initModuleNode() playerAfter not found ("+s+")"),m=(0,e.V4)(l,d,r,c),(0,e.Re)(m))m.parentNode.insertBefore(P,m);else if(R.trace("initModuleNode.initModuleNode() playerBefore not found ("+l+")"),b=(0,e.V4)(p,d,r,c),(0,e.Re)(b))b.parentNode.insertBefore(P,b.nextSibling),R.trace("initModuleNode.initModuleNode(). inserting after extraSelector ("+p+")");else{if(!g)throw new Error("initModuleNode Could not create player element");document.body.appendChild(P)}else{var O=i&&i.tagName;if(O&&"HEAD"!==O){i.appendChild(P);var S=A?"Module entered inside iframe and can not change height of the document.":"";R.log("initModuleNode.initModuleNode() moduleNode was initialized at parent node of init script. "+S,1),y=i}else{if(!g)throw new Error("initModuleNode Could not create player element. "+("HEAD"===O?" An attempt was detected to include the tag in the HEAD of a page (playerElement="+a+", playerAfter="+s+" playerBefore="+l+")":""));document.body.appendChild(P)}}(0,e.Zs)(P,{boxSizing:"content-box",overflow:"hidden",width:"100%",height:0,transition:"height "+h+"ms ease-out"}),u&&P.classList.add(u);var _=(0,e.Xv)(P,"div",{position:"absolute",top:0,right:0,bottom:0,left:0,fontSize:0,lineHeight:0,margin:0,textAlign:"center"});return{lookupNode:r,moduleNode:P,moduleInnerNode:_,boundariesExists:w,insideIframe:A,elementNode:f,beforeNode:m,afterNode:b,widthNode:y}}(t)}catch(e){var r=t||{},o=r.playerElement,a=r.playerAfter,s=r.playerBefore,l=new Error(e+' (format: "'+i+'" playerElement:"'+o+'" playerAfter:"'+a+'" playerBefore:"'+s+'" url('+window.top.location.href+"))");throw l.code=w.FORMAT_ERROR,l.options=t,l.format=i,l}}var N=i(118),L=function(){function t(t){void 0===t&&(t={}),this.API=t.API,this.showObservableNode=t.showObservableNode,this.isIframe=t.isIframe,this.logger=t.logger,this.forceHeight=t.forceHeight,this.expandingDuration=t.expandingDuration}var e=t.prototype;return e.setAdSizeForceChange=function(){},e.updateModuleNodeSize=function(){throw Error("Not implemented")},e.moduleResizeAd=function(){throw Error("Not implemented")},e._canUpdateModuleNodeSize=function(t){var e=this.API,i=e.isAdHasBeenStarted,r=e.getOptions,o=e.moduleAPI.getAdHeight,n=(r&&r()||{}).expandOnAdLoaded,a=o&&o(),s=t||a&&(i()||n);return this.logger.trace(" _canUpdateModuleNodeSize() ["+s+"] forceUpdate="+t+" adHeight="+a+" isAdHasBeenStarted="+i()+" expandOnAdLoaded="+n),s},e.correctAdSize=function(t,e){return{adWidth:t,adHeight:e}},e.setForceHeight=function(t){return this.forceHeight!==t&&(this.forceHeight=t,!0)},e.getForceHeight=function(){return this.forceHeight},t}();function F(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function W(t,e){return W=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},W(t,e)}var H=function(t){var i,r;function o(e){var i;return(i=t.call(this,e)||this).parentElement=null,F(i)||F(i)}r=t,(i=o).prototype=Object.create(r.prototype),i.prototype.constructor=i,W(i,r);var a=o.prototype;return a.updateModuleNodeSize=function(t){void 0===t&&(t=!1);var i,r,o=this.isIframe,a=this.API,s=a.getModuleNode,l=a.moduleAPI.trigger;if(!this._canUpdateModuleNodeSize(t))return null;var d=s&&s(),c=d.clientWidth,u=d.clientHeight,h=this.parentElement=o?document.body:d&&d.parentElement;if(h){var p=(0,n.er)(h);i=p.floatInsideWidth,r=p.floatInsideHeight}return d&&(0,e.Zs)(d,{width:(0,n.Ug)(i),height:(0,n.Ug)(r)}),((0,n.s6)(u,r,1.2)||(0,n.s6)(c,i,1.2))&&setTimeout((function(){return l("slotSizeChanged")})),{width:i,height:r}},a.moduleResizeAd=function(t){var i=this.isIframe,r=this.API,o=r.getModuleNode,a=r.moduleAPI,s=a.getControlNode,l=a.resizeAd,d=a.setWrapperSize,c=a.getAdHeight,u=a.getAdWidth,h=a.getIndents,p=a.fail,g=s&&s("wrapper");if(!this.parentElement){var v=o&&o();this.parentElement=i?document.body:v&&v.parentElement}var f=this.parentElement,m=z.call(this,t),b=m.width,y=m.height,A=U.call(this,b,y,t),P=A.width,O=A.height,S=A.availableHeightForAd;if(P<0||O<0)b>0&&(null==p||p({code:w.GENERAL_VPAID_ERROR,message:"OutsideBoundariesUpdateStrategy.moduleResizeAd() slot has no width or height to show ad. failing to error."}));else if(c&&c()!==O||c&&u()!==P){var _=getComputedStyle(g).width,C=parseFloat(_);this.logger.none(".moduleResizeAd() resizeAd("+P+", "+O+")");var E=B.call(this),D=E.outsideWrapperHeight,I=E.insideWrapperHeight;if((S!==I||t>1&&P<C)&&(this.logger.log(".moduleResizeAd() setWrapperSize("+(t>1&&C||P)+", "+S+")"),d(S+D-I)),f&&"BODY"===f.tagName){var T=(0,n.er)(f),V=T.borderTopWidth,k=T.borderRightWidth,x=T.borderBottomWidth,j=T.borderLeftWidth,R=f.clientHeight-V-x,M=f.clientWidth-j-k,N=h(),L=N.floatOutsideHeight,F=N.floatOutsideWidth;g&&R&&(0,e.Zs)(g,{top:(0,n.Ug)(R/2-L/2),left:(0,n.Ug)(M/2-F/2)})}l&&l(0^P,0^O)}},a.correctAdSize=function(t,e){var i=U.call(this,t,e,e/t);return{adWidth:i.width,adHeight:i.height}},o}(L);function U(t,e,i){var r=this.API,o=r.getWidthNode,a=r.moduleAPI.getControlNode,s=a&&a("wrapper"),l=o&&o(),d=(0,n.er)(l).floatInsideHeight,c=B.call(this),u=c.outsideWrapperHeight,h=c.insideWrapperHeight,p=c.outsideWrapperWidth,g=c.insideWrapperWidth,v=getComputedStyle(s).width,f=parseFloat(v),m=d-((u||0)-(h||0));return u>d||e>m?(this.logger.trace(".OutsideBoundariesUpdateStrategy       :\n        outsideWrapperHeight("+u+") > containerInsideHeight("+d+")\n        height("+e+") > availableHeightForAd("+m+")"),y.call(this),t>f&&(this.logger.trace(".OutsideBoundariesUpdateStrategy        :\n       width("+t+") > containerInsideWidth("+f+")"),b.call(this,f))):(p>f||t>f)&&(this.logger.trace(".OutsideBoundariesUpdateStrategy       :\n       outsideWrapperWidth("+p+") > containerInsideWidth("+f+")\n       width("+t+") > containerInsideWidth("+f+")"),b.call(this,f-(p-g)),e>m&&(this.logger.trace(".OutsideBoundariesUpdateStrategy        :\n         height("+e+") > availableHeightForAd("+m+")"),y.call(this))),{width:t,height:e,availableHeightForAd:m};function b(r){t=r,e=Math.round(t*i),this.logger.trace(".OutsideBoundariesUpdateStrategy setWidthCalcHeight("+r+"): width="+r+" height="+e)}function y(){e=m,t=Math.round(e/i),this.logger.trace(".OutsideBoundariesUpdateStrategy setWidthCalcHeight() height="+e+" width="+t)}}function z(t){var e=this.API.moduleAPI.getControlNode,i=e&&e("wrapper"),r=getComputedStyle(i).width,o=parseFloat(r),n=0^(this.forceWidth||o);return{width:n,height:0^(this.forceHeight||Math.round(n*t))}}function B(){var t=(0,this.API.moduleAPI.getIndents)();return{outsideWrapperHeight:t.floatOutsideHeight,insideWrapperHeight:t.floatInsideHeight,outsideWrapperWidth:t.floatOutsideWidth,insideWrapperWidth:t.floatInsideWidth}}function Z(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function q(t,e){return q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},q(t,e)}var X=function(t){var i,r;function o(e){var i;return Z(i=t.call(this,e)||this)||Z(i)}r=t,(i=o).prototype=Object.create(r.prototype),i.prototype.constructor=i,q(i,r);var a=o.prototype;return a.updateModuleNodeSize=function(t){if(void 0===t&&(t=!1),!this._canUpdateModuleNodeSize(t))return null;var i=this.API,r=i.getOptions,o=i.getModuleNode,a=i.getWidthNode,s=i.moduleAPI,l=s.getIndents,d=s.trigger,c=(r&&r()||{}).expandingDuration;c=c&&parseFloat(c)||0;var u=a&&a(),h=o&&o(),p=(0,n.er)(h),g=p.clientWidth,v=p.clientHeight,f=l&&l(),m=f.floatOutsideWidth,b=f.floatOutsideHeight,y=u&&(0,n.er)(u).floatInsideWidth||"100%";(0,e.Zs)(h,{width:(0,n.Ug)(y),height:(0,n.Ug)(b)});var A=(0,n.s6)(g,m,1.2);return((0,n.s6)(v,b,1.2)||A&&this.prevPrevWidth!==g)&&(this.prevPrevWidth=g,this.logger.trace(".updateModuleNodeSize() trigger(slotSizeChanged) prevHeight="+v+" moduleNodeHeight="+b),setTimeout((function(){return d("slotSizeChanged")}),c)),{width:m,height:b}},a.moduleResizeAd=function(t){var e=this.API,i=e.getWidthNode,r=e.moduleAPI,o=r.resizeAd,a=r.setWrapperSize,s=r.getControlNode,l=r.fail,d=i&&i(),c=(0,n.er)(d).floatInsideWidth,u=s&&s("wrapper"),h=(0,n.er)(u),p=h.borderTop,g=h.paddingTop,v=h.borderBottom,f=h.paddingBottom,m=Math.min(c,this.forceWidth||c),b=this.forceHeight||m*t^0||0;m>0?(a(b+(p||0)+(v||0)+(g||0)+(f||0)),o&&o(0^m,0^b)):null==l||l({code:w.GENERAL_VPAID_ERROR,message:"OutStreamUpdateStrategy.moduleResizeAd() slot has no width. failing to error."})},a.correctAdSize=function(t,e){var i=this.forceEnableVerticalContent,r=this.API.getModuleNodeSize,o=!1,n=e/t;!x.ai&&n>1&&!i&&(o=!0);var a=r(n).width;return t!==a&&(o?t=(e=9*a/16)/n:(e*=a/t,t=a)),{adWidth:t,adHeight:e}},o}(L);function G(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Q(t,e){return Q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Q(t,e)}var $=function(t){var i,r;function o(e){var i;i=t.call(this,e)||this;var r=e.height,o=e.width;return i.forceInsideHeight=r,i.forceInsideWidth=o,i.parentElement=null,G(i)||G(i)}r=t,(i=o).prototype=Object.create(r.prototype),i.prototype.constructor=i,Q(i,r);var a=o.prototype;return a.setAdSizeForceChange=function(t,e){t&&(this.forceInsideHeight=e),e&&(this.forceInsideWidth=t),this.updateModuleNodeSize()},a.updateModuleNodeSize=function(t){void 0===t&&(t=!1);var i=this.forceInsideWidth,r=this.expandingDuration,o=this.forceInsideHeight,a=this.API,s=a.getModuleNode,l=a.getWidthNode,d=a.moduleAPI.trigger;if(!this._canUpdateModuleNodeSize(t))return null;var c=l&&l(),u=c&&(0,n.er)(c).floatInsideWidth;i>u&&(o*=u/i);var h=K.call(this),p=h.outsideWrapperHeight,g=h.insideWrapperHeight;p&&g&&(o+=p-g);var v=s&&s(),f=v.clientWidth,m=v.clientHeight;v&&(0,e.Zs)(v,{width:(0,n.Ug)(u),height:(0,n.Ug)(o)});var b=(0,n.s6)(f,u,1.2);return((0,n.s6)(m,o,1.2)||b&&this.prevPrevWidth!==f)&&this._canUpdateModuleNodeSize(t)&&(this.prevPrevWidth=f,this.logger.trace(" FixedBoundariesUpdateStrategy updateModuleNodeSize("+t+") prevHeight="+m+" forceInsideHeight="+o+" prevWidth="+f+" widthNodeContentWidth="+u),setTimeout((function(){d("slotSizeChanged")}),r)),{width:i,height:o}},a.moduleResizeAd=function(){var t=this.API.moduleAPI,i=t.getAdHeight,r=t.getAdWidth,o=t.resizeAd,a=t.getControlNode,s=t.setWrapperSize,l=t.fail,d=Y.call(this),c=d.width,u=d.height,h=a&&a("wrapper"),p=(0,n.er)(h),g=p.borderTop,v=p.paddingTop,f=p.borderBottom,m=p.paddingBottom;s((this.forceInsideHeight||0)+(g||0)+(f||0)+(v||0)+(m||0));var b=J.call(this,c,u),y=b.width,A=b.height;if(y<0||A<0)c>0&&(null==l||l({code:w.GENERAL_VPAID_ERROR,message:"FixedBoundariesUpdateStrategy.moduleResizeAd() slot has no width or height to show ad. failing to error."}));else if(i&&i()!==A||i&&r()!==y){this.logger.log("FixedBoundariesUpdateStrategy moduleResizeAd() resizeAd("+y+","+A+")"),o(y,A);var P=a("vpaidSlot");P&&(0,e.Zs)(P,{position:"relative",display:"inline-block",verticalAlign:"middle",width:(0,n.Ug)(y),height:(0,n.Ug)(A)})}},a.correctAdSize=function(t,e){var i=J.call(this,t,e);return{adWidth:i.width,adHeight:i.height}},o}(L);function J(t,e){var i=this.API,r=this.forceInsideWidth,o=this.forceInsideHeight,a=(i||{}).getWidthNode,s=a&&a(),l=s&&(0,n.er)(s).floatInsideWidth;return r>l&&(o*=l/r,r=l),t>r&&(e*=r/t,t=r),e>o&&(t*=o/e,e=o),{width:t,height:e}}function Y(){var t=this.forceInsideHeight;return{width:this.forceInsideWidth,height:t}}function K(){var t=(0,this.API.moduleAPI.getIndents)();return{widthFromStyle:t.widthFromStyle,heightFromStyle:t.heightFromStyle,outsideWrapperHeight:t.floatOutsideHeight,insideWrapperHeight:t.floatInsideHeight,outsideWrapperWidth:t.floatOutsideWidth,insideWrapperWidth:t.floatInsideWidth}}function tt(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function et(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?tt(Object(i),!0).forEach((function(e){it(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):tt(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function it(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function rt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ot(t,e){return ot=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ot(t,e)}var nt="ContentRoll",at="Format[ContentRoll]",st=25,lt={expandOnAdLoaded:!1,shouldStart:"beforeExpand",startMethod:"auto",playerDefaultClass:"vn-player",playerPlaybackClass:"vn-playback",playerExpandedClass:"vn-expanded",playerSelectorPercent:"100%",widthElement:null,playerElement:null,playerSelectorTotalMin:1,playerDesktopStartFactor:.6,playerDesktopStopFactor:.6,playerMobileStartFactor:.5,playerMobileStopFactor:.5,desktopMaxHeight:null,mobileMaxHeight:null,expandingDuration:150,waitScroll:!0,maxSegments:1,minSegments:0,minDistance:1,destroyTimeout:5e3,doNotWatchVisibility:!1,moduleAPI:{},showObservableNode:!1,forceEnableVerticalContent:!1,ignoreCreatePlayerElement:!1,needAfterCloseCompensation:!0,slotMargin:"auto"},dt={expandOnAdLoaded:!0,waitScroll:!1,ignoreCreatePlayerElement:!0},ct=0,ut=0,ht=function(t){var i,r;function a(e,i){var r,a;void 0===i&&(i={});var s=i&&i.ancestor&&i.ancestor+":"+at||"::Format[ContentRoll]",l=i&&i.moduleAPI&&i.moduleAPI.logger||o.ZP,d=(null==l||null===(r=l.getChildWriter)||void 0===r?void 0:r.call(l,at))||l;d.trace(s+".constructor()"),(a=t.call(this,e,et(et(et(et({},lt),"fullscreenroll"===i.formatName?dt:{}),{logger:d}),{},{ancestor:s}))||this)._addPlayerExpandedClass=function(){var t=rt(a),e=t.moduleNode,i=t.options.playerExpandedClass;i&&e.classList.add(i)},a._removePlayerExpandedClass=function(){var t=rt(a),e=t.moduleNode,i=t.options.playerExpandedClass;i&&e.classList.remove(i)},a._proceedToNextDefaultAd=function(t){t&&(a._adHasBeenStarted=!1,a.logger.trace("Format[ContentRoll] @vnProceedToNextDefaultAd",2),a.module.isVpaidStartAdWasInvokedOnce&&a._getModuleVisibility().then(a._checkModuleState.bind(rt(a))))},a["Format[ContentRoll]"]=s,a._adHasBeenLoaded=!1,a._adHasBeenStarted=!1,a._updateStrategy=null,a.watchVisibility=null,a.wasExpanded=!1,a._adPausedPostponedCommand=null,a._showGridTimeoutId=null,i=Tt.call(rt(a),i),a.updateOptions(i);var c=rt(a).options,u=c.playerDesktopStartFactor,h=c.playerDesktopStopFactor,p=c.playerMobileStartFactor,g=c.playerMobileStopFactor,v=c.mobileMaxHeight,f=c.desktopMaxHeight,m=c.hideTopPadding;a._startFactor=parseFloat(x.ai?p:u),a._stopFactor=parseFloat(x.ai?g:h),a._maxHeight=x.ai?v:f,a._initNoAdElement(),a._initDOM();var b=a.options.moduleAPI||{},y=b.setControlData,A=b.addVPAIDEventListener;return y&&y("slot",{node:a.moduleInnerNode}),a.updateControlsLayout((0,n.MV)(m)?0:25),!0===i.withoutBottomBorder&&y&&y("bottomBorder",{node:null,enableWithVPAID:"true"}),a._addVPAIDEventListener(e,"vnProceedToNextDefaultAd",a._proceedToNextDefaultAd),A&&(A("slotSizeChanged",bt.bind(rt(a)),rt(a)),A("vn_VideoSlotRemoved",mt.bind(rt(a)),rt(a)),A("AdPaused",(function(){a._adPausedPostponedCommand&&setTimeout((function(){a._adPausedPostponedCommand&&(a.logger.trace(a["Format[ContentRoll]"]+" @AdPaused calling _adPausedPostponeCommand="+a._adPausedPostponedCommand),a._adPausedPostponedCommand(),a._adPausedPostponedCommand=null)}),1)}),rt(a)),A("AdDestroyed",wt.bind(rt(a)),rt(a))),a}r=t,(i=a).prototype=Object.create(r.prototype),i.prototype.constructor=i,ot(i,r);var s=a.prototype;return s.updateOptions=function(t){var e=this._adHasBeenLoaded,i=this._adHasBeenStarted,r=this.options.doNotWatchVisibility,o=(t||{}).expandOnAdLoaded;this.options=et(et({},this.options),t),this.options.waitScroll=(0,n.MV)(this.options.waitScroll),this.options.expandOnAdLoaded=(0,n.MV)(this.options.expandOnAdLoaded),this.options.needAfterCloseCompensation=(0,n.MV)(this.options.needAfterCloseCompensation);var a=this.options.expandOnAdLoaded;r||!e||i||(o||!0!==a?!0!==o||a||this._watchTempObservableModuleNodeVisibility||(this._switchOffObservableCheckingToModuleNode(),this._switchOnObservableAdvancedNode()):(this._switchOffObservableAdvancedNode(),this._switchOnObservableCheckingToModuleNode()));var s=this.options.expandingDuration;this.expandingDuration=s&&parseFloat(s)||0},s.updateControlsLayout=function(t,i,r){void 0===t&&(t=25),void 0===i&&(i=!1),void 0===r&&(r=null),this.logger.trace(this["Format[ContentRoll]"]+" updateControlsLayout");var o=r||this.options.moduleAPI||{},a=o.setControlData,s=o.getControlNode,l=(0,o.getControlUnionData)("wrapper","css")||{},d=t,c=0,u=0,h=0;if(l.padding){var p=document.createElement("div");(0,e.Zs)([p],{padding:l.padding}),d=p.style.paddingTop,c=p.style.paddingBottom,u=p.style.paddingLeft,h=p.style.paddingRight}var g=function(t){var e=t.top,i=void 0===e?st:e,r=t.bottom,o=t.left,a=t.right,s=function(t,e){return"number"==typeof t?(0,n.Ug)(e+t):"calc("+(0,n.Ug)(t)+" + "+e+"px)"},l=parseInt(i)===st,d=parseInt(r)>0;return{wrapper:{paddingTop:(0,n.Ug)(i)},skipAd:{top:l?(0,n.Ug)(i):0},skipAdCountdown:{top:l?s(i,10):(0,n.Ug)(10)},volume:{right:d?"auto":0,left:d?0:"auto"},title:{color:"gray"},logo:{top:d?"auto":0,bottom:d?0:"auto",right:l||d?0:"50%",left:"auto",transform:l||d?"none":"translateX(50%)"},play:{top:(0,n.Ug)(i),left:(0,n.Ug)(o),width:"calc(100% - "+(0,n.Ug)(o)+" - "+(0,n.Ug)(a)+")",height:"calc(100% - "+(0,n.Ug)(i)+" - "+(0,n.Ug)(r)+")"},vnAfterplay:{marginTop:(0,n.Ug)(i)}}}({top:d,bottom:c,left:u,right:h});Object.keys(g).forEach((function(t){var r=(0,N.cL)({},"css",g[t]);if(a&&a(t,r),i){var o=s&&s(t);o&&(0,e.Zs)(o,r&&r.css||{})}}))},s.setAdSizeForceChange=function(t,e){null==this||this._updateStrategy.setAdSizeForceChange(t,e)},s.getModuleOptions=function(){return{formatExpandingDuration:this.options.expandingDuration||0,isInsideTextContent:!0,vpaidJsVideoSlotShouldBeMuted:!0}},s.getSlotSize=function(){var t=this.moduleNode,e=(this.options||{}).moduleAPI.getAdAspectRatio,i=(0,n.er)(t),r=i.floatInsideWidth;return{width:r,height:i.floatInsideHeight||e&&r*e()||0}},s.waitBeforeLoadUrl=function(t){var e=document,i=e.body,r=e.documentElement,o=Math.max(i.scrollTop,r.scrollTop),n=document.documentElement.clientHeight,a=document.body.clientHeight,s=[],l=this.options,d=l.preloadDistance,c=l.waitScroll;return c&&(c=n<a),this.logger.trace(this["Format[ContentRoll]"]+".waitBeforeLoadUrl("+t+") waitScroll="+c+" scrollTop="+o+" preloadDistance="+d),c&&0===o&&s.push(this._requestDataXmlByScroll()),(void 0===d&&!c||c&&0!==o)&&(d=this.options.preloadDistance=1/0),void 0!==d&&s.push(this._waitForMinimumDistance()),Promise.race(s).then((function(e){return s.forEach((function(t){t.name!==e&&t.reject()})),t}))},s._vpaidInitAd=function(){this.logger.trace(this["Format[ContentRoll]"]+"._vpaidInitAd()");var e=this.options.moduleAPI||{},i=e.addVPAIDEventListener,r=e.extendEnvironmentVars,o=e.getControlNode,n=e.getControlInstance;r&&r({forceAspectRatio:!x.ai}),this._switchOffAllObserves(),this.onAdLoadedHandler=i("AdLoaded",ft.bind(this),this),this.onAdStartedHandler=i("AdStarted",yt.bind(this),this),this.onAdVideoStartHandler=i("AdVideoStart",At.bind(this),this),this.onAdSizeChangeHandler=i("AdSizeChange",this._onAdSizeChange.bind(this),this),this.onVn_VPAIDCreatedHandler=i("vn_VPAIDCreated",gt.bind(this),this),this.onAdVideoCompleteHandler=i("AdVideoComplete",this._clearEventsHandlers.bind(this),this),this.onVnVpaidAdErrorHandler=i("vnVpaidAdError",this._clearEventsHandlers.bind(this),this);var a=o("title"),s=o("logo","node");if(!(a&&"hidden"!==a.style.visibility&&"none"!==a.style.display||s&&"hidden"!==s.style.visibility&&"none"!==s.style.display)){var l=n("wrapper");l&&l.hideTopSpace()}return t.prototype._vpaidInitAd.call(this)},s._clearEventsHandlers=function(){kt.call(this,"AdLoaded","onAdLoadedHandler"),kt.call(this,"AdVideoStart","onAdVideoStartHandler"),kt.call(this,"AdStarted","onAdStartedHandler"),kt.call(this,"AdVideoComplete","onAdVideoCompleteHandler"),kt.call(this,"AdSizeChange","onAdSizeChangeHandler"),kt.call(this,"vnVpaidAdError","onVnVpaidAdErrorHandler"),kt.call(this,"vn_VPAIDCreated","onVn_VPAIDCreatedHandler")},s.getStartMethod=function(){return(this.options||{}).startMethod},s._initNoAdElement=function(){this.logger.trace(this["Format[ContentRoll]"]+".initNoAdElement()");var t=this.options.noAdElement;if(document.querySelector(t)){var e=new Error("Disabled by noAdElement ("+t+")");throw e.fatal=!0,e}},s.getAnchorElement=function(){return this.anckorElement},s._initDOM=function(){var t=this;this.logger.trace(this["Format[ContentRoll]"]+".initDOM()");var i=this.options,r=this.options,o=r.forceEnableVerticalContent,a=r.moduleAPI,s=r.showObservableNode,l=r.moduleAPI,d=l.getOptions,c=(l.getMainModuleId,l.getControlNode),u=d().initScriptParentNode,h=i.lookupElement,p=i.scrollElement,g=i.widthElement,v=i.minSegments,f=i.maxSegments,m=i.minDistance,b=i.slotBackground,y=i.slotMargin,A=window.innerHeight,w=this.lookupNode=(0,e.V4)(h)||document.body,P=w.offsetHeight/(A*m);if(P<v)throw new Error(this["Format[ContentRoll]"]+" lookupNode height/segments factor ("+P.toFixed(2)+"vh) is not enough, minimum "+parseFloat(v).toFixed(2)+"vh required");if(!f)throw new Error(this["Format[ContentRoll]"]+" maxSegments is 0");var O=M(et(et({},i),{},{lookupNode:w,initScriptParentNode:u}),""+this),S=O.moduleNode,_=O.moduleInnerNode,C=O.elementNode,E=O.beforeNode,D=O.afterNode,I=O.widthNode,T=O.boundariesExists,V=O.insideIframe;(this.anckorElement=C||E||D,(0,e.Zs)(S,{position:"relative",zIndex:0,backgroundColor:b,margin:y,boxSizing:T?"border-box":"content-box"}),this.moduleNode=this._addDOMNode(S),this.moduleInnerNode=this._addDOMNode(_),this.widthNode=(0,e.V4)(g)||I||S.parentNode,this.scrollNode=(0,e.V4)(p)||window,w&&w!==document.body)&&("static"===getComputedStyle(w).position&&(w.style.position="relative"));if(this.insideIframe=V,this.boundariesExists=T,!this._updateStrategy){var k={isIframe:V,forceEnableVerticalContent:o,showObservableNode:s,logger:this.logger,API:{moduleAPI:a,getWidthNode:this._getWidthNode.bind(this),getModuleNodeSize:Ot.bind(this),isAdHasBeenStarted:function(){return t._adHasBeenStarted},getModuleNode:function(){return t.moduleNode},getOptions:function(){return et({},t.options)}}},x=Vt.call(this);x&&(k.forceHeight=x),this._updateStrategy=T?new H(k):new X(k)}var j=w||document.body;this.observerForParent=new MutationObserver((function(){var e=j.clientHeight;void 0!==t.prevParentHeight&&e===t.prevParentHeight||(t.logger.trace("Format[ContentRoll].MutationObserver() for lookup "+(0,n.xl)(j)+".parentHeight="+e+" prevDocumentHeight="+t.prevParentHeight),t._updateObservableAdvancedNodePosition(!1),s&&(clearTimeout(t._showGridTimeoutId),t._showGridTimeoutId=setTimeout(St.bind(t,t._tempObservableModuleNode||c("container")||S),1))),t.prevParentHeight=e}));this.observerForParent.observe(j,{childList:!0,attributes:!0,characterData:!0,subtree:!0}),S.clientWidth||(this.logger.warn(this["Format[ContentRoll]"]+"._initDOM() looks like module has been inserted inside invisible block."),Pt.call(this))},s._requestDataXmlByScroll=function(t){var e,i,r=this;void 0===t&&(t=this),this.logger.trace(this["Format[ContentRoll]"]+".requestDataXmlByScroll()");var o=null==this||null===(e=this.module)||void 0===e?void 0:e.globalTimeoutProvider;null==o||null===(i=o.pause)||void 0===i||i.call(o);var n=function(){},a=function(){},s="byScroll",l=this.scrollNode,d=function e(){var i;r.logger.trace(r["Format[ContentRoll]"]+" Watching for scroll is finished"),t._removeDOMEventListener(l,"scroll",e),null==o||null===(i=o.start)||void 0===i||i.call(o),a(s)},c=new Promise((function(e,i){r.logger.trace(r["Format[ContentRoll]"]+" Waiting for scroll"),n=i,a=e,t._addDOMEventListener(l,"scroll",d)}));return c.catch((function(){r.logger.trace(r["Format[ContentRoll]"]+" Waiting for scroll was rejected"),t._removeDOMEventListener(l,"scroll",d)})),(0,N.l7)(c,{name:s,reject:n})},s._waitForMinimumDistance=function(t,e){var i,r,o=this;void 0===t&&(t=this.options.preloadDistance),void 0===e&&(e=this),this.logger.trace(this["Format[ContentRoll]"]+".waitForMinimumDistance()");var n=null==this||null===(i=this.module)||void 0===i?void 0:i.globalTimeoutProvider;null==n||null===(r=n.pause)||void 0===r||r.call(n);var a=function(){},s=function(){},l="byPreloadDistance",d=this.scrollNode,c=function i(){var r=o._getModuleDimensions(),s=r.viewportHeight,c=r.moduleTop,u=c-s;o.logger.none("_waitForMinimumDistance distance="+u+" moduleTop="+c+" viewportHeight="+s+" preloadDistance="+t),u<=t&&(o.logger.trace(o["Format[ContentRoll]"]+" Minimum distance "+t+"px reached"),e._removeDOMEventListener(d,"scroll",i),null==n||n.start(),a(l))},u=new Promise((function(i,r){o.logger.trace(o["Format[ContentRoll]"]+" Waiting for minimum distance "+t+"px"),s=r,a=i,e._addDOMEventListener(d,"scroll",c),c()}));return u.catch((function(){o.logger.trace(o["Format[ContentRoll]"]+" Waiting for minimum distance was rejected"),e._removeDOMEventListener(d,"scroll",c)})),(0,N.l7)(u,{name:l,reject:s})},s.hasReachInventoryFactory=function(){return!0},s.getReachInventoryFactory=function(){var t=this.scrollNode,e=this.moduleNode;return this.options.doNotWatchVisibility?null:this._createReachInventoryFactory(t,e)},s._createReachInventoryFactory=function(t,i){var r=this.options,o=r.showObservableNode,a=r.doNotWatchVisibility,s=r.moduleAPI.getMainModuleId,l=s&&s();if(this.logger.trace(this["Format[ContentRoll]"]+"._createReachInventoryFactory() moduleNode="+i+" doNotWatchVisibility="+a,2,"brown"),a)return null;var d=("vn-visible-inventory-mark_"+this+"_"+ct+++" vn-module__"+l).replace(/\s+/g,"-").replace(/(\[|])/g,"_"),c=document.createElement("div");c.className=d,!0===o&&(0,e.Zs)(i,{outlineWidth:"1px",outlineColor:"#4080ff",outlineStyle:"solid"}),i.parentElement.insertBefore(c,i);var u=null;return{id:d,waiterCreator:function(){return new Promise((function(e){u=(0,n.Yj)(c,{threshold:[0,1e-4,.1,.999,1],registerHandle:function(e){var i="scroll";return t&&t.addEventListener(i,e),{handler:e,event:i,scrollNode:t}}},(function(t){t.intersectionRatio>0&&(u&&u.disconnect&&u.disconnect(),u=null,e())}))}))},destroy:function(){u&&u.disconnect&&u.disconnect(),(0,e.GA)(c)},markNode:c,moduleNode:i}},s._getModuleDimensions=function(){var t=this.scrollNode,e=this.moduleNode;return(0,n.k)(t,e)},s._getWidthNode=function(){return this.widthNode},s._updateModuleNodeSize=function(t){void 0===t&&(t=!1),this.logger.trace(this["Format[ContentRoll]"]+".updateModuleNodeSize()");var e=this._updateStrategy.updateModuleNodeSize(t);return this._resetObservableNodes(),e},s._updateModuleSize=function(){this.logger.trace(this["Format[ContentRoll]"]+"._updateModuleSize()");var t=this.boundariesExists,e=this.moduleNode,i=this.options,r=i.forceEnableVerticalContent,o=i.moduleAPI,n=o.getAdAspectRatio,a=o.getControlNode,s=this._getWidthNode();if(s){var l,d=n&&n();t&&(l=s.clientHeight/s.clientWidth),!x.ai&&d>1&&!r&&!l&&(d=9/16),this._moduleResizeAd(s,d);var c=this._watchTempObservableModuleNodeVisibility;this.options.showObservableNode&&!c&&(this.logger.none("._updateModuleSize() showGrid"),clearTimeout(this._showGridTimeoutId),this._showGridTimeoutId=setTimeout(St.bind(this,a("container")||e),1))}else this.logger.warn(this["Format[ContentRoll]"]+"._updateModuleSize() Invalid widthNode ("+s+")")},s._moduleResizeAd=function(t,e){return this._updateStrategy.moduleResizeAd(e)},s._updateModuleState=function(){this._getModuleVisibility().then(this._checkModuleState.bind(this))},s._checkModuleState=function(t){var e=this,i=t.intersectionRatio,r=t.moduleSquare,o=t.boundingClientRect,n=t.screenSquare;this.logger.trace(this["Format[ContentRoll]"]+"._checkModuleState() moduleSquare="+r+" intersectionRatio="+i,1);var a=this.options,s=a.expandOnAdLoaded,l=a.doNotWatchVisibility;if(null!==n){!r&&i&&(i=0);var d=this.options.moduleAPI,c=d.addVPAIDEventListener,u=d.inState;this._applyModuleState({intersectionRatio:i,moduleSquare:r,boundingClientRect:o,screenSquare:n})?l||s||(u("started")?this._onStartedCheck():c("AdVideoStart",(function(){return e._onStartedCheck()}))):this._watchTempObservableModuleNodeVisibility&&u(["playing","pausing","paused"])&&this._onStartedCheck()}else this.logger.trace(this["Format[ContentRoll]"]+"._checkModuleState() screenSquare="+n+" intersectionRatio="+i+" - do not pay attention to this case, do nothings.",2,"pink")},s._onStartedCheck=function(){var t=this,e=this.options,i=e.expandingDuration,r=e.moduleAPI,o=r.addVPAIDEventListener,n=r.removeVPAIDEventListener;this._addTimeout("_checkModuleState_AdVideoStart",(function(){t._switchOffObservableAdvancedNode(),t.logger.none(t["Format[ContentRoll]"]+"._checkModuleState() @AdVideoStart _switchOffObservableAdvancedNode() & _switchOnObservableCheckingToModuleNode()",1);var e=o("slotSizeChanged",(function(){return r("slotSizeChanged")}),t),i=setTimeout((function(){return r("timeout")}),50),r=function(r){n("slotSizeChanged",e,t),clearTimeout(i),t.logger.trace(t["Format[ContentRoll]"]+"._checkModuleState() @AdVideoStart call _switchOnObservableCheckingToModuleNode() reason is "+r),t._switchOnObservableCheckingToModuleNode()}}),i)},s._applyModuleState=function(t){var e=t.intersectionRatio,i=t.moduleSquare,r=t.boundingClientRect;this.logger.none(this["Format[ContentRoll]"]+"._applyModuleState() intersectionRatio="+e+" moduleSquare="+i,1);var o=this._applyModuleStateCheckStartAd({intersectionRatio:e,moduleSquare:i,boundingClientRect:r});return this._applyModuleStateCheckPausedAndPlaying({intersectionRatio:e,moduleSquare:i,boundingClientRect:r}),o},s._applyModuleStateCheckStartAd=function(t){var e=this,i=t.intersectionRatio,r=this._startFactor,o=this.options,n=o.shouldStart,a=o.startMethod,s=o.expandOnAdLoaded,l=o.expandingDuration,d=o.moduleAPI,c=d.addVPAIDEventListener,u=d.removeVPAIDEventListener,h=d.startAd,p=d.inState,g=[p("loaded"),p("waitStarting"),p("starting")],v=g[0],f=g[1],m=g[2],b=!1,y=n.toLowerCase(),A="afterexpand"===y,w="beforeexpand"===y,P="manual"===a;if(this.logger.none(this["Format[ContentRoll]"]+"._applyModuleStateCheckStartAd() intersectionRatio="+i+" _startFactor="+r+" shouldStart="+n+" waitStarting="+f+" loaded="+v+" startMethod="+a,1,"blue"),v&&s&&!this.wasExpanded){this.wasExpanded=!0,this._addPlayerExpandedClass(),w&&h&&h(),this._updateModuleNodeSize(!0);var O=c("AdVideoStart",(function(){u("AdVideoStart",O),setTimeout((function(){return e._updateModuleState()}),l)}));A&&h&&h(),b=!0}return i>=r&&(v&&!P&&(A||w)||P&&f)&&(A&&this._updateModuleNodeSize(!0),h&&h(),b=!0),b||m},s._applyModuleStateCheckPausedAndPlaying=function(t){var e=t.intersectionRatio,i=this._startFactor,r=this._stopFactor,o=this.options.moduleAPI,n=o.resumeAd,a=o.pauseAd,s=o.inState,l=[s("paused"),s("pausing"),s("playing"),s("resuming")],d=l[0],c=l[1],u=l[2],h=l[3];this.logger.trace(this["Format[ContentRoll]"]+"._applyModuleStateCheckPausedAndPlaying inState(paused)="+d+" intersectionRatio="+e+" inState(playing)="+u+" inState(resuming)="+h,2,"pink"),e>=i&&(d?(this._adPausedPostponedCommand=null,n&&n()):c&&(this._adPausedPostponedCommand=function(){return n()})),u&&e<r&&(this._adPausedPostponedCommand=null,a&&a())},s.hide=function(){this._closeModule()},s._closeModule=function(t){void 0===t&&(t={});var i=this.options||{},r=i.moduleAPI,o=i.expandingDuration,n=(r||{}).addVPAIDEventListener,a=this._needAfterCloseCompensation()&&!0!==t.noCompensation;if(this.logger.trace(this["Format[ContentRoll]"]+"._closeModule()"),this._removePlayerExpandedClass(),!this._moduleWasClosed){this._moduleWasClosed=!0,this._removeEventListeners(),n&&n("AdDestroyed",wt.bind(this),this);var s=this.moduleNode,l=this.observerForParent;l&&l.disconnect&&l.disconnect(),setTimeout(_t.bind(this),1);var d=a&&Ct.call(this),c=function(){(0,e.Zs)(s,{position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",whiteSpace:"nowrap",clipPath:"inset(100%)",clip:"rect(0 0 0 0)",overflow:"hidden"})};if(0!==parseFloat(s.style.height)){(0,e.Zs)(s,{height:0});var u=setTimeout(c,o+100);s.addEventListener("transitionend",(function(){clearTimeout(u),c()}),{once:!0,capture:!1})}else c();d&&Et.call(this,d)}},s._getWatchVisibilityThreshold=function(){var t=this._startFactor,e=this._stopFactor,i=[];return t>=0&&i.push(t),e>=0&&t!==e&&i.push(e),i.length&&(0!==t&&0!==e&&i.push(0),1!==t&&1!==e&&i.push(1)),i.sort()},s._destroy=function(){this.logger.trace(this["Format[ContentRoll]"]+"._destroy()");var e=this.watchVisibility,i=this._watchModuleNodeNodeVisibility,r=this._watchTempObservableModuleNodeVisibility,o=this._moduleNodeObservable;e&&e.disconnect&&e.disconnect(),this.watchVisibility=null,i&&i.disconnect&&i.disconnect(),this._watchModuleNodeNodeVisibility=null,r&&r.disconnect&&r.disconnect(),this._watchTempObservableModuleNodeVisibility=this,o&&o.disconnect&&o.disconnect(),this._moduleNodeObservable=null;var n=this._needAfterCloseCompensation()&&Ct.call(this);t.prototype._destroy.call(this),n&&Et.call(this,n),this.logger.log(this["Format[ContentRoll]"]+"._destroy() Destroyed")},s._needAfterCloseCompensation=function(){var t=this.boundariesExists;return(this.options||{}).needAfterCloseCompensation&&!t},s.abort=function(){this.logger.trace(this["Format[ContentRoll]"]+".abort()"),this._closeModule({noCompensation:!0})},s._switchOnObservableAdvancedNode=function(){var t=this.options,e=t.showObservableNode,i=t.doNotWatchVisibility,r=t.moduleAPI.getMainModuleId;if(!this._tempObservableModuleNode&&!i){this.logger.trace(this["Format[ContentRoll]"]+"._switchOnObservableAdvancedNode()");var o=this._createObservableAdvancedNode(),n=o.node,a=o.watcher;n&&window.document.body.appendChild(n),this._tempObservableModuleNode=this._addDOMNode(n),this._tempObservableModuleNode.className=("vn-start-mark_"+this+"_"+ut+++" vn-module__"+(r&&r())).replace(/\s+/g,"-").replace(/(\[|])/g,"_"),this._watchTempObservableModuleNodeVisibility=a,e&&(clearTimeout(this._showGridTimeoutId),this._showGridTimeoutId=setTimeout(St.bind(this,n),1))}},s._createObservableAdvancedNode=function(){var t=this.scrollNode,i=this.options.showObservableNode;this.logger.trace(this["Format[ContentRoll]"]+"._createObservableAdvancedNode()");var r=(0,e.ID)("div",{top:-9999,left:-9999,height:0,width:0,position:"absolute",zIndex:"-1",opacity:0});!0===i&&(0,e.Zs)(r,{outlineWidth:"1px",outlineColor:"red",outlineStyle:"solid",opacity:1,zIndex:1}),r.classList.add("vn-observable-advanced-node"),this._updateObservableAdvancedNodePosition(!1,r);var o=(0,n.Yj)(r,{threshold:this._getWatchVisibilityThreshold(),registerHandle:function(e){var i="scroll";return t&&t.addEventListener(i,e),{handler:e,event:i,scrollNode:t}}},this._checkModuleState.bind(this));return i&&(clearTimeout(this._showGridTimeoutId),this._showGridTimeoutId=setTimeout(St.bind(this,r),1)),{watcher:o,node:r}},s._updateObservableAdvancedNodePosition=function(t,i){void 0===t&&(t=!0),void 0===i&&(i=null);var r=this._tempObservableModuleNode,o=this.options,a=o.showObservableNode,s=o.moduleAPI.getControlNode;if(i||(i=r),!(0,e.Re)(i))return null;var l,d,c=s&&s("wrapper"),u=s&&s("vpaidSlot")||c;if(!u)return null;var h=u&&(0,n.er)(u)||{};if(h.offsetHeight){var p=h.offsetHeight,g=h.offsetWidth,v=h.marginLeft,f=h.marginRight;d=p+(h.marginTop||0)+(h.marginBottom||0),l=g+(v||0)+(f||0),this.logger.trace(this["Format[ContentRoll]"]+"._updateObservableAdvancedNodePosition() height="+d+" width="+l)}if(!d){var m=Ot.call(this),b=m.width,y=m.height;!d&&(d=y),!l&&(l=b),this.logger.trace(this["Format[ContentRoll]"]+"._updateObservableAdvancedNodePosition() videoContainer  wrapper    nodeHeight="+y+" nodeWidth="+b)}var A=(0,e.eE)(u),w={top:(0,n.Ug)(window.scrollY<A.top?A.top:A.top-d),left:(0,n.Ug)(A.left),height:(0,n.Ug)(d),width:(0,n.Ug)(l),pointerEvents:"none"};return this.logger.trace("Format[ContentRoll]._updateObservableAdvancedNodePosition() ("+JSON.stringify(w,null,"\t")+")"),(0,e.Zs)(i,w),t&&a&&(clearTimeout(this._showGridTimeoutId),this._showGridTimeoutId=setTimeout(St.bind(this,i),1)),i},s._getModuleVisibility=function(t){var e=this;void 0===t&&(t=0);var i=this._watchTempObservableModuleNodeVisibility,r=this._tempObservableModuleNode,o=this.moduleNode,a=this.options.moduleAPI,s=a.getVideoSlot,l=a.getControlNode,d=s(),c=(d||{}).style,u=c&&"hidden"!==c.display&&d.clientHeight&&d||l("container")||o,h=[];return i&&r&&h.push((0,n.h_)(r)),u&&h.push((0,n.h_)(u)),Promise.all(h).then((function(i){if(e.logger.trace(e["Format[ContentRoll]"]+"._getModuleVisibility() promises.length="+h.length+" counter="+t+" values.length="+i.length+" [0].intersectionRatio="+i[0].intersectionRatio+" [0].moduleSquare="+i[0].moduleSquare+" [1].intersectionRatio="+(i.length>1&&i[1].intersectionRatio)+" [1].moduleSquare="+(i.length>1&&i[1].moduleSquare),1,"brown"),i.length<2)return e.logger.none(e["Format[ContentRoll]"]+"._getModuleVisibility() values.length="+i.length+" RETURN "+i[0],1,"brown"),i[0];var r=i.filter((function(t){return t.intersectionRatio}));if(e.logger.none(e["Format[ContentRoll]"]+"._getModuleVisibility() positiveRatios.length="+r.length,1,"brown"),t<3&&!i[0].intersectionRatio&&i[1].intersectionRatio&&!i[1].moduleSquare)return e.logger.log(e["Format[ContentRoll]"]+"._getModuleVisibility() RECURSION",1,"brown"),e._getModuleVisibility(t+1);var o=r.reduce((function(t,e){return!t||e.intersectionRatio>t.intersectionRatio?e:t}),null);return r.length?o:i[0]}))},s._onAdSizeChange=function(){this.logger.trace(this["Format[ContentRoll]"]+" @AdSizeChange"),this._updateModuleNodeSize()},s._resetObservableNodes=function(){this.logger.trace(this["Format[ContentRoll]"]+".resetObservableNodes()) this._tempObservableModuleNode="+this._tempObservableModuleNode+" this.watchVisibility="+this.watchVisibility),this.watchVisibility?(this._switchOffObservableAdvancedNode(),this._switchOffObservableCheckingToModuleNode(),this._switchOnObservableCheckingToModuleNode()):this._tempObservableModuleNode&&(this._switchOffObservableCheckingToModuleNode(),this._switchOffObservableAdvancedNode(),this._switchOnObservableAdvancedNode()),window.IntersectionObserver||this._updateModuleState()},s._switchOffAllObserves=function(){this.watchVisibility?(this._switchOffObservableAdvancedNode(),this._switchOffObservableCheckingToModuleNode()):this._tempObservableModuleNode&&(this._switchOffObservableCheckingToModuleNode(),this._switchOffObservableAdvancedNode())},s._switchOffObservableAdvancedNode=function(){this.logger.trace(this["Format[ContentRoll]"]+".switchOffObservableAdvancedNode()"),this._watchTempObservableModuleNodeVisibility&&this._watchTempObservableModuleNodeVisibility.disconnect&&this._watchTempObservableModuleNodeVisibility.disconnect(),this._tempObservableModuleNode&&(this._tempObservableModuleNode.remove(),this._tempObservableModuleNode=null),this._watchTempObservableModuleNodeVisibility=null},s._getNodeForObservableChecking=function(){var t=this.moduleNode,e=this.options.moduleAPI,i=e.getVideoSlot,r=e.getControlNode;return i()||r("vpaidSlot")||t},s._switchOnObservableCheckingToModuleNode=function(){var t=this.scrollNode,i=this.options,r=i.showObservableNode,o=i.doNotWatchVisibility;if(this.logger.trace(this["Format[ContentRoll]"]+"._switchOnObservableCheckingToModuleNode()"),!this.watchVisibility&&!o){var a=this._getNodeForObservableChecking();!0===r&&((0,e.Zs)(a,{outlineWidth:"1px",outlineColor:"green",outlineStyle:"solid"}),this.logger.none("._switchOnObservableCheckingToModuleNode() showGrid")),this.watchVisibility=(0,n.Yj)(a,{threshold:this._getWatchVisibilityThreshold(),registerHandle:function(e){var i="scroll";return t&&t.addEventListener(i,e),{handler:e,event:i,scrollNode:t}}},this._checkModuleState.bind(this)),r&&(clearTimeout(this._showGridTimeoutId),this._showGridTimeoutId=setTimeout(St.bind(this,a),1))}},s._switchOffObservableCheckingToModuleNode=function(){var t=this.watchVisibility,i=this.moduleNode,r=this.options.showObservableNode;t&&(!0===r&&(0,e.Zs)(i,{outlineWidth:"0",outlineColor:"none",outlineStyle:"none"}),t&&t.disconnect&&t.disconnect(),this.watchVisibility=null)},s.correctAdSize=function(t,e){return this._updateStrategy.correctAdSize(t,e)},s.getModuleNode=function(){return this.moduleNode},s.toString=function(){return at},s.getBaseName=function(){return nt.toLowerCase()},a}(D);function pt(){this._adHasBeenLoaded&&(this.logger.trace(this["Format[ContentRoll]"]+" @resize"),this._updateModuleNodeSize(),this._updateModuleSize())}function gt(t){var e=this,i=t.vpaid;if(!i){var r,o,a=null==this||null===(r=this.options)||void 0===r||null===(o=r.moduleAPI)||void 0===o?void 0:o.getVpaid;i=a&&a()}(i&&i.getFormatOptions&&i.getFormatOptions()||Promise.resolve({})).then((function(t){return t&&e.updateOptions(t),!0})).then((function(){var t=(e.options||{}).setSizeByMedia;if((0,n.MV)(t)){var r=i&&i.getMediaInfo();if(!r)return;r.then((function(i){var r=i||{},o=r.width,n=r.height;if(o&&n&&(!e._updateStrategy||!(e._updateStrategy instanceof $))){var a=e.options,s=a.forceEnableVerticalContent,l=a.moduleAPI,d={width:o,height:n,forceEnableVerticalContent:s,showObservableNode:a.showObservableNode,expandingDuration:a.expandingDuration,logger:e.logger,API:{moduleAPI:l,getWidthNode:e._getWidthNode.bind(e),getModuleNodeSize:Ot.bind(e),isAdHasBeenStarted:function(){return e._adHasBeenStarted},getModuleNode:function(){return e.moduleNode},getOptions:function(){return et({},e.options)}}};e._updateStrategy=new $(d),e._updateModuleSize(),e._updateModuleNodeSize()||e._resetObservableNodes(),e.logger.log(e["Format[ContentRoll]"]+" onVPAIDCreated() call trigger('vn_FormatChanged') setSizeByMedia="+t);var c=(l||{}).trigger;c&&c("vn_FormatChanged")}}))}else{e.logger.log(e["Format[ContentRoll]"]+" onVPAIDCreated() setSizeByMedia="+t);var o=e._updateStrategy;if(o){var a=Vt.call(e);a&&o.setForceHeight(a)&&e._updateModuleSize()}}}))}function vt(){var t=this.options.moduleAPI,e=t.inState,i=t.pauseAd,r=document.visibilityState;this.logger.trace(this["Format[ContentRoll]"]+" @visibilitychange ("+r+")",2),"hidden"===r?e&&e("playing")&&i&&i({invoker:this,method:"onVisibilityChange"}):this._updateModuleState()}function ft(){this.logger.trace(this["Format[ContentRoll]"]+" @AdLoaded",2);var t=this.moduleNode,i=this.options,r=i.expandOnAdLoaded,o=i.expandingDuration,n=i.doNotWatchVisibility;kt.call(this,"AdLoaded","onAdLoadedHandler"),this._adHasBeenLoaded=!0,this._addDOMEventListener(window,"resize",pt.bind(this)),this._addDOMEventListener(document,"visibilitychange",vt.bind(this),!1),o>0&&(0,e.Zs)(t,{transitionProperty:"width, height",transitionDuration:o+"ms",transitionTimingFunction:"ease-out"}),n||(r?(this._switchOnObservableCheckingToModuleNode(),this._updateModuleSize(),this._updateModuleNodeSize(),this._updateModuleState()):(this._updateModuleSize(),this._switchOnObservableAdvancedNode()))}function mt(){var t=this;this.logger.trace(this["Format[ContentRoll]"]+". @vn_VideoSlotRemoved",2,"pink"),setTimeout((function(){return t._resetObservableNodes()}))}function bt(t){var e=this;void 0===t&&(t={});var i=this._adVideoWasStarted,r=this.options.moduleAPI,o=r.getIndents,n=r.addVPAIDEventListener,a=r.removeVPAIDEventListener,s="";try{s=t&&JSON.stringify(t,null,2)}catch(t){}this.logger.trace(this["Format[ContentRoll]"]+" @slotSizeChanged forceSize="+s+" _adVideoWasStarted="+i,2),o().paddingTop||this.updateControlsLayout(0,!0),void 0!==t.height&&(this.forceHeight=t.height),void 0!==t.width&&(this.forceWidth=t.width),!0!==t.shouldNotResize&&(!0===i?(this.logger.trace(this["Format[ContentRoll]"]+" @slotSizeChanged invoke onResize() _adVideoWasStarted="+i,2),pt.call(this)):this._AdVideoStartResizeHandler||(this._AdVideoStartResizeHandler=n("AdVideoStart",(function(){e.logger.trace(e["Format[ContentRoll]"]+" @slotSizeChanged awaited @AdVideoStart invoke onResize() _adVideoWasStarted="+i,2),pt.call(e),a("AdVideoStart",e._AdVideoStartResizeHandler,e),e._AdVideoStartResizeHandler=null}),this)))}function yt(){this.logger.trace(this["Format[ContentRoll]"]+" @AdStarted",2),this._adHasBeenStarted=!0,kt.call(this,"AdStarted","onAdStartedHandler"),this._updateModuleSize(),this._updateModuleNodeSize(),this._addPlayerExpandedClass(),this._updateModuleState()}function At(){var t=this,e=this.moduleNode,i=this.options,r=i.playerPlaybackClass,o=i.expandingDuration,n=i.moduleAPI.inState;!n||n("started")?(this.logger.trace(this["Format[ContentRoll]"]+" @AdVideoStart",2),kt.call(this,"AdVideoStart","onAdVideoStartHandler"),r&&e.classList.add(r),setTimeout((function(){t._updateModuleNodeSize(),t._updateModuleState()}),o)):!this._adVideoWasStarted&&(this._adVideoWasStarted=n&&n("playing"))}function wt(){var t=this,e=(this.options||{}).destroyTimeout;this.logger.trace(this["Format[ContentRoll]"]+" @AdDestroyed. "+this["Format[ContentRoll]"]+"._destroy() will be called after "+e+" ms",2),this._closeModule(),setTimeout((function(){return t._destroy()}),e)}function Pt(){var t=this,e=this.moduleNode,i=this.scrollNode;if(!window.IntersectionObserver&&window.MutationObserver){var r=function(t){for(t=t&&t.parentElement;;t=t.parentElement){if(!t)return null;if(l(t))return t}}(e);if(r){this.logger.log(this["Format[ContentRoll]"]+".initVisibleWatcher() can not use IntersectionObserver, but invisible parent block was found and we use MutationObserver to catch the moment when it becomes visible.");var o=new MutationObserver((function(){l(r)||(o.disconnect(),setTimeout(s.bind(t),1))}));o.observe(r,{attributes:!0})}else this.logger.warn(this["Format[ContentRoll]"]+".initVisibleWatcher() can not use IntersectionObserver and invisible parent block was not found")}this.logger.log(this["Format[ContentRoll]"]+".initVisibleWatcher() watch module visibility.");var a=this._watchModuleNodeNodeVisibility=(0,n.Yj)(e,{threshold:[.1,1],registerHandle:function(e){var r="scroll";return i&&i.addEventListener(r,e),{handler:e,event:r,scrollNode:t.scrollNode}}},(function(e){var i=e.intersectionRatio,r=e.boundingClientRect;i>0&&(!r||r.right-r.left>0)&&(a&&a.disconnect&&a.disconnect(),setTimeout(s.bind(t),1))}));function s(){var t=this,i=this.options.moduleAPI.getControlNode;if(e.clientWidth){this.logger.log(this["Format[ContentRoll]"]+".initVisibleWatcher() module is visible now. Changing its size",2,"green");var r=i&&i("wrapper"),o=(r&&(0,n.er)(r)||{}).paddingTop;this.updateControlsLayout(o||st,!0),this._updateModuleSize(),this._updateModuleNodeSize(!0),this._tempObservableModuleNode&&(this._switchOffObservableAdvancedNode(),this._switchOnObservableAdvancedNode()),this._getModuleVisibility().then((function(e){e.intersectionRatio&&setTimeout((function(){t._updateModuleState()}),100)}))}else this._addTimeout("watchModuleNodeNodeVisibilityTimerId",s.bind(this),100)}function l(t){var e=getComputedStyle(t)||{};return t.hidden||"none"===e.display||"hidden"===e.visibility}}function Ot(){var t=this.forceHeight,e=this.moduleNode,i=this.options,r=i.forceEnableVerticalContent,o=i.moduleAPI,n=o.getAdAspectRatio,a=o.getAdWidth,s=n&&n(),l=e.clientWidth||a();return{width:l,height:t||s&&l&&l*(!x.ai&&s>1&&!r?9/16:s)}}function St(t){if((0,e.Re)(t)&&(this.logger.none(this["Format[ContentRoll]"]+".showGrid()"),!this._moduleWasClosed)){var i=t.getBoundingClientRect();if(i.height){_t.call(this);var r=this._startFactor,o=this._stopFactor,a=this.options.moduleAPI,s=a.getMainModuleId,l=a.getControlNode,d=a.getVideoSlot,c=0,u=0,h=l("container"),p=d();if(t===h||t===p){var g=l("iframe");if(g){var v=g.getBoundingClientRect();c=v.top,u=v.left}}var f=s&&s(),m=2147483647;if(!this.grid||!this.grid.length){var b={height:"1px",borderTopWidth:"1px",position:"absolute",pointerEvents:"none",zIndex:m};this.grid=[];var y=i.height;(x=(0,e.Xv)(window.document.body,"div",et(et({},b),{},{height:y,borderTopColor:"yellow",borderTopStyle:"dashed"}))).className="vn-grid-frame vn-module__"+f,this.grid.push({pos:0,line:x});for(var A=.1;A<1;A=(100*(A+.1)^0)/100)if(A!==r&&A!==o){var w=(0,e.Xv)(window.document.body,"div",et(et({},b),{},{borderTopColor:"yellow",borderTopStyle:.5===A?"dashed":"dotted"}));w.className="vn-grid-"+A+" vn-module__"+f,this.grid.push({pos:A,line:w})}if(r){var P=(0,e.Xv)(window.document.body,"div",et(et({},b),{},{borderTopColor:"red",borderTopStyle:"solid",zIndex:m+1}));P.className="vn-grid-start-factor-"+r+" vn-module__"+f,this.grid.push({pos:r,line:P})}if(o){var O=(0,e.Xv)(window.document.body,"div",et(et({},b),{},{borderTopColor:"pink",borderTopStyle:"dashed",zIndex:m+2}));O.className="vn-grid-stop-factor-"+o+" vn-module__"+f,this.grid.push({pos:o,line:O})}}var S=this.grid,_=i.width,C=i.height,E="relative"===getComputedStyle(window.document.body).position?(0,n.er)(window.document.body):{marginLeft:0,marginTop:0,borderTopWidth:0,borderLeftWidth:0},D=E.marginLeft,I=E.marginTop,T=E.borderTopWidth,V=E.borderLeftWidth,k=window.document.documentElement.getBoundingClientRect();this.logger.none(this["Format[ContentRoll]"]+".showGrid() drawing...");for(A=0;A<S.length;A++){var x,j=S[A],R=j.pos;(x=j.line)&&(0,e.Zs)(x,{top:(0,n.Ug)(i.top-k.top-I-T+R*C+c),left:(0,n.Ug)(i.left-k.left-D-V+u),width:(0,n.Ug)(_)})}}}}function _t(){var t=this.grid;if(t)for(this.logger.none(this["Format[ContentRoll]"]+".clearGrid()");t&&t.length;){var i=t.pop();if(!i)return;var r=i.line;(0,e.GA)(r)}}function Ct(){var t=this.moduleNode,e=this.options.showObservableNode;if(!t)return null;var i=Dt.call(this);return i&&i.element?(e&&(i.element.style.backgroundColor="pink"),this.logger.trace(this["Format[ContentRoll]"]+"._closeModule() markTop = "+i.top+" markBottom = "+i.bottom)):this.logger.trace(this["Format[ContentRoll]"]+"._closeModule() correction position: mark element not found",1,"#d2691e"),i}function Et(t,e){var i=this;void 0===e&&(e=10),setTimeout((function(){var r=(i.moduleNode||{}).clientHeight;if(i.logger.trace(i["Format[ContentRoll]"]+".attemptCompensation() counter="+e),!e&&r)i.logger.trace(i["Format[ContentRoll]"]+".attemptCompensation() not found moment for compensation");else if(e&&r)Et.call(i,t,e-1);else{var o=t.top,n=t.bottom,a=t.element,s=o?a.getBoundingClientRect().top-o:n?a.getBoundingClientRect().bottom-n:0;s&&window.scrollBy(0,s),i.logger.trace(i["Format[ContentRoll]"]+".attemptCompensation() compensation="+s+" counter="+e)}}),20)}function Dt(){for(var t=this.moduleNode.getBoundingClientRect().bottom,e=document.documentElement,i=e.clientWidth,r=e.clientHeight,o=i/10,n=(r-t)/10,a=o;a<i-o;a+=o)for(var s=t+5;s<r;s+=n){var l=It(t,document.elementFromPoint(a,s));if(l)return l}return!1}function It(t,e){if(!e)return null;var i=document.documentElement.clientHeight,r=(getComputedStyle(e)||{}).position;if("absolute"===r||"fixed"===r)return null;var o=e.getBoundingClientRect(),n=o.top,a=o.bottom;return n>0&&n>t&&n<i?{element:e,top:n}:a>0&&a>t&&a<i?{element:e,bottom:a}:null}function Tt(t){void 0===t&&(t={});var e=(0,d.en)((0,n.k$)(window,document))||{},i=e.expandOnAdLoaded,r=e.shouldStart,o=e.showObservableNode,a=e.expandingDuration;return void 0!==a&&(t.expandingDuration=a),o&&(t.showObservableNode=(0,n.MV)(o)),r&&r.length&&(t.shouldStart=r),i&&(t.expandOnAdLoaded=(0,n.MV)(i)),t}function Vt(){var t=this._maxHeight;if(t){var e=this.getSlotSize(),i=e.width,r=e.height;if(i){var o=(0,n.NA)(t,i);if(o<r)return o}}return null}function kt(t,e){var i=this[e],r=(this.options.moduleAPI||{}).removeVPAIDEventListener;r&&i&&(r(t,i,this),this[e]=null)}function xt(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function jt(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?xt(Object(i),!0).forEach((function(e){Rt(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):xt(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Rt(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Mt(t,e){return Mt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Mt(t,e)}var Nt="Format[ContinuousRoll]",Lt={maxSegments:-1,playerSelectorPercent:"0%"},Ft=0,Wt=0,Ht=function(t){var i,r;function a(e,i){var r,n,a=i&&i.ancestor&&i.ancestor+":"+Nt||"Module::Format[ContinuousRoll]",s=i&&i.moduleAPI&&i.moduleAPI.logger||o.ZP;return((null==s||null===(r=s.getChildWriter)||void 0===r?void 0:r.call(s,Nt))||s).trace(a+".constructor()"),(n=t.call(this,e,jt(jt(jt({},Lt),{},{MODULE_ID:Nt},i),{},{ancestor:a}))||this)["Format[ContinuousRoll]"]=a,n.slotPlaceholders=[],1!==n.options.maxSegments&&n._initSlotPlaceholders(),n}r=t,(i=a).prototype=Object.create(r.prototype),i.prototype.constructor=i,Mt(i,r);var s=a.prototype;return s._vpaidInitAd=function(){this.logger.trace(this["Format[ContinuousRoll]"]+".vpaidInitAd()");var e=(this.options.moduleAPI||{}).addVPAIDEventListener,i=t.prototype._vpaidInitAd.call(this);return e("AdLoaded",Bt.bind(this),this),e("AdStarted",zt.bind(this),this),e("AdVideoComplete",Ut.bind(this),this),i},s._destroy=function(){this.logger.trace(this["Format[ContinuousRoll]"]+"._destroy()");var e=this._reachInventoryFactory;e&&e.destroy&&e.destroy(),t.prototype._destroy.call(this)},s.getReachInventoryFactory=function(){var t=this,e=this._reachInventoryFactory,i=this.scrollNode;if(this.options.doNotWatchVisibility)return null;if(e)return e;var r=this.slotPlaceholders.map((function(e){return t._createReachInventoryFactory(i,e)}));return this._reachInventoryFactory={id:"vn-visible-inventory-marks-group_"+this+"_"+Ft++,waiterCreator:function(){return Promise.race(r.map((function(t){return t.waiterCreator()})))},destroy:function(){return r.forEach((function(t){t.destroy&&t.destroy()}))},markNode:""}},s._updateModulePosition=function(){this.logger.none(this["Format[ContinuousRoll]"]+".updateModulePosition()");var t=this._findNearestSlotPlaceholder();this._nearestSlotPlaceholder!==t&&(this._nearestSlotPlaceholder=t,this.trigger("NearestSlotPlaceholderChanged")),t&&this._updateModulePositionCoordinates(t)},s._updateModulePositionCoordinates=function(t){var i=this.moduleNode,r=(0,e.Qt)(t,i),o=r.top,a=r.left;(0,e.Zs)(i,{position:"absolute",top:(0,n.Ug)(o+2),left:(0,n.Ug)(a),width:(0,n.Ug)(t.clientWidth),visibility:""});var s=(0,n.er)(i).floatOutsideHeight;(0,e.Zs)(t,{height:(0,n.Ug)(s)})},s._findNearestSlotPlaceholder=function(){var t=window.innerHeight/2;return this.slotPlaceholders.reduce((function(e,i){var r=i.getBoundingClientRect(),o=r.top,n=r.height,a=o+n/2,s=Math.abs(a-t);return n>0&&s<e.distance?{distance:s,slotPlaceholder:i}:e}),{distance:1/0,slotPlaceholder:null}).slotPlaceholder},s._getModuleVisibility=function(){var t=this._findNearestSlotPlaceholder();return(0,n.h_)(t)},s._initSlotPlaceholders=function(){var t,i=this,r=this.options,o=r.showObservableNode,a=r.playerAfter,s=r.playerElement,l=r.minDistance,d=r.maxSegments,c=r.lookupNode,u=window,h=u.scrollY,p=u.innerHeight,g=c||document.body,v=(0,e.Re)(s)?[s]:Array.from((0,e.wK)(s,g)),f=d<0?1/0:d;if((t=this.slotPlaceholders).push.apply(t,v.slice(0,f)),(f-=this.slotPlaceholders.length)&&a){var m=this.slotPlaceholders[this.slotPlaceholders.length-1],b=p*l,y=m?m.getBoundingClientRect().top+h+b:p;Array.from((0,e.wK)(a,g)).some((function(t){if(t.getBoundingClientRect().top+h>y){var e=document.createElement("div");f-=1,t.parentNode.insertBefore(i._addDOMNode(e),t.nextSibling),i.slotPlaceholders.push(e),y+=b}return!f}))}var A=Xt.call(this).visible,w=(A&&A.length&&A[0]).previousElementSibling,P=w&&w.getBoundingClientRect().top;(0,e.Zs)(this.slotPlaceholders,{boxSizing:"border-box",paddingTop:(0,n.Ug)(2),paddingBottom:(0,n.Ug)(2),backgroundColor:"transparent"}),w&&window.scrollBy(0,w.getBoundingClientRect().top-P),o&&(0,e.Zs)(this.slotPlaceholders,{outlineWidth:"1px",outlineColor:"pink",outlineStyle:"solid"}),this.slotPlaceholders.forEach((function(t){return t.className="vn-placeholder"}))},s._closeModule=function(){this.logger.trace(this["Format[ContinuousRoll]"]+"._closeModule()"),t.prototype._closeModule.call(this);var i={height:0,paddingTop:0,paddingBottom:0},r=Xt.call(this),o=r.above,n=r.below,a=r.visible;setTimeout((function(){if((0,e.Zs)([].concat(n,a),i),a&&a.length){var t=(a&&a.length&&a[0]).previousElementSibling,r=t&&t.getBoundingClientRect().top;(0,e.Zs)(o,i),r&&window.scrollBy(0,t.getBoundingClientRect().top-r)}}),1)},s._closeRestOfSlotPlaceholders=function(){this.logger.trace(this["Format[ContinuousRoll]"]+"._closeRestOfSlotPlaceholders()");var t=window.innerHeight;this.slotPlaceholders.forEach((function(i){var r=i.getBoundingClientRect().top;t-r<0&&(0,e.Zs)(i,{height:0,paddingTop:0,paddingBottom:0})}))},s._updateModuleNodeSize=function(i){void 0===i&&(i=!1);var r=t.prototype._updateModuleNodeSize.call(this,i),o=r||{},a=o.width,s=o.height;if(a&&s){var l={width:(0,n.Ug)(a),height:(0,n.Ug)(s+2+2)},d=Xt.call(this),c=d.above,u=d.below,h=d.visible;(0,e.Zs)([].concat(u,h),l);var p=c.map((function(t){return(0,n.er)(t).floatOutsideHeight})).reduce((function(t,e){return t+e}),0);(0,e.Zs)(c,l);var g=c.map((function(t){return(0,n.er)(t).floatOutsideHeight})).reduce((function(t,e){return t+e}),0),v=g-p;window.scrollBy(0,v)}return r},s._switchOnObservableAdvancedNode=function(){var t=this,i=this.slotPlaceholders,r=this.options.doNotWatchVisibility;if(!this._tempObservableModuleNode&&!r){var o=this._tempObservableModuleNode={items:[],remove:function(){return o.items.forEach((function(t){return(0,e.GA)(t)}))}},a=this._watchTempObservableModuleNodeVisibility={items:[],disconnect:function(){return a.items.forEach((function(t){t.disconnect&&t.disconnect()}))}};i&&i.forEach((function(i){var r=t._createObservableAdvancedNode(),s=r.node,l=r.watcher,d=(0,e.eE)(i),c=d.top,u=d.left;s.style.top=(0,n.Ug)(c+2),s.style.left=(0,n.Ug)(u),s&&window.document.body.appendChild(s);var h=t._addDOMNode(s);s.className=("vn-start-mark_"+t+"_"+Wt++).replace(/\s+/g,"-").replace(/(\[|])/g,"_"),o.items.push(h),a.items.push(l)}))}},s.getModuleVisibility=function(){return this._watchTempObservableModuleNodeVisibility&&this._tempObservableModuleNode?Promise.race(this._tempObservableModuleNode.items.map((function(t){return(0,n.h_)(t)}))):(0,n.h_)(this.moduleNode)},s.toString=function(){return Nt},s.getBaseName=function(){return"ContinuousRoll".toLowerCase()},a}(ht);function Ut(){this.logger.trace(this["Format[ContinuousRoll]"]+" @AdVideoComplete. Closing all placeHolders that positioned lower in the document",2),this._closeRestOfSlotPlaceholders()}function zt(){this.logger.trace(this["Format[ContinuousRoll]"]+" @AdStarted",2),this._updateModulePosition()}function Bt(){this.logger.trace(this["Format[ContinuousRoll]"]+" @AdLoaded",2);var t=this.scrollNode;this._addDOMEventListener(t,"scroll",Zt.bind(this)),this._addDOMEventListener(window,"resize",qt.bind(this))}function Zt(){this.logger.none(this["Format[ContinuousRoll]"]+" @scroll"),this._updateModulePosition()}function qt(){this.logger.trace(this["Format[ContinuousRoll]"]+" @resize"),this._updateModulePosition()}function Xt(){var t=[],e=[],i=[],r=window.innerHeight;return this.slotPlaceholders.forEach((function(o){var n=o.getBoundingClientRect(),a=n.top,s=n.bottom<0,l=a>r;s&&t.push(o),l&&i.push(o),s||l||e.push(o)})),{above:t,visible:e,below:i}}function Gt(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function Qt(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Gt(Object(i),!0).forEach((function(e){$t(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Gt(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function $t(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Jt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Yt(t,e){return Yt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Yt(t,e)}var Kt="FlyRoll",te="Format[FlyRoll]",ee={playerEmbeddedClass:"vn-embedded",playerFloatingClass:"vn-floating",zIndex:null,playerDesktopFactor:.6,playerMobileFactor:.6,playerDesktopStartFactor:.5,playerDesktopStopFactor:.5,playerMobileStartFactor:.5,playerMobileStopFactor:.5,floatingWidth:"200px",floatingBottom:"2%",floatingRight:"3%",flyExpandingDuration:0,flyExpandingStartOpacity:.05,switchToEmbeddedModeAtTheEnd:!0,flyBelowOnly:!1},ie=0,re=1,oe=!1,ne=0,ae=function(t){var i,a;function s(i,a){var s,l,d;void 0===a&&(a={});var c=a&&a.ancestor&&a.ancestor+":"+te||"::Format[FlyRoll]";if(oe)throw Error(c+".Format instance already active on the page");var u=a&&a.moduleAPI&&a.moduleAPI.logger||o.ZP,h=(null==u||null===(s=u.getChildWriter)||void 0===s?void 0:s.call(u,te))||u,p=a.canFlyModeStart;a.canFlyModeStart=(0,n.MV)(p);var g={};a.canFlyModeStart&&(g.doNotWatchVisibility=!1,g.expandOnAdLoaded=!0),h.trace(c+".constructor()"),(d=t.call(this,i,Qt(Qt(Qt(Qt({},ee),a),g),{},{ancestor:c}))||this)._fakeVideoSlot=null,d.options.flyBelowOnly=(0,n.MV)(d.options.flyBelowOnly),d["Format[FlyRoll]"]=c,d._setInstanceEIsExists(),d._replaceModuleInnerNode();var v=d.options,f=v.floatingElement,m=v.floatingWidth,b=v.floatingTop,y=v.floatingRight,A=v.floatingBottom,w=v.floatingLeft,P=v.floatingTranslateX,O=void 0===P?0:P,S=v.floatingTranslateY,_=void 0===S?0:S,C=v.flyExpandingDuration,E=v.flyExpandingStartOpacity;d._mode=ie,d.traceLogEnabled=(0,n.MV)((0,r.L2)("flyroll.trace"));var D={position:"fixed",zIndex:2147483646,backgroundColor:"white",boxShadow:"0 0 10px black",width:(0,n.Ug)(m),top:(0,n.Ug)(b),right:(0,n.Ug)(y),bottom:(0,n.Ug)(A),left:(0,n.Ug)(w),transitionProperty:"none",transitionDuration:0,opacity:C?E:1,transform:"translate("+(0,n.Ug)(O)+", "+(0,n.Ug)(_)+")"},I={position:"absolute",textAlign:"center",width:"100%",zIndex:Jt(d).options.zIndex,backgroundColor:"",top:0,left:0,transform:"translate(0, 0)",minWidth:"auto",maxWidth:"auto",transitionProperty:"none",transitionDuration:0,boxShadow:"none",opacity:1};d._style=((l={})[ie]=d._updateEmbeddedBlockStyle(I),l[re]=d._updateFlyBlockStyle(D),l);var T=(0,e.V4)(f);d._strictFloatingWidth=parseFloat(m)||null,d._floatingWidthInPercents="%"===(""+m).trim().substr(-1)&&parseFloat(m)||null,(d._floatingPositionNode=T||d._floatingPositionNode)&&d._addDOMEventListener(window,"resize",(function(){d._updateSlotSizeAndPosition()}));var V=Jt(d).options,k=V.playerDesktopFactor,j=V.playerMobileFactor,R=V.playerDesktopStartFactor,M=V.playerDesktopStopFactor,N=V.playerMobileStartFactor,L=V.playerMobileStopFactor;return d._playerFactor=x.ai?j:k,d._playerStartFactor=x.ai?N:R,d._playerStopFactor=x.ai?L:M,d._updateSlotSizeAndPosition(),d}a=t,(i=s).prototype=Object.create(a.prototype),i.prototype.constructor=i,Yt(i,a);var l=s.prototype;return l._updateEmbeddedBlockStyle=function(t){return t||{}},l._updateFlyBlockStyle=function(t){return t||{}},l._replaceModuleInnerNode=function(){},l.isFloatingMode=function(){return this._mode===re},l._initDOM=function(){t.prototype._initDOM.call(this);var i=this.moduleNode,r=this.insideIframe,o=this.options,n=o.floatingElement,a=o.showObservableNode;if(r)throw Error(this["Format[FlyRoll]"]+"._initDOM(). Unable create flyRoll inside iframe");var s=n&&(0,e.V4)(n);this._floatingPositionNode=s||function(){return this._addDOMNode((0,e.Xv)(document.body,"div",{position:"fixed",zIndex:-1,top:0,bottom:0,left:0,right:0}))}.call(this),!0===a&&(0,e.Zs)(this._floatingPositionNode,{outlineWidth:"1px",outlineColor:"magenta",outlineStyle:"solid"}),(0,e.Zs)(i,{zIndex:null}),this._updateSlotSizeAndPosition()},l._vpaidInitAd=function(){var e=this;this.logger.trace(this["Format[FlyRoll]"]+"._vpaidInitAd()");var i=t.prototype._vpaidInitAd.call(this);this.isFloatingMode()||this._updateFakeVideoSlot();var r=this.options.canFlyModeStart,o=this.options.moduleAPI,n=o.addVPAIDEventListener;!!(0,o.AdVideoStartWasHappenedAtLeastOnce)()&&(r=this.options.canFlyModeStart=!0,this.options.expandOnAdLoaded=!0),n&&(kt.call(this,"AdLoaded","onAdLoadedHandlerFlyRollBase_2"),this.onAdLoadedHandlerFlyRollBase_2=n("AdLoaded",(function(){kt.call(e,"AdLoaded","onAdLoadedHandlerFlyRollBase_2"),e._updateSlotClass(),e.isFloatingMode()||(e._updateModuleSize(),e._updateModuleNodeSize())}),this)),r&&n&&(kt.call(this,"AdLoaded","onAdLoadedHandlerFlyRollBase"),this.onAdLoadedHandlerFlyRollBase=n("AdLoaded",(function(){kt.call(e,"AdLoaded","onAdLoadedHandlerFlyRollBase"),e.logger.log(e["Format[FlyRoll]"]+" @AdLoaded canFlyModeStart!"),he.call(e)}),this));var a=function(){var t=(e.options||{}).switchToEmbeddedModeAtTheEnd;(void 0===t||t)&&e.isFloatingMode()&&e._setMode(ie)};return n&&(kt.call(this,"AdVideoComplete","onAdVideoCompleteHandlerFlyRollBase"),this.onAdVideoCompleteHandlerFlyRollBase=n("AdVideoComplete",a,this),kt.call(this,"AdSkipped","onAdSkippedHandlerFlyRollBase"),this.onAdSkippedHandlerFlyRollBase=n("AdSkipped",a,this),kt.call(this,"AdVideoStart","onAdVideoStartHandlerFlyRollBase"),this.onAdVideoStartHandlerFlyRollBase=n("AdVideoStart",(function(){kt.call(e,"AdVideoStart","onAdVideoStartHandlerFlyRollBase"),e.trigger("vnFormatStateChanged",{src:te,isFloating:e._mode===re})}),this)),i},l._getNodeForObservableChecking=function(){return this._fakeVideoSlot||this.moduleNode},l._updateModuleNodeSize=function(e){void 0===e&&(e=!1);var i=this._floatingModeWasExists,r=this.options.canFlyModeStart;if(!this.isFloatingMode())if(r&&!i)t.prototype._updateModuleNodeSize.call(this,!0);else{var o=(t.prototype._updateModuleNodeSize.call(this,e||r&&i)||{}).height;o&&this._updateSlotSizeAndPosition(o)}},l._applyModuleStateCheckPausedAndPlaying=function(e){var i=e.intersectionRatio,r=e.moduleSquare,o=e.boundingClientRect,a=this.traceLogEnabled,s=this._playerStartFactor,l=this._playerStopFactor,d=this._playerFactor,c=this._floatingModeWasExists,u=this._moduleWasClosed,h=this.moduleNode,p=this.options,g=p.flyBelowOnly,v=p.canFlyModeStart,f=p.moduleAPI,m=f.inState,b=f.getState,y=f.resumeAd,A=f.pauseAd;if(!u){var w=this.isFloatingMode();w||(this.maxEmbeddedIntersectionRatio=Math.max(i,this.lastEmbeddedIntersectionRatio||0));var P=b(),O=m&&!m("loaded")||v,S=m&&m(["paused","pausing"]),_=m&&m("playing"),C=m&&m("afterplay"),E=h&&h.getBoundingClientRect()||{},D=E.top,I=E.bottom,T=E.width;if(a&&this.logger.trace(this["Format[FlyRoll]"]+"._applyModuleStateCheckPausedAndPlaying() !!!! intersectionRatio="+i+" moduleNodeWidth="+T+" boundingClientRect.width="+o.width+" moduleSquare="+r+" _floatingModeWasExists="+c+" floating="+w+" _playerFactor="+d+" state="+P+" playing="+_+" paused="+S+" started="+O+" this._adHasBeenStarted="+this._adHasBeenStarted+" maxEmbeddedIntersectionRatio="+this.maxEmbeddedIntersectionRatio,1),!w&&g){var V=document.documentElement.clientHeight,k=I>=V&&D<=V&&D>0||!i&&I>=V&&D>=V;if(a&&this.logger.trace(this["Format[FlyRoll]"]+". forbiddenSetFlyMode="+k+" top="+D+" bottom="+I+" clientHeight="+V+" intersectionRatio="+i+" floating="+w,2,"pink"),k)return void t.prototype._applyModuleStateCheckPausedAndPlaying.call(this,{intersectionRatio:i})}S&&(w||i>=s)&&y&&y(),!w&&_&&this.maxEmbeddedIntersectionRatio<l&&!c&&A&&A();var x=r&&!(0,n.s6)(T,o.width,10),j=v||this.lastEmbeddedIntersectionRatio>=d||this.lastEmbeddedIntersectionRatio>=s&&i<this.lastEmbeddedIntersectionRatio||c;this.logger.none(this["Format[FlyRoll]"]+"._applyModuleStateCheckPausedAndPlaying()\nfloating="+w+"\neqModuleNode="+x+"\ncanSwitchMode="+j+"\n intersectionRatio="+i+"\n moduleNodeWidth="+T+"\n boundingClientRect.width="+o.width+"\n moduleSquare="+r+"\n _floatingModeWasExists="+c+"\n floating="+w+"\n _playerFactor="+d+"\n playing="+_+"\n paused="+S+"\n started="+O+"\n this._adHasBeenStarted="+this._adHasBeenStarted+"\n maxEmbeddedIntersectionRatio="+this.maxEmbeddedIntersectionRatio+"\n_playerStartFactor="+s,1),O&&w&&i>=d&&x?this._setMode(ie):O&&!w&&!C&&i<d&&x&&j&&this._setMode(re),w||(this.lastEmbeddedIntersectionRatio=i),this.trigger("applyModuleStateCheckPausedAndPlaying")}},l._moduleResizeAd=function(i,r){var o=this.traceLogEnabled,a=this.options.moduleAPI,s=a.getIndents,l=a.saveAdParams,d=a.getSavedAdParams,c=a.inState,u=s&&s(),h=null==u.clientHeight;if(o&&this.logger.trace(this["Format[FlyRoll]"]+"._moduleResizeAd() mode="+this._mode),this._updateSlotClass(),this.isFloatingMode()){var p=this._mode,g=this._strictFloatingWidth,v=this._floatingWidthInPercents,f=this.moduleInnerNode,m=this.options.moduleAPI,b=m.resizeAd,y=m.setWrapperSize,A=m.getControlNode,w=m.AdVideoStartWasHappenedAtLeastOnce,P=u.borderTop,O=u.paddingTop,S=u.borderBottom,_=u.paddingBottom,C=u.marginTop,E=!!w(),D=this.getBaseName()+"_moduleResizeAd",I=d(D);if((h||!c(["loaded","starting","playing","pausing","paused"]))&&E)return void((0,n.Dp)(I&&I[p],this.logger,"Format[FlyRoll] _moduleResizeAd().")||ce.call(this,["AdVideoStart"],"_updateModuleState()"));var T=window.getComputedStyle(i),V=!v&&g||Math.round(i.clientWidth-parseFloat(T.paddingLeft)-parseFloat(T.paddingRight));v&&(o&&this.logger.trace(this["Format[FlyRoll]"]+" _moduleResizeAd() floatingWidth="+V*v/100+" moduleWidth="+V+"  _strictFloatingWidth="+g+" _floatingWidthInPercents="+v),V*=v/100);var k=Math.min(window.innerWidth,V),x=Math.min(window.innerHeight,Math.round(k*r));this.logger.log(this["Format[FlyRoll]"]+" _moduleResizeAd() width="+k+" height="+x);var j=se.call(this,k,x,i,r),R=j.width,M=j.height;R===k&&M===x||this.logger.log(this["Format[FlyRoll]"]+" _moduleResizeAd() after correction adWidth="+R+" adHeight="+M,1),I||(I={});var N=I[p]=[];b&&(N.push((function(){return b(R,M)})),b(R,M));var L=(M||0)+(P||0)+(S||0)+(O||0)+(_||0),F={width:(0,n.Ug)(R),height:(0,n.Ug)(L+(C||0))};(0,e.Zs)(f,F),N.push({node:f,moduleInnerStyles:F}),N.push((function(){return y(L)})),y(L);var W=(this.options||{}).setSizeByMedia;if((0,n.MV)(W)){var H=A("vpaidSlot");if(H){var U={position:"absolute",top:0,left:0,width:"100%",height:"100%",textAlign:"center"};(0,e.Zs)(H,U),N.push({node:H,styles:U})}}l(D,I)}else t.prototype._moduleResizeAd.call(this,i,r)},l._getTopLeftForEmbedded=function(){return{top:0,left:0}},l._updateSlotSizeAndPosition=function(t){void 0===t&&(t=null);var i=this._mode,r=this.moduleNode,a=this.options,s=a.forceEnableVerticalContent,l=a.flyExpandingDuration,d=a.moduleAPI,c=d.getIndents,u=d.getAdAspectRatio,h=d.AdVideoStartWasHappenedAtLeastOnce,p=d.inState,g=d.saveAdParams,v=d.getSavedAdParams,f=this.moduleInnerNode,m=this.traceLogEnabled;if(f&&null!=i){var b=c(),y=null==b.clientHeight,A=!!h();m&&this.logger.trace(this["Format[FlyRoll]"]+"._updateSlotSizeAndPosition() mode="+i+" wrapperNotFound="+y+" notFirstAd="+A);var w=this.getBaseName()+"_updateSlotSizeAndPosition",P=v(w)||{};if(!y&&p(["loaded","starting","playing","pausing","paused"])||!A){P||(P={});var O=P[i]=[];if((0,e.Zs)(f,this._style[i]),this._mode===ie){var S=t||b.floatOutsideHeight,_=this._getTopLeftForEmbedded(),C=_.top,E=_.left,D=(0,n.er)(r),I=D.clientWidth,T=D.marginRight,V=D.marginLeft,k=r.style,j=k.marginLeftStr,R=k.marginRightStr,M=I+V+T-(parseFloat(j)||0)-(parseFloat(R)||0);f&&(0,e.Zs)(f,{top:(0,n.Ug)(C),left:(0,n.Ug)(E),visibility:""}),m&&this.logger.trace(this["Format[FlyRoll]"]+"._updateSlotSizeAndPosition() height="+S+" width="+M+" top="+C+" left="+E+" forceHeight="+t),void 0!==S&&f&&(0,e.Zs)(f,{height:(0,n.Ug)(S)}),void 0!==M&&f&&(0,e.Zs)(f,{width:(0,n.Ug)(M)})}else{var N=u&&u();!x.ai&&N>1&&!s&&(N=9/16);var L=this._getWidthNode();this._moduleResizeAd(L,N),O.push(this._moduleResizeAd.bind(this,L,N));var F=le.call(this)||{};F&&(0,e.Zs)(f,F),l&&setTimeout((function(){return(0,e.Zs)(f,{transitionProperty:"opacity",transitionDuration:(0,n.pL)(l),opacity:1})}),1)}var W=getComputedStyle(f),H=Object.keys(this._style[ie]).concat("height").reduce((function(t,e){return t[e]=W[e],t}),{});O.push({node:f,styles:H}),g(w,P)}else(0,n.Dp)(P&&P[i],o.ZP,"Format[FlyRoll] _updateSlotSizeAndPosition() .")}},l._updateSlotClass=function(){var t=this._mode,e=this.options,i=e.playerEmbeddedClass,r=e.playerFloatingClass,o=e.moduleAPI.getControlNode,n=o&&o("slot");n&&(t===re?(n.classList.remove(i),n.classList.add(r)):(n.classList.remove(r),n.classList.add(i)))},l._getWidthNode=function(){var t=this._mode,e=this._floatingPositionNode,i=this.widthNode,r=this.options.moduleAPI.getControlNode;return(t===re?e:i)||r&&r("slot")},l._setMode=function(e){if(this.logger.trace(this["Format[FlyRoll]"]+"._setMode("+e+")",2),!this._moduleWasClosed){this.isFloatingMode()||this._updateFakeVideoSlot(),this._mode=e;var i=e===re;t.prototype._resetObservableNodes.call(this),this._updateModuleSize(),this._updateModuleNodeSize(),this._updateSlotSizeAndPosition(),i&&(this._floatingModeWasExists=!0),this._updateSlotClass(),this.trigger("vnFormatStateChanged",{src:te,isFloating:i})}},l._destroy=function(){this.logger.log(this["Format[FlyRoll]"]+"._destroy()"),this._resetInstanceEIsExists(),t.prototype._destroy.call(this),this.logger.log(this["Format[FlyRoll]"]+"._destroy() Destroyed")},l._resetInstanceEIsExists=function(){oe===this&&(this.logger.log(this["Format[FlyRoll]"]+"._destroy() RESET _instanceIsExist",2),oe=!1)},l._setInstanceEIsExists=function(){oe||(this.logger.log(this["Format[FlyRoll]"]+".constructor SET _instanceIsExist",2),oe=this)},l._createReachInventoryFactory=function(e,i){var r=this.traceLogEnabled,o=this.options,n=o.canFlyModeStart,a=o.moduleAPI.getMainModuleId;r&&this.logger.trace(this["Format[FlyRoll]"]+"._createReachInventoryFactory() canFlyModeStart="+n,2,"magenta");var s=a&&a();if(!n)return t.prototype._createReachInventoryFactory.call(this,e,i);return{id:("vn-visible-inventory-mark_"+this+"_"+ne+++" vn-module__"+s).replace(/\s+/g,"-").replace(/(\[|])/g,"_"),waiterCreator:function(){return Promise.resolve()},moduleNode:i}},l._getWatchVisibilityThreshold=function(){var t=this._playerFactor,e=this._playerStartFactor,i=this._playerStopFactor,r=[];t>=0&&(r.push(t),t>.01&&r.push(t-.01),1-t>.01&&r.push(t+.01));return e>=0&&r.push(e),i!==e&&i>=0&&r.push(i),r.push(e),r.length&&(0!==t&&r.push(0),1!==t&&r.push(1)),r.sort()},l._closeModule=function(i){void 0===i&&(i={});var r=this.options.moduleAPI.getControlNode;this._resetInstanceEIsExists();var o=r&&r("slot");(0,e.Zs)(o,{display:"none"}),t.prototype._closeModule.call(this,i)},l._updateFakeVideoSlot=function(){var t=this._fakeVideoSlot,i=this.moduleNode,r=this.options,o=r.showObservableNode,a=r.moduleAPI.getControlNode,s=t;(0,e.Re)(s)||(this._fakeVideoSlot=s=document.createElement("div"),(0,e.Zs)(s,{position:"absolute",pointerEvents:"none",top:0,left:0,right:0,bottom:0}),i.insertBefore(s,i.firstElementChild),!0===o&&((0,e.Zs)(this._floatingPositionNode,{outlineWidth:"1px",outlineColor:"lightpink",outlineStyle:"solid"}),s.classList="fakeVideoSlot"));var l=a&&a("vpaidSlot"),d=l&&(0,e.Qt)(l,s)||{};return(0,e.Zs)(s,{top:(0,n.Ug)(d.top||0)}),s},l.toString=function(){return te},l.getBaseName=function(){return Kt.toLowerCase()},s}(ht);function se(t,e,i,r){var o=this.options,n=o.floatingMinHeight,a=o.floatingMaxHeight,s=o.floatingMinWidth,l=o.floatingMaxWidth,d=o.moduleAPI.getIndents,c=d&&d(),u=c.top+c.bottom,h=i.clientWidth,p=document.documentElement,g=p.clientHeight,v=p.clientWidth,f=de(l,h),m=de(s,h),b=de(a,g),y=de(n,g);function A(i){t=i,e=Math.round(t*r)}function w(i){e=i,t=Math.round(e/r)}return m&&t<m&&A(m),y&&e+u<y&&w(y-u),f&&t>f&&A(f),v&&t>v&&A(v),b&&e+u>b&&w(b-u),{width:t,height:e}}function le(){var t=this._style,e=this._floatingPositionNode,i=this.traceLogEnabled,r=this.options,o=r.floatingHCenter,a=r.floatingTop,s=r.floatingRight,l=r.floatingBottom,d=r.floatingLeft,c=r.moduleAPI,u=c.getAdHeight,h=c.getAdWidth,p=c.getIndents,g=u&&u(),v=h&&h();if(!(g&&v&&e&&t))return i&&this.logger.trace(this["Format[FlyRoll]"]+" one or more parameters is false: adHeight="+g+" adWidth="+v+" _floatingPositionNode="+e+" _style="+t,1,"pink"),null;var f=e.getBoundingClientRect(),m=f.width,b=f.height,y=f.left,A=f.top,w=p&&p()||{},P=w.top,O=w.floatOutsideWidth,S=w.floatInsideHeight;if(isNaN(P)||isNaN(O)||isNaN(S))return i&&this.logger.trace(this["Format[FlyRoll]"]+" parameters isNaN topPadding="+P+" flWidth="+O+" flHeight="+S,1,"pink"),null;var _=S+P,C="";if(o){var E=(m-O)/2;C+="translateX("+(0,n.Ug)(E)+") "}else d?C+="translateX("+(0,n.Ug)(d)+") ":s&&(C+="translateX(calc("+(0,n.Ug)(m)+" - "+(0,n.Ug)(s)+" - "+(0,n.Ug)(O)+")) ");return a?C+="translateY("+(0,n.Ug)(a)+") ":l&&(C+="translateY(calc("+(0,n.Ug)(b)+" - "+(0,n.Ug)(l)+" - "+(0,n.Ug)(_)+")) "),i&&this.logger.trace(this["Format[FlyRoll]"]+' calcFloatingWidthAndPosition() transform="'+C+'"\n width='+m+" flWidth="+O+" adWidth="+v+" top="+A+" left="+y+" adHeight="+g+" flHeight="+S),{width:(0,n.Ug)(O),top:(0,n.Ug)(A),left:(0,n.Ug)(y),transform:C}}function de(t,e){var i=(0,d.GM)(t);return i&&i*e||+t}function ce(t,e){var i=this,r=this.traceLogEnabled,o=this.options.moduleAPI,n=o.removeVPAIDEventListener,a=o.addVPAIDEventListener;if((0,o.inState)(["loaded","starting","playing"]))this._setMode(this._mode);else{var s=this.handlersForUpdateModuleState;s||(s=this.handlersForUpdateModuleState={}),r&&this.logger.trace(this["Format[FlyRoll]"]+".setHandlersForUpdateModuleState()"),t.forEach((function(t){s[t]||(s[t]&&n(t,s[t],i),s[t]=a(t,ue.bind(i,e+" @{eventName}"),i))}))}}function ue(t){var e=this,i=this.traceLogEnabled,r=this.options.moduleAPI.removeVPAIDEventListener,o=this.handlersForUpdateModuleState;Object.values(o||{}).forEach((function(t){var i=t[0],n=t[1];n&&(r(i,n,e),o[i]=null)})),i&&this.logger.trace(this["Format[FlyRoll]"]+"."+t+" Calls _setMode("+this._mode+")"),this._setMode(this._mode)}function he(){var t=this.options.moduleAPI,e=t.inState,i=t.resumeAd,r=t.startAd;this._mode=re;var o=this._addVPAIDEventListener(this,"applyModuleStateCheckPausedAndPlaying",function(){this._removeVPAIDEventListener(this,"applyModuleStateCheckPausedAndPlaying",o),this.isFloatingMode()&&(this._setMode(re),e(["paused","pausing"])?i():e("playing")||r())}.bind(this))}function pe(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function ge(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?pe(Object(i),!0).forEach((function(e){ve(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):pe(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function ve(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function fe(t,e){return fe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},fe(t,e)}var me="Format[FlyRollTop]",be={embeddedPosition:"absolute",zIndex:2147483646},ye=function(t){var e,i;function r(e,i){var r,o=i&&i.ancestor&&i.ancestor+":"+me||"::Format[FlyRollTop]";return(r=t.call(this,e,ge(ge(ge({},be),i),{},{ancestor:o}))||this)["Format[FlyRollTop]"]=o,r}i=t,(e=r).prototype=Object.create(i.prototype),e.prototype.constructor=e,fe(e,i);var o=r.prototype;return o._updateFlyBlockStyle=function(t){var e=(t||{}).width;return e&&e.endsWith("%")&&delete t.width,ge(ge({},t),{},{right:0,bottom:0})},o._updateEmbeddedBlockStyle=function(t){return ge(ge({},t),{},{position:"absolute",height:0,overflow:"hidden"})},o._replaceModuleInnerNode=function(){this.moduleInnerNode=(0,n.I6)(window).document.body.appendChild(this.moduleInnerNode.parentElement.removeChild(this.moduleInnerNode))},o._getTopLeftForEmbedded=function(){return function(t){if(!t)return{top:0,left:0};var e=t.getBoundingClientRect(),i=document,r=i.body,o=i.documentElement,n=window.pageYOffset||o.scrollTop||r.scrollTop,a=window.pageXOffset||o.scrollLeft||r.scrollLeft,s=o.clientTop||r.clientTop||0,l=o.clientLeft||r.clientLeft||0,d=e.top+n-s,c=e.left+a-l;return{top:d,left:c}}(this.moduleNode)},o.toString=function(){return me},r}(ae);function Ae(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function we(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Ae(Object(i),!0).forEach((function(e){Pe(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Ae(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Pe(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Oe(t,e){return Oe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Oe(t,e)}var Se="Format[FlyRollAlwaysFly]",_e={embeddedPosition:"absolute",zIndex:2147483646,ignoreCreatePlayerElement:!0,canFlyModeStart:!0},Ce=function(t){var i,r;function o(e,i){var r,o=i&&i.ancestor&&i.ancestor+":"+Se||"::Format[FlyRollAlwaysFly]";return(r=t.call(this,e,we(we(we({},_e),i),{},{ancestor:o}))||this)["Format[FlyRollAlwaysFly]"]=o,r}r=t,(i=o).prototype=Object.create(r.prototype),i.prototype.constructor=i,Oe(i,r);var n=o.prototype;return n._getTopLeftForEmbedded=function(){return{top:0,left:0}},n._setMode=function(e){e===re&&(this._switchOffObservableAdvancedNode(),t.prototype._setMode.call(this,e))},n._updateFakeVideoSlot=function(){},n._updateModuleNodeSize=function(){},n._initDOM=function(){t.prototype._initDOM.call(this);var i=this.moduleNode;(0,e.Re)(i)&&(0,e.Zs)(i,{height:0})},n.toString=function(){return Se},o}(ye);function Ee(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function De(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Ee(Object(i),!0).forEach((function(e){Ie(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Ee(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Ie(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Te(t,e){return Te=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Te(t,e)}var Ve="Format[FlyRollRegular]",ke={zIndex:null,embeddedPosition:"relative"},xe=function(t){var e,i;function r(e,i){var r,o=i&&i.ancestor&&i.ancestor+":"+Ve||"::Format[FlyRollRegular]";return(r=t.call(this,e,De(De(De({},ke),i),{},{ancestor:o}))||this)["Format[FlyRollRegular]"]=o,r}i=t,(e=r).prototype=Object.create(i.prototype),e.prototype.constructor=e,Te(e,i);var o=r.prototype;return o._updateEmbeddedBlockStyle=function(t){return De(De({},t),{},{position:"absolute"})},o._getTopLeftForEmbedded=function(){return{top:0,left:0}},o.toString=function(){return Ve},r}(ae);const je={"Loading video...":" ...","Skip ad in {{x}} sec":"   {{x}} ","Skip ad in":' <div style="font-size: smaller"> </div>',"{{x}} sec":"{{x}} ","Going after":'<div style="font-size: smaller">  </div>',"Learn more":"",Advertisement:"","Watch video":" ","Watch video<br/>after ad":"</br> ","Pull to skip<br/>{{x}}":",<br/> <br/>{{x}}","Push to watch<br/>360 video":",  <br/>360- ","The ad will end in {{x}} sec":"   {{x}} ","Click to get Videonow debug":"    Videonow",Close:"","Play again":"  ","Open advertiser site":"   "};var Re={ru:je},Me=!1,Ne="en";function Le(){var t;try{t=(top.navigator.language||top.navigator.userLanguage).substr(0,2)}catch(e){t=(navigator.language||navigator.userLanguage).substr(0,2)}Me=!0,Re[t]&&(Ne=t)}const Fe=function(t){for(var e,i,r,o=arguments.length,n=new Array(o>1?o-1:0),a=1;a<o;a++)n[a-1]=arguments[a];if(Me||Le(),"en"===Ne){if(String.raw)return String.raw(t,n);if(!Re[Ne]){var s=Re[Ne]={};Object.keys(je).forEach((function(t){s[t]=t}))}}var l=(null===(e=t.join)||void 0===e?void 0:e.call(t,""))||(null===(i=t.raw)||void 0===i||null===(r=i.join)||void 0===r?void 0:r.call(i,"")),d=Re[Ne],c="";return Object.keys(d).forEach((function(t){c||t.replace(/{{x}}/g,"")!==l||(c=d[t],n&&n.forEach((function(t){c=c.replace(/{{x}}/g,t)})))})),c||String.raw(t,n)};var We=function(){return Me||Le(),Ne};function He(t){this.logger.trace(".setState("+t+")"),this.state=t}function Ue(t){return-1!==[].concat(t).indexOf(this.state)}function ze(){return!Ue.call(this,["stopped","destroyed","destroying"])}function Be(){return!Ue.call(this,["complete","completing","stopped","destroyed","destroying"])}var Ze,qe;function Xe(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function Ge(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Xe(Object(i),!0).forEach((function(e){Qe(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Xe(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Qe(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function $e(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Je(t,e){return Je=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Je(t,e)}var Ye,Ke,ti,ei,ii,ri="SlideRoll",oi="Format[SlideRoll]",ni=(null===o.ZP||void 0===o.ZP||null===(Ze=o.ZP.getChildWriter)||void 0===Ze?void 0:Ze.call(o.ZP,oi))||o.ZP,ai={playerElement:null,playerAfter:null,playerBefore:null,playerFactor:.5,closeFactor:.3,transitionDuration:0,expandOnAdLoaded:!1},si={videoSlot:{boxShadow:"0 0 20px 5px rgba(0, 0, 0, 0.5)"},title:{top:"10px",left:"10px",padding:"5px 10px",lineHeight:"15px",color:"white",backgroundColor:"rgba(0, 0, 0, 0.289)",borderRadius:"3px",cursor:"default",pointerEvents:"none"},logo:{top:"5px",right:"5px",bottom:"auto",left:"auto"},play:null,skipAd:null,skipAdCountdown:{display:"none",position:"absolute",top:"auto",right:"auto",bottom:"5px",left:"50%",width:"160px",margin:"0 auto 5px auto",padding:"5px",borderRadius:"3px",backgroundColor:"rgba(0, 0, 0, 0.7)",transform:"translateX(-50%)",textAlign:"center"},subtitle:{bottom:"25%"}},li=function(t){var i,r;function o(e,i){var r;if(ni.trace("Format[SlideRoll].constructor()"),!x.ai)throw new Error("Mobile not detected");return(r=t.call(this,e,Ge(Ge(Ge({},ai),i),{},{ancestor:oi}))||this)._proceedToNextDefaultAd=function(t){t&&(r.logger.trace("Format[SlideRoll] @vnProceedToNextDefaultAd",2),r.module.isVpaidStartAdWasInvokedOnce&&r._updateModuleState())},r.options.expandOnAdLoaded=(0,n.MV)(r.options.expandOnAdLoaded),r.waitingForInitialScroll=!0,r.onResize=ui.bind($e(r)),r.onScroll=hi.bind($e(r)),r.onTouchEnd=yi.bind($e(r)),r.onTouchStart=bi.bind($e(r)),r._scrollTo=ci.bind($e(r)),r._addVPAIDEventListener(e,"vnProceedToNextDefaultAd",r._proceedToNextDefaultAd),r}r=t,(i=o).prototype=Object.create(r.prototype),i.prototype.constructor=i,Je(i,r);var a=o.prototype;return a._initDataXml=function(){var t=this;return new Promise((function(i){ni.trace("Format[SlideRoll].initDataXml()");var r=t.module,o=t.options,n=window.innerWidth,a=M(o,""+t),s=a.moduleNode,l=a.moduleInnerNode;t.moduleNode=t._addDOMNode(s),t.moduleInnerNode=t._addDOMNode(l);var d=t.slot=t._initSlotNode();(0,e.Zs)(s,{position:"relative"}),(0,e.Zs)(l,{clip:"rect(0,0,0,0)"});var c=s.getBoundingClientRect(),u=c.left,h=c.right;(0,e.Zs)(s,{marginLeft:"-"+u+"px",marginRight:"-"+(n-h)+"px"}),Object.keys(si).forEach((function(t){var e=si[t];r.setControlData(t,{css:e})})),r.setControlData("logo",{content:'<svg width="96" height="24" fill-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414" clip-rule="evenodd" viewBox="0 0 128 32"><path fill-opacity=".298" d="M120.368 28.943c-.464 1.503-1.606 2.72-3.108 2.72H2.766c-1.502 0-3.208-1.217-2.72-2.72L9.11 3.02C9.758.923 10.557.3 12.06.3h113.18a2.72 2.72 0 0 1 2.72 2.72l-7.592 25.923z"/><path fill="#fff" d="M20.303 23.29c-.05.13-.11.238-.178.32a.678.678 0 0 1-.32.185c-.14.042-.33.07-.573.08-.24.01-.552.018-.938.018-.31 0-.573-.003-.793-.007-.21-.004-.4-.014-.55-.03a1.754 1.754 0 0 1-.37-.068.73.73 0 0 1-.23-.117c-.06-.04-.1-.1-.13-.16s-.05-.15-.07-.25l-3.3-13.27c-.06-.27-.1-.49-.11-.66 0-.16.05-.28.15-.36.11-.08.28-.13.51-.15.24-.02.56-.03.98-.03.36 0 .64.01.83.02.2.02.36.05.46.08.11.04.18.1.21.18.04.08.07.18.1.29L18.6 20.9h.012l4.58-11.49c.04-.13.09-.23.145-.31.05-.08.137-.14.254-.19.12-.04.28-.07.49-.09.21-.01.5-.02.86-.02s.63.01.83.03c.2.03.33.08.39.17.07.09.08.218.04.38s-.12.377-.24.647L20.31 23.29zm7.95.114a.361.361 0 0 1-.094.21.608.608 0 0 1-.27.15c-.12.04-.28.07-.47.093-.2.024-.45.036-.75.036s-.54-.012-.74-.036c-.2-.022-.35-.054-.46-.093a.45.45 0 0 1-.24-.15.263.263 0 0 1-.06-.21l1.23-14.14c0-.077.04-.145.09-.208.05-.06.14-.112.27-.15.12-.038.28-.07.47-.094.19-.022.44-.033.73-.033.3 0 .54.01.73.03.19.02.34.05.45.09.114.04.19.09.24.15.044.06.064.13.06.21l-1.2 14.14zM39.78 16.22a7.37 7.37 0 0 0-.076-1.978 3.855 3.855 0 0 0-.66-1.587 3.275 3.275 0 0 0-1.32-1.046c-.553-.26-1.296-.38-2.23-.38h-1.538l-.89 10.18h1.583c.83 0 1.54-.11 2.13-.33a3.95 3.95 0 0 0 1.51-.98c.42-.44.75-.98.99-1.63.24-.65.4-1.41.48-2.27zm3.156-.105c-.12 1.373-.403 2.55-.846 3.524-.445.97-1.03 1.77-1.754 2.38-.725.62-1.58 1.07-2.567 1.36-.99.29-2.15.43-3.47.43h-3.58c-.26 0-.47-.08-.63-.23-.16-.15-.23-.4-.2-.74L31.03 9.8c.03-.34.14-.583.326-.734a1.02 1.02 0 0 1 .662-.223h3.84c1.335 0 2.452.153 3.354.465.9.312 1.643.775 2.23 1.39.58.613 1 1.37 1.25 2.273.253.9.33 1.95.223 3.14zm9.15 6.515c-.02.225-.047.412-.08.562-.032.152-.07.273-.118.365a.532.532 0 0 1-.163.202.349.349 0 0 1-.197.06h-7.52a.88.88 0 0 1-.624-.23c-.16-.15-.225-.4-.196-.74l1.14-13.05c.03-.34.14-.59.327-.74.187-.15.408-.23.662-.23h7.476c.07 0 .13.02.18.06.05.04.09.1.12.2.032.09.05.22.055.37.005.15 0 .34-.02.57-.02.21-.046.4-.078.55-.03.15-.072.27-.12.36a.508.508 0 0 1-.156.2.323.323 0 0 1-.19.06h-5.346l-.32 3.66h4.524c.07 0 .133.02.186.06.055.04.096.11.127.2.032.09.05.21.056.36.01.15 0 .33-.01.55-.02.22-.04.41-.08.55-.03.14-.07.26-.11.35-.05.08-.1.15-.16.19a.32.32 0 0 1-.19.05h-4.53l-.37 4.22h5.4c.07 0 .13.02.19.06.06.04.1.11.13.2.03.09.05.21.06.36.01.15 0 .34-.01.56z"/><path fill="#DADADA" d="M81.01 22.408a1.209 1.209 0 0 1-.417.82 1.05 1.05 0 0 1-.386.203c-.148.05-.294.07-.44.07H78.47c-.268 0-.5-.03-.692-.08a1.21 1.21 0 0 1-.518-.29 2.153 2.153 0 0 1-.43-.58 8.739 8.739 0 0 1-.437-.94l-3.113-7c-.18-.41-.36-.86-.542-1.35-.18-.48-.342-.95-.48-1.4h-.023c-.018.56-.044 1.11-.076 1.66-.04.55-.08 1.12-.13 1.71l-.69 7.84c-.01.08-.03.15-.08.21-.05.07-.13.12-.24.16-.11.05-.25.08-.43.1-.18.02-.41.04-.69.04-.27 0-.49-.01-.67-.03-.18-.02-.32-.05-.41-.1a.406.406 0 0 1-.2-.15c-.04-.06-.05-.13-.04-.21L69.76 9.6c.034-.368.164-.64.39-.82.23-.18.497-.27.806-.27h1.63c.295 0 .54.024.735.073.2.053.37.135.52.25.15.118.28.278.4.48.12.207.24.46.37.76l2.44 5.474c.15.33.28.658.42.977.14.32.27.64.4.96.13.32.25.635.37.944.12.31.24.61.35.92h.02a66.734 66.734 0 0 1 .22-3.368l.62-7.026a.423.423 0 0 1 .09-.21c.05-.06.13-.11.25-.16.12-.047.26-.08.44-.1.18-.02.41-.03.69-.03.26 0 .48.01.66.03.18.02.31.05.4.1.09.046.16.1.19.16.04.064.05.13.04.21L81 22.414zm12.444-6.436c.07-.787.07-1.503.003-2.147-.068-.643-.23-1.195-.485-1.654a2.705 2.705 0 0 0-1.094-1.06c-.47-.25-1.078-.37-1.82-.37-.748 0-1.385.14-1.91.42-.525.29-.965.66-1.314 1.13-.35.48-.615 1.03-.8 1.65-.18.63-.302 1.3-.363 2-.07.82-.07 1.56 0 2.21.07.65.23 1.21.48 1.67.25.47.62.82 1.09 1.06.47.24 1.09.37 1.83.37s1.39-.14 1.91-.41c.53-.28.97-.65 1.32-1.13.35-.48.62-1.03.8-1.67.18-.63.31-1.31.37-2.03zm3.208-.162c-.108 1.243-.36 2.353-.756 3.334-.392.978-.924 1.812-1.594 2.492a6.692 6.692 0 0 1-2.4 1.565c-.93.36-1.984.54-3.163.54-1.17 0-2.18-.15-3.02-.45-.84-.3-1.53-.77-2.05-1.39-.53-.62-.89-1.42-1.1-2.38-.21-.96-.25-2.1-.14-3.42.1-1.21.35-2.3.74-3.27.39-.97.92-1.79 1.59-2.47a6.65 6.65 0 0 1 2.4-1.56c.92-.36 1.98-.54 3.17-.54 1.13 0 2.12.15 2.96.45.84.31 1.52.77 2.05 1.4.52.62.89 1.41 1.11 2.36.21.96.26 2.08.15 3.38zm15.77 6.886c-.06.184-.14.334-.23.445-.09.12-.22.2-.386.26s-.378.1-.634.12c-.257.02-.582.03-.977.03-.44 0-.79-.01-1.055-.02-.263-.02-.47-.06-.62-.11-.15-.06-.254-.14-.314-.25-.058-.11-.1-.26-.124-.44l-1.565-9.49h-.022l-3.1 9.49c-.052.18-.12.33-.198.44a.77.77 0 0 1-.353.26c-.155.06-.363.11-.623.13-.26.02-.6.03-1.02.03-.44 0-.8-.01-1.07-.03-.26-.02-.47-.06-.61-.12a.57.57 0 0 1-.31-.25c-.06-.11-.1-.26-.13-.44l-2.28-13.1a3.37 3.37 0 0 1-.05-.65c0-.15.06-.28.16-.36.1-.08.27-.13.49-.15.22-.02.53-.03.92-.03.36 0 .65.006.86.018.21.014.37.04.48.08.11.04.18.106.21.185.03.08.05.193.06.34l1.63 11.47h.01l3.72-11.39c.04-.15.09-.27.15-.36a.557.557 0 0 1 .278-.215c.12-.05.29-.086.5-.1.21-.02.483-.03.83-.03.37 0 .665.004.884.02.22.014.38.05.5.1.11.05.19.12.24.212.04.09.07.21.09.37l1.83 11.38h.02l3.63-11.43c.03-.12.07-.23.11-.315.04-.09.12-.16.236-.21.11-.05.27-.09.47-.11.2-.02.48-.03.843-.03.34 0 .607.01.79.03.19.01.32.07.4.15.08.08.107.21.077.37s-.085.39-.18.67l-4.58 13.03zM59.99 19.37l.61-7.003 3.883 3.5-4.494 3.502z"/><path fill="#fff" d="M67.66 16.702c-.128 1.026-.36 1.957-.698 2.793-.393.98-.925 1.812-1.595 2.492a6.692 6.692 0 0 1-2.4 1.565c-.93.356-1.984.536-3.163.536-1.166 0-2.17-.15-3.013-.457-.83-.3-1.52-.76-2.04-1.39-.52-.62-.88-1.42-1.09-2.38-.21-.96-.25-2.1-.13-3.42.11-1.21.36-2.3.75-3.27.4-.96.93-1.79 1.6-2.47.67-.68 1.47-1.2 2.4-1.56.93-.36 1.99-.54 3.18-.54 1.14 0 2.12.15 2.97.45.85.3 1.53.77 2.06 1.39.53.63.9 1.42 1.11 2.37.19.85.25 1.84.18 2.97l-3.94-3.56c-.23-.3-.52-.54-.87-.73-.47-.25-1.07-.37-1.82-.37-.74 0-1.38.14-1.91.42-.52.29-.96.66-1.31 1.13-.35.47-.61 1.02-.8 1.65-.18.63-.3 1.3-.36 2-.07.82-.07 1.56-.01 2.21.07.65.23 1.21.48 1.67.26.47.62.82 1.09 1.06.47.25 1.09.37 1.83.37s1.39-.14 1.91-.42c.1-.05.2-.1.29-.16v.04l5.36-4.34z"/></svg>'}),r.setControlData("slot",{node:d}),t._addVPAIDEventListener(r,"AdLoaded",pi.bind(t)),t._addVPAIDEventListener(r,"AdResumed",vi.bind(t)),t._addVPAIDEventListener(r,"AdVideoStart",gi.bind(t)),t._addVPAIDEventListener(r,"AdSkippableStateChange",fi.bind(t)),t._addVPAIDEventListener(r,"AdStopped",mi.bind(t)),t._addVPAIDEventListener(r,"AdDestroyed",(function(){return t._destroy()})),i()}))},a._destroy=function(){ni.trace("Format[SlideRoll].destroy()"),t.prototype._destroy.call(this);var e=this._getDimensions().moduleTop,i=this.requestAnimationID;i&&window.cancelAnimationFrame(i),e&&window.scrollTo(window.scrollX,e),Object.assign(this,{onScroll:null,onResize:null,onTouchEnd:null,onTouchStart:null,module:null,moduleNode:null,moduleInnerNode:null,slot:null,_scrollTo:null})},a._createSlideToSkipAd=function(){var t,i,r=this.module,o=r.getControlNode("wrapper"),n=(0,e.Xv)(o,"div",{display:"none",position:"absolute",zIndex:5,top:"auto",right:"auto",bottom:"10px",left:"50%",width:"160px",margin:"0 auto",padding:"5px",borderRadius:"3px",backgroundColor:"rgba(0, 0, 0, 0.7)",transform:"translateX(-50%)",textAlign:"center",lineHeight:1,pointerEvents:"none"},Fe(qe||(t=["Pull to skip<br/>",""],i||(i=t.slice(0)),t.raw=i,qe=t),'<style>@keyframes videonow-pull{0%,10%,30%,to{transform:translateY(0);-webkit-transform:translateY(0)}20%{transform:translateY(2px);-webkit-transform:translateY(2px)}}</style><svg width="64" height="24" style="animation:videonow-pull 1s infinite" viewBox="0 0 64 10"><path fill="none" stroke="#fff" stroke-width="2.001" d="M.996 2.99 32.39 14.74M63 2.99 31.606 14.74"/></svg>')),a=function(){var t=r.getAdSkippableState();(0,e.Zs)(n,{display:t?"":"none"})};a(),this._addVPAIDEventListener(r,"AdSkippableStateChange",a),r.setControlData("slideToSkipAd",{node:n})},a._initSlotNode=function(){var t=this.moduleInnerNode;return(0,e.Xv)(t,"div",{position:"fixed",zIndex:2147483647,left:0,bottom:0,backgroundColor:"#000",transform:"translate3d(0,0,0)"})},a._updateModuleState=function(){var t=this.module,e=this.options,i=e.playerFactor,r=e.closeFactor,o=this._getDimensions(),n=o.visiblePercent,a=o.moduleTop;(ni.none("Format[SlideRoll] updateModuleState("+n+") "+t.state),!ti&&!Ke&&this.waitingForInitialScroll&&n>r&&(this._scrollTo(a),this.waitingForInitialScroll=!1),Ue.call(t,"loaded")&&n>i&&t.startAd(),Ue.call(t,["paused","pausing"])&&n>i&&t.resumeAd(),Ue.call(t,"playing")&&n<i&&t.pauseAd(),Ue.call(t,"playing"))&&(t.getAdSkippableState()||window.scrollTo(window.scrollX,a))},a._updateModulePosition=function(){var t=this.module,e=this.options.closeFactor,i=this._getDimensions(),r=i.visiblePercent,o=i.moduleTop,n=i.viewportTop;!Ke&&Ue.call(t,"playing")&&r>1-e&&this._scrollTo(o),0===r&&o<n&&!Ue.call(t,["loaded","afterplay","skipping","complete","completing","stopped","destroyed","destroying"])&&t.getAdSkippableState()&&t.skipAd()},a._updateModuleSize=function(){var t=this.module,i=this.moduleNode,r=this.moduleInnerNode,o=this.slot,n=window,a=n.innerWidth,s=n.innerHeight;ni.trace("Format[SlideRoll] updateModuleSize("+a+":"+s+")"),(0,e.Zs)(r,{clip:"rect(0,"+a+"px,"+s+"px,0)"}),(0,e.Zs)([i,o],{width:a+"px",height:s+"px"}),t.resizeAd(a,s)},a._getDimensions=function(){var t=this.moduleNode,e=window,i=e.scrollY,r=e.innerWidth,o=e.innerHeight,n=r,a=o,s=i,l=i+o,d=a,c=s+(t&&t.getBoundingClientRect()||{}).top,u=c+a,h=Math.max(s,c),p=Math.min(l,c+a),g=Math.max(0,Math.min(a,p-h));return{viewportWidth:n,viewportHeight:a,viewportTop:s,viewportBottom:l,moduleHeight:d,moduleTop:c,moduleBottom:u,visibleTop:h,visibleBottom:p,visibleHeight:g,visiblePercent:a&&g/a}},a._getModuleDimensions=function(){return(0,n.k)(window,this.moduleNode)},a.toString=function(){return oi},a.getBaseName=function(){return ri.toLowerCase()},o}(D),di=function(){Ye&&Ye(),Ye=null};function ci(t,e){var i,r=this;ni.trace("Format[SlideRoll].scrollTo("+t+", "+typeof e+")"),e&&(ei=e);Ke||ti||(ti=t,this.requestAnimationID=window.requestAnimationFrame((function o(n){if(void 0===n&&(n=0),(!Ke||ei)&&ti){i=i||n;var a=Math.min(1,(n-i)/1e3*2),s=(ti-window.scrollY)*a;if(a>0&&Math.abs(s)<.05)return ni.trace("Format[SlideRoll].scrollTo("+t+") Calling callback  ("+typeof e+")"),ei&&ei(),window.scrollTo(window.scrollX,ti),ei=null,void(ti=null);window.scrollTo(window.scrollX,Math.round(window.scrollY+s)),r.requestAnimationID=window.requestAnimationFrame(o)}}))),ti=t}function ui(){ni.trace("Format[SlideRoll] @resize"),this._updateModuleSize()}function hi(){var t=this._getDimensions().visiblePercent,i=this.options.closeFactor;if(this._updateModuleState(),!Ke&&t>i&&ti){var r=this.requestAnimationID;r&&window.cancelAnimationFrame(r),this.scrollTo=null}if(x.vF){var o=this.module.getControlNode("volume"),n=.6*(window.innerHeight-document.querySelector("html").clientHeight);(0,e.Zs)(o,{marginBottom:n+"px"})}}function pi(){ni.trace("Format[SlideRoll] @AdLoaded",2);var t=this.module,i=this.slot,r=this.options.expandOnAdLoaded,o=t.getAdAspectRatio();if(!o)throw new Error("Format[SlideRoll] Invalid aspect ratio  ("+o+")");var n=t.getControlNode("iframe");this.wrapper=t.getControlNode("wrapper"),(0,e.Zs)(n,{position:"absolute",left:0,bottom:0,width:"100%"}),(0,e.Zs)(i,{display:"",transform:"translate3d(0,0,0)"}),this._createSlideToSkipAd(t),this._addDOMEventListener(window,"resize",this.onResize),this._addDOMEventListener(window,"scroll",this.onScroll),this._addDOMEventListener(window,"touchstart",this.onTouchStart,{passive:!0}),this._addDOMEventListener(window,"touchend",di,{passive:!0}),this._addDOMEventListener(this.wrapper,"touchstart",this.onTouchStart,{passive:!0}),this._addDOMEventListener(this.wrapper,"touchend",di,{passive:!0}),r&&(this._updateModuleState(),this._updateModuleSize())}function gi(){ni.trace("Format[SlideRoll] @AdVideoStart",2),this._updateModuleSize(),this._updateModulePosition(),this._updateModuleState()}function vi(){ni.trace("Format[SlideRoll] @AdResumed",2),this._updateModuleState()}function fi(){var t=this.module.getAdSkippableState();ni.trace("Format[SlideRoll] @AdSkippableStateChange("+t+")",2),this._updateModuleState()}function mi(){ni.trace("Format[SlideRoll] @AdStopped",2)}function bi(){ni.trace("Format[SlideRoll] @touchstart"),Ke=!0,ti=null,this._addDOMEventListener(window,"touchend",this.onTouchEnd),this._addDOMEventListener(this.wrapper,"touchend",this.onTouchEnd)}function yi(){ni.trace("Format[SlideRoll] @touchend"),Ke=!1,this._removeDOMEventListener(window,"touchend",this.onTouchEnd),this._removeDOMEventListener(this.wrapper,"touchend",this.onTouchEnd);var t=this.module,e=this.options.closeFactor,i=this._getDimensions(),r=i.visiblePercent,o=i.moduleTop;ni.none("Format[SlideRoll] updateModuleState("+r+") "+t.state),this.waitingForInitialScroll&&r>e&&(this._scrollTo(o),this.waitingForInitialScroll=!1),this._updateModulePosition(),this._updateModuleState()}var Ai="requests",wi=(null===o.ZP||void 0===o.ZP||null===(ii=o.ZP.getChildWriter)||void 0===ii?void 0:ii.call(o.ZP,Ai))||o.ZP,Pi=function(t,e){return void 0===e&&(e=window.document),new Promise((function(i,r){if(!t)throw new Error("requests.loadScript("+t+", "+e+") Invalid url");var o=e.getElementsByTagName("head")[0],n=e.createElement("script");n.src=t,n.type="text/javascript",n.addEventListener("load",i),n.addEventListener("error",r),o.appendChild(n)}))},Oi=function(t,e){if(void 0===e&&(e=!1),t)if(x.vF||e){var i=document.createElement("a");i.setAttribute("href",t),i.setAttribute("target","_blank");var r=document.createEvent("MouseEvents");r.initEvent("click",!0,!0),i.dispatchEvent(r)}else wi.trace("requests.openUrl() window.open("+t+")"),window.open(t,"_blank");else wi.warn("requests.openUrl("+t+") invalid url")},Si=function(t,e){return void 0===e&&(e={}),new Promise((function(i,r){if(!t)throw new Error("Invalid url ("+t+")");var o=e,n=o.overrideMimeType,a=o.options,s=o.body,l=o.timeout,d=void 0===l?5e3:l,c=o.requestHeaders,u=void 0===c?{}:c,h=o.method,p=void 0===h?"GET":h,g=o.withCredentials,v=void 0===g||g,f=new XMLHttpRequest;f.addEventListener("load",i),f.addEventListener("error",r),f.addEventListener("timeout",r),f.withCredentials=v,n&&f.overrideMimeType(n),a&&(0,N.l7)(f,a),f.open(p,t,!0),f.timeout=d,u&&Object.getOwnPropertyNames(u).forEach((function(t){f.setRequestHeader(t,u[t])})),f.send(s)}))},_i=function(t,e,i){return void 0===i&&(i=!0),new Promise((function(e){var r=t.startsWith("data:")?"":(~t.indexOf("?")?"#":"?vn=")+Math.random().toString(10).substring(2,5),o=document.createElement("img");o.onload=function(){return e(t)},o.onerror=function(){e()},o.src=""+t+(i?r:"")}))},Ci=function(t,e,i,r){void 0===i&&(i=function(t){return Promise.resolve(t)});var o=e?t.querySelectorAll(e):[t];return Array.from(o).map((function(t){return i((0,d.FB)(t)).then((function(t){return _i(t)}))}))},Ei=function(t,e,i){return t&&t.map((function(t){return(e||function(t){return Promise.resolve(t)})(t).then((function(t){return _i(t)}))}))};function Di(){return(0,n.er)(this.getControlNode("wrapper"))}function Ii(t){var e=this._savedAdParams;return e&&e[t]}function Ti(t,e){return this._savedAdParams||(this._savedAdParams={}),this._savedAdParams[t]=e,e}function Vi(){return!this._videoSlotRemoved&&this.getControlNode("videoSlot")}function ki(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function xi(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ki(Object(i),!0).forEach((function(e){ji(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ki(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function ji(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Ri="::ManualCountdownBase",Mi={increasePieceOfTime:250},Ni=function(){function t(t){var e;void 0===t&&(t={}),this.options=xi(xi({},Mi),t);var i=t&&(t.logger||t.module&&t.module.logger||t.moduleAPI&&t.moduleAPI.logger)||o.ZP;this.logger=(null==i||null===(e=i.getChildWriter)||void 0===e?void 0:e.call(i,Ri))||i;var r=t,n=r.duration,a=r.VPAID_API,s=r.tickHandler;this.logger.log("::ManualCountdownBase duration="+n),this._trigger=a&&a.trigger,this._duration=n,this._timeoutId=null,this._elapsedTime=0,this._tickHandler=s}var e=t.prototype;return e.getAdRemainingTime=function(){var t=this.getAdDuration();return t?t-this.getAdElapsedTime():0},e.getAdElapsedTime=function(){return this._elapsedTime||0},e.getAdDuration=function(){return this._duration||0},e.start=function(){var t=this;if(!this._timeoutId){var e=this.options.increasePieceOfTime,i=this.getAdDuration();this._timeoutId=setInterval((function(){var r=t.adRemainingTime,o=t.getAdRemainingTime();t.adRemainingTime=o;var n=Li.call(t,e/1e3);t._tickHandler.call(t,{elapsedTime:n,remainingTime:o,adRemainingTime:r,duration:i})}),e)}},e.stop=function(){clearInterval(this._timeoutId),this._timeoutId=null},e._destroy=function(){this.stop()},t}();function Li(t){return this._elapsedTime+=t,this._elapsedTime}function Fi(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Wi(t,e){return Wi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Wi(t,e)}var Hi="::TimeBeforeSkipChecker",Ui=function(t){var e,i;function r(e){var i,r;void 0===e&&(e={}),(r=t.call(this,e)||this).moduleAPI=e.moduleAPI,r.starting=!1,r.updateStateChecker=e.updateStateChecker,r.getTimeBeforeSkip=e.getTimeBeforeSkip,r.shouldSetAdSkippableState=!1!==e.shouldSetAdSkippableState;var o=Fi(r).moduleAPI||{},n=o.addVPAIDEventListener,a=o.inState,s=o.logger;return r.logger=(null==s||null===(i=s.getChildWriter)||void 0===i?void 0:i.call(s,Hi))||s,a("started","starting","playing")?r.start():(n("AdVideoStart",(function(){return r.start()}),Fi(r)),n("AdStarted",(function(){return r.start()}),Fi(r)),n("AdPlaying",(function(){return r.start()}),Fi(r)),n("AdResumed",(function(){return r.start()}),Fi(r)),n("AdStopped",(function(){return r.stop()}),Fi(r)),n("AdPaused",(function(){return r.stop()}),Fi(r)),n("AdSkipped",(function(){return r.stop()}),Fi(r))),r}i=t,(e=r).prototype=Object.create(i.prototype),e.prototype.constructor=e,Wi(e,i);var o=r.prototype;return o.stop=function(){var t=this.timeCounter;t&&t.stop()},o.start=function(){var t=this.logger,e=this.timeCounter;if(e)e.start();else{var i=this.moduleAPI,r=this.getTimeBeforeSkip,o=this.shouldSetAdSkippableState,n=(i||{}).setAdSkippableState,a=this.timeBeforeSkip=r&&r();t&&t.log("::TimeBeforeSkipChecker. timeBeforeSkip="+a);var s=!(void 0===a||a);o&&n(s),s||t&&t.log("::TimeBeforeSkipChecker. timeBeforeSkip="+a+". Unskippable Ad."),this.timeCounter=new Ni({increasePieceOfTime:500,tickHandler:this.tickHandler.bind(this)}),this.timeCounter.start()}},o.tickHandler=function(t){var e=t.elapsedTime,i=this.timeBeforeSkip,r=this.moduleAPI,o=this.timeCounter,n=this.updateStateChecker,a=this.shouldSetAdSkippableState,s=(r||{}).setAdSkippableState;i&&i<=e&&(a&&s(!0),n&&n(),o&&o.stop())},o.getAdElapsedTime=function(){var t=this.timeCounter;return t?t.getAdElapsedTime():0},o.isSkippable=function(){var t=this.getTimeBeforeSkip;return t&&!!(this.timeBeforeSkip=t&&t())},r}(l);const zi=Ui;function Bi(t,e){return Bi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Bi(t,e)}var Zi,qi,Xi,Gi,Qi=function(t){var i,r;function n(e,i,r){var n,a;void 0===r&&(r=!1);var s="::Control["+e+"] ",l=i&&i.getAPI&&i.getAPI().logger||o.ZP,d=(null==l||null===(n=l.getChildWriter)||void 0===n?void 0:n.call(l,s))||l;d.trace(".constructor()"),(a=t.call(this,{ancestor:s,logger:d})||this).name=e,a.module=i,a.moduleId=s;var c=i.getControlUnionData(e);if(null===c)throw a.logger.warn(s+" Disabled"),new Error(s+" disabled");if(r&&void 0===c)throw new Error(s+" is not available");return i._addDestroyableObject(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(a)),a}r=t,(i=n).prototype=Object.create(r.prototype),i.prototype.constructor=i,Bi(i,r);var a=n.prototype;return a._destroy=function(){var i=this.moduleId,r=this.node;this.logger.trace(":"+i+".destroy()"),t.prototype._destroy.call(this),r&&(0,e.GA)(r)},a.getName=function(){return this.name},n}(l);function $i(t,e){return e||(e=t.slice(0)),t.raw=e,t}function Ji(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function Yi(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Ji(Object(i),!0).forEach((function(e){Ki(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Ji(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Ki(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function tr(t,e){return tr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},tr(t,e)}var er="CollapsingThumbnail",ir="Format["+er+"]",rr={right:"5%",bottom:"60%",width:"25%",boxShadow:"0 0 10px rgba(0, 0, 0, 0.5)",transitionDuration:350,skipControlsTransitionDuration:350,skipControlsTransitionDelay:20,getThumbnailTimeout:500,startFadingDuration:2e3,fadingDuration:500,raisingDuration:0,intermediateFadingOpacity:.7,targetFadingOpacity:0,countdownBackgroundColor:"#d3d3d3",countdownBackgroundHoverColor:"#aaa",countdownColor:"black",countdownHoverColor:"#eee",thumbnailBackgroundColor:"#f2f2f2",thumbnailWrapperWidth:"62%"},or={wrapper:{paddingTop:0,paddingBottom:0},logo:{},skipAd:{top:0,right:0,padding:"5px",margin:"0 5px 5px 0"},skipAdCountdown:e.al,title:{top:0,right:"40px",left:"auto",margin:"5px 0",padding:"5px",color:"white",background:"rgba(0, 0, 0, 0.27)"},vnAfterplay:{marginTop:0},play:{marginTop:0}},nr=function(t){var i,r;function o(i,r,o){var a,s,l,c,u=r&&r.ancestor&&r.ancestor+":"+ir||"Module::Format[CollapsingThumbnail]";(c=t.call(this,er,i,!1)||this)["Format[CollapsingThumbnail]"]=u,c.module=i,c._getCurrentPlayer=o,c.options=function(t){void 0===t&&(t={});var e=(0,d.en)((0,n.k$)(window,document))||{},i=e.vn_t_startFadingDuration,r=e.vn_t_fadingDuration,o=e.vn_t_raisingDuration,a=e.vn_t_intermediateFadingOpacity,s=e.vn_t_targetFadingOpacity;return void 0!==i&&(t.startFadingDuration=parseInt(i,10)),void 0!==r&&(t.fadingDuration=parseInt(r,10)),void 0!==o&&(t.raisingDuration=parseInt(o,10)),void 0!==a&&(t.intermediateFadingOpacity=parseFloat(a)),void 0!==s&&(t.targetFadingOpacity=parseFloat(s)),t}(Yi(Yi({},rr),r)),c.TIMER_NAME=c.MODULE_ID+":RemainingTimeChange",c.adWidthPrev=null,c.mainTransitionWasStarted=!1,c.mainTransitionWasFinished=!1;var h=i.getControlNode("wrapper"),p=null===(a=(s=c)._getCurrentPlayer)||void 0===a?void 0:a.call(s),g=p?null==p||null===(l=p.getSize)||void 0===l?void 0:l.call(p):{},v=g.width,f=void 0===v?0:v,m=g.height,b=void 0===m?0:m,y=i.getControlUnionData(er,"css")||{};return c._overlayControls=(0,e.Xv)(h,"div",Yi({position:"absolute",zIndex:2,cursor:"auto",width:f+"px",height:b+"px",fontSize:0,color:"#333",borderRadius:"4px",boxShadow:"none",transitionProperty:"top, width, height",transitionDuration:r.transitionDuration+"ms",transitionTimingFunction:"ease-out",visibility:"hidden",background:"transparent",opacity:0},y),null),i.setControlData(er,{node:c._overlayControls}),c}r=t,(i=o).prototype=Object.create(r.prototype),i.prototype.constructor=i,tr(i,r);var a=o.prototype;return a.init=function(){var t=this,e=this.module,i=e.getControlUnionData("skipAdCountdown","timeBeforeSkip")||e.getControlUnionData("skipAd","timeBeforeSkip");this.timeBeforeSkipChecker=new zi({getTimeBeforeSkip:function(){return i},moduleAPI:e.getAPI(),shouldSetAdSkippableState:!0,logger:this.logger}),this._addDestroyableObject(this.timeBeforeSkipChecker),ur.call(this).then((function(){t.logger.trace(t["Format[CollapsingThumbnail]"]+".init() we have got thumbnail")})),ar.call(this),this._addVPAIDEventListener(e,"AdStarted",Ar.bind(this,e)),this._addVPAIDEventListener(e,"AdVideoStart",(function(){Pr.call(t),t.update.call(t,!0,!0,!0,!1)})),this._addVPAIDEventListener(e,"AdVideoComplete",wr.bind(this)),this._addVPAIDEventListener(e,"AdUserClose",this._removeTimeout.bind(this,this.TIMER_NAME)),this._addVPAIDEventListener(e,"AdSkipped",(function(){t._removeTimeout(t.TIMER_NAME)})),this._addVPAIDEventListener(e,"AdStopped",(function(){t._removeTimeout(t.TIMER_NAME)})),this._addVPAIDEventListener(e,"AdError",yr.bind(this)),this._addVPAIDEventListener(e,"AdSkippableStateChange",(function(){var i=e.getAdSkippableState();t.logger.trace("Format[CollapsingThumbnail] @AdSkippableStateChange adSkippableState="+i,2),!i&&t._playButtonWasShown&&(t._playButtonWasShown=!1,t._startChunkTime=t.getAdElapsedTime(),t.logger.trace(t["Format[CollapsingThumbnail]"]+" @AdSkippableStateChange this._startChunkTime="+t._startChunkTime),br.call(t),Pr.call(t))}))},a.getAdElapsedTime=function(){var t=this.module,e=this.timeBeforeSkipChecker;return e?e.getAdElapsedTime():t&&t.getAdElapsedTime()||0},a.update=function(t,e,i,r){var o=this;void 0===t&&(t=!1),void 0===e&&(e=!0),void 0===i&&(i=!0),void 0===r&&(r=!0),this.logger.none(this["Format[CollapsingThumbnail]"]+".update()",2,"blue");var n=this.module,a=this.options.transitionDuration,s=fr.call(this),l=s.blockWidth,d=s.blockHeight,c=Or.call(this,n),u=c.time,h=c.duration,p=c.adDuration,g=u<=0&&h<=p;function v(){var t=this;e&&dr.call(this,l,d),r&&hr.call(this,g),this._addTimeout("waitManualCheckId",(function(){f.call(t)}),a+10)}function f(){var t;function e(){this.mainTransitionWasFinished?clearInterval(t):this.updateAfterTransitionEndWithBind({forceUpdate:!0})}this.mainTransitionWasFinished||(this.logger.log(this["Format[CollapsingThumbnail]"]+".update() startManualCheck() mainTransitionWasFinished is still false",1,"pink"),e.call(this),t=setInterval(e.bind(this),500))}this.logger.trace(this["Format[CollapsingThumbnail]"]+".update() this.mainTransitionWasStarted="+this.mainTransitionWasStarted+" this.adWidthPrev === blockWidth="+(this.adWidthPrev===l)+" forcedUpdate="+t),this.mainTransitionWasStarted||this.adWidthPrev===l&&!t||(this.mainTransitionWasStarted=!0,i&&cr.call(this,d).then((function(t){o.logger.trace(o["Format[CollapsingThumbnail]"]+".update() gotThumbnail="+t+" shouldUpdateOverlay="+e+" blockWidth="+l+" blockHeight="+d),v.call(o)})).catch((function(t){o.logger.error(o["Format[CollapsingThumbnail]"]+".update() error: "+t),v.call(o)})),this.adWidthPrev=l)},a.setZIndex=function(t){this._overlayControls&&(this._overlayControls.style.zIndex=t)},o}(Qi);function ar(){var t,i=this;this.logger.trace(this["Format[CollapsingThumbnail]"]+".initOverlayControls()"),this._overlayControls.classList.add("___overlay___"),br.call(this),sr.call(this),lr.call(this);this.updateAfterTransitionEndWithBind=t=function(r){var o=r||{},n=o.propertyName,a=o.forceUpdate;if(!a){if("height"!==n&&"width"!==n)return;var s=0^i._overlayControls.offsetWidth,l=0^i._overlayControls.offsetHeight,d=i.overlayControlsTargetWidth,c=i.overlayControlsTargetHeight;if(i.logger.trace(i["Format[CollapsingThumbnail]"]+".updateAfterTransitionEnd() forceUpdate="+a+" isManualCheck="+(r&&r.manualCheck)+" propertyName="+(r&&r.propertyName)+" width="+s+" overlayControlsTargetWidth="+d+" height="+l+" overlayControlsTargetHeight="+c+" mainTransitionWasFinished="+i.mainTransitionWasFinished+" mainTransitionWasStarted="+i.mainTransitionWasStarted,2),!d||!c||!i.mainTransitionWasStarted||!r||"height"!==r.propertyName&&"width"!==r.propertyName||Math.abs(l-c)>5||Math.abs(s-d)>5)return}i.mainTransitionWasFinished=!0,i.mainTransitionWasStarted=!1,i.logger.none(i["Format[CollapsingThumbnail]"]+".updateAfterTransitionEnd() mainTransitionWasStarted="+i.mainTransitionWasStarted),i._removeDOMEventListener(i._overlayControls,"transitionend",t),setTimeout((function(){i.update(!1,!1);var t=i._thumbnailDefaultText,r=i._thumbnailWrapper,o=i.options.thumbnailBackgroundColor;t&&(0,e.Zs)(t,{opacity:1}),(0,e.Zs)(r,{backgroundColor:o})}),1)}.bind(this),setTimeout((function(){i._addDOMEventListener(i._overlayControls,"transitionend",t)}),1)}function sr(){var t=this.options.transitionDuration;this.logger.trace(this["Format[CollapsingThumbnail]"]+".initThumbnail()"),this._thumbnailWrapper=(0,e.Xv)(this._overlayControls,"div",{position:"relative",zIndex:2,width:"100%",height:"100%",borderRadius:"4px 0 0 4px",textAlign:"center",overflow:"hidden",opacity:.95,backgroundColor:"transparent",transitionProperty:"top, width, height",transitionDuration:t+"ms",transitionTimingFunction:"ease-out",display:"flex",alignItems:"center",justifyContent:"center"}),this._thumbnailWrapper.className="___thumbnailWrapper___",this._thumbnailDefaultText=(0,e.Xv)(this._thumbnailWrapper,"div",{height:"auto",width:"auto",zIndex:1,color:"grey",lineHeight:1.2,opacity:0,transition:"all "+t+"ms ease-out"},Fe(Zi||(Zi=$i(["Watch video<br/>after ad"]))))}function lr(){var t=this.options,i=t.skipControlsTransitionDuration,r=t.skipControlsTransitionDelay,o=t.thumbnailWrapperWidth;this.logger.trace(this["Format[CollapsingThumbnail]"]+".initCountdown()");var n=100-parseFloat(o),a=n+"%",s=n+.5+"%",l=this._skipAd=(0,e.Xv)(this._overlayControls,"div",{position:"absolute",zIndex:1,top:0,right:a,width:s,height:"100%",visibility:"hidden",display:"flex",flex:"0 0 auto",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center",boxSizing:"border-box",background:"white",borderRadius:"0 4px 4px 0",fontSize:"2.7vh",transition:"all "+i+"ms ease-out",transitionDelay:(r||1.5*i)+"ms"});l.className="___skipAd___",this._countdownText=(0,e.Xv)(l,"div",{display:"none",paddingTop:0,paddingBottom:0,paddingLeft:"5%",paddingRight:"5%",lineHeight:1,textAlign:"center"}),this._countdownValue=(0,e.Xv)(l,"div",{textAlign:"center"});var d=this._countdownValueText=(0,e.Xv)(this._countdownValue,"div",{display:"flex",justifyContent:"center",alignItems:"center",fontSize:"10px",fontWeight:"bold",width:"2vh",height:"2vh",lineHeight:1,borderRadius:"50%",backgroundColor:"#d3d3d3",boxSizing:"border-box"});d.className="___countdownValueText___",setTimeout((function(){return(0,e.Zs)(d,{transition:"all 250ms"})}),1)}function dr(t,i){var r=this._overlayControls,o=this._thumbnailWrapper,a=this.options,s=a.right,l=a.bottom,d=a.transitionDuration,c=a.thumbnailWrapperWidth;this.logger.trace(this["Format[CollapsingThumbnail]"]+".updateOverlayControls()");var u=0^parseFloat(t),h=0^parseFloat(i);this.overlayControlsTargetWidth=t,this.overlayControlsTargetHeight=i,this.logger.none(this["Format[CollapsingThumbnail]"]+".updateOverlayControls() blockWidth:"+u+" blockHeight:"+h,2,"brown"),(0,e.Zs)([r,o],{transitionDuration:d+"ms"}),setTimeout((function(){(0,e.Zs)(r,{right:s,bottom:l,width:(0,n.Ug)(u),height:(0,n.Ug)(h)}),(0,e.Zs)(o,{width:c})}),1),this._getCurrentPlayer()||(0,e.Zs)(r,{transition:"width 1ms, height 1ms",left:"-"+t})}function cr(t){var i=this;this.logger.trace(this["Format[CollapsingThumbnail]"]+".updateThumbnail()");var r=this._thumbnailDefaultText;return ur.call(this).then((function(o){return i.logger.trace(i["Format[CollapsingThumbnail]"]+".updateThumbnail() gotThumbnail="+o),r&&(0,e.Zs)(r,{fontSize:parseInt(t,10)/6+"px"}),o}))}function ur(){var t=this;if(this._thumbnail)return Promise.resolve(this._thumbnail);if(this._tumbnailImage)return o.call(this);var i=this.options.getThumbnailTimeout,r=new Promise((function(e){var i=t._getCurrentPlayer(),r=i&&i.getThumbnail&&i.getThumbnail();if(!r){var n=i?"currentPlayer did not return thumbnailImage ":"Can not found currentPlayer";return t.logger.warn(t["Format[CollapsingThumbnail]"]+".updateThumbnail() "+n),e(!1)}return t.logger.log(t["Format[CollapsingThumbnail]"]+".getThumbnail() Got currentPlayer",2,"green"),_i(r,0,!1).then((function(e){return"error"!==e.type?t._tumbnailImage=r:null})).then((function(){return o.call(t)})).then((function(t){return e(!!t)})),e(!0)}));return Promise.race([r,new Promise((function(t,e){i&&setTimeout((function(){e(Error("Timeout("+i+") for getThumbnail was expired"))}),i)}))]);function o(){var t=this,i=this._thumbnailWrapper,r=this._thumbnailDefaultText;if(!i)return Promise.resolve(!1);var o=this._tumbnailImage;return new Promise((function(n){r&&(r.remove(),delete t._thumbnailDefaultText);var a=null;o&&((a=t._thumbnail=(0,e.Xv)(i,"img",{position:"relative",height:"100%",zIndex:2})).src=o),n(a)}))}}function hr(t){var i=this;if(this.mainTransitionWasFinished){var r=this._overlayControls,o=this._skipAd,n=this._countdownText,a=this._thumbnail,s=this._countdownValueText,l=this._overlayControlsSetOpacity,d=this.options,c=d.right,u=d.skipControlsTransitionDuration,h=d.boxShadow,p=r.clientHeight;(x.ai||p<=55||!a)&&(t=!1);var g=t?p/2:p/1.5;if((0,e.Zs)(n,{display:t?"":"none"}),(0,e.Zs)(r,{boxShadow:h}),(0,e.Zs)(o,{visibility:"visible"}),this._getCurrentPlayer()){if(!l){var v=this.options,f=v.startFadingDuration,m=v.fadingDuration,b=v.intermediateFadingOpacity,y=v.raisingDuration,A=v.targetFadingOpacity;this._overlayControlsSetOpacity=!0;var w=this.module.getControlNode("slot"),P=this.module.getControlNode("vpaidSlot");(0,e.Zs)(r,{transitionProperty:"opacity",transitionDuration:f+"ms",transitionTimingFunction:"linear"});var O,S=!!x.ai,_=!1,C=P.querySelector("iframe");try{O=C&&C.contentWindow&&C.contentWindow.document}catch(t){}var E=O||P||w,D=!x.ai&&this._addDOMEventListener(E,"mousemove",(function(){S=!0,_&&(gr.call(i,b,y),i._removeDOMEventListener(E,"mousemove",D))})),I=this._addDOMEventListener(r,"transitionend",(function(t){"opacity"===t.propertyName&&(i.logger.log(".updateCountdown() mouseout transitionend mouseInArea="+S),_=!0,!S&&vr.call(i,A,m),I&&i._removeDOMEventListener(r,"transitionend",I))}));(0,e.Zs)(r,{opacity:b}),setTimeout((function(){i._removeDOMEventListener(r,"transitionend",I),_||I&&i._removeDOMEventListener(r,"transitionend",I),_=!0}),f+100),x.ai||(this._addDOMEventListener(w,"mouseover",(function(t){var e=t.relatedTarget;if(e!==P&&e!==r){var o=pr.call(i,e,[r],"slot mouseover");o!==r&&gr.call(i,b,o?m:y)}})),this._addDOMEventListener(P||w,"mouseover",(function(t){var e=t.relatedTarget;if(e!==w){var o=pr.call(i,e,[r,w],"vpaidSlot mouseover");gr.call(i,b,o?m:y)}})),this._addDOMEventListener(r,"mouseenter",(function(){gr.call(i,1,y)})),this._addDOMEventListener(w,"mouseout",(function(t){var e=t.relatedTarget,o=pr.call(i,e,[r,P],"slot mouseout");o!==P&&o!==P&&o!==r&&vr.call(i,A,m)})),this._addDOMEventListener(r,"mouseout",(function(t){var e=t.relatedTarget;pr.call(i,e,[r],"_overlayControls mouseout")!==r&&(e===w&&e===P||vr.call(i,A,m))})))}(0,e.Zs)(n,{transition:"none"}),(0,e.Zs)(o,{fontSize:p/6+"px",transition:"width 0ms, transform "+u/2+"ms ease-out",transform:"translateX(98%)"})}else(0,e.Zs)(r,{right:c,transition:"all "+u+"ms ease-out"}),(0,e.Zs)(o,{flexDirection:"row",width:"100%",right:"0",transition:"none"});(0,e.Zs)(s,{fontSize:g/2+"px",width:g+"px",height:g+"px"})}else this.logger.trace(this["Format[CollapsingThumbnail]"]+'.updateCountdown() event "transitionend" for overlayControls can be not occurs')}function pr(t,e,i){void 0===i&&(i=""),this.logger.none(" "+i+" relatedTarget="+(0,n.xl)(t));for(var r=t;r&&e.indexOf(r)<0;)r=r.parentElement;return r}function gr(t,i){void 0===i&&(i=0);var r=this._overlayControls,o=this._overlayControlsStartOpacity,n=void 0!==o&&o||1;(0,e.Zs)(r,{transition:"none",opacity:n}),(0,e.Zs)(r,{transitionProperty:"opacity",transitionDuration:i+"ms",transitionTimingFunction:"linear"}),(0,e.Zs)(r,{opacity:t})}function vr(t,i){var r=this._overlayControls,o=getComputedStyle(r).opacity;this._overlayControlsStartOpacity=parseFloat(o),(0,e.Zs)(r,{transitionProperty:"opacity",transitionDuration:i+"ms"}),(0,e.Zs)(r,{opacity:t})}function fr(){var t=this.module,e=this.options.width;this.logger.trace(this["Format[CollapsingThumbnail]"]+".calculateBlockSize()");var i=(Di.call(t)||{}).floatOutsideWidth*(parseInt(e,10)/100);return{blockWidth:i+"px",blockHeight:i/2.5+"px"}}function mr(){var t=this.module,i=this._overlayControls,r=this._countdownValueText,o=this.options,n=o.countdownColor,a=o.countdownBackgroundColor,s=o.countdownHoverColor,l=o.countdownBackgroundHoverColor;this.logger.none(this["Format[CollapsingThumbnail]"]+" setCountdownAsPlayButtonBehavior()"),i.removeEventListener("click",this._overlayControlsClickHandler),this._overlayControlsClickHandler=function(){t.skipAd()},this._overlayControls.addEventListener("click",this._overlayControlsClickHandler),(0,e.Zs)(i,{cursor:"pointer"}),this._overlayControlsMouseenterHandler=this._addDOMEventListener(i,"mouseenter",(function(){(0,e.Zs)(r,{backgroundColor:l,color:s})})),this._overlayControlsMouseleaveHandler=this._addDOMEventListener(i,"mouseleave",(function(){(0,e.Zs)(r,{backgroundColor:a,color:n})}))}function br(){var t=this._overlayControls,i=this._overlayControlsClickHandler;this.logger.trace(this["Format[CollapsingThumbnail]"]+" clearCountdownAsPlayButtonBehavior()"),t.removeEventListener("click",i),t.removeEventListener("touchend",i),this._overlayControlsClickHandler=function(t){t.stopPropagation()},this._overlayControls.addEventListener("click",this._overlayControlsClickHandler),this._overlayControls.addEventListener("touchend",this._overlayControlsClickHandler),(0,e.Zs)(t,{cursor:"auto"}),this._removeDOMEventListener(t,"mouseenter",this._overlayControlsMouseenterHandler),this._removeDOMEventListener(t,"mouseleave",this._overlayControlsMouseleaveHandler)}function yr(){this._removeTimeout(this.TIMER_NAME)}function Ar(){var t=this._overlayControls;(0,e.Zs)(t,{visibility:"visible",opacity:1}),Pr.call(this)}function wr(){this.logger.trace(this["Format[CollapsingThumbnail]"]+" @AdVideoComplete",2),this._removeTimeout(this.TIMER_NAME)}function Pr(){var t=this;this._addTimeout(this.TIMER_NAME,(function(){Sr.call(t),Pr.call(t)}),500)}function Or(t){var e=this.timeBeforeSkipChecker,i=t.getAdDuration()||0,r=this.getAdElapsedTime(),o=t.getControlUnionData("skipAdCountdown","timeBeforeSkip")||t.getControlUnionData("skipAd","timeBeforeSkip")||i;return{time:Math.round(Math.min(i,o)-r),skipTime:o,adDuration:i,isSkippable:e&&e.isSkippable()}}function Sr(){var t=this.module,e=this._countdownText,i=this._countdownValueText,r=Or.call(this,t),o=r.time,n=r.skipTime,a=r.adDuration,s=r.isSkippable,l=t.getAdSkippableState();this.logger.none(this["Format[CollapsingThumbnail]"]+" @AdRemainingTimeChange "+o+":"+n+":"+a,1,"#8fbc8f"),!l&&o>0&&(e.innerHTML=Fe(s?qi||(qi=$i(["Skip ad in"])):Xi||(Xi=$i(["Going after"]))),i.innerHTML=""+o),(l||o<=0&&n<=a&&!this._playButtonWasShown)&&(this._playButtonWasShown=!0,t.setAdSkippableState(!0),e.innerHTML=Fe(Gi||(Gi=$i(["Watch video"]))),i.innerHTML='<svg style="width:100%;height:100%" viewBox="0 0 64 64"><path fill="#333" d="M23.817 49V17L50 33 23.817 49z"/></svg>',mr.call(this)),hr.call(this,!0)}function _r(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function Cr(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?_r(Object(i),!0).forEach((function(e){Er(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):_r(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Er(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Dr(t,e){return Dr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Dr(t,e)}var Ir,Tr="ViqeoPlayerRoll",Vr="Format[ViqeoPlayerRoll]",kr={playerPlaybackClass:"vn-playback-viqeo-roll",destroyTimeout:5e3,playerDesktopStartFactor:.5,playerDesktopStopFactor:0,playerMobileStartFactor:.5,playerMobileStopFactor:0,hideThumbnail:!1},xr={},jr=function(t){var i,r;function o(i,r){var o;if(r=Cr(Cr(Cr({},kr),r),{},{ancestor:Vr}),(o=t.call(this,i,r)||this)._proceedToNextDefaultAd=function(t){t&&(o.logger.trace("Format[ViqeoPlayerRoll] @vnProceedToNextDefaultAd",2),o._updateModuleState())},o.slot=i.getControlNode("slot"),!o.slot)throw Error("Format[ViqeoPlayerRoll] player don't give the slot");o._initModule();var n=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(o).options,a=n.playerDesktopStartFactor,s=n.playerDesktopStopFactor,l=n.playerMobileStartFactor,d=n.playerMobileStopFactor;return o._startFactor=parseFloat(x.ai?l:a),o._stopFactor=parseFloat(x.ai?d:s),o.scrollNode=(0,e.V4)(r.scrollElement)||window,o.vqPlayer=i.environmentVars.vqPlayer,o.collapsingThumbnail=null,o}r=t,(i=o).prototype=Object.create(r.prototype),i.prototype.constructor=i,Dr(i,r);var a=o.prototype;return a.isFloatingMode=function(){var t=this.vqPlayer;return!(!t||!t.inMode("flying"))},a._initModule=function(){var t=this,e=this.module,i=this.options;e._applyLayout(Cr(Cr({},or),xr)),this._addVPAIDEventListener(e,"AdLoaded",(function(){t.collapsingThumbnail=!i.hideThumbnail&&new nr(e,i,(function(){return t.vqPlayer}));var r=t.collapsingThumbnail,o=(t.options.moduleAPI||{}).isVpaidJs;o&&o()&&r&&(r.options.transitionDuration=0),r&&r.init()})),this._addVPAIDEventListener(e,"vnProceedToNextDefaultAd",this._proceedToNextDefaultAd)},a.setZIndex=function(t){var e=this.collapsingThumbnail;this.logger.trace("Format[ViqeoPlayerRoll].setZIndex("+t+")"),e&&e.setZIndex(t)},a._updateModuleState=function(){var t=this;this.logger.none("Format[ViqeoPlayerRoll].updateModuleState()");var e=this.module,i=this._startFactor,r=this._stopFactor;(0,n.h_)(this.slot).then((function(o){var n=o.intersectionRatio;Ue.call(e,["paused","pausing"])&&n>=i&&e.resumeAd(),Ue.call(e,"playing")&&n<r&&e.pauseAd(),Ue.call(e,"loaded")&&n>=i&&e.isVpaidStartAdWasInvokedOnce&&(t.logger.trace("Format[ViqeoPlayerRoll] startAd() for defaultAd manually"),e.startAd())}))},a._vpaidInitAd=function(){this.logger.trace("Format[ViqeoPlayerRoll].vpaidInitAd()");var e=this.scrollNode,i=this.options.moduleAPI||{},r=i.addVPAIDEventListener,o=i.extendEnvironmentVars;return o&&o({forceAspectRatio:!x.ai}),r("AdLoaded",Mr.bind(this),this),r("AdStarted",Wr.bind(this),this),r("AdVideoStart",Fr.bind(this),this),r("AdStopped",Hr.bind(this),this),r("AdDestroyed",Ur.bind(this),this),r("AdSizeChange",Nr.bind(this),this),this._addDOMEventListener(e,"scroll",Rr.bind(this)),t.prototype._vpaidInitAd.call(this)},a.getModuleOptions=function(){return Cr(Cr({},t.prototype.getModuleOptions.call(this)),{},{disableHoverAudio:!0,vpaidJsVideoSlotShouldBeMuted:!0})},a.hasReachInventoryFactory=function(){return!0},a.getReachInventoryFactory=function(){var t=this;return this.logger.trace("Format[ViqeoPlayerRoll].getReachInventoryFactory()"),{markNode:"",waiterCreator:function(){return t._waitAdvStart()},destroy:null,id:"vn-visible-inventory-mark_"+this}},a._waitAdvStart=function(){var t=this;return this.logger.trace("Format[ViqeoPlayerRoll].waitForAdvStart"),new Promise((function(e){Br.call(t,e,"advStart")}))},a._getModuleDimensions=function(){var t=this.vqPlayer,e=t.getModuleDimensions(),i=e.viewportHeight,r=e.viewportTop,o=e.viewportBottom,n=e.moduleTop;return{viewportHeight:i,viewportWidth:t.getSize().width,viewportTop:r,viewportBottom:o,moduleTop:n}},a.updateOptions=function(t){this.options=Cr(Cr({},this.getOptions()),t);var e=this.collapsingThumbnail,i=this.options.hideThumbnail;e&&i&&(this.logger.log("Format[ViqeoPlayerRoll] updateOptions() hideThumbnail="+i+" so collapsingThumbnail is hidden"),e._destroy(),this.collapsingThumbnail=null)},a.toString=function(){return Vr},a.getBaseName=function(){return Tr.toLowerCase()},o}(k);function Rr(){this.logger.none("Format[ViqeoPlayerRoll] @scroll"),this._updateModuleState()}function Mr(){this.logger.trace("Format[ViqeoPlayerRoll] @AdLoaded",2),this._addDOMEventListener(document,"visibilitychange",Lr.bind(this),!1),this._updateModuleState()}function Nr(){this.logger.trace("Format[ViqeoPlayerRoll] @AdSizeChange",2);var t=this.module,e=this.collapsingThumbnail;Ue.call(t,["pausing","paused","resuming","playing"])&&e&&e.update(!0)}function Lr(){var t=this.module,e=document.visibilityState;this.logger.trace("Format[ViqeoPlayerRoll] @visibilitychange ("+e+")",2),"hidden"===e?Ue.call(t,"playing")&&t.pauseAd({invoker:this,method:"onVisibilityChange"}):this._updateModuleState()}function Fr(){this.logger.trace("Format[ViqeoPlayerRoll] @AdVideoStart",2),zr.call(this,!0),this._updateModuleState()}function Wr(){this.logger.trace("Format[ViqeoPlayerRoll] @AdStarted",2),this._updateModuleState()}function Hr(){this.logger.trace("Format[ViqeoPlayerRoll] @AdStopped",2),zr.call(this,!1)}function Ur(){var t=this;this.logger.trace("Format[ViqeoPlayerRoll] @AdDestroyed",2),zr.call(this,!1);var e=this.options.destroyTimeout;setTimeout((function(){return t._destroy()}),e)}function zr(t){void 0===t&&(t=!0);var e=this.slot,i=this.options.playerPlaybackClass;e&&i&&(t?e.classList.add(i):e.classList.remove(i))}function Br(t,e){var i=this.vqPlayer;this.logger.trace("Format[ViqeoPlayerRoll] Got "+e+" from player"),i.subscribe(t,e)}function Zr(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function qr(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Zr(Object(i),!0).forEach((function(e){Xr(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Zr(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Xr(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Gr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Qr(t,e){return Qr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Qr(t,e)}var $r,Jr="AmpRoll",Yr="Format[AmpRoll]",Kr=(null===o.ZP||void 0===o.ZP||null===(Ir=o.ZP.getChildWriter)||void 0===Ir?void 0:Ir.call(o.ZP,Yr))||o.ZP,to={playerDefaultClass:"vn-player",playerPlaybackClass:"vn-playback",playerSelectorPercent:"100%",widthElement:null,playerElement:"#c",lookupElement:"#c",playerSelectorTotalMin:1,playerDesktopStartFactor:.6,playerDesktopStopFactor:.6,playerMobileStartFactor:.5,playerMobileStopFactor:.2,preloadDistance:190,maxSegments:1,minSegments:0,minDistance:1,destroyTimeout:5e3,doNotWatchVisibility:!0,expandingDuration:0},eo=function(t){var i,r;function o(e,i){var r,o=i&&i.ancestor&&i.ancestor+":"+Yr||"Module::Format[AmpRoll]";Kr.trace(o+".constructor()"),(r=t.call(this,e,qr(qr(qr({},to),i),{},{ancestor:o}))||this)["Format[AmpRoll]"]=o,r.lastPostponedAction=null,r.adLoaded=!1,r.intersectionRatio=0,r.unlistenObserveIntersection=null,window.context.observeIntersection&&(r.unlistenObserveIntersection=window.context.observeIntersection(r._ampObserveIntersection.bind(Gr(r))));var a=new n.BH;return r.visibleInventoryPromise=a.promise,r.visibleInventoryResolve=a.resolve,(0,Gr(r).options.moduleAPI.setControlData)("wrapper",{css:{position:"absolute"}}),r}r=t,(i=o).prototype=Object.create(r.prototype),i.prototype.constructor=i,Qr(i,r);var a=o.prototype;return a.waitBeforeLoadUrl=function(t){return Kr.trace(this["Format[AmpRoll]"]+".waitBeforeLoadUrl("+t+")"),Promise.resolve(t)},a._vpaidInitAd=function(){Kr.trace(this["Format[AmpRoll]"]+".vpaidInitAd()");var e=this.module;this._addVPAIDEventListener(e,"AdLoaded",io.bind(this)),this._addVPAIDEventListener(e,"AdStarted",ro.bind(this));var i=t.prototype._vpaidInitAd.call(this);return(0,N.l7)(e.environmentVars,{forceAspectRatio:!1}),i},a.abort=function(){window.context.noContentAvailable&&(Kr.trace(this["Format[AmpRoll]"]+".abort() invoke window.context.noContentAvailable()"),window.context.noContentAvailable())},a._destroy=function(){this.unlistenObserveIntersection&&this.unlistenObserveIntersection(),t.prototype._destroy.call(this)},a._ampObserveIntersection=function(t){var e=this;t.forEach((function(t){var i=t.intersectionRatio;i>0&&e.visibleInventoryResolve(),Kr.none(e["Format[AmpRoll]"]+"._ampObserveIntersection() intersectionRatio="+i+" this.intersectionRatio="+e.intersectionRatio),e.intersectionRatio!==i&&(e.intersectionRatio=i,Kr.none(e["Format[AmpRoll]"]+"._ampObserveIntersection() intersectionRatio="+i+" this.adLoaded="+e.adLoaded),e.adLoaded?e._updateModuleState():e.lastPostponedAction=e._updateModuleState.bind(e))}))},a.hasReachInventoryFactory=function(){return!0},a.getReachInventoryFactory=function(){var t=this;return Kr.trace(this["Format[AmpRoll]"]+".getReachInventoryFactory()"),{id:"vn-visible-inventory-mark_"+this,waiterCreator:function(){return t.visibleInventoryPromise},destroy:null,markNode:""}},a._moduleResizeAd=function(t,e){var i=this.options.moduleAPI,r=i.resizeAd,o=i.getIndents,n=o&&o()||{},a=n.top,s=n.bottom,l=window.getComputedStyle(t),d=Math.min(window.innerWidth,Math.round(t.clientWidth-parseFloat(l.paddingLeft)-parseFloat(l.paddingRight))),c=Math.min(window.innerHeight-a-s,Math.round(d*e));r&&r(d,c)},a.canExecuteNoAd=function(){return!0},a._getModuleShown=function(){return this.intersectionRatio},a._updateModuleState=function(){var t=this.intersectionRatio;this._applyModuleState({intersectionRatio:t,moduleSquare:1})},a._updateModuleNodeSize=function(){var t=this.moduleNode,i=this.options.moduleAPI,r=i.getControlNode,o=i.getIndents,a=t&&t.parentElement||{},s=a.clientWidth,l=a.clientHeight;(0,e.Zs)(t,{width:(0,n.Ug)(s),height:(0,n.Ug)(l)});var d=r&&r("iframe");(0,e.Zs)(d,{position:"absolute",left:0,top:0,width:"100%",height:"100%"});var c=(o&&o()||{}).floatOutsideHeight,u=r&&r("wrapper"),h=u&&u.parentElement;if(h){var p=(0,n.er)(h).height;p=Math.min(l,p),Kr.trace(this["Format[AmpRoll]"]+".updateModuleNodeSize("+s+":"+l+") parentHeight="+p+" floatOutsideHeight="+c),u&&p&&(0,e.Zs)(u,{top:(0,n.Ug)(p/2-c/2)})}},a.getModuleOptions=function(){return{isInsideTextContent:!0,canExecuteNoAd:!0}},a.toString=function(){return Yr},a.getBaseName=function(){return Jr.toLowerCase()},o}(ht);function io(){var t=this;window.context.reportRenderedEntityIdentifier&&window.context.reportRenderedEntityIdentifier("videonow"),this.adLoaded=!0;var e=this.lastPostponedAction;e&&e(),setTimeout((function(){return t._updateModuleNodeSize()}),1)}function ro(){var t=this;if(window.context.renderStart){var e=this.options.moduleAPI.getIndents,i=e&&e()||{},r=i.floatOutsideWidth,o=i.floatOutsideHeight;r&&o&&(Kr.log(this["Format[AmpRoll]"]+".onAdStarted() renderStart("+r+", "+o+")",2,"green"),window.context.onResizeSuccess((function(e,i){Kr.trace(t["Format[AmpRoll]"]+".onAdStarted:onResizeSuccess("+e+", "+i+")"),setTimeout((function(){return t._updateModuleNodeSize()}),1)})),window.context.renderStart({width:r,height:o}))}}function oo(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function no(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?oo(Object(i),!0).forEach((function(e){ao(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):oo(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function ao(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function so(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lo(t,e){return lo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},lo(t,e)}var co="Overlay",uo="Format[Overlay]",ho=(null===o.ZP||void 0===o.ZP||null===($r=o.ZP.getChildWriter)||void 0===$r?void 0:$r.call(o.ZP,uo))||o.ZP,po={},go=function(t){var i,r;function o(i,r){var o;if(ho.trace("Format[Overlay].constructor()"),!x.ai)throw new Error("Mobile not detected");if(!vo)throw new Error("Fixed positioning support not detected");o=t.call(this,i,no(no(no({},po),r||{}),{},{ancestor:uo}))||this;var n=window,a=n.innerWidth,s=n.innerHeight,l=o.overlayNode=o._addDOMNode((0,e.Xv)(document.body,"div",{visibility:"hidden",position:"fixed",zIndex:-1,top:0,left:0,width:a+"px",height:s+"px",background:"rgba(0, 0, 0, .9)"}));o._addDOMEventListener(l,"touchmove",e.N$);var d=(0,e.Xv)(l,"div",{position:"absolute",top:0,right:0,bottom:0,left:0,width:"100%",height:"100%"});i.setControlData("underplay",{node:d});var c=o.slotNode=(0,e.Xv)(l,"div",{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:a+"px",height:"0px"}),u=so(o).options.moduleAPI.addVPAIDEventListener;return window.savedRequestAnimationFrame=null,o.savedRequestAnimationFrameCallbacks=[],i.setControlData("slot",{node:c}),u("AdLoaded",mo.bind(so(o)),so(o)),u("AdVideoStart",bo.bind(so(o)),so(o)),u("vn_hideOverlayFormatWrapper",(function(){ho.warn("Format[Overlay] @vn_hideOverlayFormatWrapper"),o.hide()}),so(o)),u("vn_setOverlayZIndex",(function(t){var i=t.zIndex;ho.warn("Format[Overlay] @vn_setOverlayZIndex");var r=so(o).overlayNode;r&&!isNaN(i)&&(0,e.Zs)(r,{zIndex:i})}),so(o)),u("AdDestroyed",yo.bind(so(o)),so(o)),u("resize",fo.bind(so(o)),so(o)),u("vn_VPAIDCreated",Ao.bind(so(o)),so(o)),o}r=t,(i=o).prototype=Object.create(r.prototype),i.prototype.constructor=i,lo(i,r);var a=o.prototype;return a._resize=function(){var t=this.module,i=this.overlayNode,r=this.slotNode,o=this.isFullscreen,a=this.mediaInfo,s=window,l=s.innerWidth,d=s.innerHeight,c=t.getAdAspectRatio(),u=l,h=o?d:Math.min(l*c,d);ho.trace("Format[Overlay].resize("+u+"("+l+"):"+h+"("+d+")/"+c+")"),(0,e.Zs)(i,{width:l+"px",height:d+"px"}),(0,e.Zs)(r,{width:l+"px",height:d+"px"}),t.resizeAd(l,d,o);var p=a&&function(t,e){var i=e||{},r=i.width,o=i.height,a=i.scalable,s=i.type;if(!s||!s.includes("javascript"))return null;var l=parseFloat(r),d=parseFloat(o),c=(0,n.MV)(a);if(l||d){if(c&&l&&d){var u=t.clientHeight,h=t.clientWidth,p=l/d,g=h/p;g>u?l=(d=u)*p:(l=h,d=g)}return{position:"absolute",overflow:"hidden",top:d?"50%":0,left:l?"50%":0,height:d?(0,n.Ug)(d):"100%",width:l?(0,n.Ug)(l):"100%",marginTop:d?(0,n.Ug)(-d/2):0,marginLeft:l?(0,n.Ug)(-l/2):0}}return null}(r,a),g=this.forceInsideHeight,v=this.forceInsideWidth,f=t.getControlNode("vpaidSlot");!p&&f&&g&&v?(0,e.Zs)(f,{position:"relative",display:"inline-block",verticalAlign:"middle",width:(0,n.Ug)(Math.min(v,l)),height:(0,n.Ug)(Math.min(g,d))}):f&&p&&(0,e.Zs)(f,p)},a.hide=function(){ho.trace("Format[Overlay].hide()");var t=this.overlayNode;t&&(0,e.Zs)(t,{height:0,opacity:0,zIndex:-1}),(0,e.Zs)(document.body,{overflow:""})},a._close=function(){ho.trace("Format[Overlay].close()");var t=this.slotNode,i=this.overlayNode;(0,e.Zs)(t,{transition:"all 300ms ease-out"}),setTimeout((function(){(0,e.Zs)(t,{height:0,opacity:.5})}),50),setTimeout((function(){(0,e.GA)(i)}),500)},a.getModuleOptions=function(){return{isInsideTextContent:!0,vpaidJsVideoSlotShouldBeMuted:!0}},a.fullscreenSwitchOn=function(){this.isFullscreen=!0},a.getModuleNode=function(){return this.overlayNode},a.getSlotNode=function(){return this.slotNode},a._getModuleDimensions=function(){return(0,n.k)(window,this.getModuleNode())},a.toString=function(){return uo},a.getBaseName=function(){return co.toLowerCase()},o}(D),vo=function(){var t=!1;if(document.createElement){var e=document.createElement("div");if(e&&e.style){e.style.position="fixed",e.style.top="10px";var i=document.body;i&&i.appendChild&&i.removeChild&&(i.appendChild(e),t=10===e.offsetTop,i.removeChild(e))}}return t}();function fo(){var t=this;ho.trace("Format[Overlay] @resize"),(window.savedRequestAnimationFrame||requestAnimationFrame)((function(){return t._resize()}))}function mo(){ho.trace("Format[Overlay] @AdLoaded",2),this.module.startAd()}function bo(){var t=this;ho.trace("Format[Overlay] @AdVideoStart",2),this._resize(),(0,e.Zs)(document.body,{overflow:"hidden"}),(0,e.Zs)(this.overlayNode,{visibility:"",zIndex:2147483647}),window.savedRequestAnimationFrame||(window.savedRequestAnimationFrame=window.requestAnimationFrame,window.requestAnimationFrame=function(e){t.savedRequestAnimationFrameCallbacks.push(e)})}function yo(){ho.trace("Format[Overlay] @AdDestroyed",2),this._close(),ho.trace("Format[Overlay] Restoring DOM elements"),window.savedRequestAnimationFrame&&(window.requestAnimationFrame=window.savedRequestAnimationFrame,this.savedRequestAnimationFrameCallbacks.forEach(requestAnimationFrame),window.savedRequestAnimationFrame=null,this.savedRequestAnimationFrameCallbacks=[])}function Ao(t){var e=this,i=t.vpaid,r=(this.options||{}).setSizeByMedia,o=i&&i.getMediaInfo();o&&((0,n.MV)(r)?o.then((function(t){var i=t.width,r=t.height;i&&r&&(e.forceInsideHeight=r,e.forceInsideWidth=i,e._resize())})):o.then((function(t){e.mediaInfo=t,e._resize()})))}var wo="::Formats",Po={vpaid:k,instream:k,contentroll:ht,fullscreenroll:ht,continuousroll:Ht,flyroll:function(t,e){var i=e||{},r=i.alwaysFly,o=i.flyrollAbsTop;return!0===o||"true"===o?new ye(t,e):!0===r||"true"===r?new Ce(t,e):new xe(t,e)},slideroll:li,overlay:go,viqeoplayerroll:jr,amproll:eo};const Oo=function(t,e,i){var r,n=t&&t.getAPI&&t.getAPI().logger||o.ZP,a=(null==n||null===(r=n.getChildWriter)||void 0===r?void 0:r.call(n,wo))||n;if("string"==typeof e){var s=e.toLowerCase(),l=t.options,d=l&&l.amp;if(d){if("contentroll"!==s.toLowerCase())return a.warn("::Formats Failed to create format ("+e+") because only the ContentRoll format is available for amp"),null;s="amproll"}var c=Po[s];if(c){a.log("::Formats.getFormat("+e+" -> "+s+")");var u=t.format;u&&(a.log("::Formats Destroying existing format"),u._destroy()),a.log("::Formats Initializing format ("+e+" -> "+s+")");var h=t.options[s],p=t.getAPI(),g=(0,N.l7)({},d?{}:i,h,{moduleAPI:p,formatName:s});return d&&(g.amp=!0),new c(t,g)}a.warn("::Formats Format not defined ("+s+")")}return a.warn("::Formats Invalid format name ("+e+")"),null};function So(t){var e=t||{},i=e.destroyIframeAction,r=e.logger;this.logger=r||o.ZP,this.destroyIframeAction=i,this._controlData=this._rootControlData={},this.pushControlsDataStack=function(){this._controlData=Object.create(this._controlData)},this.popControlsDataStack=function(){if(this._controlData){var t=this._controlData;Object.prototype.hasOwnProperty.call(t,"iframe")&&t.iframe.node&&(this.logger.trace(":ControlsDataStack.popControlsDataStack() -> _destroyIframe"),this.destroyIframeAction());var e=Object.getPrototypeOf(t);e&&(this._controlData=e)}},this.updateControlData=function(t,e,i){var r,o;(0,N.l7)(this._controlData,((r={})[t]=e,r)),i&&(0,N.l7)(this._rootControlData,((o={})[t]=e,o))},this.setControlData=function(t,e,i){if(e){var r=i?this._rootControlData:this._controlData;!r&&!i&&(r=this._controlData={}),"solid"===e[N.Os]||Array.isArray(e)||"object"!=typeof e?r[t]=e:r[t]=(0,N.l7)({},Object.prototype.hasOwnProperty.call(r,t)&&r[t]||{},e)}},this.getControlData=function(t,e,i,r){void 0===i&&(i=!1),r||(r=function(){return!0});for(var o,n,a=this._rootControlData,s=this._controlData,l=i?a:s;l;l=Object.getPrototypeOf(l)){var d=Object.prototype.hasOwnProperty.call(l,t)&&l[t];if(d&&(void 0===o&&r(d)&&(o=e?null!=d[e]&&void 0!==d[e]?d[e]:void 0:d),o&&d[N.uz]&&(n=e?d[e]:d)),void 0!==n&&o)break}return(0,N.xS)(void 0!==n?n:o)},this.getControlRawUnionData=function(t,e,i){return Eo.call(this,t,e,i)},this.getControlRawUnionDataGlobal=function(t,e,i){return Eo.call(this,t,e,i,(function(t){return t}),!0)},this.getControlUnionData=function(t,e,i){return Eo.call(this,t,e,i,N.xS.bind(null))},this.getControlUnionDataGlobal=function(t,e,i){return Eo.call(this,t,e,i,N.xS.bind(null),!0)},this.getControlNode=function(t){var e=this.getControlRawUnionData(t);return e?e&&e.node:(this.logger.none(".getControlNode("+t+") Unable to find control.node"),null)}}var _o=function(t){So.call(this,t)};const Co=_o;function Eo(t,e,i,r,o){void 0===r&&(r=function(t){return t}),void 0===o&&(o=!1),i||(i=function(){return!0});for(var n=[],a=o?this._rootControlData:this._controlData;a;a=Object.getPrototypeOf(a)){var s=Object.prototype.hasOwnProperty.call(a,t)&&a[t];if(s&&i(s)){var l={data:s,parsePoint:s.parsePoint};n.push(l)}}if(n.length){var d=r(function(t,e){var i=t.reduceRight((function(t,i){var r=!!i.parsePoint||e&&i[e]&&!!i[e].parsePoint;delete i.parsePoint;var o=i.data||{},n=t,a=(0,N.l7)(n,i);return r&&!o.display&&delete a.display,r&&!o.visibility&&delete a.visibility,!r||o.position||"absolute"!==n.position||"hidden"!==n.visibility&&"none"!==n.display||delete a.position,a}),{}),r=i.data||{};return e?r[e]:r}(n,e));return null===d||void 0!==d&&("object"!=typeof d||Object.keys(d).length)?d:void 0}}function Do(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function Io(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Do(Object(i),!0).forEach((function(e){To(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Do(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function To(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}"undefined"!=typeof exports&&(exports.ControlsDataStack=_o);var Vo="vnNoAd",ko="::Extension[vnNoAd]";function xo(t,e){return void 0===e&&(e="Extensions >"),(this.logger||o.ZP).trace(".parseVnCreative()"),d.hd.call(this,t,Vo,jo,{parentPrefix:e})}function jo(t){var e=t&&t.querySelector("scriptUrl");if(e){var i=(0,d.sQ)(e);return this.logger.trace(ko+" functionUrl:"+i),{functionUrl:i}}var r=t&&t.querySelector("function");if(r){var o=(0,d.sQ)(r);return this.logger.trace(ko+" function:"+o),{functionText:o}}return null}function Ro(t,e){var i=t.format,r=t.options,n=t.getAPI&&t.getAPI().logger||o.ZP,a=(r||{}).canExecuteNoAd;return new Promise((function(r,o){n.log(ko+" Executing"),a||i&&i.canExecuteNoAd&&i.canExecuteNoAd()||o(new Error(ko+" runNoAd(). canceled "));var s=e||{},l=s.functionText,d=s.functionUrl;if(l&&l.length){var c=document.createElement("script");c.innerHTML=l,document.body.appendChild(c),r(t)}else if(d&&d.length){if(d){var u=decodeURIComponent(d);Pi(u).then((function(){n.log(ko+" script "+u+" was successfully loaded"),r(t)})).catch((function(t){console.warn(ko+" fail load script "+u+" "+t),o(t)}))}}else o(new Error(ko+" runNoAd(). No exists any function to execute"))}))}var Mo="vnVisibleInventory",No="::Extension[vnVisibleInventory]";function Lo(t){return new Promise((function(e){var i,r=t&&t.getAPI&&t.getAPI().logger||o.ZP;((null==r||null===(i=r.getChildWriter)||void 0===i?void 0:i.call(r,No))||r).trace(""+No);var n,a=(t._getLastParameters()||{}).vnVisibleInventory||{},s=a.urls,l=a.important,d=a.global;(l||d||s&&s.length)&&t.setControlData(Mo,((n={urls:s})[N.uz]=l,n),d);e(t)}))}var Fo,Wo=function(){var t=this;this.circularCount=0,this.replace=function(e,i){if(!window.WeakSet)return i;if("object"==typeof i&&null!==i){if(t.seen.has(i))return void(t.circularCount=t.circularCount+1);t.seen.add(i)}return i},window.WeakSet&&(this.seen=new WeakSet)},Ho=function(t,e,i){try{var r=new Wo,o=JSON.stringify(t,(function(t,i){if("function"!=typeof e)return r.replace(t,i);var o=r.replace(t,i);return e(t,o)}),i);return r.circularCount>100?"##stringify() Result for stringify has "+r.circularCount+" circular structures\n    ##stringify() Output first 10000 symbols of result for performance purposes\n    "+o.slice(0,1e4)+"\n    ":r.circularCount>0?"##stringify() Result for stringify has "+r.circularCount+" circular structures\n    "+o+"\n    ":o}catch(t){return"stringify error="+(null==t?void 0:t.message)}},Uo=(null===o.ZP||void 0===o.ZP||null===(Fo=o.ZP.getChildWriter)||void 0===Fo?void 0:Fo.call(o.ZP,"ModuleStatistics"))||o.ZP;function zo(t,e){var i=this.getControlUnionData("vnAdErrorsRules","include"),r=this.getControlUnionData("vnAdErrorsRules","exclude"),o=i&&Object.keys(i).map((function(t){return parseInt(t,10)})),n=r&&Object.keys(r).map((function(t){return parseInt(t,10)})),a=this.getControlUnionData("vnAdErrorsRules","availableUrlsPattern");if(this.logger.trace(".filterUrlWithVnAdErrorsRules() url="+t),t&&(this.logger.trace(".filterUrlWithVnAdErrorsRules() availableUrlsPattern="+a),!a||new RegExp(a).test(t)))if(o){if(o.indexOf(e)<0)return null}else if(n&&~n.indexOf(e))return null;return t}function Bo(t){var e=this,i=t.code,r=t.message,o=void 0===r?"":r,n=this.data.slice().reverse().find((function(t){var e;return Boolean(null==t||null===(e=t.parameters)||void 0===e?void 0:e.id)}))||this.data.slice(-1)[0]||{},a=n.dataXml,s=n.parameters,l=(0,d.bW)(a),c=l&&l.length&&l[l.length-1].querySelectorAll("Error"),u=(c&&Array.from(c).map((function(t){var r=(0,d.FB)(t);return zo.call(e,r,i)})).filter(Boolean)||[]).map((function(t){return t.replace("[ERRORCODE]",encodeURIComponent(i)).replace("[MESSAGE]",encodeURIComponent(o))}));this.logger.trace(".pingCurrentAdError() error="+JSON.stringify(t)+" AdId="+((null==s?void 0:s.id)||null)+" urlsToPingCount="+(null==u?void 0:u.length));var h=(Qo.call(this,"vnCreative:select")||{}).uniqueId;Ei(u,(function(t){return e.replaceMacros.call(e,t,h)}))}function Zo(t,e){var i=this;if(tn.call(this)){var r=t.code,o=t.message,n=void 0===o?"":o,a=t.format,s=t.errorUrls,l=function(t){var e=zo.call(i,t,r);return e?Ei([e.replace("[ERRORCODE]",encodeURIComponent(r)).replace("[MESSAGE]",encodeURIComponent(n))],i.replaceMacros.bind(i)):Promise.resolve()},c=function(){return e&&ze.call(i)&&i.trigger("AdError",n,r)};r===w.FORMAT_ERROR&&a&&(this._trackedErrorsFormats[a]||(this._trackedErrorsFormats[a]=!0,c()));var u=function(t,e){var i=(t||{}).dataXml,r=(0,d.bW)(i),o=r&&r.length&&r[0].querySelectorAll(e);o&&Array.from(o).forEach((function(t){return l((0,d.FB)(t))}))};s&&s.length&&s.forEach(l),this.data.forEach((function(t){u(t,"InLine>Error"),u(t,"Wrapper>Error")})),c()}}function qo(t){var e=this;if(!tn.call(this))return Promise.resolve();this.logger.track(".track("+t+")");en.call(this)&&Zo.bind(this);return Promise.all(this.data.reduce((function(i,r){var o=r.dataXml;return i.concat(Ci(o,t,e.replaceMacros.bind(e)))}),[]))}function Xo(t){var e=this;return Promise.all(this.data.reduce((function(i,r){var o,n=r.parameters;return(null==n||null===(o=n.Trackings)||void 0===o?void 0:o[t])&&i.concat(n.Trackings[t].map((function(t){return e.replaceMacros.call(e,t,n.uniqueId)})))||i}),[]))}function Go(t){var e=this;if(!tn.call(this))return Promise.resolve();this.logger.track(".trackUrls("+t+")");en.call(this)&&Zo.bind(this);return Promise.all(this.data.reduce((function(i,r){var o=r.parameters,n=o.Trackings,a=o.uniqueId;return n&&n[t]&&i.concat(Ei(n[t],(function(t){return e.replaceMacros.call(e,t,a)})))||i}),[]))}function Qo(t){return tn.call(this)?(this.logger.none(".getLastExistsTrackUrls("+t+")"),this.data.reduceRight((function(e,i){var r=i.parameters||{},o=r.Trackings,n=r.uniqueId,a=o&&o[t];return e&&e.urls||!a?e:{urls:a,uniqueId:n}}),{})||null):null}function $o(t,e,i){var r=this;if(void 0===e&&(e=null),void 0===i&&(i=!0),!tn.call(this))return Promise.resolve();this.logger.track(".trackStrongUrls ("+(t&&t.length)+")");en.call(this)&&Zo.bind(this);var o=i&&function(t){return r.replaceMacros.call(r,t,e)};return Promise.all(Ei(t,o))}function Jo(t,e){return void 0===e&&(e=null),$o.call(this,t,e,!0)}function Yo(t,e){return void 0===e&&(e=null),$o.call(this,t,e,!1)}function Ko(){var t=this,e=this.getAdDuration(),i=this.getAdRemainingTime(),r=(e-i)/e,o=this.progressValue;this.progressTrackingEvents.forEach((function(i){var n=i.offset,a=void 0!==i.timeValue?i.timeValue/e:i.percentValue;void 0!==a&&r>=a&&(void 0===o||o<a)&&(t.logger.track(".trackProgress("+n+")"),i&&_i(i.url))})),this.progressValue=r}function tn(){return!this.getControlUnionData("vnShowViqeo")}function en(){var t=(this.options||{}).checkTrackingResponse;return(0,n.MV)(t)}function rn(t){var e=this;if(!tn.call(this))return Promise.resolve(!1);this._trackPassed=!0;var i=t||this._getLastParameters()||{},r=i.Trackings,o=i.uniqueId,n=r&&r["vnCreative:passed"];return n?(n.forEach((function(t){return e.logger.trace(" trackPassed() url="+t)})),Jo.call(this,n,o)):Promise.resolve(!1)}function on(){var t=this;if(!tn.call(this))return Promise.resolve(!1);this._track2Passed=!0;for(var e=[],i=function(i){var r=t._getLastData(i);if(!r)return"break";var o=r.parameters;if(!o)return"continue";var n=o||{},a=n.Trackings,s=n.uniqueId,l=a&&a["vnCreative:passed2"];l&&(l.forEach((function(e){return t.logger.trace(" trackPassed2() url="+e+" uniqueId="+s)})),e.push(Jo.call(t,l,s)))},r=0;;r++){var o=i(r);if("break"===o)break}return Promise.all(e)}function nn(t,i,r,o){var n,a,s;if(this.logger.track(" vnCreative:debug post("+i+")"),!i)return Promise.resolve();var l=this.getControlUnionData("vnMacros"),d=l&&l["[ASSETADPARAMS]"]||this.getControlUnionData("vnMacros","[ASSETADPARAMS]"),c=l&&l["[ASSETURI]"]||this.getControlUnionData("vnMacros","[ASSETURI]"),u=this._getLastDataXml(),h=this.format&&this.format.getModuleNode&&this.format.getModuleNode(),p=(0,e.Re)(h)&&h.outerHTML||"",g=this.getControlNode("iframe"),v=(null==g||null===(n=g.contentWindow)||void 0===n||null===(a=n.document)||void 0===a||null===(s=a.body)||void 0===s?void 0:s.outerHTML)||"",f=this.getControlNode("container"),m=f&&Array.from(f.querySelectorAll("iframe")).map((function(t){try{return t.contentWindow.document.body.outerHTML}catch(t){return null}})),b={id:t,log:Uo.archive.join("\n"),logs:null==Uo?void 0:Uo.logs,vast:u&&(u.innerHTML||u.documentElement.innerHTML),params:d,media:c,node:p,iframe:v,iframes:m&&m.length?m.filter((function(t){return!!t})):[]};return this.replaceMacros(i,r).then((function(e){try{var i=new URL(e);return i.searchParams.set("debugId-"+t,"debugId"),i.href}catch(t){return e}})).then((function(t){return fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",cache:"no-cache",mode:"cors",body:JSON.stringify(b)})})).then((function(t){if(t.ok)return Promise.resolve();throw{response:t}})).catch((function(e){var i=(null==e?void 0:e.response)||{},r=i.status,n=i.statusText,a=i.type,s=i.ok,l=i.redirected,d=i.url,c=Ho({message:null==e?void 0:e.message,status:r,statusText:n,type:a,ok:s,redirected:l,url:d});try{var u=new Blob([JSON.stringify({postFailedBody:c,body:b},null,4)],{type:"application/json"}),h=window.document.createElement("a");if(h.href=window.URL.createObjectURL(u),h.download="debug_"+t+".json",document.body.appendChild(h),h.click(),document.body.removeChild(h),o){var p=new URL(o);p.searchParams.append("postFailedBody",encodeURIComponent(c)),fetch(p.href,{method:"GET",cache:"no-cache",mode:"cors"}).catch((function(){}))}}catch(e){}return Promise.reject()}))}function an(){var t=Qo.call(this,"vnCreative:impression")||{},e=t.urls,i=t.uniqueId,r=(e||[])[0];if(this.logger.track(" vnCreative:impression post("+r+")"),r){var o=this.getControlUnionData("vnMacros"),n=o&&o["[ASSETADPARAMS]"]||this.getControlUnionData("vnMacros","[ASSETADPARAMS]"),a=o&&o["[ASSETURI]"]||this.getControlUnionData("vnMacros","[ASSETURI]"),s=o&&o["[ASSETDURATION]"]||this.getControlUnionData("vnMacros","[ASSETDURATION]"),l=this._getLastDataXml(),c=l&&(0,d.sQ)(l,"VideoClicks > ClickThrough","");this.replaceMacros(r,i).then((function(t){return Si(t,{method:"POST",requestHeaders:{"Content-Type":"application/json"},body:JSON.stringify({params:n,duration:s,media:a,clickthrough:c})})}))}}var sn="vnMinPlayerSize",ln="::Extension[vnMinPlayerSize]";const dn=function(t){return new Promise((function(e){var i,r=t&&t.getAPI&&t.getAPI().logger||o.ZP;((null==r||null===(i=r.getChildWriter)||void 0===i?void 0:i.call(r,ln))||r).trace(""+ln);var n,a=(t._getLastParameters()||{}).vnMinPlayerSize||{},s=a.size,l=a.important,d=a.global;(l||d||s&&(s.width||s.height))&&t.setControlData(sn,((n={size:s})[N.uz]=l,n),d);e(t)}))};function cn(t,e){void 0===e&&(e="minPlayerSize"),(this.logger||o.ZP).trace(".parseVnMinPlayerSizeObject()");var i,r,n=t&&(e?t[e]:t)||{};if("string"==typeof n){var a=n.split("x");i=a[0],r=a[1]}else Array.isArray(n)?(i=n[0],r=n[1]):(i=n.width,r=n.height);var s={};return i&&(s.width=parseInt(i,10)),r&&(s.height=parseInt(r,10)),{size:s}}function un(t){var e,i=t.getControlData(sn)||{},r=i.size,o=i.fatal,n=r||{},a=n.width,s=n.height;if(!a&&!s)return null;var l=t.format,d=l&&(null===(e=l.getSlotSize)||void 0===e?void 0:e.call(l))||{},c=d.width,u=d.height;if(s&&!u)return t._addVPAIDEventListener(t,"AdStarted",(function(){var e=un(t);e&&Zo.call(t,e,!0)})),null;if(a&&c<a||s&&u<s){var h=pn(t),p=h.topWindow,g=h.contentParent;return hn("\n    width: "+c+";\n    minWidth: "+a+";\n    height: "+u+";\n    minHeight: "+s+"\n    Viewport: "+(p?p.innerWidth:"Unknown")+";\n    Container width: "+g.offsetWidth+";\n    Container height: "+g.offsetHeight+";\n    Ratio: "+c/g.offsetWidth+"`\n",!!o)}return null}function hn(t,e){void 0===e&&(e=!1);var i=Error("Wrong slot size was detected: "+t);return i.code=w.AD_SIZE_ERROR,i.message=t,i.fatal=e,i}function pn(t){var i=t.environmentVars,r=t.getControlNode("slot")||i.slot,o=(0,n.I6)(window),a=o&&(0,n.Me)(o)||(0,n.pP)(window),s=a&&a.querySelector("body"),l=(0,e.aT)(r,s).reverse(),d=s;return l.length&&l.forEach((function(t){d===s&&t.offsetWidth!==s.offsetWidth&&(d=t)})),d.documentElement&&(d=d.documentElement),{topWindow:o,contentParent:d}}var gn=function(){function t(t,e,i){void 0===i&&(i=console),this.handler=e,this.timeout=t,this.log=i&&i.trace||console.log,this.id=null,this.startedTime=null,this.isStarted=!1,this.log(" InterruptibleTimeout constructor() timeout="+t)}var e=t.prototype;return e.start=function(){var t=this,e=this.timeout,i=this.handler;!this.startedTime&&e&&(this.startedTime=Date.now(),this.isStarted=!0,this.id=setTimeout((function(){t.log(" InterruptibleTimeout.start() setTimeout global timeout "+e+" expired this.id:"+t.id+" "),t.stop(),i()}),e),this.log(" InterruptibleTimeout.start() global timeout starts with "+e+" id:"+this.id))},e.pause=function(t){void 0===t&&(t="was paused");var e=this.id,i=this.timeout,r=this.startedTime,o=this.handler,n=this.isStarted;if(e&&i&&r&&n){this.isStarted=!1;var a=Date.now()-r;this.startedTime=0,clearTimeout(e),this.timeout-=a,this.log(" InterruptibleTimeout.pause() global timeout "+t+". the rest of timeout is "+this.timeout+" dif="+a+" id:"+e),this.timeout<=0&&(this.stop(),o&&o())}},e.stop=function(){this.log(" InterruptibleTimeout stop() id:"+this.id),this.id&&this._destroy()},e._destroy=function(){this.log(" InterruptibleTimeout _destroy() id:"+this.id),clearTimeout(this.id),this.isStarted=!1,this.timeout=0,this.id=null},t}(),vn="ModuleGlobalRemainingTimeChangeTimeId",fn="ModuleStartAdTimerId",mn="vpaidInitAdTimeoutId";function bn(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function yn(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function An(t){var i=this,r=null,o=t.starterUrl,a=(this.options||{}).viqeoStarterUrl;function s(){var i=this;r&&window.removeEventListener("onViqeoLoad",r);try{var o=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?bn(Object(i),!0).forEach((function(e){yn(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):bn(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},t);o.parent=(0,e.Re)(o.parent)&&o.parent.tagName+"."+o.parent.className||"",this.logger.log(".showViqeo() -> VIQEO.createPlayer("+JSON.stringify(o,null,"\t")+")\n viqeoOptions.parent="+(0,n.xl)(t.parent))}catch(t){this.logger.error(".appendViqeo can not show VIQEO start parameters: "+t)}window.VIQEO.createPlayer(t,t.parent).catch((function(t){i.logger.error("showViqeo "+t)}))}Pi(o||a).then((function(){window.VIQEO?s.call(i):(window.onViqeoLoad=s.bind(i),window.addEventListener("onViqeoLoad",r=s.bind(i)))}))}function wn(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function Pn(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?wn(Object(i),!0).forEach((function(e){On(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):wn(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function On(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Sn(t,e){(0,n.hd)(e),e._subscribe(_n.bind(t),"AdLoaded"),e._subscribe(Cn.bind(t),"AdStarted"),e._subscribe(En.bind(t),"AdStopped"),e._subscribe(Dn.bind(t),"AdSkipped"),e._subscribe(In.bind(t),"AdSkippableStateChange"),e._subscribe(Tn.bind(t),"AdSizeChange"),e._subscribe(xn.bind(t),"AdLinearChange"),e._subscribe(jn.bind(t),"AdDurationChange"),e._subscribe(Rn.bind(t),"AdExpandedChange"),e._subscribe(Mn.bind(t),"AdRemainingTimeChange"),e._subscribe(Nn.bind(t),"AdVolumeChange"),e._subscribe(Ln.bind(t),"AdImpression"),e._subscribe(Fn.bind(t),"AdAudioImpression"),e._subscribe(Wn.bind(t),"AdVideoStart"),e._subscribe(Hn.bind(t),"AdVideoFirstQuartile"),e._subscribe(Un.bind(t),"AdVideoMidpoint"),e._subscribe(zn.bind(t),"AdVideoThirdQuartile"),e._subscribe(Zn.bind(t),"AdVideoComplete"),e._subscribe(Bn.bind(t),"AdVideoCompleteTrackOnly"),e._subscribe(qn.bind(t),"AdClickThru"),e._subscribe(Xn.bind(t),"AdInteraction"),e._subscribe(Gn.bind(t),"AdUserAcceptInvitation"),e._subscribe(Qn.bind(t),"AdUserMinimize"),e._subscribe($n.bind(t),"AdUserClose"),e._subscribe(Jn.bind(t),"AdPaused"),e._subscribe(Yn.bind(t),"AdPlaying"),e._subscribe(Kn.bind(t),"AdLog"),e._subscribe(ta.bind(t),"AdError"),e._subscribe(ea.bind(t),"AdAudioOnlyStart"),e._subscribe(ia.bind(t),"AdReadyToShow"),e._subscribe(Vn.bind(t),"AdSizeForceChange"),e._subscribe(kn.bind(t),"vn_VideoSlotRemoved")}function _n(){var t=this;if(this.globalTimeoutProvider&&this.globalTimeoutProvider.pause(),!Ue.call(this,["destroying","destroyed"])){He.call(this,"loaded"),this._adHasBeenLoaded=!0,this._adVideoFirstQuartileWasHappened=!1,this._adVideoMidpointWasHappened=!1,this._adVideoThirdQuartileWasHappened=!1,this._vpaidStartAdWasInvoked=!1;var i=this.lastPendingCommands.resizeAd;i&&(i(),this.logger.log(" @onAdLoaded execute last resizeAd pending command: "+i),delete this.lastPendingCommands.resizeAd),this.logger.log(" @AdLoaded adVolume="+this.adVolume,2),sa.call(this,"AdLoaded");var r=this.getControlUnionData("videobackground","css");if(!(0,n.xb)(r))(h=Vi.call(this))&&(0,e.Zs)(h,r);var o=this.options,a=this.format,s=(o||{}).viqeoParentSlotClassName,l=this.vnShowViqeo=this.getControlUnionData("vnShowViqeo");if(!l||s&&document.getElementsByClassName(s).length)this.startAdShouldBeInvoked&&(this.startAdShouldBeInvoked=!1,this.startAd());else{var d=this.getControlNode("slot"),c="instream"===(a&&a.toString().slice(7,-1)).toLowerCase(),u=c?d.insertAdjacentElement("afterbegin",document.createElement("div")):(0,e.nZ)(d&&d.parentElement||d,"div",{});u.className=s+" vn-module__"+this.mainModuleId,(0,e.Zs)(u,{position:"relative",textAlign:"center"}),c&&(0,e.Zs)(u,{position:"absolute",top:0,left:0,height:"100%",width:"100%",zIndex:1});var h,p=this.data.map((function(t){return t.parameters})),g={},v="vn_module_"+this.mainModuleId,f=JSON.stringify(p);try{sessionStorage.setItem(v,f),g.key=v}catch(t){}if(g.parameters=p,g.disableExtensions=["vnShowViqeo"],An.call(this,Pn(Pn({},l.options),{},{parent:u},{vnData:JSON.stringify(g)})),this.state="destroyed",this._useExistsVideoSlot)this._restoreVideoSlotParams();else(h=Vi.call(this))&&(0,e.Zs)(h,{display:"none"});var m=this.destroyControls();m&&m.length&&m.forEach((function(e){t.getControlNode(e)&&t.setControlData(e,{node:null})})),this.environmentVars.slot||d&&(0,e.Zs)(d,{display:"none"}),this._destroyIframe(),setTimeout((function(){t.logger.log(".onAdLoaded() viqeo was created. send @AdStarted"),t.trigger("AdStarted")}),1)}}}function Cn(){if(this.logger.log(" @AdStarted state="+this.state,2),this.globalTimeoutProvider&&this.globalTimeoutProvider.stop(),this._lastExternalSEQ&&!Ue.call(this,"starting")){var t=" @AdStarted inappropriate state="+this.state+". Should be 'starting'";this.logger.log(t,2),Zo.call(this,{code:1042,message:t})}if(!Ue.call(this,["stopping","stopped","destroying","destroyed"])){if(this._adStarted=!0,this.trigger("AdStarted"),He.call(this,"started"),Go.call(this,"creativeView"),this.data.some((function(t){return t.parameters.ClickThrough}))){var i=this.getControlNode("vpaidSlot");i&&(0,e.Zs)(i,{cursor:"pointer"})}ra.call(this)}}function En(){var t=this,e=this.vnAfterplay;if(this.logger.log(" @AdStopped",2),this._adStoppedWasCalled=!0,Ue.call(this,"completing")){var i=(this.options||{beforeStopAdTimeout:200}).beforeStopAdTimeout;this.logger.log("@AdStopped was received before command vpaid.stopAd() state="+this.state+". Awaiting @AdVideoComplete tracking for "+i+" ms",2,"pink"),(0,n.hd)(this);var r=o.bind(this);this._subscribeOnce(r,"AdVideoComplete"),this._adVideoCompletedWasPropagated?(this.unsubscribe(r,"AdVideoComplete"),o.call(this)):this._addTimeout("AdStoppedWaitAdVideoCompleteTimerId",(function(){t.logger.warn("@AdStopped Awaiting @AdVideoComplete("+i+"ms) expired."),t.unsubscribe(r,"AdVideoComplete"),o.call(t)}),i)}else Be.call(this)?e&&Ue.call(this,"afterplay")||o.call(this):this._adStoppedTriggered||(this._adStoppedTriggered=!0,this.trigger("AdStopped"));function o(){if(!Ue.call(this,"destroying","destroyed","stopped","stopping")){var t=this.vnAfterplay;t&&t.shouldContinue()||t&&t.shouldShowStub()||(He.call(this,"stopped"),this._useExistsVideoSlot||this.setControlData("videoSlot",{node:null}),sa.call(this,"AdStopped"),aa.call(this,["AdDestroyed"]),this._adStoppedTriggered||(this._adStoppedTriggered=!0,this.trigger("AdStopped")))}}}function Dn(){var t=this;this.logger.log(" @AdSkipped",2),Go.call(this,"skip"),sa.call(this,"AdSkipped"),this.logger.log(".onAdSkipped() trigger(AdSkipped)",1),this.trigger("AdSkipped");var e=this.vnAfterplay,i=this._useExistsVideoSlot,r=this.format;if(!i){var o=this.getControlNode("vpaidSlot");o&&(o.innerHTML="");var n=Vi.call(this);n&&n.pause&&n.pause()}if((!e||!e.shouldShowStub()&&!e.shouldContinue())&&r&&r.hide&&r.hide(),!e||!e.shouldShowStub()||e.shouldContinue()){aa.call(this);var a=(this.options||{}).triggerAdStoppedAfterAdSkipped,s=r&&r.toString().slice(7,-1);!a&&"InStream"!==s||this._adStoppedTriggered||(this._adStoppedTriggered=!0,this.logger.log(".onAdSkipped() trigger('AdStopped')",1),setTimeout((function(){return t.trigger("AdStopped")}),1)),!i&&this.setControlData("videoSlot",{node:null}),Go.call(this,"close"),this._destroy()}}function In(){var t=this.vpaid;t&&this.setAdSkippableState(t.getAdSkippableState()),this.logger.trace(" @AdSkippableStateChange adSkippableState="+this.adSkippableState+" got from the VPAID",2)}function Tn(){var t=this.vpaid;if(t){var e=t.getAdWidth(),i=t.getAdHeight(),r=this.adWidth,o=this.adHeight,n=this.viewMode;this.logger.trace(" @AdSizeChange vpaid: adWidth="+e+" adHeight="+i+"; current: adWidth="+r+" adHeight="+o),i=i&&i<=o?i:o,(e=e&&e<=r?e:r)<=r&&i<=o&&(e<r||i<o)&&(this.logger.trace(" @AdSizeChange call resizeAd("+e+", "+i+")",2),this.resizeAd(e,i,n,!1))}}function Vn(){this.logger.log(" @onAdSizeForceChange");var t=this.vpaid.getAdWidth(),e=this.vpaid.getAdHeight();if(t!==this.getAdWidth()||e!==this.getAdHeight()){var i,r=this.format;null==r||null===(i=r.setAdSizeForceChange)||void 0===i||i.call(r,t,e),this.logger.trace(" @onAdSizeForceChange invokes resizeAd() width="+t+", height="+e,2),this.resizeAd(t,e)}}function kn(){this.logger.log(" @vn_VideoSlotRemoved"),this._videoSlotRemoved=!0}function xn(){var t=this.vpaid.getAdLinear();this.logger.trace(" @AdLinearChange adLinear="+t,2)}function jn(){}function Rn(){var t=this.adExpanded=this.vpaid.getAdExpanded();this.logger.trace(" @AdExpandedChange adExpanded="+t,2)}function Mn(){this.logger.none(" @AdRemainingTimeChange",2),this.adRemainingTime=this.getAdRemainingTime()||0,this.adDuration=this.getAdDuration()||0}function Nn(){var t=this.vpaid;if(t){var e=t.getAdVolume();void 0!==e&&(0===e||1===e?this.logger.log:this.logger.trace)(" @AdVolumeChange adVolume="+e.toFixed(2),2),void 0!==this.adVolume&&this.adVolume.toFixed(2)!==(100*e).toFixed(2)&&(Ue.call(this,"playing")&&(this.adVolume>0&&0===e&&Go.call(this,"mute"),0===this.adVolume&&e>0&&Go.call(this,"unmute")),this.adVolume=e)}}function Ln(t){var e=(t||{}).vnExternalSEQ;if(this.logger.log(" @AdImpression state="+this.state+" _adImpressionHappened="+this._adImpressionHappened+" vnExternalSEQ="+e),this._adImpressionHappened||!Ue.call(this,["starting","started","playing","resuming","pausing","paused"]))return this.logger.log("@AdImpression breaking state="+this.state+" _adImpressionHappened="+this._adImpressionHappened),void(e&&(this._lastExternalSEQ!==e&&this._manualAdditionalSEQ++,this._lastExternalSEQ=e,this.logger.log(" @AdImpression state="+this.state+" _adImpressionHappened="+this._adImpressionHappened+" _manualAdditionalSEQ="+this._manualAdditionalSEQ),i.call(this)));function i(){this.logger.log(" @AdImpression",2),this.trigger("AdImpression"),sa.call(this,"AdImpression"),Go.call(this,"Impression"),an.call(this)}Ue.call(this,["pausing","paused","resuming"])&&this.logger.warn(" @AdImpression state="+this.state+" vpaid triggered AdImpression on incorrect state."),Ue.call(this,["resuming"])&&(this.logger.warn(" @AdImpression Forcing onAdPlaying() manually because got AdImpression in resuming state"),Yn.call(this)),this._adImpressionHappened=!0,i.call(this)}function Fn(){this.logger.log(" @AdAudioImpression state="+this.state+" _adImpressionHappened="+this._adImpressionHappened),this._adImpressionHappened=!0,function(){this.logger.log(" @AdAudioImpression",2),this.trigger("AdAudioImpression"),sa.call(this,"AdAudioImpression"),Go.call(this,"Impression"),an.call(this)}.call(this)}function Wn(t){var e=(t||{}).vnExternalSEQ;function i(){this.logger.log(" @AdVideoStart",2),He.call(this,"playing"),this.trigger("AdVideoStart"),sa.call(this,"AdVideoStart"),Go.call(this,"start").then();var t=this.getAdDuration(),e=this.progressControlWasHidden;!e&&(t<=0||t===1/0)?(this.hideControl("progress"),this.progressControlWasHidden=!0):e&&t>0&&(this.restoreControl("progress"),this.progressControlWasHidden=!1)}this.logger.log(" @AdVideoStart state="+this.state+" _adVideoWasStarted="+this._adVideoWasStarted+" vnExternalSEQ="+e),this._adVideoWasStarted||!Ue.call(this,["starting","started","playing"])?e&&(this._lastExternalSEQ!==e&&this._manualAdditionalSEQ++,this._lastExternalSEQ=e,this.logger.log(" @AdVideoStart state="+this.state+" _adVideoWasStarted="+this._adVideoWasStarted+" _manualAdditionalSEQ="+this._manualAdditionalSEQ),i.call(this)):(this._adVideoWasStarted=!0,this._AdVideoStartWasHappenedAtLeastOnce=!0,i.call(this))}function Hn(){this.logger.log(" @AdVideoFirstQuartile",2),this._adVideoFirstQuartileWasHappened=!0,sa.call(this,"AdVideoFirstQuartile"),Go.call(this,"firstQuartile")}function Un(){this.logger.log(" @AdVideoMidpoint",2),this._adVideoMidpointWasHappened=!0,sa.call(this,"AdVideoMidpoint"),Go.call(this,"midpoint")}function zn(){this.logger.log(" @AdVideoThirdQuartile",2),this._adVideoThirdQuartileWasHappened=!0,sa.call(this,"AdVideoThirdQuartile"),Go.call(this,"thirdQuartile")}function Bn(){this.logger.log(" @AdVideoCompleteTrackOnly",2),Go.call(this,"complete"),this._completeWasTracked=!0}function Zn(t){var e=this;void 0===t&&(t={}),(0,n.hd)(this),t||(t={}),this.logger.log(" @AdVideoComplete state="+this.state,2);var i=this.state;if(Ue.call(this,["complete","completing","destroy","destroying","stopping","stopped"]))this.logger.warn(" @AdVideoComplete was invoked during state="+i);else{He.call(this,"completing"),sa.call(this,"AdVideoComplete"),this.logger.trace(" @AdVideoComplete (propagating delayed by trackers)");var r=this._adStarted,o=this._adImpressionHappened,a=this._adVideoWasStarted,s=this._vpaidStartAdInvokesTime,l=this._vpaidStartAdWasInvoked,d=this._adVideoFirstQuartileWasHappened,c=this._adVideoMidpointWasHappened,u=this._adVideoThirdQuartileWasHappened,h=Date.now()-s;if(!o&&r){var p="Get @AdVideoComplete but not get @AdImpression state="+i;this.logger.error(".onAdVideoFirstQuartile() "+p),Zo.call(this,{code:w.AD_IMPRESSION_NOT_HAPPENED_ERROR,message:p})}if(!r){var g="Get @AdVideoComplete but not get @AdStarted. state="+i,v=this.vpaid,f=(v||{})._countdown,m=f||{},b=m._duration,y=m._elapsedTime,A=m.adRemainingTime,P=(new Error).stack||"";return(v&&v.getDebugInfo?v.getDebugInfo():Promise.resolve({})).then((function(t){var i=JSON.stringify(t||{},(function(t,e){return!["moduleAPI","logger","module"].includes(t)&&e||void 0})),r=g+" _adVideoWasStarted="+a+" _vpaidStartAdWasInvoked=["+l+":"+h+"] _adVideoFirstQuartileWasHappened="+d+" _adVideoMidpointWasHappened="+c+" _adVideoThirdQuartileWasHappened="+u+" media="+e._media+"\nstack="+P+" vpaidInfo="+i+"\n_countdown="+f+" adRemainingTime="+A+" _duration="+b+" _elapsedTime="+y;e.logger.error(".onAdVideoFirstQuartile() "+r);var o=w.AD_STARTED_NOT_HAPPENED_ERROR;Zo.call(e,{code:o,message:r})})),this.trigger("vnVpaidAdError",g),void this._failedData({shouldDestroyVpaid:!0})}var O=!1!==t.shouldDestroy,S=this._completeWasTracked,_=this.format,C=this.vnAfterplay,E=Xo.call(this,"complete");C&&C._incSuccessfulPlays(),(!C||!C.shouldShowStub()&&!C.shouldContinue())&&_&&_.hide&&_.hide(),(S&&Promise.resolve()||E.then((function(t){var i;return Promise.all([Yo.call(e,t),e.vpaid&&["viqeoplayerroll","instream"].includes(null==_||null===(i=_.getBaseName)||void 0===i?void 0:i.call(_))?new Promise((function(t){return setTimeout((function(){return t()}),50)})):null])}))).then((function(){if(e.logger.trace(" @AdVideoComplete (propagating AdVideoComplete)"),e._completeWasTracked=!0,e.trigger("AdVideoComplete"),e._adVideoCompletedWasPropagated=!0,Ue.call(e,"stopped")&&O)e._destroy();else if(C&&C.shouldContinue())e._failedData({logMessage:" @AdVideoComplete() played "+C._getTotalSuccessfulPlays()+" ads from "+C._getContinueNumber()+". Trying play next ad.",shouldResetPlugins:!0,shouldDestroyVpaid:!0});else if(e.logger.log(" @AdVideoComplete all advanced ads have been shown",2,"color:green; font-size:1.2em"),!C||!C.shouldShowStub()){_&&_.hide&&_.hide();var t="beforeAdStoppedTimeout",i=(e.options||{}).beforeStopAdTimeout,r="AdStopped",o=function i(){e.unsubscribe(i,r),e._removeTimeout(t),Ue.call(e,"stopped")&&O&&e._destroy()};e._addTimeout(t,(function(){e.unsubscribe(o,r),Ue.call(e,"stopped")&&O&&e._destroy(),Ue.call(e,"stopping")&&O&&e._subscribeOnce((function(){return e._destroy()}),"AdStopped")}),i),e._subscribe(o,r),e.stopAd()}}))}}function qn(t,e,i){this.logger.log(" @AdClickThru("+t+", "+e+", "+i+") pauseStartedByVPAID="+this.pauseWasStartedByVPAID,2),Go.call(this,"ClickTracking");var r=this.getControlUnionData("videoclick","action");!Ue.call(this,["paused","paused"])||this.pauseWasStartedByVPAID||this.pausedWasStartedByVisibilityChange?(Ue.call(this,"playing")&&this.pauseAd(),i&&(t?Oi(t):this.data.forEach((function(t){var e=t.parameters;return Oi(e.ClickThrough)}))),this.trigger("AdClickThru",t,e,!1),"close"===r&&this.skipAd()):this.resumeAd()}function Xn(){this.logger.trace(" @AdInteraction",2)}function Gn(){this.logger.trace(" @AdUserAcceptInvitation",2)}function Qn(){this.logger.trace(" @AdUserMinimize",2)}function $n(){this.logger.trace(" @AdUserClose",2);var t=this.getAdSkippableState();t?(this.trigger("AdSkipped"),sa.call(this,"AdSkipped"),this._destroy()):this.logger.trace(" got @AdUserClose but skippableState="+t+". doing nothing.",2)}function Jn(){Be.call(this)&&!Ue.call(this,"afterplay")?(this.pauseWasStartedByVPAID=!Ue.call(this,"pausing"),this.logger.log(" @AdPaused pauseWasStartedByVPAID="+this.pauseWasStartedByVPAID,2),He.call(this,"paused"),Go.call(this,"pause"),sa.call(this,"AdPaused")):this.logger.log(" @AdPaused ignore because state="+this.state,2)}function Yn(){Be.call(this)&&!Ue.call(this,"afterplay")?(this.logger.log(" @AdPlaying",2),sa.call(this,"AdPlaying"),Ue.call(this,"resuming")&&(He.call(this,"playing"),Go.call(this,"resume"))):this.logger.trace(" @AdPlaying ignore because state="+this.state,2)}function Kn(t){this.logger.log(" @AdLog("+t+")",2),this.trigger("AdLog",t)}function ta(t,e){void 0===e&&(e=""),t||(t="");var i=+e;(!i||i<100||i>901)&&(i=901),this.logger.warn(" got @AdError("+i+", "+t+")"),Zo.call(this,{code:i,message:t}),this.trigger("vnVpaidAdError",t,e),this._failedData({shouldDestroyVpaid:!0})}function ea(){this.logger.trace("@AdAudioOnlyStart",2)}function ia(){this.logger.trace("@AdReadyToShow",2),this.trigger("AdReadyToShow")}function ra(){var t=this;this._addTimeout(vn,(function(){oa.call(t)&&ra.call(t)}),500)}function oa(){var t=this.getAdRemainingTime();if(this.adRemainingTime!==t){var e=this.vpaid;this.adRemainingTime=t,e&&e.trigger("AdRemainingTimeChange")}return!0}var na=["AdLoaded","AdSkippableStateChange","AdSizeChange","AdLinearChange","AdDurationChange","AdExpandedChange","AdRemainingTimeChange","AdVolumeChange","AdVideoFirstQuartile","AdVideoMidpoint","AdVideoThirdQuartile","AdInteraction","AdUserAcceptInvitation","AdUserMinimize","AdUserClose","AdPaused","AdResumed","AdPlaying","AdAudioDisabled","AdAudioEnabled","AdLoadedVideoData","slotSizeChanged","vn_hideOverlayFormatWrapper","vn_setOverlayZIndex","vn_FormatChanged","vn_VideoSlotRemoved","vn_VPAIDCreated","AdAudioOnlyStart"];function aa(t){var e=this.vpaid;this.logger.trace(".unsubscribeVpaidEvents() vpaid="+e),e&&na.forEach((function(i){return(!t||!t.includes(i))&&e.unsubscribeType(i)}))}function sa(t){var e,i;window!==window.top&&(null===(e=parent)||void 0===e||null===(i=e.postMessage)||void 0===i||i.call(e,t,"*"))}function la(){var t=this,e=["startAd","stopAd","pauseAd","resumeAd","skipAd"];this._messagesListener||window!==window.top&&(this._messagesListener=this._addDOMEventListener(window,"message",(function(i){var r=i.data;e.filter((function(t){return t===r})).forEach((function(e){t.logger.log("window listener get command ["+e+"]"),t[e].call(t)}))})))}function da(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function ca(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?da(Object(i),!0).forEach((function(e){ua(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):da(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function ua(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function ha(t,e,i){var r=this,o=ca({},t&&(e?"function"==typeof e?e(t):t[e]:t));if((0,n.xb)(o))return null;var a=pa(o);va(o);var s=Object.entries(o).reduce((function(t,e){var i,o=e[0],a=e[1],s="object"!=typeof a?l.call(r,((i={})[N.ny]=a,i[N.wb]=!0,i),o):l.call(r,a,o);return(0,n.xb)(s)||(t[o]=s),t}),{});return(0,n.xb)(s)?null:ca(ca({},a),s);function l(t,e){var r=this;if(Array.isArray(t))return t.map((function(t,e){return i.call(r,t,e)}));var o=pa(t)||{},n=i.call(this,t,e);return n?"object"!=typeof n||Array.isArray(n)?n:ca(ca({},n),o):null}}function pa(t,e){if(void 0===e&&(e={}),!t)return e;var i=t.global,r=t.important,o=t.overwrite,a=t.fatal,s=t.remove;i&&(e.global=i);var l=(0,n.MV)(r);l&&(e[N.uz]=l);var d=(0,n.MV)(a);return d&&(e.fatal=d),(0,n.MV)(s)&&(e[N.HT]=!0),null!=o&&(e[N.Os]=o),e}function ga(t,e,i,r){void 0===i&&(i={}),void 0===r&&(r={});var o=r,n=o.processValue,a=void 0===n?function(t){return t}:n,s=o.includeCondition,l=void 0===s?function(){return!0}:s;return t&&[].concat(e).forEach((function(e){var r=t[e];e&&l(r)&&(i[e]=a(r))})),i}function va(t){return t&&d.Ag.forEach((function(e){return delete t[e]})),t}var fa=function(t,e){var i=(t||{}).important,r=null==t?void 0:t[(null==e?void 0:e.optionsName)||"options"],o=null==r?void 0:r.important,a=(0,n.MV)(i)||(0,n.MV)(o);if((0,n.xb)(r))return null;var s=Object.keys(r).reduce((function(t,e){var n;if(d.Ag.includes(e))return t;var s=r[e];if(void 0===s)return t;var l=t[e]="object"!=typeof s?((n={})[N.ny]=s,n):ca({},s);return l[N.wb]||(l[N.wb]=!0),null!=l[N.uz]||null==o&&null==i||(l[N.uz]=a),t}),{});return null==o&&null==i||(s[N.uz]=a),s};function ma(t,e){var i=t&&(e?t[e]:t)||{};if("string"==typeof i)return{urls:i.split(",")};if(Array.isArray(i))return{urls:i};var r=function(t){return t},o=e?ha.call(this,t,e,r.bind(this)):r.call(this,t);return o&&o.length&&o[0]||o||null}const ba={VERSION:"1.0.0",BASE_DOMAIN:"static.videonow.ru",DATA_DOMAIN:"init.videonow.ru",STAT_DOMAIN:"stat.videonow.ru",ERRORS_TRACKING_DOMAIN:"videonow.ru",HOME_URL:"http://www.videonow.ru",CLIENT_INFO_DOMAINS:["init.videonow.ru","data.videonow.ru"]};var ya="::PreprocessDataUrl[clientinfo]";var Aa="Module::PreprocessDataUrl[weborama]",wa="{weborama_data}",Pa="//wam.solution.weborama.fr/fcgi-bin/dispatch.fcgi?d.A=prd&d.key=n9d9C9I4XN1I&d.format=json&d.top_clusters=10";var Oa="Module::PreprocessDataUrl[roxot]",Sa="{roxot_data}";function _a(t,e){try{var i=localStorage.getItem(e);return null===i&&(i=1+Math.floor(Math.random()*t),localStorage.setItem(e,i)),""+i}catch(e){return""+(t+1)}}function Ca(){return""+(1+Math.floor(100*Math.random()))}var Ea=[function(t){var e=t.url,i=t.module;return new Promise((function(t){var r,a=i&&i.getAPI&&i.getAPI().logger||o.ZP,s=(null==a||null===(r=a.getChildWriter)||void 0===r?void 0:r.call(a,ya))||a;if(ba.CLIENT_INFO_DOMAINS.some((function(t){return~e.indexOf(t)}))){s.trace(ya+" Injecting client info:"),x.Ke||(s.trace(ya+" Injecting flash=0"),e=(0,d.o3)(e,{flash:0}));var l=i.adWidth,c=i.adHeight;l&&c&&(s.trace(ya+" Injecting size w="+l+" & h="+c),e=(0,d.o3)(e,{w:l,h:c}));var u=(0,n.k$)(window,document);u&&(s.trace(ya+" Injecting location="+u),e=(0,d.o3)(e,{location:u}))}t({url:e,module:i})}))},function(t){var e=t.url,i=t.module;return new Promise((function(t){var r,n=i&&i.getAPI&&i.getAPI().logger||o.ZP,a=(null==n||null===(r=n.getChildWriter)||void 0===r?void 0:r.call(n,Aa))||n;if(-1!==e.indexOf(wa)){a.trace(Aa+" Injecting weborama data:");new Promise((function(t){var e,i=Date.now(),r=i-864e5;try{e=JSON.parse(localStorage.getItem(Pa))}catch(t){a.warn(Aa+" Failed to get weborama data from localStorage: "+t)}e&&e.timestamp>r?(a.trace(Aa+" Using cached weborama data"),t(e)):(a.trace(Aa+" Fetching weborama data from "+Pa),Si(Pa).then((function(e){var r={};try{r=JSON.parse(e.target.responseText)}catch(t){a.warn(Aa+" Failed to parse weborama data: "+t)}a.trace(Aa+" Retrieved weborama data: "+e.target.responseText),t({timestamp:i,data:r})})).catch((function(e){a.warn(Aa+" Failed to retrieve weborama data: "+e.target.statusText),t({})})))})).then((function(t){return new Promise((function(e){try{localStorage.setItem(Pa,JSON.stringify(t))}catch(t){a.warn(Aa+" Failed to save weborama data to localStorage: "+t)}finally{e(t)}}))})).then((function(t){return new Promise((function(i){var r=t&&t.data||{},o=r.socio_demographics||{},n="&"+(0,d.o3)("",{puid33:o.gender||"",puid34:o.age||"",puid35:o.social_class||"",puid36:(r.clusters||[]).slice(0,10).join(":"),puid37:(r.audiences||[]).slice(0,10).join(":")}).substr(1).replace("%3A",":"),s=e.replace(wa,n);a.trace(Aa+" Injected weborama data"),i(s)}))})).then((function(e){return t({url:e,module:i})}))}else t({url:e,module:i})}))},function(t){var e=t.url,i=t.module;return new Promise((function(t){var r,n=i&&i.getAPI&&i.getAPI().logger||o.ZP,a=(null==n||null===(r=n.getChildWriter)||void 0===r?void 0:r.call(n,Oa))||n;if(-1!==e.indexOf(Sa)){a.trace(Oa+" Injecting roxot data");var s={};[{key:"roxot-group-id",f:_a.bind(null,1e3)},{key:"roxot-sector-id",f:_a.bind(null,100)},{key:"roxot-deep",f:_a.bind(null,100)},{key:"roxot-event-group-id",f:Ca.bind(null)},{key:"roxot-event",f:Ca.bind(null)},{key:"roxot-event-deep",f:Ca.bind(null)},{key:"roxot-minutes",f:function(){return(new Date).getUTCMinutes().toString()}},{key:"roxot-hours",f:function(){return(new Date).getUTCHours().toString()}},{key:"roxot-day",f:function(){return(new Date).getUTCDay().toString()}}].forEach((function(t){s[t.key]=t.f(t.key)})),t({url:e.replace(Sa,(0,d.o3)("",s).substr(1)),module:i})}else t({url:e,module:i})}))}];function Da(t){return this.logger.trace(".preprocessDataUrl("+t+")"),(0,n.tS)(Ea,{url:t,module:this}).then((function(t){return t.url}))}function Ia(t){Ta.call(this,t)||(this.failedInsertingFormatOptions=(this.failedInsertingFormatOptions||[]).concat(t))}function Ta(t){return(this.failedInsertingFormatOptions||[]).some((function(e){return i=e,r=t,Object.entries(i).every((function(t){var e=t[0],i=t[1];return r[e]==i}));var i,r}))}function Va(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function ka(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Va(Object(i),!0).forEach((function(e){xa(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Va(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function xa(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function ja(t,e){var i;void 0===e&&(e="vnFormat"),null===(i=(null==this?void 0:this.logger)||o.ZP)||void 0===i||i.trace(".parseVnFormatObject()");var r=ha.call(this,t,e,Ra.bind(this));return r&&r.length?r[0]:r}function Ra(t,e){var i;if("object"!=typeof t)return(i={})[N.ny]=t,i[N.wb]=!0,i;var r="options"===e?{options:t}:ka({},t),o=pa(r);if("options"!==e)return ka(ka({},r),o);var n=fa(r);return n&&ka(ka({},n),o)}function Ma(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function Na(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Ma(Object(i),!0).forEach((function(e){La(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Ma(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function La(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}"undefined"!=typeof exports&&(exports.parseVnFormatObject=ja);var Fa="vnFormat",Wa="::Extension[vnFormat]";function Ha(t,e){void 0===e&&(e="Extensions >"),(this.logger||o.ZP).trace(".parseVnFormat()");var i=(0,d.hd)(t,Fa,Ua,{parentPrefix:e,multipleOptionName:"Format"});if(i){var r=Object.values(i),n=r&&r.length&&r[0];if("object"!=typeof n)throw Error(Wa+".parseVnFormat() invalid type");return n}return null}function Ua(t){var e=(0,d.sQ)(t,"name")||t.getAttribute("name"),i=(0,d.UV)(t),r={name:e};return i&&(r.options=i),r}function za(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function Ba(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?za(Object(i),!0).forEach((function(e){Za(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):za(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Za(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var qa="vnControls",Xa="::Extension[vnControls]";function Ga(t,i,r){var o=t.css,a=(0,n.MV)(t.important);delete t.important;var s=i?Ba(Ba({},e.nD),{},{display:"initial"}):{},l=Object.keys(t).reduce((function(e,i){var o=Ja[i.toLowerCase()],n=t[i],a=void 0!==n&&o&&o(n,r);return a&&a&&Object.keys(a).forEach((function(t){var i=a[t];e[t]="object"!=typeof i||null===i?i:Ba(Ba({},e[t]),i)})),e}),{css:o||s});return Object.entries(l).reduce((function(t,e){var i=e[0],r=e[1];return(0,N.cL)(t,i,r,a)}),{})}var Qa={adlabel:"title",countdown:"skipAdCountdown",close:"skipAd",logo:"logo",soundbtn:"volume",progress:"progress",progressbar:"progressBar",advlogo:"advLogo",callbutton:"callButton",moreinfo:"moreInfo",bottomborder:"bottomBorder",video:"slot",play:"play",spinner:"spinner",videoclick:"videoclick",collapsingthumbnail:"CollapsingThumbnail",debugoverlay:"debugOverlay"},$a={background:"background",containerbackground:"containerBackground",videobackground:"videobackground",maincontainer:"mainContainer",wrapper:"wrapper"},Ja={layout:function(t){return"0"===t?{css:e.al}:{css:e.nD}},display:function(t){return{css:{display:t}}},action:function(t){return{action:t}},enablewithvpaid:function(t){return{enableWithVPAID:t}},width:function(t){return{css:{width:t}}},height:function(t){return{css:{height:t}}},color:function(t){return{css:{color:t,fill:t,stroke:t}}},bgcolor:function(t){return{css:{backgroundColor:t}}},hoverbgcolor:function(t){return{hoverBackgroundColor:t}},hovercolor:function(t){return{hoverColor:t}},imgsrc:function(t){return{css:{backgroundImage:"url("+t+")"}}},padding:function(t){return{css:{padding:t}}},text:function(t){return{text:t}},url:function(t){return{url:t}},type:function(t){return void 0!==t&&t?{isIframe:"iframe"===t.toLowerCase()}:{}},position:function(t){return{position:t}},marginh:function(t){return{marginH:t}},marginv:function(t){return{marginV:t}},valign:function(t,i){var r=i.getControlNode("slot");r&&(0,e.Zs)(r,{top:t,transform:"translate(-50%, -"+t+")"})},overwrite:function(t){var e;return(e={})[N.Os]=t,e},logosrc:function(t){return{customerlogo:{logoSrc:t}}},logoheight:function(t){return{customerlogo:{logoHeight:t}}},logowidth:function(t){return{customerlogo:{logoWidth:t}}},totaltimecountdown:function(t){return{totalTimeCountdown:t}},remove:function(t){return{remove:(0,n.MV)(t)}},delay:function(t){return{delay:Number(t)}},important:function(t){var e;return(e={})[N.uz]=(0,n.MV)(t),e}};function Ya(t,e){return void 0===e&&(e="Extensions >"),(this.logger||o.ZP).trace(".parseVnControls()"),(0,d.hd)(t,qa,Ka.bind(this),{parentPrefix:e})}function Ka(t){var e=this,i=t.querySelectorAll("control");if(i){var r=Array.from(i).reduce((function(t,i){var r=ts.call(e,i,t),o=r.id,n=r.controlInfo;return o&&(t[o]=n),t}),{});if(!(0,n.xb)(r))return{controls:r}}return null}function ts(t){void 0===t&&(t={});var e={},i=t.getAttribute("id");e.id=i,e.parsePoint=!0;try{var r=(0,d.FB)(t);r&&(e.css=JSON.parse(r)),t&&t.getAttributeNames&&t.getAttributeNames().forEach((function(i){return e[i]=t.getAttribute(i)})),e.global=(0,n.MV)(e.global)}catch(t){var o;null==this||null===(o=this.logger)||void 0===o||o.warn(Xa+" Failed to parse CSS JSON of control "+i+" ("+t+")")}return{id:i,controlInfo:e}}function es(t,e){void 0===e&&(e="vnControls");var i=ha(t,e,(function(t){return function(t){if((0,n.xb)(t))return null;var e=Ba({},t),i=pa(e,{});return va(e),ga(e,"enableWithVPAID",i,{processValue:function(t){return(0,n.MV)(t)}}),ga(e,"remove",i,{includeCondition:function(t){return null!=t},processValue:function(t){return(0,n.MV)(t)}}),i.parsePoint=!0,i}(t)}));return(0,n.xb)(i)?null:{controls:i}}var is="vnAdErrorsRules",rs="::Extension[vnAdErrorsRules]",os=ba.ERRORS_TRACKING_DOMAIN;function ns(t,e){return void 0===e&&(e="Extensions >"),(this.getAPI&&this.getAPI().logger||o.ZP).trace(rs+".parseVnAdErrorsRules()"),(0,d.hd)(t,is,as,{parentPrefix:e})}function as(t){var e=ss(t&&t.querySelector("include")),i=ss(t&&t.querySelector("exclude")),r=(0,d.sQ)(t,"availableUrlsPattern");return e||i||r?{include:e,exclude:i,availableUrlsPattern:r}:null}function ss(t,e){void 0===e&&(e={optionName:"code"});var i=(0,d.UV)(t,e);return i&&Object.keys(i).forEach((function(t){i[t][N.ny]=t})),i}function ls(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function ds(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ls(Object(i),!0).forEach((function(e){cs(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ls(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function cs(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var us="vnSkipTime",hs="::Extension[skipTime/skipTime2]";function ps(t,e){void 0===e&&(e="Extensions >"),(this.logger||o.ZP).trace(".parseSkipTime()");var i=t.querySelector("Linear[skipoffset]"),r=i&&i.getAttribute("skipoffset");r&&(r=~r.indexOf("%")?function(t,e){var i=m(t),r=.01*parseInt(e.substr(0,2),10);return i&&Math.floor((0,d.TD)(i)*r)||NaN}(t,r):(0,d.TD)(r));var a=d.hd.call(this,t,"skipTime",gs,{parentPrefix:e});return(0,n.xb)(a)&&(a=d.hd.call(this,t,"skipTime2",gs,{parentPrefix:e})),(0,n.xb)(a)?null!=r&&{skipTime:r}||null:ds(ds({},a),null!=r&&{skipTime:r})}function gs(t){if(!t)return null;var e=(0,d.FB)(t)||(0,d.sQ)(t,"value");return null==e?null:{skipTime:(0,d.TD)(e),strict:(0,d.sQ)(t,"strict")||(0,n.MV)(t.getAttribute("strict"))}}function vs(t,e){void 0===e&&(e="vnSkipTime");var i=ha(t,e,(function(t){if((0,n.xb)(t))return null;if("string"==typeof t)return(0,d.TD)(t);var e=ds({},t),i=pa(e,{});va(e);var r=e.value;return delete i.value,i.skipTime=r&&(0,d.TD)(r)||0,i}));return(0,n.xb)(i)?null:i}function fs(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function ms(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?fs(Object(i),!0).forEach((function(e){bs(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):fs(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function bs(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var ys="vnProhibitedWords",As="::Extension[vnProhibitedWords]";function ws(t,e){return void 0===e&&(e="Extensions >"),(this.getAPI&&this.getAPI().logger||o.ZP).trace(As+".parseVnProhibitedWords()"),d.hd.call(this,t,ys,Ps,{parentPrefix:e})}function Ps(t){if(t){this.logger.trace(As+" parseVnProhibitedWords");var e=(0,d.UV)(t),i=(0,n.MV)((0,d.sQ)(t,"fatal")),r=t&&t.querySelector("words"),o=r&&(0,d.FB)(r).replace(/[,\s]+$/g,"").split(/\s*,\s*/i).join("|"),a=(0,d.FB)(t,"selector")||"",s=t.querySelectorAll("blockedMetrics"),l=s&&Array.from(s).map((function(t){return(0,d.FB)(t)}));return e||o||a||l?{options:e,pattern:o,selector:a,trackings:l,fatal:i}:null}return null}function Os(t,e){void 0===e&&(e="vnProhibitedWords"),(this.logger||o.ZP).trace(".parseVnProhibitedWordsObject()");var i=e?ha.call(this,t,e,Ss.bind(this)):Ss.call(this,t);return i&&i.length&&i[0]||i||null}function Ss(t){var e=ms({},t),i=pa(e);va(e);var r=e.words,o=e.selector,n=e.blockedMetrics,a=r.replace(/[,\s]+$/g,"").split(/\s*,\s*/i).join("|"),s=[].concat(n);return a||o||s?ms(ms({},i),{},{pattern:a,selector:o,trackings:s}):null}const _s='<svg viewBox="0 0 64 64"><ellipse cx="32" cy="32" fill="none" stroke-width="3" rx="30" ry="30"/><path stroke-width="0" d="m17.534 41.553 29.334.01-.952 1.373-27.418-.033-.964-1.35zm.202-18.25 28.942-.034.84 1.405-30.634.01.852-1.385zm-2.856 9.144 34.632-.033-.046 1.408-34.564-.022-.022-1.353zm34.66.13c0 9.318-7.774 16.9-17.33 16.9-9.555 0-17.327-7.583-17.327-16.9 0-9.316 7.774-16.896 17.326-16.896 9.554 0 17.33 7.58 17.33 16.9zm-17.33-18.25c-10.316 0-18.71 8.187-18.71 18.25s8.394 18.25 18.71 18.25c10.32 0 18.714-8.187 18.714-18.25s-8.393-18.25-18.714-18.25zm5.25 18.25c0 9.958-2.765 16.9-5.25 16.9-2.482 0-5.248-6.942-5.248-16.9 0-9.96 2.765-16.896 5.248-16.896s5.25 6.94 5.25 16.9zm-5.25-18.25c-4.31 0-6.635 9.403-6.635 18.25 0 8.848 2.326 18.25 6.635 18.25 4.31 0 6.64-9.403 6.64-18.25-.002-8.847-2.33-18.25-6.64-18.25zm12.297 18.25c0 9.318-5.52 16.9-12.297 16.9-6.777 0-12.292-7.583-12.292-16.9 0-9.316 5.515-16.896 12.292-16.896 6.778 0 12.297 7.58 12.297 16.9zM32.21 14.327c-7.542 0-13.68 8.188-13.68 18.25s6.138 18.25 13.68 18.25c7.543 0 13.68-8.186 13.68-18.25s-6.137-18.25-13.68-18.25z"/></svg>';function Cs(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function Es(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Cs(Object(i),!0).forEach((function(e){Ds(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Cs(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Ds(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Is,Ts,Vs,ks={shouldCreateIframe:!0,cssClass:"vn-container-iframe",attributes:{height:"100%",width:"100%",hspace:0,vspace:0,marginHeight:0,marginWidth:0},iframeAttributes:{allow:"autoplay",allowfullscreen:"",mozallowfullscreen:"",webkitallowfullscreen:"",loading:"eager"},styles:{position:"relative",zIndex:1,width:"100%",height:"100%",padding:0,margin:0,border:"none",overflow:"hidden",maxWidth:"initial",maxHeight:"initial"},sandbox:"allow-same-origin allow-scripts allow-popups"};function xs(t,i){return void 0===i&&(i={}),new Promise((function(r,o){var n=Es(Es({},ks),i||{})||{},a=n.shouldCreateIframe,s=n.attributes,l=n.styles,d=n.iframeAttributes,c=n.logger,u=n.sandbox,h=n.cssClass;if(null!=t&&t.parentNode){c&&c.trace(".initIframe() Creating sandboxed iframe");var p=document.createElement(a?"iframe":"div");(0,e.KT)(p,s),(0,e.Zs)(p,l),h&&p.classList.add(h),a&&((0,e.KT)(p,d||{}),p.sandbox=u);var g=(0,e.Pg)(p,{onload:function(){c&&c.trace(" createIframe() initIframe() @load"),clearInterval(g),r(p)},onerror:function(t){return o(t)}});a&&(p.src=x.a1?"javascript:":"about:blank"),t&&t.appendChild(p),c&&c.log(" createIframe() onFrameLoaded() sandboxed iframe was appended")}else o(new Error("createIframe() parent is not in the DOM"))}))}function js(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function Rs(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Ms(t,e){return e||(e=t.slice(0)),t.raw=e,t}function Ns(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ls(t,e){return Ls=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ls(t,e)}var Fs="vnAfterplay",Ws="::Extension[vnAfterplay]",Hs=function(t){var e,i;function r(e){var i,r,n=e.module,a=n&&n.getAPI&&n.getAPI().logger||o.ZP,s=(null==a||null===(i=a.getChildWriter)||void 0===i?void 0:i.call(a,Ws))||a;return(r=t.call(this,{ancestor:Ws,logger:s})||this)._onAdError=function(){r._isAdErrorDispatched=!0},r._onAdDestroyed=function(){var t,e,i=null===(t=r._module)||void 0===t||null===(e=t.getControlUnionData(Fs,null,(function(t){return t.parsePoint})))||void 0===e?void 0:e.function,o=Ns(r).afterplayTimeoutId;r.logger.trace(Ws+" @AdDestroyed Clearing auto close timeout ("+o+")",2),clearTimeout(o);var n=window[i];if(n&&!r._isAdErrorDispatched){var a=Ns(r)._formatExpandingDuration;setTimeout((function(){try{n()}catch(t){console.error(""+t)}}),(a||0)+100)}},r.module=n,r.moduleAPI=n&&n.getAPI&&n.getAPI(),r.afterplayTimeoutId=null,r._isActive=!1,r._isReplay=!1,r._isRunning=!1,r._continueNumber=0,r._module=null,r._isAdErrorDispatched=!1,r}i=t,(e=r).prototype=Object.create(i.prototype),e.prototype.constructor=e,Ls(e,i);var n=r.prototype;return n.shouldShowStub=function(){return!this._getContinueNumber()&&this._isActive},n.isActive=function(){return this._isActive},n.isReplay=function(){return this._isReplay},n._getContinueNumber=function(){return this._continueNumber},n._getCycleCounter=function(){return this.module._cycleCounter||0},n._incCycleCounter=function(){var t=this.module;return t._cycleCounter||(t._cycleCounter=0),++t._cycleCounter},n._setSuccessfulPlays=function(t){var e=this.module,i=this._getCycleCounter(),r=e._successfulPlaysCounters;r||(r=e._successfulPlaysCounters=[]),r[i]=t},n._getSuccessfulPlays=function(){var t=this.module,e=this._getCycleCounter(),i=t._successfulPlaysCounters;return i&&i[e]||0},n._getTotalSuccessfulPlays=function(){var t=this.module._successfulPlaysCounters;return t&&t.reduce((function(t,e){return t+e}),0)||0},n._incSuccessfulPlays=function(){var t=this.module,e=this._getContinueNumber();if(this._getTotalSuccessfulPlays()<e){var i=this._getCycleCounter(),r=t._successfulPlaysCounters;r||(r=t._successfulPlaysCounters=[]),r[i]||(r[i]=0),r[i]+=1}return this._getTotalSuccessfulPlays()},n.shouldContinue=function(){var t=this._getTotalSuccessfulPlays(),e=this._getContinueNumber();return e>=0&&t<e},n.init=function(t){var e=this;return this._module=t,new Promise((function(i){t.vnAfterplay=e,[].concat((t._getLastParameters()||{}).vnAfterplay||null).filter((function(t){return t})).forEach((function(i){e.logger.trace(Ws+" Init"),t.setControlData(Fs,i,i.global)}));var r=t.getControlUnionData(Fs,null,(function(t){return t.parsePoint}));if(r){var o=r.continueNumber;o?e._continueNumber=o+1:(e._continueNumber=0,e._addVPAIDEventListener(t,"AdVideoComplete",Bs.bind(e,t,r)),e._addVPAIDEventListener(t,"AdSkipped",Bs.bind(e,t,r)),e._addVPAIDEventListener(t,"AdError",e._onAdError),e._addVPAIDEventListener(t,"AdDestroyed",e._onAdDestroyed),e.manualRun=function(){return Bs.call(e,t,r)}),e._isActive=!0,e._isReplay=!1}i(t)}))},n._destroy=function(){t.prototype._destroy.call(this)},r}(l);function Us(t,e){return void 0===e&&(e="Extensions >"),(this.getAPI&&this.getAPI().logger||o.ZP).trace(Ws+".parseVnAfterPlay()"),(0,d.hd)(t,Fs,zs,{parentPrefix:e})}function zs(t){if(!t)return null;var e={},i=parseInt((0,d.FB)(t,"continue"),10);if(!i>0){var r=t.querySelector("continue");i=r&&parseInt(r.getAttribute("value"),10)}if(i>0)return{continueNumber:i,parsePoint:!0};e.fgColor=(0,d.FB)(t,"color","white"),e.bgColor=(0,d.FB)(t,"bgColor","black"),e.function=(0,d.FB)(t,"function"),e.timeout=(0,d.TD)((0,d.FB)(t,"time"));var o=t.querySelector("replay");if(o){var n=(0,d.FB)(o,"label",Fe(Is||(Is=Ms(["Play again"])))),a={},s=o.querySelectorAll("clickTracking");a.clicks=s&&Array.from(s).map((function(t){return(0,d.FB)(t)})),e.replay={title:n,trackings:a}}var l=t.querySelector("close");if(l){var c=l&&(0,d.FB)(l,"label",Fe(Ts||(Ts=Ms(["Close"])))),u={},h=l.querySelectorAll("clickTracking");u.clicks=h&&Array.from(h).map((function(t){return(0,d.FB)(t)})),e.close={title:c,trackings:u}}var p=t.querySelector("advertiser");if(p){var g=(0,d.FB)(p,"label",Fe(Vs||(Vs=Ms(["Open advertiser site"])))),v=(0,d.FB)(p,"url")||(0,d.FB)(t,"ClickThrough"),f={};if((0,d.FB)(p,"clickTracking",!1)){var m=p.querySelectorAll("clickTracking");f.clicks=m&&Array.from(m).map((function(t){return(0,d.FB)(t)}))}else{var b=t.querySelectorAll("VideoClicks ClickTracking");f.clicks=b&&Array.from(b).map((function(t){return(0,d.FB)(t)}))}e.advertiser={title:g,url:v,trackings:f}}var y=t.querySelector("featured");if(y){var A=(0,d.FB)(y,null,"");e.featured={html:A}}return e.parsePoint=!0,e}function Bs(t,i){var r=this;this.logger.trace(Ws+" Afterplay"),He.call(t,"afterplay");var o=10*(x.ai&&window.devicePixelRatio||0),n=i.function,a=i.fgColor,s=i.bgColor,l=this.afterplayTimeoutId,d=(this.moduleAPI||{}).getOptions,c=(d&&d()||{}).formatExpandingDuration;if(this._formatExpandingDuration=c||0,n){if(window[n])return this.logger.log(Ws+' function "'+n+'" was called.'),clearTimeout(l),this._isActive=!1,void t.stopAd();this.logger.warn(Ws+' function "'+n+'" not found.')}var u=t.getControlNode("wrapper"),h=t.getControlNode("skipAd"),p=t.getControlUnionData(Fs,"css")||{},g=(0,e.Xv)(u,"div",function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?js(Object(i),!0).forEach((function(e){Rs(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):js(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({position:"absolute",zIndex:4,top:0,right:0,bottom:0,left:0,overflow:"hidden"},p)),v=i.advertiser,f=i.replay,m=i.close,b=f||v||m,y=(0,e.Xv)(g,"div",{display:b?"flex":"block",alignItems:"stretch",width:"100%",height:"100%",fontSize:100-o+"%",lineHeight:1.5,fill:a,stroke:a,color:a,backgroundColor:s,userSelect:"none"});if(h&&(0,e.Zs)(h,{display:"none"}),b){var A=(0,e.Xv)(y,"div",{flex:"1 1 50%",display:"flex",flexFlow:"column nowrap",justifyContent:"center"});A.className="afterplay-controls";var w=function(t,i,r,n){var a=(0,e.Xv)(t,"div",{display:"flex",alignItems:"center",padding:"2% 4%",cursor:"pointer",boxSizing:"border-box",textAlign:"left"},null,n);return(0,e.Xv)(a,"div",{flex:"1 1 10%",maxWidth:"50px",minWidth:"20px",maxHeight:"50px",minHeight:"20px",transform:"scale("+(1-o/100)+")"},i),(0,e.Xv)(a,"div",{flex:"1 1 90%",paddingLeft:"10px"},r),x.ai||(a.addEventListener("mouseenter",(function(){return(0,e.Zs)(a,{opacity:.8})})),a.addEventListener("mouseleave",(function(){return(0,e.Zs)(a,{opacity:1})}))),a},P=t.isVpaidJs();if(P&&this.logger.log(Ws+"::Replay The ad that has been played was VPAID so we can not replay the same ad. Replay is not available."),f&&!P){var O=f.title,S=f.trackings;w(A,'<svg viewBox="0 0 64 64"><ellipse cx="32" cy="32" fill="none" stroke-width="3" rx="30" ry="30"/><path stroke-width="0" d="M32.503 12.794V8.75l9 7.75-9 8.5v-4.45c-7.583-.5-13.383 5.267-13.3 11.85.083 6.583 4.083 12.65 12.3 12.6 8.217-.05 12.6-6.596 12.5-13.5l6.106-5.845c.383.61 1.384 2.437 1.392 8.245-.483 8.817-7.717 18.683-19.75 18.95-12.033.267-20.524-9.77-20.35-20.65.174-10.88 9.73-19.738 21.1-19.406z"/></svg>',O,(function(){r.logger.trace(Ws+"::Replay @click Clearing updateVolume timeout ("+l+")"),clearTimeout(l),(0,e.GA)(g);var i=(S||{}).clicks;i&&Jo.call(t,i),t._replay(),r._isReplay=!0,h&&t&&t.adSkippableState&&(0,e.Zs)(h,{display:"block"})})).className="___vn-replay-control_replay___"}if(v){var _=v.title,C=v.trackings,E=v.url;if(E||(E=t._getLastParameters().ClickThrough)&&this.logger.log(Ws+"::Advertiser @AdStopped advertiser's url is not defined so got url from last VAST's VideoClicks->ClickThrough ("+E+")"),E)w(A,_s,_,(function(){r.logger.trace(Ws+"::Advertiser @click Clearing updateVolume timeout ("+l+")"),clearTimeout(l);var e=(C||{}).clicks;e&&Jo.call(t,e),Oi(E)})).className="___vn-replay-control_open_url___"}if(m){var D=m.title,I=m.trackings;w(A,'<svg class="vn-afterplay-play" style="width:100%" viewBox="0 0 64 64"><ellipse cx="32" cy="32" fill="none" stroke-width="3" rx="30" ry="30"/><path stroke-width="0" d="m17.25 24.402 7.152-7.152L32 24.848l7.598-7.598 7.152 7.152L39.152 32l7.598 7.598-7.152 7.152L32 39.152l-7.598 7.598-7.152-7.152L24.848 32l-7.598-7.598z"/></svg>',D,(function(){r.logger.trace(Ws+"::Close @click Clearing updateVolume timeout ("+l+")"),clearTimeout(l);var e=(I||{}).clicks;e&&Jo.call(t,e),r._isActive=!1,t.stopAd()}))}h&&(0,e.Zs)(h,{display:"none"})}var T=i.featured;T&&Zs.call(this,t,T,y,b);var V=i.timeout;V&&V<1/0&&(this.logger.log(Ws+" Afterplay auto close timeout "+1e3*V+"ms"),this.afterplayTimeoutId=setTimeout((function(){r.logger.log(Ws+" Afterplay auto close timeout reached",1),t._destroy()}),1e3*V))}function Zs(t,i,r,o){var n=this,a=o?{flex:"1 1 50%"}:{},s=(0,e.Xv)(r,"div",a);s.className="afterplay-featured",xs(s,{shouldCreateIframe:!0,logger:this.logger,sandbox:"allow-forms allow-same-origin allow-pointer-lock allow-scripts allow-popups allow-top-navigation"}).then((function(e){var r=i.html,o=e.contentDocument&&e.contentDocument.body||e;o.innerHTML=r;var a=o.getElementsByTagName("script");if(a){var s=n,l=t.getControlNode("iframe");(l&&l.contentWindow||window).VIDEONOW={subscribe:t.subscribe.bind(t)},function(t,e){!function i(r){var o=a.item(r);if(o)if(o.src){var n=e.createElement("script");n.src=o.src,n.onload=i.bind(this,r+1);var l=e.getElementsByTagName("head")[0];try{l.appendChild(n)}catch(t){s.logger.warn(Ws+' Failed to execute featured script src="'+n.src+'" ('+t+")")}}else{try{t.eval(o.innerHTML)}catch(t){s.logger.warn(Ws+" Failed to execute featured script ("+t+")")}i(r+1)}}(0)}(e.contentWindow||window,e.contentDocument||document)}}))}function qs(t,e){return qs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},qs(t,e)}var Xs="vnAdEvents",Gs="::Extension[vnAdEvents]",Qs=["AdLoaded","AdStarted","AdStopped","AdSkipped","AdSkippableStateChange","AdLinearChange","AdDurationChange","AdExpandedChange","AdVolumeChange","AdImpression","AdVideoStart","AdVideoFirstQuartile","AdVideoMidpoint","AdVideoThirdQuartile","AdInteraction","AdUserAcceptInvitation","AdUserMinimize","AdUserClose","AdPaused","AdResumed","AdPlaying","AdVideoComplete","AdClickThru","AdLog","AdError","AdAudioOnlyStart","AdReadyToShow"],$s=function(t){var e,i;function r(e){var i,r=e.module,n=r&&r.getAPI&&r.getAPI().logger||o.ZP,a=(null==n||null===(i=n.getChildWriter)||void 0===i?void 0:i.call(n,Gs))||n;return t.call(this,{ancestor:Gs,logger:a})||this}return i=t,(e=r).prototype=Object.create(i.prototype),e.prototype.constructor=e,qs(e,i),r.prototype.init=function(t){var e=this;return new Promise((function(i){t.vnAdEvents=e,e.logger.trace(""+Gs);var r=t._getLastParameters(),o=r&&r.vnAdEvents||{},n=o.global,a=o.handlerName,s=o.vnFunction,l=o.vnScriptUrl,d=o.events;(a||s||l||d&&d.length)&&t.setControlData(Xs,{handlerName:a,vnFunction:s,vnScriptUrl:l,events:d},n),a=t.getControlUnionData(Xs,"handlerName"),d=t.getControlUnionData(Xs,"events"),s=t.getControlUnionData(Xs,"vnFunction"),(l=t.getControlUnionData(Xs,"vnScriptUrl"))||s||(a&&d.forEach((function(i){return e._addVPAIDEventListener(t,i,(function(){window[a]&&window[a](t.mainModuleId,i)}))})),i(t))}))},r}(l);function Js(t){var e=t&&t.querySelector('Extensions > Extension[type="vnAdEvents"]'),i=e&&e.querySelector("function"),r=e&&e.querySelector("scriptUrl"),o=r&&decodeURIComponent(r),n=(0,d.sQ)(e,"global"),a=(0,d.sQ)(e,"handlerName"),s=(0,d.sQ)(e,"events"),l=s&&s.length?"*"===s?"*":s.split(/[\s+,]/):null,c=l&&l.length?"*"===l?Qs:Qs.filter((function(t){return l.indexOf(t)>-1})):null;return n||a||c||i||o?{global:n,handlerName:a,events:c,vnFunction:i,vnScriptUrl:o}:null}var Ys="vnEventsParams",Ks="::Extension[vnEventsParams]";function tl(t){var e=t&&t.querySelector('Extension[type="vnEventsParams"]');return e?{eventsParams:(0,d.UV)(e,{optionName:"Event",onlyTopLevel:!0}).reduce((function(t,e){var i=e.getAttribute("name"),r=(0,d.UV)(e,{optionName:"Parameter"});return i&&r&&(t[i]=r),t}),{}),global:(0,d.sQ)(e,"global"),important:(0,d.sQ)(e,"important")||e.getAttribute("important")}:null}var el="vnCreative",il="::Extension[vnCreative]";function rl(t,e){return void 0===e&&(e="Extensions >"),(this.logger||o.ZP).trace(".parseVnCreative()"),(0,d.hd)(t,el,ol,{parentPrefix:e})}function ol(t){var e=(0,d.sQ)(t,"global"),i=(0,d.sQ)(t,"important"),r=["debug","debugFailed","passed","passed2","select","impression"].reduce((function(r,o){var n=t&&t.querySelector(o);if(n){var a=(0,d.sQ)(n),s=nl(n,"global"),l=nl(n,"important");r[o]={url:a,important:al(i,l),global:al(e,s)}}return r}),{});return(0,n.xb)(r)?null:r}function nl(t,e){var i=t.getAttribute(e);return"true"===i||"false"!==i&&null}function al(t,e){return null==t?e:null==e?t:t&&e}var sl=i(667),ll="vnBrowserCache",dl="::Extension[vnBrowserCache]";function cl(t){this.logger.trace(dl+".parseVnBrowserCache()");var e=t&&t.querySelector('Extension[type="vnBrowserCache"]');return e?{enabled:"true"===e.getAttribute("enabled"),global:"true"===e.getAttribute("global"),important:"true"===e.getAttribute("important")}:null}var ul="vnCache",hl="::Extension[vnCache]";function pl(t){this.logger.trace(hl+".parseVnBrowserCache()");var e=t&&t.querySelector('Extension[type="vnCache"][caching="true"]');if(e){var i="true"===e.getAttribute("global"),r="true"===e.getAttribute("important");return{serverUrl:e.getAttribute("serverUrl"),strict:"true"===e.getAttribute("strict"),global:i,important:r}}return null}function gl(t,e){return gl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},gl(t,e)}var vl="vnPageChanged",fl="::Extension[vnPageChanged]",ml=function(t){var e,i;function r(e){var i,r,n=e.module,a=n&&n.getAPI&&n.getAPI().logger||o.ZP,s=(null==a||null===(i=a.getChildWriter)||void 0===i?void 0:i.call(a,fl))||a;return(r=t.call(this,{ancestor:fl,logger:s})||this).module=n,r}i=t,(e=r).prototype=Object.create(i.prototype),e.prototype.constructor=e,gl(e,i);var n=r.prototype;return n.init=function(){var t=this,e=this.module;return new Promise((function(i){e.vnPageChanged=t,t.logger.trace(""+fl);var r=e._getLastParameters(),o=r&&r.vnPageChanged||{},n=o.global,a=o.important,s=o.handlerName,l=o.eventName;s&&e.setControlData(vl,{handlerName:s,important:a},n),(s=e.getControlUnionData(vl,"handlerName"))&&(window[s]=function(){e._abort()}),l&&e.setControlData(vl,{eventName:l,important:a},n),(l=e.getControlUnionData(vl,"eventName"))&&t._addDOMEventListener(window.document,l,(function(){e._abort()})),i(e)}))},n._destroy=function(){t.prototype._destroy.call(this);var e=this.module.getControlUnionData(vl,"handlerName");e&&delete window[e]},r}(l);function bl(t){var e=t&&t.querySelector('Extension[type="vnPageChanged"]'),i=(0,d.sQ)(e,"eventName"),r=(0,d.sQ)(e,"handlerName"),o=(0,d.sQ)(e,"global"),n=(0,d.sQ)(e,"important");return r||i||n||o?{global:o,important:n,eventName:i,handlerName:r}:null}var yl="vnUnderplay",Al="::Extension[vnUnderplay]";function wl(t){var e=t&&t.querySelector('Extension[type="vnUnderplay"]');if(!e)return null;var i=e.querySelector("url > clickTracking"),r=(0,d.FB)(e,"url > url"),o=(0,d.FB)(e,"html",""),n=(0,d.sQ)(e,"global"),a=(0,d.sQ)(e,"important"),s=(0,d.FB)(e,"color"),l=(0,d.FB)(e,"bgColor"),c=(0,d.FB)(e,"bgImage"),u=(0,d.FB)(e,"bgPosition","cover"),h=(0,d.FB)(e,"opacity","1"),p=e.querySelector("close");return{global:n,important:a,html:o,clickTracking:i,openWindowUrl:r,color:s,backgroundColor:l,backgroundImage:c,backgroundSize:u,opacity:h,closeData:p&&{img:p.getAttribute("img"),time:p.getAttribute("time"),top:p.getAttribute("top"),right:p.getAttribute("right"),bottom:p.getAttribute("bottom"),left:p.getAttribute("bottom"),width:p.getAttribute("width"),height:p.getAttribute("height")}}}class Pl{constructor(){this.eventListeners={}}push(t,e,i){return t=i&&t.bind(i)||t,this.eventListeners[e]=[...this.eventListeners[e]||[],t],t}get(t,e){const i=(this.eventListeners[e]||[]).filter((e=>e==t));return null==i?void 0:i[0]}pop(t,e){const i=this.get(t,e);return i&&(this.eventListeners[e]=[...(this.eventListeners[e]||[]).filter((e=>e!==t))]),i}getType(t){return[...this.eventListeners[t]||[]]}popType(t){const e=this.getType(t);return this.eventListeners[t]=[],e}getAll(){return Object.keys(this.eventListeners).reduce(((t,e)=>(t[e]=[...this.eventListeners[e]||[]],t)),{})}popAll(){const t=this.eventListeners;return this.eventListeners={},t}}class Ol{constructor(t){this.logger=null==t?void 0:t.logger,this.subjectEventsStore=new Pl}subscribe(t,e,i){var r;return null===(r=this.logger)||void 0===r||r.trace(`Subject subscribe ${e} context=${i}`),this.subjectEventsStore.push(t,e,i)}subscribeOnce(t,e,...i){const r=()=>{t(...i),this.unsubscribe(r,e)};return this.subscribe(r,e)}unsubscribe(t,e){var i;this&&(null===(i=this.logger)||void 0===i||i.trace(`Subject unsubscribe ${e}`),this.subjectEventsStore.pop(t,e))}unsubscribeType(t){var e;this&&(null===(e=this.logger)||void 0===e||e.trace(`Subject unsubscribeType ${t}`),this.subjectEventsStore.popType(t))}unsubscribeAll(){var t;null===(t=this.logger)||void 0===t||t.trace("Subject unsubscribeAll"),this.subjectEventsStore.popAll()}trigger(t,...e){this.subjectEventsStore.getType(t).forEach((t=>{try{t.call(this,...e)}catch(t){}}))}}const Sl=(t,e)=>new Promise((i=>{const r=e?e(t):t;r&&"string"==typeof t||i(r);const o=document.createElement("img");o.onload=()=>i(r),o.onerror=()=>{i("")},o.src=r})),_l=(t,e)=>Array.isArray(t)?((t,e)=>{if(t){const i=t.map((t=>Sl(t,e)));return Promise.allSettled?Promise.allSettled(i):Promise.all(i.map((t=>t.then((t=>({status:"fulfilled",value:t}))).catch((t=>({status:"rejected",reason:t}))))))}return Promise.reject()})(t,e):Sl(t,e);class Cl{constructor({logger:t}){this.logger=t,this.timeouts=[]}setTimeout(t,e,...i){var r;null===(r=this.logger)||void 0===r||r.trace(`Timer.setNamedTimeout(${name})`);const o=setTimeout(t,e,...i);return this.timeouts.push({timeoutId:o}),o}clearTimeout(t){var e;null===(e=this.logger)||void 0===e||e.trace(`Timer.clearTimeout(${t})`),this.timeouts=this.timeouts.filter((e=>e.timeoutId!==t||(clearTimeout(e.timeoutId),!1)))}setNamedTimeout(t,e,i,...r){var o;null===(o=this.logger)||void 0===o||o.trace(`Timer.setNamedTimeout(${t})`),this.clearNamedTimeout(t);const n=setTimeout(e,i,...r);return this.timeouts.push({name:t,timeoutId:n}),n}clearNamedTimeout(t){var e;null===(e=this.logger)||void 0===e||e.trace(`Timer.clearNamedTimeout(${t})`),this.timeouts=this.timeouts.filter((e=>e.name!==t||(clearTimeout(e.timeoutId),!1)))}destroy(){this.timeouts.forEach((({timeoutId:t})=>clearTimeout(t))),this.timeouts=[]}}class El{constructor(t){this.stopped=!1,this.tracksActions=null==t?void 0:t.tracksAction,this.tracks=null==t?void 0:t.tracks,this.tracker=(null==t?void 0:t.tracker)||_l;const e=null==t?void 0:t.logger;this.subject=new Ol({logger:e}),this.logger=e;const i=this.eventBus=null==t?void 0:t.eventBus;(null==t?void 0:t.timer)?this.timer=null==t?void 0:t.timer:(this.timer=new Cl({logger:e}),this.isOwnTimer=!0),this.params=t,i&&(i.subscribeOnce((()=>this.stop()),"AdError"),i.subscribeOnce((()=>this.stop()),"AdSkipped"),i.subscribeOnce((()=>this.stop()),"AdStopped"))}subscribe(t,e,i){return this.subject.subscribe(t,e,i)}subscribeOnce(t,e,...i){return this.subject.subscribeOnce(t,e,i)}unsubscribe(t,e){this.subject.unsubscribe(t,e)}unsubscribeType(t){this.subject.unsubscribeType(t)}stop(){var t;this.stopped||(this.stopped=!0,this.subject.unsubscribeAll(),this.isOwnTimer&&(null===(t=this.timer)||void 0===t||t.destroy()))}track(t){const{tracksActions:e,tracks:i,tracker:r}=this;e&&(null==e||e(t));const o=null==i?void 0:i[t];if(r&&o)return r(o)}}var Dl=function(t,e,i,r){return new(i||(i=Promise))((function(o,n){function a(t){try{l(r.next(t))}catch(t){n(t)}}function s(t){try{l(r.throw(t))}catch(t){n(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))};const Il=10,Tl=2e3,Vl=.5;class kl extends El{constructor(t){var e;super(t);const{getData:i}=t,r=i?i():t,{startEventName:o="AdImpression",eventBus:n,observerThreshold:a=Vl,maxAttemptsToStart:s=Il,waitingInterval:l=Tl}=r;this.startEventName=o,this.maxAttemptsToStart=s,this.waitingInterval=l,null===(e=this.logger)||void 0===e||e.trace(`.ViewableImpressionPlugin start() waitingInterval=${l}`),n&&(this.startEventHandler=n.subscribe((()=>this.start()),o),this.adPlayingHandler=n.subscribe((()=>this.start()),"AdPlaying"),this.adPausedHandler=n.subscribe((()=>this.reset()),"AdPaused"),this.adVideoCompleteHandler=n.subscribe((()=>this.stop()),"AdVideoComplete"),this.adStoppedHandler=n.subscribe((()=>this.stop()),"AdStopped")),this.checkingIsFinished=!1,this.observerOptions={threshold:[a]},(null==r?void 0:r.slot)?(this.slot=null==r?void 0:r.slot,this.start()):this.onOtmContainerCreatedHandler=null==n?void 0:n.subscribe(((t,e)=>{const{slot:i,videoSlot:r}=e;(r||i)&&(this.slot=r||i)}),"OtmContainerCreated")}start(){var t;if(null===(t=this.logger)||void 0===t||t.trace(".ViewableImpressionPlugin start()"),this.checkingIsFinished)return;this.reset();const{slot:e}=this,i=null==e?void 0:e.tagName;this.init({videoSlot:"VIDEO"===i?e:void 0,htmlSlot:i&&["DIV","P","BODY"].includes(i)?e:void 0,iframe:"IFRAME"===i?e:void 0}).catch((t=>{throw this.stop(),t}))}init({videoSlot:t,htmlSlot:e,iframe:i,counter:r=0}){var o;return Dl(this,void 0,void 0,(function*(){if(null===(o=this.logger)||void 0===o||o.trace(`.ViewableImpressionPlugin init() counter=${r}`),r>=this.maxAttemptsToStart)throw new Error("ViewableImpressionPlugin failed start because slot has not been found");return new Promise((o=>{var n,a;const s=e&&(e.clientHeight||parseInt(getComputedStyle(e).height,10))||0,l=t&&getComputedStyle(t),d=t&&(t.clientHeight||parseInt((null==l?void 0:l.height)||"",10))||0,c=!(!(null==l?void 0:l.display)||"none"===(null==l?void 0:l.display)),u=i&&(i.clientHeight||parseInt(getComputedStyle(i).height,10))||0,h=this.slot=t&&c&&d?t:e&&s?e:i&&u?i:void 0;if(h){const t=`We are waiting for continuous visibility of the module by ${100*Vl}%% during ${this.waitingInterval} ms`;if(!window.IntersectionObserver)throw new Error(".ViewableImpressionPlugin failed start because IntersectionObserver is not supported");null===(a=this.logger)||void 0===a||a.log(`.ViewableImpressionPlugin start with IntersectionObserver. ${t}`);(this.observer=new IntersectionObserver(this.onEntry.bind(this),this.observerOptions)).observe(h)}else this.repeatStartTimerId=null===(n=this.timer)||void 0===n?void 0:n.setTimeout((()=>{o(this.init({videoSlot:t,htmlSlot:e,iframe:i,counter:r+1}))}),50)}))}))}onEntry(t){t.forEach((t=>{var e,i,r,o;const{isIntersecting:n,intersectionRatio:a}=t;n&&a>=Vl?(null===(e=this.logger)||void 0===e||e.log(`.ViewableImpressionPlugin isIntersecting=${n} intersectionRatio=${a} >= ${100*Vl}%%`),this.timerId=null===(i=this.timer)||void 0===i?void 0:i.setTimeout((()=>{this.track("ViewableImpression:viewable"),this.stop()}),this.waitingInterval)):(null===(r=this.logger)||void 0===r||r.log(`.ViewableImpressionPlugin clear! isIntersecting=${n} ${a}`),null===(o=this.timer)||void 0===o||o.clearTimeout(this.timerId))}))}stop(){var t,e;null===(t=this.logger)||void 0===t||t.trace(".ViewableImpressionPlugin stop()"),this.reset(),this.onOtmContainerCreatedHandler&&(null===(e=this.eventBus)||void 0===e||e.unsubscribe(this.onOtmContainerCreatedHandler,"OtmContainerCreated")),this.checkingIsFinished=!0,super.stop()}reset(){var t;if(this.checkingIsFinished)return;null===(t=this.logger)||void 0===t||t.trace(".ViewableImpressionPlugin reset()");const{eventBus:e,timer:i,startEventName:r,startEventHandler:o,adStoppedHandler:n,adVideoCompleteHandler:a,adPausedHandler:s,adPlayingHandler:l}=this;i&&(i.clearTimeout(this.timerId),i.clearTimeout(this.repeatStartTimerId)),e&&(n&&e.unsubscribe(n,"AdStopped"),a&&e.unsubscribe(a,"AdVideoComplete"),s&&e.unsubscribe(s,"AdPaused"),l&&e.unsubscribe(l,"AdPlaying"),r&&o&&e.unsubscribe(o,r)),this.checkingIsFinished=!1,this.observer&&(this.observer.disconnect(),this.observer=void 0)}}function xl(t,e){return xl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},xl(t,e)}var jl="repeat_start_timer",Rl=function(t){var i,r;function n(e,i){var r,n,a=i.moduleId,s=i.startEventName,l=i.trackUrlsAction,d=a,c=e&&e.getAPI&&e.getAPI().logger||o.ZP,u=(null==c||null===(r=c.getChildWriter)||void 0===r?void 0:r.call(c,"ViewableImpressionChecker"))||c;return(n=t.call(this,{ancestor:a,logger:u})||this).logger.trace(d+" constructor()"),n._moduleId=a,n.module=e,n.startEventName=s,n.trackUrlsAction=l,n._addVPAIDEventListener(e,s,(function(){return n.start()})),n}return r=t,(i=n).prototype=Object.create(r.prototype),i.prototype.constructor=i,xl(i,r),n.prototype.start=function(t){var i,r,o=this;if(void 0===t&&(t=0),this._removeTimeout(jl),!(t>=10)){this.logger.trace(this._moduleId+" start() counter="+t);var n=this.module,a=Vi.call(n),s=n.getControlNode("slot"),l=n.getControlNode("iframe"),d=s&&(s.clientHeight||parseInt(getComputedStyle(s).height,10))||0,c=a&&(0,e.Re)(a)&&getComputedStyle(a)||{},u=a&&(0,e.Re)(a)&&(a.clientHeight||parseInt(c.height,10))||0,h=!(!c.display||"none"===c.display),p=l&&(l.clientHeight||parseInt(getComputedStyle(l).height,10))||0,g=a&&h&&u?a:s&&d?s:l&&p?l:null;if(g){var v=this.logger,f=this.trackUrlsAction,m={slot:g,logger:v,startEventName:this.startEventName,tracksAction:function(){return f()},eventBus:n};"number"==typeof(null===(i=this.module)||void 0===i||null===(r=i.vpaid)||void 0===r?void 0:r.viewableImpressionWaitingInterval)&&(m.waitingInterval=this.module.vpaid.viewableImpressionWaitingInterval),(t=>{new kl(t)})(m)}else this._addTimeout(jl,(function(){return o.start(t+1)}),50)}},n}(l),Ml="vnOTMTrackViewable",Nl="::Extension[vnOTMTrackViewable]";const Ll=function(t){return new Promise((function(e){var i,r=t&&t.getAPI&&t.getAPI().logger||o.ZP;((null==r||null===(i=r.getChildWriter)||void 0===i?void 0:i.call(r,Nl))||r).trace(""+Nl);var n,a=(t._getLastParameters()||{}).vnOTMTrackViewable||{},s=a.urls,l=a.important,d=a.global;(l||d||s&&s.length)&&t.setControlData(Ml,((n={urls:s})[N.uz]=l,n),d);var c=t.getControlUnionData(Ml,"urls");null!=c&&c.length&&(t._vnOTMTrackViewable&&t._vnOTMTrackViewable._destroy(),t._vnOTMTrackViewable=new Rl(t,{moduleId:"::Plugin[ViewableImpressionOTM]",startEventName:"AdStarted",trackUrlsAction:Jo.bind(t,c)})),e(t)}))};function Fl(t,e){return void 0===e&&(e="trackViewable"),(this.logger||o.ZP).trace(".parseVnOTMTrackViewableObject()"),ma.call(this,t,e)}function Wl(t,e){return Wl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Wl(t,e)}var Hl="vnOTMTrackRecordable",Ul="::Extension[vnOTMTrackRecordable]",zl=function(t){var e,i;function r(e){var i,r,n=e.module,a=n&&n.getAPI&&n.getAPI().logger||o.ZP,s=(null==a||null===(i=a.getChildWriter)||void 0===i?void 0:i.call(a,Ul))||a;return(r=t.call(this,{ancestor:Ul,logger:s})||this).module=n,r}return i=t,(e=r).prototype=Object.create(i.prototype),e.prototype.constructor=e,Wl(e,i),r.prototype.init=function(){var t=this,e=this.module,i=e&&e.getAPI&&e.getAPI().logger||o.ZP;return new Promise((function(r){i.trace(""+Ul);var o,n=(e._getLastParameters()||{}).vnOTMTrackRecordable||{},a=n.urls,s=n.important,l=n.global;(s||l||a&&a.length)&&e.setControlData(Hl,((o={urls:a})[N.uz]=s,o),l);var d=e.getControlData(Hl,"urls");t._addVPAIDEventListener(e,"AdLoaded",Zl.bind(t,e,d)),r(e)}))},r}(l);function Bl(t,e){return void 0===e&&(e="trackRecordable"),(this.logger||o.ZP).trace(".parseVnOTMTrackRecordableObject()"),ma.call(this,t,e)}function Zl(t,e){if(null!=e&&e.length&&window.IntersectionObserver){var i=new IntersectionObserver((function(){}));i&&(i.disconnect(),setTimeout(Jo.bind(t,e)))}}var ql="vnDomainsBlockList",Xl="::Extension[vnDomainsBlockList]";const Gl=function(t){return new Promise((function(e,i){var r,n=t&&t.getAPI&&t.getAPI().logger||o.ZP;((null==n||null===(r=n.getChildWriter)||void 0===r?void 0:r.call(n,Xl))||n).trace(""+Xl);var a,s=(t._getLastParameters()||{}).vnDomainsBlockList||{},l=s.urls,d=s.important,c=s.global,u=s.fatal;(d||c||l&&l.length)&&t.setControlData(ql,((a={urls:l})[N.uz]=d,a.fatal=u,a),c);var h=t.getControlData(ql)||{},p=h.urls,g=h.fatal;if(p){var v;try{v=Array.from(window.location.ancestorOrigins).map((function(t){return new URL(t).hostname}))}catch(t){}if(v&&v.some((function(t){if(p.includes(t)){var e=Error(' vn_module was placed in the forbidden domain "'+t+'"');return e.fatal=!!g,i(e),!0}})))return}e(t)}))};function Ql(t,e){return void 0===e&&(e="domainsBlockList"),(this.logger||o.ZP).trace(".parseVnDomainsBlockList()"),ma.call(this,t,e)}var $l=i(698),Jl="vnDebug",Yl="::Extension[vnDebug]";function Kl(t){this.logger.trace(Yl+".parseVnDebug()");var e=t&&t.querySelector('Extension[type="vnDebug"]');return e&&Object.values($l.pO).includes(Number(e.getAttribute("logLevel")))?{logLevel:Number(e.getAttribute("logLevel"))}:null}var td="vnAdType",ed="::Extension[vnAdType]";function id(t){var e=t&&t.querySelector('Extension[type="vnAdType"]');return e?{adType:(0,d.sQ)(e,"adType")||e.getAttribute("adType"),global:(0,d.sQ)(e,"global")||e.getAttribute("global"),important:(0,d.sQ)(e,"important")||e.getAttribute("important")}:null}var rd="vnHeavyAdIntervention",od="::Extension[vnHeavyAdIntervention]";function nd(t,e){return void 0===e&&(e="Extensions >"),(this.logger||o.ZP).trace(".parseVnHeavyAdIntervention()"),d.hd.call(this,t,rd,ad,{parentPrefix:e})}function ad(t){var e={},i=t&&t.querySelector("check");if(i){var r=(0,d.sQ)(i);this.logger.trace(od+" check:"+r),e.check=r}var o=t&&t.querySelector("url");if(o){var a=(0,d.sQ)(o);this.logger.trace(od+" reportUrl:"+a),e.url=a}return(0,n.xb)(e)?null:e}function sd(t,e){void 0===e&&(e=rd),(this.logger||o.ZP).trace(".parseVnHeavyAdInterventionObject()");var i=t&&(e?t[e]:t)||{},r=i.check,n=i.url,a={};return null!=r&&(a.check=!!r),n&&(a.url=n),a}function ld(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function dd(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ld(Object(i),!0).forEach((function(e){cd(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ld(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function cd(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var ud="vnAdChoice",hd="::Extension[vnAdChoice]";function pd(t,e){void 0===e&&(e="Extensions >"),(this.logger||o.ZP).trace(".parseVnAdChoice()");var i=(0,d.hd)(t,ud,gd.bind(this),{parentPrefix:e,multipleOptionName:"item"});if(!i||"object"!=typeof i)return null;var r=yd(i),n=(0,d.mq)(t,ud,e).xml;if(n){var a=n.querySelector("title");if(a){var s=(a&&ts.call(this,a)).controlInfo,l=s&&Ga(s,!1,this.module),c=vd(a).text;l&&(r.title=dd(dd({},l),{},{text:c}))}}return r}function gd(t){var e=Ga((t&&ts.call(this,t)).controlInfo,!1,this.module),i=vd(t),r=i.rawText,o=i.text,n=t.getAttribute("href");return dd(dd({},e),{},{text:o,name:r,href:n})}function vd(t){var e=We(),i=t.getAttribute("text")||(0,d.sQ)(t);return{rawText:i,text:"en"!==e&&(t.getAttribute(e)||Fe({raw:[i]}))||i}}function fd(t,e){void 0===e&&(e="vnAdChoice"),(this.logger||o.ZP).trace(".parseVnAdChoiceObject()");var i=yd(e?ha.call(this,t,(function(t){var i;return null==t||null===(i=t[e])||void 0===i?void 0:i.items}),md.bind(this)):md.call(this,t))||{},r=(t[e]||{}).title;if(r){var n=bd(r,"Advertisement").text;r.text=n,i.title=r}return i}function md(t,e){var i=dd({},t),r=i||{},o=r.href,n=r.css,a=r.hoverBackgroundColor,s=r.backgroundColor,l=r.hoverColor,d=bd(i,e),c=pa(i,{text:d.text,href:o,name:d.rawText,css:n,hoverBackgroundColor:a,backgroundColor:s,hoverColor:l});return va(i),c}function bd(t,e){var i=We(),r=(null==t?void 0:t.text)||e;return{text:"en"!==i&&(t[i]||Fe({raw:[r]}))||r,rawText:r}}function yd(t){if(!(0,n.xb)(t)){var e=[];Object.entries(t).forEach((function(i){var r=i[0],o=i[1];"object"==typeof o&&(e.push(o),delete t[r])})),t.items=e}return t}function Ad(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function wd(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Pd="vnSets",Od="::Extension[vnSets]";var Sd="Set>";function _d(t){var e=this;return(0,d.hd)(t,Pd,(function(t){var i=t.getAttribute("name")||(0,d.sQ)(t,"Set> name");if(!i)return null;var r=Cd(t,e),o=Object.keys(r).reduce((function(t,e){var i=r[e]();return i&&(t[e]=i),t}),{});return o?(o.name=i,o):null}),{multipleOptionName:"Set"})}var Cd=function(t,e){return{vnFormat:function(){return Ha.call(e,t,Sd)},vnControls:function(){return Ya.call(e,t,Sd)},vnSkipTime:function(){return ps.call(e,t,Sd)},vnCreative:function(){return rl.call(e,t,Sd)},vnNoAd:function(){return xo.call(e,t,Sd)},vnCreativeBlock:function(){return sl.k.call(e,t,Sd)},vnBrowserCache:function(){return cl.call(e,t,Sd)},vnCache:function(){return pl.call(e,t,Sd)},vnProhibitedWords:function(){return ws.call(e,t,Sd)},vnAfterplay:function(){return Us.call(e,t,Sd)},vnAdEvents:function(){return Js.call(e,t,Sd)},vnPageChanged:function(){return bl.call(e,t,Sd)},vnEventsParams:function(){return tl.call(e,t,Sd)},vnUnderplay:function(){return wl.call(e,t,Sd)},vnAdErrorsRules:function(){return ns.call(e,t,Sd)},vnDebug:function(){return Kl.call(e,t,Sd)},vnAdType:function(){return id.call(e,t,Sd)},vnAdChoice:function(){return pd.call(e,t,Sd)}}},Ed={vnFormat:function(t,e){return ja.call(e,t,null)},vnControls:function(t,e){return es.call(e,t,null)},vnProhibitedWords:function(t,e){return Os.call(e,t,null)},vnSkipTime:function(t,e){return vs.call(e,t,null)},vnOTMTrackRecordable:function(t,e){return Bl(e,t)},vnOTMTrackViewableObject:function(t,e){return Fl(e,t)},vnDomainsBlockList:function(t,e){return Ql(e,t)},vnMinPlayerSize:function(t,e){return cn(e,t)},vnHeavyAdIntervention:function(t,e){return sd(e,t)},vnAdChoice:function(t,e){return fd.call(e,t,null)}};function Dd(t,e){var i=this;return void 0===e&&(e="vnSets"),ha(t,e,(function(t){var e=t.extensions;if(!e)return null;var r=va(function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Ad(Object(i),!0).forEach((function(e){wd(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Ad(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},e));return Object.entries(r).reduce((function(t,e){var r=e[0],o=e[1],a=Ed[r];if(a){var s=a(o,i);!(0,n.xb)(s)&&(t[r]=s)}return t}),{})}))}var Id="vnSetsApply",Td="::Extension[vnSetsApply]",Vd=["global","orderIndex","overwrite","important","name",N.uz,N.Os,N.ny,N.wb];function kd(t){return(0,d.hd)(t,Id,xd,{multipleOptionName:"Set"})}function xd(t){var e=(0,d.sQ)(t,"name")||t.getAttribute("name");return e&&{name:e}||null}const jd=(t,e)=>{if(!t)return t;const i=(Array.isArray(t)?[...t]:[t]).filter((t=>t&&t.style));return Object.keys(e).forEach((t=>{const r=e[t];void 0!==r&&i.forEach((({style:e})=>{if(e[t]=r.toString(),-1!==["transform","transition","userSelect"].indexOf(t)){const i=`${t[0].toUpperCase()}${t.substr(1)}`;["Webkit","Moz","Ms","O"].forEach((t=>{e[`${t}${i}`]=r.toString()}))}}))})),t},Rd=(t="")=>0===`${t}`.length||/%|px/.test(`${t}`)?`${t}`:`${t}px`;function Md(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function Nd(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Ld(t,e){return Ld=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ld(t,e)}var Fd="videoSlot";const Wd=function(t){var i,r;function o(i,r){var o,a,s;s=t.call(this,Fd,i)||this;var l=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Md(Object(i),!0).forEach((function(e){Nd(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Md(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({shouldSetControlData:!0,shouldStayCentered:!1,parentSlot:null},r),d=l.shouldSetControlData,c=l.shouldStayCentered,u=l.parentSlot,h=l.width,p=l.height,g=i.getControlNode("containerIframe"),v=(null==g||null===(o=g.contentWindow)||void 0===o||null===(a=o.document)||void 0===a?void 0:a.body)||g,f=((t,e,i)=>{const r={position:"absolute",verticalAlign:"middle",width:e?Rd(e):"100%",height:i?Rd(i):"100%",zIndex:1,top:i?"50%":0,left:e?"50%":0};e&&(r.marginLeft=Rd(-e/2)),i&&(r.marginTop=Rd(-i/2));const o=document.createElement("video");return jd(o,r),t.append(o),{videoSlot:o,styles:r}})(u||v,h,p),m=f.videoSlot,b=f.styles;(s.node=s._slot=m,c)&&new MutationObserver((function(t){t.forEach((function(t){"attributes"!==t.type||m.style.left===b.left&&m.style.top===b.top||(0,e.Zs)(m,{left:b.left,top:b.top})}))})).observe(m,{attributes:!0,childList:!1,subtree:!1});return s.logger.none("videoSlot initAd() videoSlot="+(0,n.xl)(m)+"("+m+") parent="+(0,n.xl)(m&&m.parentElement)+"("+(m&&m.parentElement)+")"),m&&(i.vpaidJsVideoSlotShouldBeMuted()&&(m.muted=!0,m.volume=0,s.logger.trace("videoSlot initAd() set videoSlot.muted = "+m.muted)),x.vF&&m.setAttribute("playsinline","true"),m&&m.classList&&m.classList.add("vn_module_creature")),d&&i.setControlData(Fd,{node:m}),s}r=t,(i=o).prototype=Object.create(r.prototype),i.prototype.constructor=i,Ld(i,r);var a=o.prototype;return a.getSlotNode=function(){return this._slot},a.getControlNode=function(){var t=this.module;return t&&t.getControlNode(Fd)},o}(Qi);function Hd(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function Ud(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Hd(Object(i),!0).forEach((function(e){zd(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Hd(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function zd(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Bd(t,e){return Bd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Bd(t,e)}var Zd="VpaidAudio",qd={startTime:0},Xd=["audio/mp3","audio/mpeg","audio/mp4","audio/aac","audio/aacp","video/mp4","video/webm","video/mpeg"],Gd=function(t){var i,r;function a(i){var r,a,s;void 0===i&&(i={});var l=i&&(i.logger||i.module&&i.module.logger||i.moduleAPI&&i.moduleAPI.logger)||o.ZP;(l=(null===(r=l)||void 0===r||null===(a=r.getChildWriter)||void 0===a?void 0:a.call(r,Zd))||l).trace("VpaidAudio.constructor()"),(s=t.call(this,Ud(Ud(Ud({},qd),i),{},{ancestor:Zd,logger:l}))||this)._addParentSlotHideClassName=function(){var t,i,r,o=s.environmentVars,n=o.parentSlot,a=o.parentFormat;s._parentSlotsHideClassName="vn_"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,8),null==n||null===(t=n.classList)||void 0===t||t.add(s._parentSlotsHideClassName),null==a||null===(i=a.slot)||void 0===i||null===(r=i.classList)||void 0===r||r.add(s._parentSlotsHideClassName);var l="\n      ."+s._parentSlotsHideClassName+" {\n         width: 1px !important;\n         height: 1px !important;\n         position: absolute !important;\n         clip: rect(0 0 0 0) !important;\n         margin: -1px !important;\n      }";n&&(0,e.hU)(n,l),(null==a?void 0:a.slot)&&(0,e.hU)(a.slot,l)},s._clearParentSlotHideClassName=function(){if(s._parentSlotsHideClassName){var t,e,i,r=s.environmentVars,o=r.parentSlot,n=r.parentFormat;null==o||null===(t=o.classList)||void 0===t||t.remove(s._parentSlotsHideClassName),null==n||null===(e=n.slot)||void 0===e||null===(i=e.classList)||void 0===i||i.remove(s._parentSlotsHideClassName)}};var d=i.media;s.adWidth=0,s.adHeight=0,s.media=d,s.name=Zd,s.startedVideotWithoutSound=null,s.startVideoWithSoundFailed=null,s.setAdVolumeCounter=0;var c=new n.BH;return s.playerSuccessfullyStartedPromise=c.promise,s.playerSuccessfullyStartedResolve=c.resolve,s}r=t,(i=a).prototype=Object.create(r.prototype),i.prototype.constructor=i,Bd(i,r);var s=a.prototype;return s.initAd=function(i,r,o,a,s,l){var d,c=this;void 0===s&&(s={}),void 0===l&&(l={}),t.prototype.initAd.call(this,i,r,o,a,s,l);var u=l.videoSlotCanAutoPlay||s.videoSlotCanAutoPlay;this.videoSlotCanAutoPlay=u,"true"===u||"1"===u?this.videoSlotCanAutoPlay=!0:"false"!==u&&"false"!==u||(this.videoSlotCanAutoPlay=!1),d=this.videoSlot=l.videoSlot,this.slot=l.slot,this.logger.trace("VpaidAudio.initAd() environmentVars.videoSlot="+l.videoSlot+" videoSlotCanAutoPlay is "+this.videoSlotCanAutoPlay+" useExistsVideoSlot="+this.useExistsVideoSlot+" videoSlot="+this.videoSlot,2);return new Promise((function(o,a){(0,e.Re)(l.videoSlot,"video")&&(d=l.videoSlot,c.logger.track("VpaidAudio.initAd() Using environmentVars.videoSlot, videoSlotCanAutoPlay is "+c.videoSlotCanAutoPlay)),function(t,o){void 0===t&&(t=c.videoSlot),void 0===o&&(o=!1),c.logger.trace("VpaidAudio.initAd.videoStart()",2);var n=(c.options.moduleAPI||{}).saveVideoSlotParams;n&&n(t),(0,e.Zs)(t,{width:i+"px",height:r+"px"}),t.src=c.media.src,(0,e.Zs)(t,{display:o?"hidden":""}),t.load()}(d=c._createVideoSlot(d),!0);var s=(0,e.VB)(d);if(s){var u=c._addDOMEventListener(d,"error",(function(t){var e=rc(t),i=e.code,r=e.message,o=Error(r);o.code=i,a(o)})),h=function(){return s.then((function(){d.pause(),c.startedVideotWithoutSound=d.muted;var e=c.getAdVolume();t.prototype.setAdVolume.call(c,e,{forceTrigger:!0}),u&&c._removeDOMEventListener(d,"error",u),u=null,c._addDOMEventListener(d,"error",ic.bind(c)),c.logger.log("VpaidAudio initAd() video.play() startPromise() video has been started successfully. Set it in pause. videoSlot.muted="+d.muted+" videoSlot.volume="+d.volume+" super.setAdVolume("+e+")",2,"green"),c.playerSuccessfullyStartedResolve(d),o(c)}))};c.logger.trace("VpaidAudio initAd() video.play() return promise"),h().catch((function(t){c.startedVideotWithoutSound=null,c.startVideoWithSoundFailed=!0;var i="VpaidAudio initAd("+c+") failed video play with videoSlot.muted="+d.muted+" videoSlot.volume="+d.volume+" error="+(t&&t.message||t);c.logger.warn(i+" error:"+(t&&t.message||t)),!d.muted||d.volume?(c.adVolume=0,c.videoSlotCanAutoPlay=!1,d.muted=!0,d.volume=0,c.logger.log("VpaidAudio initAd(). One more try start media with videoSlot.muted="+d.muted+" videoSlot.volume=0("+d.volume+") paused="+d.paused,1),s=(0,e.VB)(d),h().then((function(){c.startedVideotWithoutSound=!0})).catch((function(t){var e="VpaidAudio initAd("+c+") failed video play err="+t;c.logger.error(e),a((0,n.Ku)(t,e,w.FAIL_MEDIA_START))}))):a((0,n.Ku)(t,i,w.FAIL_MEDIA_DISPLAY))}))}else if(void 0===s)if(c.logger.warn("VpaidAudio initAd() video.play() do not return promise"),d.paused){var p="failed video autoplay";c.logger.error("VpaidAudio initAd() "+p);var g=Error(""+p);g.code=w.FAIL_MEDIA_START,a(g)}else c.logger.log("VpaidAudio initAd() video autoplay started",1),o(c);else c.logger.error("VpaidAudio initAd() element is neither video nor audio tag"),a()}))},s._createVideoSlot=function(t){if(void 0===t&&(t=null),!this.options)return null;var i=this.slot,r=this.options,o=r.module,n=r.startTime;if(!t){var a=new Wd(o);(t=a&&a.getControlNode()).muted=!1===this.videoSlotCanAutoPlay||!this.adVolume,t.currentTime=n,t.volume=t.muted?0:this.adVolume,t.playsInline=!0,(0,e.Zs)(t,{width:"100%",display:"none"}),this.logger.trace("VpaidAudio._createVideoSlot, videoSlotCanAutoPlay is "+this.videoSlotCanAutoPlay)}return this._addDOMEventListener(t,"loadedmetadata",Yd.bind(this)),this._addDOMEventListener(t,"loadeddata",Jd.bind(this)),this._addDOMEventListener(t,"durationchange",Kd.bind(this)),this._addDOMEventListener(t,"play",tc.bind(this)),this._addDOMEventListener(t,"volumechange",ec.bind(this)),this._addDOMEventListener(i||t,"click",oc.bind(this)),this.videoSlot=t,this.logger.log("VpaidAudio._createVideoSlot, videoSlot.muted="+t.muted),t},s.resizeAd=function(i,r,o){var a=this.videoSlot,s=this.useExistsVideoSlot,l=this.options.moduleAPI;if(this.logger.trace("VpaidAudio.resizeAd("+i+", "+r+" useExistsVideoSlot="+s),s){var d=(l||{}).saveVideoSlotParams;d&&d(a),(0,e.Zs)(a,{width:i+"px",height:r+"px"})}else{var c,u=this.videoSlot,h=this.environmentVars,p=this.media,g=p.scalable,v=h||{},f=v.forceAspectRatio,m=v.slot,b=this.getAdAspectRatio(),y=f||p.maintainAspectRatio;if(b&&g&&m){var A,w=p.width>p.height,P=i>r;if(null===y){var O=p.width/p.height,S=i/r;y=100-100*(S<O?S/O:O/S)>10}!0===y&&(A=i/r<p.width/p.height),!1===y&&(A=i/r>p.width/p.height),w!==P&&(A=!0),P&&!w&&(A=!1),c=A?{width:i,height:i*b}:{height:r,width:r/b}}else c={width:p.width,height:p.height};this.logger.none("VpaidAudio.resizeAd() adWidth="+i+" adHeight="+r+" newVideoSlotSize="+JSON.stringify(c)+" adAspectRatio="+b,2,"blue"),(0,n.dN)(u,c)}return t.prototype.resizeAd.call(this,i,r,o)},s.activateMuteChangingEnable=function(){var t=this.videoSlot;t&&(t.wasClicked=!0)},s.startAd=function(){var i=this;this.logger.log("VpaidAudio startAd()",2,"blue"),this.playerSuccessfullyStartedPromise.then((function(){var r=i.videoSlot,o=i.options;if(0===i.getAdVolume()||r.muted)return i._clearParentSlotHideClassName(),void i.trigger("AdError","Volume is muted for adType=audio|hybrid",w.GENERAL_VPAID_ERROR);i._addParentSlotHideClassName();var n=(o||{}).startTime;i.logger.log("VpaidAudio startAd() playerSuccessfullyStartedPromise.then videoSlot.readyState="+(r&&r.readyState),2,"blue"),(4===r.readyState?nc.call(i,r):new Promise((function(t){i.logger.trace("VpaidAudio startAd() video has not been downloaded yet: readyState="+r.readyState+". Waiting when will be ready.",1,"blue");r.addEventListener("canplaythrough",(function e(){r.removeEventListener("canplaythrough",e),i.logger.trace("VpaidAudio startAd() video has been downloaded: readyState="+r.readyState+".",2),t(nc.call(i,r))}))}))).then((function(){r.currentTime=n,(0,e.Zs)(r,{display:""}),i.logger.trace("VpaidAudio startAd() playPromise.then() calling super.startAd() .",1,"blue"),i._addDOMEventListener(r,"timeupdate",tc.bind(i)),t.prototype.startAd.call(i)}))}))},s.stopAd=function(){return $d.call(this),this._clearParentSlotHideClassName(),t.prototype.stopAd.call(this)},s.pauseAd=function(){return $d.call(this),t.prototype.pauseAd.call(this)},s.resumeAd=function(){var i=this.videoSlot;return i&&(0,e.VB)(i),t.prototype.resumeAd.call(this)},s.expandAd=function(){this._clearParentSlotHideClassName(),this.trigger("AdError","Not supported",w.GENERAL_VPAID_ERROR)},s.collapseAd=function(){this._clearParentSlotHideClassName(),this.trigger("AdError","Not supported",w.GENERAL_VPAID_ERROR)},s.skipAd=function(){return $d.call(this),this._clearParentSlotHideClassName(),t.prototype.skipAd.call(this)},s.setAdVolume=function(e,i){var r=this.videoSlot;return r&&(this.logger.trace("VpaidAudio setAdVolume("+e+") videoSlot.muted="+r.muted+" startedVideoWithoutSound="+this.startedVideotWithoutSound+" startVideoWithSoundFailed="+this.startVideoWithSoundFailed+" safari="+x.a1+" "),r.volume=e,r.muted&&e?r.paused||0!==r.currentTime?(!1===this.startedVideotWithoutSound||r.paused||r.currentTime>0)&&(r.muted=!1):r.muted=!1:r.muted||e||(r.muted=!0)),t.prototype.setAdVolume.call(this,e,i)},s.getAdVolume=function(){var e=this.videoSlot;return e&&(this.adVolume=x.vF||x.a1?e.muted?0:1:e.volume),t.prototype.getAdVolume.call(this)},s.getAdRemainingTime=function(){var t=this.videoSlot;return t?t.duration-t.currentTime:0},s.getAdAspectRatio=function(){var t=this.adWidth,e=this.adHeight,i=this.options,r=i&&i.mp4media||{},o=r.width,n=r.height;return o&&n?n/o:t&&e?e/t:9/16},s._destroy=function(){this.logger.trace("VpaidAudio.destroy()");var i=this._createdVideoSlot;i&&(0,e.Re)(i)&&(0,e.GA)(i),this._clearParentSlotHideClassName(),t.prototype._destroy.call(this)},a.create=function(t,e){var i,r=e&&e.getAPI&&e.getAPI()||{},n=r.logger||o.ZP,s=(null==n||null===(i=n.getChildWriter)||void 0===i?void 0:i.call(n,Zd))||n,l=r.getControlUnionData,d=l&&l("vnCache")||{strict:!1};return new Promise((function(i,r){if(x.zf||x.tW&&!d.strict){var o=t.duration,n=Xd.reduce((function(e,i){return e.concat(t.mediaFiles[i]||[])}),[]).filter(Boolean);if(!n||!n.length)return void r();(function(t,e,i,r){if(!x.e9||e===1/0||x.e9&&x.CE<85)return Promise.resolve(t);var o=t.map((function(t){return new Promise((function(o){var n=t.bitrate,a=t.src;if(a&&i&&i(a))o(null);else if(n&&e){var s=e*parseInt(n,10)/8;o(s<Qd?t:null)}else a?(r&&r.trace("VpaidAudio filterByWeights() request size of file "+a),Si(a,{timeout:300,method:"HEAD",withCredentials:!1}).then((function(e){var i=(e||{}).currentTarget;(i||{}).status>=400&&o(t);var n=i&&i.getResponseHeader&&parseFloat(i.getResponseHeader("content-length")||0)/1e3;r&&r.log("VpaidAudio filterByWeights() got size("+n+" KBytes) of file "+a),o(n<Qd?t:null)})).catch((function(){o(t)}))):o(null)}))}));return Promise.all(o).then((function(t){return t.filter((function(t){return t}))}))})(n,o,e.isMediaUrlBlocked.bind(e),s).then((function(o){var n=o[0];if(n){s.log("VpaidAudio.create() Creative for playing: "+n.src,1,"color:green; font-weight:bold;");var l=t.rawDuration;e.setSelectedCreative(n.src,l);var d=new a({module:e,media:n,moduleAPI:e.getAPI()});i(d)}else r()}))}else r()}))},a}(v),Qd=4e3;function $d(){var t=this.videoSlot;t&&t.pause()}function Jd(t){var e=t.target;this.hasAudio=(0,n.wf)(e),this.trigger("AdLoadedVideoData")}function Yd(t){var e=t.target,i=e.videoWidth,r=e.videoHeight,o=e.duration;this.logger.trace("VpaidAudio @loadedmetadata"),this.adWidth&&this.adHeight||(this.logger.trace("VpaidAudio @loadedmetadata Updating ad dimensions ("+i+":"+r+")"),this.adWidth=i,this.adHeight=r),this.adDuration=o,this.trigger("AdLoaded")}function Kd(t){var e=t.target.duration;isNaN(e)?this.logger.trace("VpaidAudio.onDurationChange() duration="+e+". video is not ready yet."):(this.adDuration=e,this.trigger("AdDurationChange"))}function tc(t){var e=t.target,i=e.duration,r=e.currentTime;if(isNaN(i))this.logger.trace("VpaidAudio.onDurationChange() duration="+i+". video is not ready yet.");else{this.adDuration=i;var o=this.adRemainingTime,n=this.options.startTime;o||r===n||(r=n);var a=(1e3*(i-Math.min(r,i))^0)/1e3;a!==o&&(this.adRemainingTime=a,i=(1e3*i^0)/1e3,this.trigger("AdRemainingTimeChange"),a<i&&o===i&&(this.logger.log("VpaidAudio.onTimeUpdate() trigger AdImpression and AdVideoStart",1),this.trigger("AdAudioImpression"),this.trigger("AdVideoStart")),a<.75*i&&o>=.75*i&&this.trigger("AdVideoFirstQuartile"),a<.5*i&&o>=.5*i&&this.trigger("AdVideoMidpoint"),a<.25*i&&o>=.25*i&&this.trigger("AdVideoThirdQuartile"),0===a&&o>0&&(this._clearParentSlotHideClassName(),this.trigger("AdVideoComplete")))}}function ec(t){var e=t.target;this.adVolume=e.volume,this.trigger("AdVolumeChange")}function ic(t){var e=rc(t),i=e.code,r=e.message;this._clearParentSlotHideClassName(),this.trigger("AdError",r,i)}function rc(t){t.preventDefault();var e=t.currentTarget&&t.currentTarget.currentSrc,i=t.target&&t.target.error;return{code:i&&i.code>=1&&i.code<=3?w.GENERAL_LINEAR_ERROR:w.FAIL_MEDIA_DISPLAY,message:(i&&i.message||"Load error ")+(e?" source="+e:"")}}function oc(t){t.preventDefault(),this.trigger("AdClickThru","",0,!0)}function nc(t){var e=this;return t.play().then((function(t){return e.logger.log("VpaidAudio.startAd() play() successfully."),t})).catch((function(i){return e.logger.warn("VpaidAudio.startAd() play() catch error="+i+". Try start play one time."),t.play().catch((function(t){var i="VpaidAudio playVideo("+e+") failed video autoplay";throw(0,n.Ku)(t,i,w.FAIL_MEDIA_START)}))}))}var ac=function(){function t(t){this.bytes=new Uint8Array(t),this.length=this.bytes.length,this.writePos=this.bytes.length,this.index=0}var e=t.prototype;return e.nextBits=function(t){var e=this.index>>3,i=8-this.index%8;if(i>=t)return this.bytes[e]>>i-t&255>>8-t;var r=(this.index+t)%8,o=this.index+t-1>>3,n=this.bytes[e]&255>>8-i;for(e+=1;e<o;e+=1)n<<=8,n|=this.bytes[e];return r>0?(n<<=r,n|=this.bytes[e]>>8-r):(n<<=8,n|=this.bytes[e]),n},e.getBits=function(t){var e=this.nextBits(t);return this.index+=t,e},e.findNextMPEGStartCode=function(){for(var e=this.index+7>>3;e<this.writePos;e+=1)if(0===this.bytes[e]&&0===this.bytes[e+1]&&1===this.bytes[e+2])return this.index=e+4<<3,this.bytes[e+3];return this.index=this.writePos<<3,t.NOT_FOUND},e.advance=function(t){return this.index+=t},e.nextBytesAreStartCode=function(){var t=this.index+7>>3;return t>=this.writePos||0===this.bytes[t]&&0===this.bytes[t+1]&&1===this.bytes[t+2]},t}();const sc=179,lc=1,dc=175,cc=0,uc=181,hc=178,pc=2,gc=3;var vc=new Uint8Array([8,16,19,22,26,27,29,34,16,16,22,24,27,29,34,37,19,22,26,27,29,34,34,38,22,22,26,27,29,34,37,40,22,26,27,29,32,35,40,48,26,27,29,32,35,40,48,58,26,27,29,34,38,46,56,69,27,29,35,38,46,56,69,83]);const fc={DEFAULT_NON_INTRA_QUANT:new Uint8Array([16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16]),DEFAULT_INTRA_QUANT:vc};var mc=new Int8Array([3,6,0,-1,9,0,0,0,1,0,0,17]),bc=new Int8Array([3,6,0,9,12,0,0,0,10,15,18,0,0,0,2,21,24,0,0,0,8,27,30,0,33,36,0,-1,39,0,0,0,18,0,0,26,0,0,1,0,0,17]),yc=new Int8Array([3,6,0,9,15,0,12,18,0,24,21,0,0,0,12,27,30,0,0,0,14,39,42,0,36,33,0,0,0,4,0,0,6,54,48,0,45,51,0,0,0,8,0,0,10,-1,57,0,0,0,1,60,63,0,0,0,30,0,0,17,0,0,22,0,0,26]);const Ac={I:mc,P:bc,B:yc,TYPE_TABLE:[null,mc,bc,yc],ADDRESS_INCREMENT:new Int16Array([3,6,0,9,12,0,0,0,1,15,18,0,21,24,0,27,30,0,33,36,0,0,0,3,0,0,2,39,42,0,45,48,0,0,0,5,0,0,4,51,54,0,57,60,0,0,0,7,0,0,6,63,66,0,69,72,0,75,78,0,81,84,0,-1,87,0,-1,90,0,93,96,0,99,102,0,105,108,0,111,114,0,0,0,9,0,0,8,117,120,0,123,126,0,129,132,0,135,138,0,0,0,15,0,0,14,0,0,13,0,0,12,0,0,11,0,0,10,141,-1,0,-1,144,0,147,150,0,153,156,0,159,162,0,165,168,0,171,174,0,177,180,0,183,-1,0,-1,186,0,189,192,0,195,198,0,201,204,0,207,210,0,213,216,0,219,222,0,0,0,21,0,0,20,0,0,19,0,0,18,0,0,17,0,0,16,0,0,35,0,0,34,0,0,33,0,0,32,0,0,31,0,0,30,0,0,29,0,0,28,0,0,27,0,0,26,0,0,25,0,0,24,0,0,23,0,0,22])};const wc={PREMULTIPLIER_MATRIX:new Uint8Array([32,44,42,38,32,25,17,9,44,62,58,52,44,35,24,12,42,58,55,49,42,33,23,12,38,52,49,44,38,30,20,10,32,44,42,38,32,25,17,9,25,35,33,30,25,20,14,7,17,24,23,20,17,14,9,5,9,12,12,10,9,7,5,2]),ZIG_ZAG:new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),DCT_COEFF:new Int32Array([3,6,0,12,9,0,0,0,1,21,24,0,18,15,0,39,27,0,33,30,0,42,36,0,0,0,257,60,66,0,54,63,0,48,57,0,0,0,513,51,45,0,0,0,2,0,0,3,81,75,0,87,93,0,72,78,0,96,90,0,0,0,1025,69,84,0,0,0,769,0,0,258,0,0,1793,0,0,65535,0,0,1537,111,108,0,0,0,1281,105,102,0,117,114,0,99,126,0,120,123,0,156,150,0,162,159,0,144,147,0,129,135,0,138,132,0,0,0,2049,0,0,4,0,0,514,0,0,2305,153,141,0,165,171,0,180,168,0,177,174,0,183,186,0,0,0,2561,0,0,3329,0,0,6,0,0,259,0,0,5,0,0,770,0,0,2817,0,0,3073,228,225,0,201,210,0,219,213,0,234,222,0,216,231,0,207,192,0,204,189,0,198,195,0,243,261,0,273,240,0,246,237,0,249,258,0,279,276,0,252,255,0,270,282,0,264,267,0,0,0,515,0,0,260,0,0,7,0,0,1026,0,0,1282,0,0,4097,0,0,3841,0,0,3585,315,321,0,333,342,0,312,291,0,375,357,0,288,294,0,-1,369,0,285,303,0,318,363,0,297,306,0,339,309,0,336,348,0,330,300,0,372,345,0,351,366,0,327,354,0,360,324,0,381,408,0,417,420,0,390,378,0,435,438,0,384,387,0,0,0,2050,396,402,0,465,462,0,0,0,8,411,399,0,429,432,0,453,414,0,426,423,0,0,0,10,0,0,9,0,0,11,0,0,5377,0,0,1538,0,0,771,0,0,5121,0,0,1794,0,0,4353,0,0,4609,0,0,4865,444,456,0,0,0,1027,459,450,0,0,0,261,393,405,0,0,0,516,447,441,0,516,519,0,486,474,0,510,483,0,504,498,0,471,537,0,507,501,0,522,513,0,534,531,0,468,477,0,492,495,0,549,546,0,525,528,0,0,0,263,0,0,2562,0,0,2306,0,0,5633,0,0,5889,0,0,6401,0,0,6145,0,0,1283,0,0,772,0,0,13,0,0,12,0,0,14,0,0,15,0,0,517,0,0,6657,0,0,262,540,543,0,480,489,0,588,597,0,0,0,27,609,555,0,606,603,0,0,0,19,0,0,22,591,621,0,0,0,18,573,576,0,564,570,0,0,0,20,552,582,0,0,0,21,558,579,0,0,0,23,612,594,0,0,0,25,0,0,24,600,615,0,0,0,31,0,0,30,0,0,28,0,0,29,0,0,26,0,0,17,0,0,16,567,618,0,561,585,0,654,633,0,0,0,37,645,648,0,0,0,36,630,636,0,0,0,34,639,627,0,663,666,0,657,624,0,651,642,0,669,660,0,0,0,35,0,0,267,0,0,40,0,0,268,0,0,266,0,0,32,0,0,264,0,0,265,0,0,38,0,0,269,0,0,270,0,0,33,0,0,39,0,0,7937,0,0,6913,0,0,7681,0,0,4098,0,0,7425,0,0,7169,0,0,271,0,0,274,0,0,273,0,0,272,0,0,1539,0,0,2818,0,0,3586,0,0,3330,0,0,3074,0,0,3842]),DCT_DC_SIZE_CHROMINANCE:new Int8Array([6,3,0,12,9,0,18,15,0,24,21,0,0,0,2,0,0,1,0,0,0,30,27,0,0,0,3,36,33,0,0,0,4,42,39,0,0,0,5,48,45,0,0,0,6,51,-1,0,0,0,7,0,0,8]),DCT_DC_SIZE_LUMINANCE:new Int8Array([6,3,0,18,15,0,9,12,0,0,0,1,0,0,2,27,24,0,21,30,0,0,0,0,36,33,0,0,0,4,0,0,3,39,42,0,0,0,5,0,0,6,48,45,0,51,-1,0,0,0,7,0,0,8]),MOTION:new Int16Array([3,6,0,12,9,0,0,0,0,18,15,0,24,21,0,0,0,-1,0,0,1,27,30,0,36,33,0,0,0,2,0,0,-2,42,45,0,48,39,0,60,54,0,0,0,3,0,0,-3,51,57,0,-1,69,0,81,75,0,78,63,0,72,66,0,96,84,0,87,93,0,-1,99,0,108,105,0,0,0,-4,90,102,0,0,0,4,0,0,-7,0,0,5,111,123,0,0,0,-5,0,0,7,114,120,0,126,117,0,0,0,-6,0,0,6,153,162,0,150,147,0,135,138,0,156,141,0,129,159,0,132,144,0,0,0,10,0,0,9,0,0,8,0,0,-8,171,198,0,0,0,-9,180,192,0,168,183,0,165,186,0,174,189,0,0,0,-10,177,195,0,0,0,12,0,0,16,0,0,13,0,0,14,0,0,11,0,0,15,0,0,-16,0,0,-12,0,0,-14,0,0,-15,0,0,-11,0,0,-13]),CODE_BLOCK_PATTERN:new Int16Array([6,3,0,9,18,0,12,15,0,24,33,0,36,39,0,27,21,0,30,42,0,60,57,0,54,48,0,69,51,0,81,75,0,63,84,0,45,66,0,72,78,0,0,0,60,105,120,0,132,144,0,114,108,0,126,141,0,87,93,0,117,96,0,0,0,32,135,138,0,99,123,0,129,102,0,0,0,4,90,111,0,0,0,8,0,0,16,0,0,44,150,168,0,0,0,28,0,0,52,0,0,62,183,177,0,156,180,0,0,0,1,165,162,0,0,0,61,0,0,56,171,174,0,0,0,2,0,0,40,153,186,0,0,0,48,192,189,0,147,159,0,0,0,20,0,0,12,240,249,0,0,0,63,231,225,0,195,219,0,252,198,0,0,0,24,0,0,36,0,0,3,207,261,0,243,237,0,204,213,0,210,234,0,201,228,0,216,222,0,258,255,0,264,246,0,-1,282,0,285,291,0,0,0,33,0,0,9,318,330,0,306,348,0,0,0,5,0,0,10,279,267,0,0,0,6,0,0,18,0,0,17,0,0,34,339,357,0,309,312,0,270,276,0,327,321,0,351,354,0,303,297,0,294,288,0,300,273,0,342,345,0,315,324,0,336,333,0,363,375,0,0,0,41,0,0,14,0,0,21,372,366,0,360,369,0,0,0,11,0,0,19,0,0,7,0,0,35,0,0,13,0,0,50,0,0,49,0,0,58,0,0,37,0,0,25,0,0,45,0,0,57,0,0,26,0,0,29,0,0,38,0,0,53,0,0,23,0,0,43,0,0,46,0,0,42,0,0,22,0,0,54,0,0,51,0,0,15,0,0,30,0,0,39,0,0,47,0,0,55,0,0,27,0,0,59,0,0,31])};var Pc=function(){function t(t,e,i,r){this.hasDecoded=!1,this.hasDecodeColor=!1,this.buffer=t,this.width=e,this.height=i,this.blockData=new Int32Array(64),this.zeroBlockData=new Int32Array(64),this.intraQuantMatrix=fc.DEFAULT_INTRA_QUANT,this.nonIntraQuantMatrix=fc.DEFAULT_NON_INTRA_QUANT,this.mbWidth=this.width+15>>4,this.mbHeight=this.height+15>>4,this.mbSize=this.mbWidth*this.mbHeight,this.codedWidth=this.mbWidth<<4,this.codedHeight=this.mbHeight<<4,this.codedSize=this.codedWidth*this.codedHeight,this.halfWidth=this.mbWidth<<3,this.halfHeight=this.mbHeight<<3,this.quarterSize=this.codedSize>>2;var o=window.Uint8ClampedArray||window.Uint8Array;window.Uint8ClampedArray||(this.copyBlockToDestination=this.copyBlockToDestinationClamp,this.addBlockToDestination=this.addBlockToDestinationClamp),r?(this.forwardY=r.currentY,this.forwardY32=r.currentY32,this.forwardCr=r.currentCr,this.forwardCr32=r.currentCr32,this.forwardCb=r.currentCb,this.forwardCb32=r.currentCb32,this.currentY=r.forwardY,this.currentY32=r.forwardY32,this.currentCr=r.forwardCr,this.currentCr32=r.forwardCr32,this.currentCb=r.forwardCb,this.currentCb32=r.forwardCb32):(this.currentY=new o(this.codedSize),this.currentY32=new Uint32Array(this.currentY.buffer),this.currentCr=new o(this.codedSize>>2),this.currentCr32=new Uint32Array(this.currentCr.buffer),this.currentCb=new o(this.codedSize>>2),this.currentCb32=new Uint32Array(this.currentCb.buffer),this.forwardY=new o(this.codedSize),this.forwardY32=new Uint32Array(this.forwardY.buffer),this.forwardCr=new o(this.codedSize>>2),this.forwardCr32=new Uint32Array(this.forwardCr.buffer),this.forwardCb=new o(this.codedSize>>2),this.forwardCb32=new Uint32Array(this.forwardCb.buffer)),this.quantizerScale=0,this.sliceBegin=!1,this.macroblockAddress=0,this.mbRow=0,this.mbCol=0,this.macroblockType=0,this.macroblockIntra=!1,this.macroblockMotFw=!1,this.motionFwH=0,this.motionFwV=0,this.motionFwHPrev=0,this.motionFwVPrev=0}var e=t.prototype;return e.decodePicture=function(){for(var t=0;;){if(-1===(t=this.buffer.findNextMPEGStartCode()))return!1;if(t===cc)break}if(this.buffer.advance(10),this.pictureCodingType=this.buffer.getBits(3),this.buffer.advance(16),this.pictureCodingType<=0||this.pictureCodingType>=gc)return!1;if(this.pictureCodingType===pc){if(this.fullPelForward=this.buffer.getBits(1),this.forwardFCode=this.buffer.getBits(3),0===this.forwardFCode)return!1;this.forwardRSize=this.forwardFCode-1,this.forwardF=1<<this.forwardRSize}do{t=this.buffer.findNextMPEGStartCode()}while(t===uc||t===hc);for(;t>=lc&&t<=dc;)this.decodeSlice(255&t),t=this.buffer.findNextMPEGStartCode();return this.hasDecoded=!0,!0},e.decodeSlice=function(t){for(this.sliceBegin=!0,this.macroblockAddress=(t-1)*this.mbWidth-1,this.motionFwH=this.motionFwHPrev=0,this.motionFwV=this.motionFwVPrev=0,this.dcPredictorY=128,this.dcPredictorCr=128,this.dcPredictorCb=128,this.quantizerScale=this.buffer.getBits(5);this.buffer.getBits(1);)this.buffer.advance(8);do{this.decodeMacroblock()}while(!this.buffer.nextBytesAreStartCode())},e.decodeMacroblock=function(){for(var t=0,e=this.readCode(Ac.ADDRESS_INCREMENT);34===e;)e=this.readCode(Ac.ADDRESS_INCREMENT);for(;35===e;)t+=33,e=this.readCode(Ac.ADDRESS_INCREMENT);if(t+=e,this.sliceBegin)this.sliceBegin=!1,this.macroblockAddress+=t;else{if(this.macroblockAddress+t>=this.mbSize)return!1;for(t>1&&(this.dcPredictorY=128,this.dcPredictorCr=128,this.dcPredictorCb=128,this.pictureCodingType===pc&&(this.motionFwH=this.motionFwHPrev=0,this.motionFwV=this.motionFwVPrev=0));t>1;)this.macroblockAddress+=1,this.mbRow=this.macroblockAddress/this.mbWidth|0,this.mbCol=this.macroblockAddress%this.mbWidth,this.copyMacroblock(this.motionFwH,this.motionFwV,this.forwardY,this.forwardCr,this.forwardCb),t-=1;this.macroblockAddress+=1}this.mbRow=this.macroblockAddress/this.mbWidth|0,this.mbCol=this.macroblockAddress%this.mbWidth,this.macroblockType=this.readCode(Ac.TYPE_TABLE[this.pictureCodingType]),this.macroblockIntra=1&this.macroblockType,this.macroblockMotFw=8&this.macroblockType,0!=(16&this.macroblockType)&&(this.quantizerScale=this.buffer.getBits(5)),this.macroblockIntra?(this.motionFwH=this.motionFwHPrev=0,this.motionFwV=this.motionFwVPrev=0):(this.dcPredictorY=128,this.dcPredictorCr=128,this.dcPredictorCb=128,this.decodeMotionVectors(),this.copyMacroblock(this.motionFwH,this.motionFwV,this.forwardY,this.forwardCr,this.forwardCb));for(var i=0!=(2&this.macroblockType)?this.readCode(wc.CODE_BLOCK_PATTERN):this.macroblockIntra?63:0,r=0,o=32;r<6;r++)0!=(i&o)&&this.decodeBlock(r),o>>=1},e.readCode=function(t){var e=0;do{e=t[e+this.buffer.getBits(1)]}while(e>=0&&0!==t[e]);return t[e+2]},e.copyMacroblock=function(t,e,i,r,o){var n,a,s,l,d,c,u,h,p,g,v,f,m,b,y,A,w,P,O,S=this.currentY32,_=this.currentCb32,C=this.currentCr32;if(a=(n=this.codedWidth)-16,s=t>>1,l=e>>1,d=1==(1&t),c=1==(1&e),u=((this.mbRow<<4)+l)*n+(this.mbCol<<4)+s,p=(h=this.mbRow*n+this.mbCol<<2)+(n<<2),d)if(c)for(;h<p;){for(v=i[u]+i[u+n],u++,g=0;g<4;g++)m=v+(f=i[u]+i[u+n])+2>>2&255,m|=(v=i[++u]+i[u+n])+f+2<<6&65280,m|=v+(f=i[++u]+i[u+n])+2<<14&16711680,v=i[++u]+i[u+n],u++,m|=v+f+2<<22&4278190080,S[h++]=m;h+=a>>2,u+=a-1}else for(;h<p;){for(v=i[u++],g=0;g<4;g++)m=v+(f=i[u++])+1>>1&255,m|=(v=i[u++])+f+1<<7&65280,m|=v+(f=i[u++])+1<<15&16711680,m|=(v=i[u++])+f+1<<23&4278190080,S[h++]=m;h+=a>>2,u+=a-1}else if(c)for(;h<p;){for(g=0;g<4;g++)m=i[u]+i[u+n]+1>>1&255,m|=i[++u]+i[u+n]+1<<7&65280,m|=i[++u]+i[u+n]+1<<15&16711680,m|=i[++u]+i[u+n]+1<<23&4278190080,u++,S[h++]=m;h+=a>>2,u+=a}else for(;h<p;){for(g=0;g<4;g++)m=i[u],m|=i[++u]<<8,m|=i[++u]<<16,m|=i[++u]<<24,u++,S[h++]=m;h+=a>>2,u+=a}if(a=(n=this.halfWidth)-8,s=t/2>>1,l=e/2>>1,d=1==(t/2&1),c=1==(e/2&1),u=((this.mbRow<<3)+l)*n+(this.mbCol<<3)+s,p=(h=this.mbRow*n+this.mbCol<<1)+(n<<1),d)if(c)for(;h<p;){for(b=r[u]+r[u+n],w=o[u]+o[u+n],u++,g=0;g<2;g++)A=b+(y=r[u]+r[u+n])+2>>2&255,O=w+(P=o[u]+o[u+n])+2>>2&255,A|=(b=r[++u]+r[u+n])+y+2<<6&65280,O|=(w=o[u]+o[u+n])+P+2<<6&65280,A|=b+(y=r[++u]+r[u+n])+2<<14&16711680,O|=w+(P=o[u]+o[u+n])+2<<14&16711680,b=r[++u]+r[u+n],w=o[u]+o[u+n],u++,A|=b+y+2<<22&4278190080,O|=w+P+2<<22&4278190080,C[h]=A,_[h]=O,h++;h+=a>>2,u+=a-1}else for(;h<p;){for(b=r[u],w=o[u],u++,g=0;g<2;g++)A=b+(y=r[u])+1>>1&255,O=w+(P=o[u++])+1>>1&255,A|=(b=r[u])+y+1<<7&65280,O|=(w=o[u++])+P+1<<7&65280,A|=b+(y=r[u])+1<<15&16711680,O|=w+(P=o[u++])+1<<15&16711680,A|=(b=r[u])+y+1<<23&4278190080,O|=(w=o[u++])+P+1<<23&4278190080,C[h]=A,_[h]=O,h++;h+=a>>2,u+=a-1}else if(c)for(;h<p;){for(g=0;g<2;g++)A=r[u]+r[u+n]+1>>1&255,O=o[u]+o[u+n]+1>>1&255,A|=r[++u]+r[u+n]+1<<7&65280,O|=o[u]+o[u+n]+1<<7&65280,A|=r[++u]+r[u+n]+1<<15&16711680,O|=o[u]+o[u+n]+1<<15&16711680,A|=r[++u]+r[u+n]+1<<23&4278190080,O|=o[u]+o[u+n]+1<<23&4278190080,u++,C[h]=A,_[h]=O,h++;h+=a>>2,u+=a}else for(;h<p;){for(g=0;g<2;g++)A=r[u],O=o[u],A|=r[++u]<<8,O|=o[u]<<8,A|=r[++u]<<16,O|=o[u]<<16,A|=r[++u]<<24,O|=o[u]<<24,u++,C[h]=A,_[h]=O,h++;h+=a>>2,u+=a}},e.decodeMotionVectors=function(){var t,e,i=0;this.macroblockMotFw?(0!==(t=this.readCode(wc.MOTION))&&1!==this.forwardF?(i=this.buffer.getBits(this.forwardRSize),e=(Math.abs(t)-1<<this.forwardRSize)+i+1,t<0&&(e=-e)):e=t,this.motionFwHPrev+=e,this.motionFwHPrev>(this.forwardF<<4)-1?this.motionFwHPrev-=this.forwardF<<5:this.motionFwHPrev<-this.forwardF<<4&&(this.motionFwHPrev+=this.forwardF<<5),this.motionFwH=this.motionFwHPrev,this.fullPelForward&&(this.motionFwH<<=1),0!==(t=this.readCode(wc.MOTION))&&1!==this.forwardF?(i=this.buffer.getBits(this.forwardRSize),e=(Math.abs(t)-1<<this.forwardRSize)+i+1,t<0&&(e=-e)):e=t,this.motionFwVPrev+=e,this.motionFwVPrev>(this.forwardF<<4)-1?this.motionFwVPrev-=this.forwardF<<5:this.motionFwVPrev<-this.forwardF<<4&&(this.motionFwVPrev+=this.forwardF<<5),this.motionFwV=this.motionFwVPrev,this.fullPelForward&&(this.motionFwV<<=1)):this.pictureCodingType===pc&&(this.motionFwH=this.motionFwHPrev=0,this.motionFwV=this.motionFwVPrev=0)},e.decodeBlock=function(t){var e,i=0;if(this.macroblockIntra){var r,o;if(t<4?(r=this.dcPredictorY,o=this.readCode(wc.DCT_DC_SIZE_LUMINANCE)):(r=4===t?this.dcPredictorCr:this.dcPredictorCb,o=this.readCode(wc.DCT_DC_SIZE_CHROMINANCE)),o>0){var n=this.buffer.getBits(o);this.blockData[0]=0!=(n&1<<o-1)?r+n:r+(-1<<o|n+1)}else this.blockData[0]=r;t<4?this.dcPredictorY=this.blockData[0]:4===t?this.dcPredictorCr=this.blockData[0]:this.dcPredictorCb=this.blockData[0],this.blockData[0]<<=8,e=this.intraQuantMatrix,i=1}else e=this.nonIntraQuantMatrix;for(var a,s,l,d=0;;){var c=0,u=this.readCode(wc.DCT_COEFF);if(1===u&&i>0&&0===this.buffer.getBits(1))break;65535===u?(c=this.buffer.getBits(6),0===(d=this.buffer.getBits(8))?d=this.buffer.getBits(8):128===d?d=this.buffer.getBits(8)-256:d>128&&(d-=256)):(c=u>>8,d=255&u,this.buffer.getBits(1)&&(d=-d));var h=wc.ZIG_ZAG[i+=c];i++,d<<=1,this.macroblockIntra||(d+=d<0?-1:1),0==(1&(d=d*this.quantizerScale*e[h]>>4))&&(d-=d>0?1:-1),d>2047?d=2047:d<-2048&&(d=-2048),this.blockData[h]=d*wc.PREMULTIPLIER_MATRIX[h]}t<4?(a=this.currentY,l=this.codedWidth-8,s=this.mbRow*this.codedWidth+this.mbCol<<4,0!=(1&t)&&(s+=8),0!=(2&t)&&(s+=this.codedWidth<<3)):(a=4===t?this.currentCb:this.currentCr,l=(this.codedWidth>>1)-8,s=(this.mbRow*this.codedWidth<<2)+(this.mbCol<<3)),this.macroblockIntra?1===i?(this.copyValueToDestination(this.blockData[0]+128>>8,a,s,l),this.blockData[0]=0):(this.IDCT(),this.copyBlockToDestination(this.blockData,a,s,l),this.blockData.set(this.zeroBlockData)):1===i?(this.addValueToDestination(this.blockData[0]+128>>8,a,s,l),this.blockData[0]=0):(this.IDCT(),this.addBlockToDestination(this.blockData,a,s,l),this.blockData.set(this.zeroBlockData)),i=0},e.IDCT=function(){var t,e,i,r,o,n,a,s,l,d,c,u,h,p,g,v,f,m,b,y=this.blockData;for(b=0;b<8;++b)t=y[32+b],e=y[16+b]+y[48+b],i=y[40+b]-y[24+b],n=y[8+b]+y[56+b],a=y[24+b]+y[40+b],l=(h=(473*(r=y[8+b]-y[56+b])-196*i+128>>8)-(o=n+a))-(362*(n-a)+128>>8),p=(d=(s=y[0+b])-t)+(c=(362*(y[16+b]-y[48+b])+128>>8)-e),g=(u=s+t)+e,v=d-c,f=u-e,m=-l-(473*i+196*r+128>>8),y[0+b]=o+g,y[8+b]=h+p,y[16+b]=v-l,y[24+b]=f-m,y[32+b]=f+m,y[40+b]=l+v,y[48+b]=p-h,y[56+b]=g-o;for(b=0;b<64;b+=8)t=y[4+b],e=y[2+b]+y[6+b],i=y[5+b]-y[3+b],n=y[1+b]+y[7+b],a=y[3+b]+y[5+b],l=(h=(473*(r=y[1+b]-y[7+b])-196*i+128>>8)-(o=n+a))-(362*(n-a)+128>>8),p=(d=(s=y[0+b])-t)+(c=(362*(y[2+b]-y[6+b])+128>>8)-e),g=(u=s+t)+e,v=d-c,f=u-e,m=-l-(473*i+196*r+128>>8),y[0+b]=o+g+128>>8,y[1+b]=h+p+128>>8,y[2+b]=v-l+128>>8,y[3+b]=f-m+128>>8,y[4+b]=f+m+128>>8,y[5+b]=l+v+128>>8,y[6+b]=p-h+128>>8,y[7+b]=g-o+128>>8},e.copyBlockToDestination=function(t,e,i,r){for(var o=0;o<64;o+=8,i+=r+8)e[i+0]=t[o+0],e[i+1]=t[o+1],e[i+2]=t[o+2],e[i+3]=t[o+3],e[i+4]=t[o+4],e[i+5]=t[o+5],e[i+6]=t[o+6],e[i+7]=t[o+7]},e.addBlockToDestination=function(t,e,i,r){for(var o=0;o<64;o+=8,i+=r+8)e[i+0]+=t[o+0],e[i+1]+=t[o+1],e[i+2]+=t[o+2],e[i+3]+=t[o+3],e[i+4]+=t[o+4],e[i+5]+=t[o+5],e[i+6]+=t[o+6],e[i+7]+=t[o+7]},e.copyValueToDestination=function(t,e,i,r){for(var o=0;o<64;o+=8,i+=r+8)e[i+0]=t,e[i+1]=t,e[i+2]=t,e[i+3]=t,e[i+4]=t,e[i+5]=t,e[i+6]=t,e[i+7]=t},e.addValueToDestination=function(t,e,i,r){for(var o=0;o<64;o+=8,i+=r+8)e[i+0]+=t,e[i+1]+=t,e[i+2]+=t,e[i+3]+=t,e[i+4]+=t,e[i+5]+=t,e[i+6]+=t,e[i+7]+=t},e.copyBlockToDestinationClamp=function(t,e,i,r){for(var o=0,n=0;n<8;n++){for(var a=0;a<8;a++){var s=t[o++];e[i++]=s>255?255:s<0?0:s}i+=r}},e.addBlockToDestinationClamp=function(t,e,i,r){for(var o=0,n=0;n<8;n++){for(var a=0;a<8;a++){var s=t[o++]+e[i];e[i++]=s>255?255:s<0?0:s}i+=r}},e.YCbCrToRGBA=function(){for(var t,e,i,r,o,n=this.currentY,a=this.currentCb,s=this.currentCr,l=this.currentRGBA.data,d=0,c=this.codedWidth,u=this.codedWidth+(this.codedWidth-this.width),h=0,p=this.halfWidth-(this.width>>1),g=0,v=4*this.width,f=4*this.width,m=this.width>>1,b=this.height>>1,y=0;y<b;y++){for(var A=0;A<m;A++){t=a[h],e=s[h],h++,i=e+(103*e>>8)-179,r=(88*t>>8)-44+(183*e>>8)-91,o=t+(198*t>>8)-227;var w=n[d++],P=n[d++];l[g]=w+i,l[g+1]=w-r,l[g+2]=w+o,l[g+3]=255,l[g+4]=P+i,l[g+5]=P-r,l[g+6]=P+o,l[g+7]=255,g+=8;var O=n[c++],S=n[c++];l[v]=O+i,l[v+1]=O-r,l[v+2]=O+o,l[v+3]=255,l[v+4]=S+i,l[v+5]=S-r,l[v+6]=S+o,l[v+7]=255,v+=8}d+=u,c+=u,g+=f,v+=f,h+=p}this.hasDecodeColor=!0},e.fillArray=function(t,e){for(var i=0,r=t.length;i<r;i++)t[i]=e},t}(),Oc=function(){};Oc.SHADER_FRAGMENT_YCBCRTORGBA=["precision mediump float;","uniform sampler2D YTexture;","uniform sampler2D CBTexture;","uniform sampler2D CRTexture;","varying vec2 texCoord;","void main() {","float y = texture2D(YTexture, texCoord).r;","float cr = texture2D(CBTexture, texCoord).r - 0.5;","float cb = texture2D(CRTexture, texCoord).r - 0.5;","gl_FragColor = vec4(","y + 1.4 * cr,","y + -0.343 * cb - 0.711 * cr,","y + 1.765 * cb,","1.0",");","}"].join("\n"),Oc.SHADER_FRAGMENT_LOADING=["precision mediump float;","uniform float loaded;","varying vec2 texCoord;","void main() {","float c = ceil(loaded-(1.0-texCoord.y));","gl_FragColor = vec4(c,c,c,1);","}"].join("\n"),Oc.SHADER_VERTEX_IDENTITY=["attribute vec2 vertex;","varying vec2 texCoord;","void main() {","texCoord = vertex;","gl_Position = vec4((vertex * 2.0 - 1.0) * vec2(1, -1), 0.0, 1.0);","}"].join("\n");var Sc=function(){function t(t){this.canvas=t.canvas}var e=t.prototype;return e.init=function(t,e){this.initWebGL()?(this.render=this.renderFrameGL,this.gl.useProgram(this.program),this.gl.viewport(0,0,t,e)):(this.canvasCtx=this.canvas.getContext("2d"),this.render=this.renderFrame2D)},e.renderFrame2D=function(t){t.decodePicture(),t.hasDecodeColor||(t.currentRGBA=document.createElement("canvas").getContext("2d").getImageData(0,0,t.width,t.height),t.YCbCrToRGBA()),this.canvasCtx.putImageData(t.currentRGBA,0,0)},e.renderFrameGL=function(t){t.decodePicture();var e=this.gl,i=new Uint8Array(t.currentY.buffer),r=new Uint8Array(t.currentCr.buffer),o=new Uint8Array(t.currentCb.buffer);e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,this.YTexture),e.texImage2D(e.TEXTURE_2D,0,e.LUMINANCE,t.codedWidth,t.height,0,e.LUMINANCE,e.UNSIGNED_BYTE,i),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,this.CBTexture),e.texImage2D(e.TEXTURE_2D,0,e.LUMINANCE,t.halfWidth,t.height/2,0,e.LUMINANCE,e.UNSIGNED_BYTE,r),e.activeTexture(e.TEXTURE2),e.bindTexture(e.TEXTURE_2D,this.CRTexture),e.texImage2D(e.TEXTURE_2D,0,e.LUMINANCE,t.halfWidth,t.height/2,0,e.LUMINANCE,e.UNSIGNED_BYTE,o),e.drawArrays(e.TRIANGLE_STRIP,0,4)},e.initWebGL=function(){var t;try{if(t=this.gl=this.canvas.getContext("webgl")||this.canvas.getContext("experimental-webgl"),this.glbuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.glbuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,1,1]),t.STATIC_DRAW),this.program=t.createProgram(),t.attachShader(this.program,this.compileShader(t.VERTEX_SHADER,Oc.SHADER_VERTEX_IDENTITY)),t.attachShader(this.program,this.compileShader(t.FRAGMENT_SHADER,Oc.SHADER_FRAGMENT_YCBCRTORGBA)),t.linkProgram(this.program),!t.getProgramParameter(this.program,t.LINK_STATUS))throw new Error(t.getProgramInfoLog(this.program));t.useProgram(this.program),this.YTexture=this.createTexture(0,"YTexture"),this.CBTexture=this.createTexture(1,"CBTexture"),this.CRTexture=this.createTexture(2,"CRTexture");var e=t.getAttribLocation(this.program,"vertex");t.enableVertexAttribArray(e),t.vertexAttribPointer(e,2,t.FLOAT,!1,0,0),this.loadingProgram=t.createProgram(),t.attachShader(this.loadingProgram,this.compileShader(t.VERTEX_SHADER,Oc.SHADER_VERTEX_IDENTITY)),t.attachShader(this.loadingProgram,this.compileShader(t.FRAGMENT_SHADER,Oc.SHADER_FRAGMENT_LOADING)),t.linkProgram(this.loadingProgram),t.useProgram(this.loadingProgram),e=t.getAttribLocation(this.loadingProgram,"vertex"),t.enableVertexAttribArray(e),t.vertexAttribPointer(e,2,t.FLOAT,!1,0,0)}catch(t){return!1}return!!t},e.compileShader=function(t,e){var i=this.gl,r=i.createShader(t);if(i.shaderSource(r,e),i.compileShader(r),!i.getShaderParameter(r,i.COMPILE_STATUS))throw new Error(i.getShaderInfoLog(r));return r},e.createTexture=function(t,e){var i=this.gl,r=i.createTexture();return i.bindTexture(i.TEXTURE_2D,r),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.uniform1i(i.getUniformLocation(this.program,e),t),r},t}();const _c=[null,23.976,24,25,29.97,30,50,59.94,60];var Cc=function(){function t(){this.data=new Uint8Array(0),this.lastIndex=0}var e=t.prototype;return e.push=function(e){this.data=t.merge(this.data,e)},e.getData=function(){for(var t,e=[],i=this.lastIndex;i<this.data.length;i+=1)if(0===this.data[i]&&0===this.data[i+1]&&1===this.data[i+2]){var r=this.data[i+3];if(r===cc)e.push(i);else if(r===sc&&this.data.length-(i+4)>32){var o=new ac(this.data.slice(i+4,32)),n=o.getBits(12),a=o.getBits(12),s=o.getBits(4),l=_c[o.getBits(4)];n&&a&&(t={width:n,height:a,aspectRatio:s,fps:l})}}var d=[];if(e.length>1)for(var c=0;c<e.length-1;c+=1)d.push(new ac(this.data.slice(e[c],e[c+1]))),this.lastIndex=e[c+1];return{frames:d,metaData:t}},e.getTailData=function(){return this.data.slice(this.lastIndex,this.data.length)},t.merge=function(t,e){var i=new Uint8Array(t.length+e.length);return i.set(t),i.set(e,t.length),i},t}();function Ec(t,e){return Ec=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ec(t,e)}var Dc,Ic=function(t){var e,i;function r(e){var i;return void 0===e&&(e={}),(i=t.call(this)||this).canvas=e.canvas,i.finished=!1,i.currentRenderFrame=0,i.hasStop=!0,i.timeoutId=null,i.buffer=new Cc,i.renderEngine=new Sc(e),i.currentTime=0,i.fps=30,i.frames=[],i.messagesData=[],i.duration=0,i.lastRenderTime=Date.now(),i.firstPacketTimeout=e.firstPacketTimeout||500,i}i=t,(e=r).prototype=Object.create(i.prototype),e.prototype.constructor=e,Ec(e,i);var o=r.prototype;return o.createFrame=function(t){var e=this.frames[this.frames.length-1],i=new Pc(t,this.width,this.height,e);this.frames.push(i)},o.setMetaData=function(t){if(t){var e=t.width,i=t.height,r=t.fps;r&&(this.fps=r),e&&i&&this.width!==e&&this.height!==i&&(this.width=e,this.height=i,this.canvas.width=this.width,this.canvas.height=this.height,this.renderEngine.init(this.width,this.height))}},o.decodeMessage=function(){var t=this,e=this.fps/2;if(this.frames.length-this.currentRenderFrame>e)setTimeout(this.decodeMessage.bind(this),0);else{var i=this.messagesData.shift();if(i){this.buffer.push(new Uint8Array(i));var r=this.buffer.getData(),o=r.frames,n=r.metaData;this.setMetaData(n),o.forEach((function(e){return t.createFrame(e)})),Date.now()-this.lastRenderTime>=1e3/this.fps&&this.nextFrame()}}},o.createSocket=function(t){var e=this,i=new WebSocket(t);i.binaryType="arraybuffer";var r=function(t){var i=t.data;e.messagesData.push(i),setTimeout(e.decodeMessage.bind(e),0)};return i.addEventListener("message",(function t(o){clearTimeout(i.firstPacketWaitingTimeoutId);var n=new ac(o.data);e.decodeInitPackage(n),i.removeEventListener("message",t),i.addEventListener("message",r)})),i.firstPacketWaitingTimeoutId=setTimeout((function(){e.trigger("error","jsmpeg.createSocket() Websocket did not get a first packet during "+e.firstPacketTimeout+" ms")}),this.firstPacketTimeout),i},o.processSocket=function(t){var e=this;try{this.client=this.createSocket(t),this.client.addEventListener("error",(function(){e.trigger("error","jsmpeg.init() Websocket initialization error")})),this.client.addEventListener("close",(function(){e.finished=!0}))}catch(t){this.trigger("error","jsmpeg.init() Websocket create error")}},o.processFile=function(t){var e=this;Si(t,{options:{withCredentials:!1,responseType:"arraybuffer"}}).then((function(t){e.buffer.push(new Uint8Array(t.target.response));var i=e.buffer.getData(),r=i.frames,o=i.metaData;e.setMetaData(o),r.forEach((function(t){return e.createFrame(t)})),e.duration=e.frames.length/e.fps,e.trigger("onDecodeInitPackage")})).catch((function(){e.trigger("error","jsmpeg.pricessFile("+t+") Failed to load resource")}))},o.init=function(t){/^wss?:\/\//.test(t)?this.processSocket(t):this.processFile(t)},o.decodeInitPackage=function(t){t.getBits(32),this.setMetaData({width:t.getBits(16),height:t.getBits(16),fps:t.getBits(8)||30}),this.trigger("onDecodeInitPackage")},o.play=function(){this.hasStop&&(this.hasStop=!1,this.startAnimation())},o.pause=function(){this.hasStop=!0,this.timeoutId&&window.clearTimeout(this.timeoutId)},o.stop=function(){this.currentRenderFrame=0,this.currentTime=0,this.pause()},o.timeUpdate=function(){this.trigger("timeupdate",{target:{currentTime:this.currentTime,duration:this.duration}})},o.nextFrame=function(){var t=this.frames[this.currentRenderFrame];t&&!this.hasStop&&(this.lastRenderTime=Date.now(),this.renderEngine.render(t),this.currentTime=this.currentRenderFrame/this.fps,this.currentRenderFrame+=1,this.timeUpdate())},o.startAnimation=function(){this.hasStop||((this.finished||this.duration>0)&&this.currentRenderFrame>=this.frames.length-1&&0===this.messagesData.length?this.trigger("ended"):(this.timeoutId=setTimeout(this.startAnimation.bind(this),1e3/this.fps),this.nextFrame()))},r}(t);function Tc(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function Vc(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Tc(Object(i),!0).forEach((function(e){kc(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Tc(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function kc(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function xc(t,e){return xc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},xc(t,e)}var jc="Module::VpaidCanvas",Rc=(null===o.ZP||void 0===o.ZP||null===(Dc=o.ZP.getChildWriter)||void 0===Dc?void 0:Dc.call(o.ZP,jc))||o.ZP,Mc=function(t){var i,r;function o(e){var i;void 0===e&&(e={}),Rc.trace("Module::VpaidCanvas.constructor()"),i=t.call(this,Vc(Vc({},e),{},{ancestor:jc}))||this;var r=e,o=r.duration,n=r.mpgmedia,a=r.mpgmedia,s=a.width,l=a.height;return i.adDuration=o,i.adWidth=s,i.adHeight=l,i.media=n,i.name=jc,i}r=t,(i=o).prototype=Object.create(r.prototype),i.prototype.constructor=i,xc(i,r);var a=o.prototype;return a.initAd=function(i,r,o,a,s,l){var d=this;void 0===s&&(s={}),void 0===l&&(l={}),t.prototype.initAd.call(this,i,r,o,a,s,l);var c=this.options,u=c.mpgmedia,h=c.mp4media,p=c.mp3media,g=c.duration;this.setAdVolume(0),this.adDuration=g,this.videoSlot=this.videoSlot||l.videoSlot,this.audioSlot=this.audioSlot||l.audioSlot;var v=this.slot=l.slot,f=this.canvas;(0,e.Re)(f,"canvas")||(f=this.canvas=document.createElement("canvas"),this._addDOMEventListener(v||f,"click",Zc.bind(this)),(0,e.Zs)(f,{width:(0,n.Ug)(i),height:(0,n.Ug)(r)}),this.canvasWrapper=(0,e.Xv)(l.slot,"div",{position:"absolute",top:"50%",marginTop:(0,n.Ug)(-r/2),left:"50%",marginLeft:(0,n.Ug)(-i/2)}),this.canvasWrapper.appendChild(f),this._initAudioVideo(p&&p.src,h&&h.src));var m=this.jsmpeg=new Ic({canvas:f,firstPacketTimeout:1200});return this._addVPAIDEventListener(m,"timeupdate",Bc.bind(this)),this._addVPAIDEventListener(m,"onDecodeInitPackage",zc.bind(this)),this._addVPAIDEventListener(m,"ended",(function(){var t=d.getAdExpanded();m.ended=!0,t||(d.collapseAd(),d.trigger("AdVideoComplete"))})),this._addVPAIDEventListener(m,"error",(function(t){d.trigger("AdError",String(t),w.GENERAL_VPAID_ERROR)}),"error"),m.init(u&&u.src),this._addVPAIDEventListener(this,"AdVolumeChange",Fc.bind(this)),this._addVPAIDEventListener(this,"AdVideoStart",Wc.bind(this)),this._addVPAIDEventListener(this,"AdVideoComplete",Hc.bind(this)),Promise.resolve(this)},a.resizeAd=function(i,r,o){var a,s=this.jsmpeg,l=this.canvas,d=this.environmentVars,c=this.options.mpgmedia,u=c.scalable,h=d||{},p=h.forceAspectRatio,g=h.slot,v=this.getAdAspectRatio(),f=p||c.maintainAspectRatio;if(s&&s.width&&v&&u&&d&&d.slot){var m,b=s.width>s.height,y=i>r;if(null===f){var A=c.width/c.height,w=i/r;f=100-100*(w<A?w/A:A/w)>10}!0===f&&(m=i/r<s.width/s.height),!1===f&&(m=i/r>s.width/s.height),b!==y&&(m=!0),y&&!b&&(m=!1),a=m?{width:i,height:i*v}:{height:r,width:r/v}}else a={width:c.width,height:c.height};var P=this.canvasWrapper;return P&&(0,e.Zs)(P,{marginTop:(0,n.Ug)(-a.height/2),marginLeft:(0,n.Ug)(-a.width/2)}),(0,n.dN)(l,a,g,{width:i,height:r}),t.prototype.resizeAd.call(this,i,r,o)},a.startAd=function(){var e=this.jsmpeg,i=this.videoSlot;return this.getAdExpanded()?i&&i.play():e.play(),t.prototype.startAd.call(this)},a.stopAd=function(){return Nc.call(this),t.prototype.stopAd.call(this)},a.pauseAd=function(){return Nc.call(this),t.prototype.pauseAd.call(this)},a.resumeAd=function(){var e=this.jsmpeg,i=this.videoSlot,r=this.getAdExpanded();return e.play(),r&&i&&i.play(),t.prototype.resumeAd.call(this)},a.expandAd=function(){var i=this.jsmpeg,r=this.videoSlot;return this.getAdExpanded()||r&&(r.currentTime=i.currentTime,(0,e.VB)(this.videoSlot),this.setAdExpanded(!0)),t.prototype.expandAd.call(this)},a.collapseAd=function(){var e=this,i=this.jsmpeg,r=this.videoSlot;return this.getAdExpanded()&&r&&(r.pause(),setTimeout((function(){"function"==typeof r.webkitExitFullscreen&&r.webkitExitFullscreen(),i.ended&&e.trigger("AdVideoComplete")}),50)),t.prototype.collapseAd.call(this)},a.skipAd=function(){return Nc.call(this),t.prototype.skipAd.call(this)},a.getAdAspectRatio=function(){var t=this.adWidth,e=this.adHeight,i=this.jsmpeg||this.options.mpgmedia,r=i.width,o=i.height;return r&&o?o/r:t&&e?e/t:9/16},a._destroy=function(){Rc.trace("Module::VpaidCanvas.destroy()"),t.prototype._destroy.call(this),this.jsmpeg._eventListeners={},this.jsmpeg=null},a._initAudioVideo=function(t,i){var r,o;if(Rc.trace("Module::VpaidCanvas Initializing secondary audio/video slot"),t)r=this.videoSlot=this.audioSlot||document.createElement("audio"),o=t;else{if(!i)return void this._failedAudioVideo();(r=this.videoSlot=this.videoSlot||document.createElement("video")).playsInline=!0,o=i}this.environmentVars.slot.appendChild(r),r.src=o,(0,e.Zs)(r,{display:"none"}),this._addDOMEventListener(r,"volumechange",this.trigger.bind(this,"AdVolumeChange")),this._addDOMEventListener(r,"loadeddata",Uc.bind(this)),this._addDOMEventListener(r,"webkitendfullscreen",this.collapseAd.bind(this)),this._addDOMEventListener(r,"ended",this.collapseAd.bind(this)),this._addDOMEventListener(r,"error",this._failedAudioVideo.bind(this)),Rc.trace("Module::VpaidCanvas.initAudioVideo() Starting secondary audio/video slot"),r.load()},a._failedAudioVideo=function(){Rc.warn("Module::VpaidCanvas Failed to initialize secondary audio/video slot"),this.videoSlot=null,this.trigger("AdAudioDisabled")},o.create=function(t,e,i){void 0===i&&(i=!1);var r=(e&&e.getAPI&&e.getAPI()||{}).getControlUnionData;return new Promise((function(n){var a=t.mediaFiles,s=t.duration,l=t.rawDuration,c=a["video/mp4"]&&a["video/mp4"][0],u=c&&c.src,h=u&&e.isMediaUrlBlocked(c.src),p=a["audio/mp3"]&&a["audio/mp3"][0],g=r&&r("vnCache")||{serverUrl:"",strict:!1};if(!i&&u&&!h&&(x.zf||!g.strict&&x.tW))throw new Error;var v,f=e.format&&e.format._getModuleDimensions&&e.format._getModuleDimensions().viewportWidth||0,m=a["video/mpeg"],b=m&&m.filter((function(t){return t.src&&!e.isMediaUrlBlocked(t.src)})).reduce((function(t,e){return Math.abs(t.width-f)<Math.abs(e.width-f)?t:e}));if(b){var y,A=b.width;A&&f&&!1===b.scalable&&(y=Math.abs(A-f)/f)>.1&&(Rc.log("Module::VpaidCanvas difference between viewportWidth && mediaWidth more than 10% ("+y+"). Set media.scalable = true"),b.scalable=!0),v=Promise.resolve(b)}else{if(!u||h||!g||!g.serverUrl)throw new Error;Rc.trace("Module::VpaidCanvas.create() Querying cache server");var w=(0,d.o3)(g.serverUrl,{url:c.src});Rc.track("Module::VpaidCanvas request vnCache ("+w+")"),v=Si(w).then((function(t){return JSON.parse(t.target.responseText)})).catch((function(){throw new Error("Cache server did not provide playable data")})).then((function(t){return t.video}))}v.then((function(t){Rc.log("Module::VpaidCanvas.create("+t.src+")"),e.setSelectedCreative(t.src,l);var i=new o({module:e,mpgmedia:t,mp3media:p,mp4media:c,duration:s,moduleAPI:e.getAPI()});n(i)}))}))},o}(v);function Nc(){var t=this.jsmpeg,e=this.videoSlot,i=this.getAdExpanded();t.pause(),i&&e&&e.pause()}function Lc(){var t=this.getAdVolume();t>0?(Rc.trace("Module::VpaidCanvas Expanding ad because of adVolume set to "+t),this.expandAd()):(Rc.trace("Module::VpaidCanvas Collapsing ad because of adVolume set to "+t),this.collapseAd())}function Fc(){Lc.call(this)}function Wc(){Lc.call(this)}function Hc(){var t=this.jsmpeg,e=this.videoSlot;e&&e.pause(),t.stop()}function Uc(t){var e=t.target;this.hasAudio=(0,n.wf)(e),this.trigger("AdLoadedVideoData")}function zc(){var t=this.jsmpeg,e=t.width,i=t.height;Rc.trace("Module::VpaidCanvas WS metadata size: width: "+e+", height: "+i+"}}"),this.resizeAd(this.adWidth,this.adHeight),this.trigger("AdLoaded")}function Bc(t){var e=this.adExpanded&&this.videoSlot?this.videoSlot:t.target,i=this.adDuration=e&&e.duration?e.duration:this.adDuration;if(i){var r=this.adRemainingTime,o=i-e.currentTime;o!==r&&(this.adRemainingTime=o,o<i&&r===i&&(this.trigger("AdImpression"),this.trigger("AdVideoStart")),this.trigger("AdRemainingTimeChange"),o<.75*i&&r>=.75*i&&this.trigger("AdVideoFirstQuartile"),o<.5*i&&r>=.5*i&&this.trigger("AdVideoMidpoint"),o<.25*i&&r>=.25*i&&this.trigger("AdVideoThirdQuartile"),0===o&&r>0&&this.trigger("AdVideoComplete"))}}function Zc(t){t.preventDefault(),this.trigger("AdClickThru","",0,!0)}class qc extends Error{constructor(t,e){super(t),null!=e&&(this.code=e)}static clone(t,e,i){return new qc(`${e} (${t&&t.message})`,t.code||i)}}class Xc{constructor(t){this.logger=null==t?void 0:t.logger,this.collection=[]}subscribe(t,e,i,r){return t.subscribe(i,e,r),this.collection.push({vpaid:t,name:e,handler:i}),i}unsubscribeAll(){this.collection.forEach((({vpaid:t,name:e,handler:i})=>t&&e&&i&&t.unsubscribe(i,e))),this.collection=[]}unsubscribe(t,e,i){this.collection=this.collection.filter((r=>r.vpaid!==t||r.name!==e||r.handler!==i||(t.unsubscribe(i,e),!1)))}unsubscribeType(t,e){this.collection=this.collection.filter((i=>(i.vpaid===t&&i.name===e&&t.unsubscribe(i.handler,e),!0)))}}class Gc{constructor(t){this.logger=null==t?void 0:t.logger,(null==t?void 0:t.eventBus)&&this.init(null==t?void 0:t.eventBus)}init(t){this.eventBus=t,this.triggerEvent=this.eventBus.registerEventCreator(this)}setEventBus(t){if(!t)throw Error("parameter eventBus is required");this.init(t)}trigger(t,...e){var i,r;null===(i=null==this?void 0:this.logger)||void 0===i||i.trace(`EventBusEventCreator: trigger(${t})`),null===(r=this.triggerEvent)||void 0===r||r.call(this,t,...e)}}class Qc{constructor(t){this.adLinear=!0,this.adWidth=0,this.adHeight=0,this.adExpanded=!1,this.adSkippableState=!0,this.adRemainingTime=0,this.adDuration=0,this.adVolume=0,this.adCompanions="",this.adIcons=!1,this.viewMode="view",this.desiredBitrate=0,this.useExistsVideoSlot=!0;const e=this.logger=null==t?void 0:t.logger;this.subject=new Ol({logger:e}),this.vpaidObserver=new Xc({logger:e});const i=this.eventBus=null==t?void 0:t.eventBus;i&&(this.eventBaseEventCreator=new Gc({eventBus:i}),this.subscribeEventBus(this.startAd.bind(this),"CmdAdStart"),this.subscribeEventBus(this.stopAd.bind(this),"CmdAdStop"),this.subscribeEventBus(this.skipAd.bind(this),"CmdAdSkip"),this.subscribeEventBus(this.pauseAd.bind(this),"CmdAdPause"),this.subscribeEventBus(this.resumeAd.bind(this),"CmdAdResume"))}static create(){throw new Error("Abstract method call Vpaid.create()")}subscribeEventBus(t,e,i){var r;return null===(r=this.eventBus)||void 0===r?void 0:r.subscribe(t,e,i)}unsubscribeEventBus(t,e){var i;null===(i=this.eventBus)||void 0===i||i.unsubscribe(t,e)}subscribe(t,e,i){return this.subject.subscribe(t,e,i)}subscribeOnce(t,e,...i){return this.subject.subscribeOnce(t,e,i)}unsubscribe(t,e){this.subject.unsubscribe(t,e)}unsubscribeType(t){this.subject.unsubscribeType(t)}subscribeVpaid(t,e,i,r){return this.vpaidObserver.subscribe(t,e,i,r)}unsubscribeVpaid(t,e,i){return this.vpaidObserver.unsubscribe(t,e,i)}unsubscribeVpaidType(t,e){return this.vpaidObserver.unsubscribeType(t,e)}trigger(t,...e){var i;this.subject.trigger(t,...e),null===(i=this.eventBaseEventCreator)||void 0===i||i.trigger(t,...e)}getAdLinear(){return this.adLinear}getAdWidth(){return this.adWidth}getAdHeight(){return this.adHeight}getAdAspectRatio(){const t=this.getAdWidth(),e=this.getAdHeight();return isNaN(t)||isNaN(e)||0===t?9/16:e/t}getAdExpanded(){return this.adExpanded}getAdSkippableState(){return this.adSkippableState}getAdRemainingTime(){return this.adRemainingTime}getAdDuration(){return this.adDuration}getAdElapsedTime(){const t=this.getAdDuration(),e=this.getAdRemainingTime();return t===1/0||e===1/0?0:t-e}getAdVolume(){return this.adVolume}getAdCompanions(){return this.adCompanions}getAdIcons(){return this.adIcons}handshakeVersion(t){return"2.0"}initAd(t,e,i,r,o,n){this.adLinear=!0,this.adWidth=t,this.adHeight=e,this.adExpanded=!1,this.adSkippableState=!0,this.adRemainingTime=0,this.adDuration=0,this.adVolume=this.adVolume||0,this.adCompanions="",this.adIcons=!1,this.viewMode=i,this.desiredBitrate=r||0,this.creativeData=o,this.environmentVars=n}resizeAd(t,e,i=this.viewMode){this.adWidth=t,this.adHeight=e,this.viewMode=i,this.trigger("AdSizeChange")}startAd(){this.trigger("AdStarted")}stopAd(){this.trigger("AdStopped")}pauseAd(){this.trigger("AdPaused")}resumeAd(){this.trigger("AdResumed"),this.trigger("AdPlaying")}expandAd(){this.setAdExpanded(!0)}collapseAd(){this.setAdExpanded(!1)}skipAd(){this.trigger("AdSkipped")}setAdExpanded(t){this.adExpanded!==t&&(this.adExpanded=t,this.trigger("AdExpandedChange"))}setAdSkippableState(t){return this.adSkippableState!==t&&(this.adSkippableState=t,this.trigger("AdSkippableStateChange"),!0)}setAdVolume(t){this.adVolume!==t&&(this.adVolume=t,setTimeout((()=>this.trigger("AdVolumeChange")),1))}__destroy(){this.subject.unsubscribeAll(),this.vpaidObserver.unsubscribeAll(),this.creativeData=void 0,this.environmentVars=void 0}getMediaInfo(){return Promise.resolve(this.media||{})}toString(){return"Vpaid"}}const $c=400,Jc=405,Yc=901,Kc=3e3,tu="undefined"!=typeof window&&window||{},{userAgent:eu,vendor:iu,plugins:ru,appVersion:ou}="undefined"!=typeof navigator&&navigator||{},{opera:nu,MSStream:au,devicePixelRatio:su}=tu,lu=tu.VN&&tu.VN.debug&&tu.VN.debug.userAgent||eu||iu||nu||"",du=/iPod/.test(lu)&&!au,cu=/iPhone/.test(lu)&&!au,uu=/iPad/.test(lu)&&!au,hu=du||cu||uu,pu=(/android/i.test(lu),/safari/i.test(lu)&&/apple/i.test(iu)),gu=/chrome/i.test(lu),vu=(/firefox|mozilla/i.test(lu)&&(!iu||/google/i.test(iu)),/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(lu)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(lu.substr(0,4))),fu=(void 0===ru||0===ru.length?"undefined"==typeof ActiveXObject||new ActiveXObject("ShockwaveFlash.ShockwaveFlash"):ru["Shockwave Flash"],(()=>{if(!gu)return!1;const t=ou.match(/Chrome\/(\d+)\.(\d+)/i);return t&&t.length&&t.length>2?parseFloat(`${t[1]}.${t[2]}`):84})());(()=>{if(!hu)return!1;if("string"!=typeof ou)return!1;const t=ou.match(/OS (\d+)_(\d+)_?(\d+)?/);t&&t.length&&t.length>2&&parseFloat(`${t[1]}.${t[2]}`)})();let mu=!1;tu.document&&tu.document.addEventListener("touchstart",(()=>{mu=!0})),tu.document&&tu.document.addEventListener("touchend",(()=>{mu=!1}));class bu{constructor(){let t,e;this.promise=new Promise(((i,r)=>{t=i,e=r})),this.resolve=t,this.reject=e}}class yu{constructor(){this.collection=[]}subscribe(t,e,i,r){if("function"!=typeof t.addEventListener)throw new Error("node.addEventListener is not a function ");return t.addEventListener&&t.addEventListener(e,i,r),this.collection.push({node:t,name:e,handler:i}),i}unsubscribeAll(){this.collection.forEach((({node:t,name:e,handler:i})=>t&&e&&i&&t.removeEventListener(e,i))),this.collection=[]}unsubscribe(t,e,i){this.collection=this.collection.filter((r=>r.node!==t||r.name!==e||r.handler!==i||(t.removeEventListener(e,i),!1)))}}const Au=(t,e)=>{const{logger:i,shouldThrowException:r=!1}=e||{};if(!t||!["VIDEO","AUDIO"].includes(t.tagName))throw new Error(`mediaSafePlay() element ${t} is not HTMLVideoElement instance`);null==i||i.trace(`mediaSafePlay() element.volume=${t.volume} element.muted=${t.muted}`,2,"pink");const o=t.play();if(void 0!==o)return o.then((()=>(null==i||i.trace(`$.mediaSafePlay() Autoplay started! element.volume=${t.volume} element.muted=${t.muted}`),o))).catch((e=>{if(r)throw null==i||i.warn(`$.mediaSafePlay() element.volume=${t.volume} element.muted=${t.muted} error:${e.message||e}`),e;return o}))};class wu extends Qc{constructor(t){var e,i,r;null===(e=null==t?void 0:t.logger)||void 0===e||e.trace("::VpaidMedia.constructor()"),super(t),this.options=t,this.domEvents=new yu,this.saveVideoSlotParams=null==t?void 0:t.saveVideoSlotParams;const{duration:o,mediaFile:n}=t,a=null!==(i=null==n?void 0:n.width)&&void 0!==i?i:0,s=null!==(r=null==n?void 0:n.height)&&void 0!==r?r:0;this.adWidth=null!=a?a:0,this.adHeight=null!=s?s:0,this.mediaFile=n?Object.assign({duration:o},n):void 0,this.startedVideoWithoutSound=null,this.startVideoWithSoundFailed=null,this.setAdVolumeCounter=0;const l=new bu;this.playerSuccessfullyStartedPromise=l.promise,this.playerSuccessfullyStartedResolve=l.resolve||(()=>new Error("::VpaidMedia: deferred.resolve is not defined"))}initAd(t,e,i,r,o,n){var a;let s;return super.initAd(t,e,i,r,o,n),this.environmentVars=n,this.videoSlotCanAutoPlay=!!(null==n?void 0:n.videoSlotCanAutoPlay),this.videoSlot=null==n?void 0:n.videoSlot,this.slot=null==n?void 0:n.slot,null===(a=this.logger)||void 0===a||a.trace(`::VpaidMedia.initAd() environmentVars?.videoSlot=${null==n?void 0:n.videoSlot} videoSlotCanAutoPlay is ${this.videoSlotCanAutoPlay} useExistsVideoSlot=${this.useExistsVideoSlot} videoSlot=${this.videoSlot}`,2),new Promise(((i,r)=>{var o,a,l,d,c,u,h,p,g,v;if("VIDEO"===(null===(o=null==n?void 0:n.videoSlot)||void 0===o?void 0:o.tagName)?(null!=n.videoSlot&&(s=this.initVideoSlot(n.videoSlot)),null===(a=this.logger)||void 0===a||a.track(`::VpaidMedia.initAd() Using environmentVars?.videoSlot, videoSlotCanAutoPlay is ${this.videoSlotCanAutoPlay}`)):s=this.initVideoSlot(null===(d=null===(l=this.options)||void 0===l?void 0:l.createVideoSlot)||void 0===d?void 0:d.call(l,null==n?void 0:n.slot)),!s)return new Error("::VpaidMedia: videoSlot is not defined");this.prepareVideoSlot(s,t,e,!0);const f=Au(s);if(f)this.videoSlotErrorHandler=this.domEvents.subscribe(s,"error",(t=>{const{code:e,message:i}=this.getVideoErrorInfo(t),r=new qc(i,e);this.handleFailedStartVideo(r,s)})),null===(c=this.logger)||void 0===c||c.trace("::VpaidMedia initAd() video.play() return promise"),null===(u=this.startMediaTag(s,f))||void 0===u||u.catch((t=>this.handleFailedStartVideo(t,s))).then((()=>i(this)));else if(void 0===f)if(null===(h=this.logger)||void 0===h||h.warn("::VpaidMedia initAd() video.play() do not return promise"),s.paused){const t="failed media tag autoplay";null===(p=this.logger)||void 0===p||p.error(`::VpaidMedia initAd() ${t}`);const e=new qc(t,Kc);this.handleFailedStartVideo(e,s)}else null===(g=this.logger)||void 0===g||g.log("::VpaidMedia initAd() media tag autoplay started",1),i(this);else{const t="element is neither video nor audio tag";null===(v=this.logger)||void 0===v||v.error(`::VpaidMedia initAd() ${t}`);const e=new qc(t,Kc);this.handleFailedStartVideo(e,s)}}))}startMediaTag(t,e){var i;return null===(i=e||Au(t))||void 0===i?void 0:i.then((()=>{var e;t.pause(),this.startedVideoWithoutSound=t.muted;const i=this.getAdVolume();return super.setAdVolume(i),this.videoSlotErrorHandler&&this.domEvents.subscribe(t,"error",this.videoSlotErrorHandler),this.domEvents.subscribe(t,"error",this.onError.bind(this)),null===(e=this.logger)||void 0===e||e.log(`::VpaidMedia initAd() video.play() startMediaTag() video has been started successfully. Set it in pause. videoSlot.muted=${t.muted} videoSlot.volume=${t.volume} super.setAdVolume(${i})`,2,"green"),this.playerSuccessfullyStartedResolve(t),t}))}handleFailedStartVideo(t,e){throw t}initVideoSlot(t){var e,i;if(!this.options)throw new Error("::VpaidMedia options is undefined");const{slot:r,options:{startTime:o}}=this;if(!t)throw new Error("::VpaidMedia createVideoSlot has been failed");return t.muted=!1===this.videoSlotCanAutoPlay||!this.adVolume,o&&(t.currentTime=o),t.volume=t.muted?0:this.adVolume,t.playsInline=!0,jd(t,{width:"100%",display:"none"}),null===(e=this.logger)||void 0===e||e.trace(`::VpaidMedia.initVideoSlot, videoSlotCanAutoPlay is ${this.videoSlotCanAutoPlay}`),this.domEvents.subscribe(t,"loadedmetadata",this.onLoadedMetadata.bind(this)),this.domEvents.subscribe(t,"loadeddata",this.onLoadedVideoData.bind(this)),this.domEvents.subscribe(t,"durationchange",this.onDurationChange.bind(this)),this.domEvents.subscribe(t,"play",this.onTimeUpdate.bind(this)),this.domEvents.subscribe(t,"volumechange",this.onVolumeChange.bind(this)),this.domEvents.subscribe(t,"ended",this.onEnded.bind(this)),t&&this.domEvents.subscribe(t,"click",this.onClick.bind(this)),this.domEvents.subscribe(r||t,"click",this.onClick.bind(this)),this.videoSlot=t,null===(i=this.logger)||void 0===i||i.log(`::VpaidMedia.initVideoSlot, videoSlot.muted=${t.muted}`),t}resizeAd(t,e,i){var r;const{videoSlot:o,useExistsVideoSlot:n,saveVideoSlotParams:a}=this;return null===(r=this.logger)||void 0===r||r.trace(`::VpaidMedia.resizeAd(${t}, ${e} useExistsVideoSlot=${n}`),o&&(null==a||a(o),jd(o,{width:Rd(t),height:Rd(e)})),super.resizeAd(t,e,i)}startAd(){var t;null===(t=this.logger)||void 0===t||t.log("::VpaidMedia startAd()",2,"blue"),this.playerSuccessfullyStartedPromise.then((()=>{var t;const{videoSlot:e,options:i}=this,{startTime:r}=i||{};null===(t=this.logger)||void 0===t||t.log(`::VpaidMedia startAd() playerSuccessfullyStartedPromise.then videoSlot.readyState=${null==e?void 0:e.readyState}`,2,"blue");const o=4===(null==e?void 0:e.readyState)?this.playVideo(e):new Promise((t=>{var i;null===(i=this.logger)||void 0===i||i.trace(`::VpaidMedia startAd() video has not been downloaded yet: readyState=${null==e?void 0:e.readyState}. Waiting when will be ready.`,1,"blue");const r=()=>{var i;null==e||e.removeEventListener("canplaythrough",r),null===(i=this.logger)||void 0===i||i.trace(`::VpaidMedia startAd() video has been downloaded: readyState=${null==e?void 0:e.readyState}.`,2),e&&t(this.playVideo(e))};null==e||e.addEventListener("canplaythrough",r)}));o.then((()=>{var t;e&&(r&&(e.currentTime=r),jd(e,{display:""}),null===(t=this.logger)||void 0===t||t.trace("::VpaidMedia startAd() playPromise.then() calling super.startAd() .",1,"blue"),this.domEvents.subscribe(e,"timeupdate",this.onTimeUpdate.bind(this))),super.startAd()}))}))}stopAd(){return this.pause(),super.stopAd()}pauseAd(){return this.pause(),super.pauseAd()}resumeAd(){const{videoSlot:t}=this;return t&&Au(t),super.resumeAd()}pause(){var t;null===(t=this.videoSlot)||void 0===t||t.pause()}expandAd(){this.trigger("AdError","Not supported",Yc)}collapseAd(){this.trigger("AdError","Not supported",Yc)}skipAd(){return this.pause(),super.skipAd()}setAdVolume(t){var e;const{videoSlot:i}=this;return i&&(null===(e=this.logger)||void 0===e||e.trace(`::VpaidMedia setAdVolume(${t}) videoSlot.muted=${i.muted} startedVideoWithoutSound=${this.startedVideoWithoutSound} startVideoWithSoundFailed=${this.startVideoWithSoundFailed} safari=${pu} `),i.volume=t,i.muted&&t?i.paused||0!==i.currentTime?(!1===this.startedVideoWithoutSound||i.paused||i.currentTime>0)&&(i.muted=!1):i.muted=!1:i.muted||t||(i.muted=!0)),super.setAdVolume(t)}getAdVolume(){const{videoSlot:t}=this;return t&&(this.adVolume=hu||pu?t.muted?0:1:t.volume),super.getAdVolume()}getAdRemainingTime(){const{videoSlot:t}=this;return t?t.duration-t.currentTime:0}_destroy(){}onVolumeChange(t){const{target:e}=t;this.adVolume=null==e?void 0:e.volume,this.trigger("AdVolumeChange")}onEnded(){this.trigger("MediaEnded")}onError(t){const{code:e,message:i}=this.getVideoErrorInfo(t);this.trigger("AdError",i,e)}getVideoErrorInfo(t){t.preventDefault();const{target:e,currentTarget:i}=t,r=null==i?void 0:i.currentSrc,o=null==e?void 0:e.error;return{code:o&&o.code>=1&&o.code<=3?$c:Jc,message:(o&&o.message||"Load error ")+(r?` source=${r}`:"")}}onClick(t){t.preventDefault(),this.trigger("AdClickThru","",0,!0)}playVideo(t){return t.play().then((t=>{var e;return null===(e=this.logger)||void 0===e||e.log("::VpaidMedia.startAd() play() successfully."),t})).catch((e=>{var i;return null===(i=this.logger)||void 0===i||i.warn(`::VpaidMedia.startAd() play() catch error=${e}. Try start play one time.`),t.play().catch((t=>{const e=`::VpaidMedia playVideo(${this}) failed video autoplay`;throw qc.clone(t,e,Kc)}))}))}onLoadedVideoData(t){var e,i;this.hasAudio=(null==(e=null==t?void 0:t.target)?void 0:e.mozHasAudio)||(null==e?void 0:e.webkitAudioDecodedByteCount)||(null==e?void 0:e.audioTracks)&&(null===(i=null==e?void 0:e.audioTracks)||void 0===i?void 0:i.length),this.trigger("AdLoadedVideoData")}onLoadedMetadata(t){var e,i;const{videoWidth:r,videoHeight:o,duration:n}=(null==t?void 0:t.target)||{};null===(e=this.logger)||void 0===e||e.trace("::VpaidMedia @loadedmetadata"),this.adWidth&&this.adHeight||(null===(i=this.logger)||void 0===i||i.trace(`::VpaidMedia @loadedmetadata Updating ad dimensions (${r}:${o})`),this.adWidth=r,this.adHeight=o),this.adDuration=n,this.trigger("AdLoaded")}onDurationChange(t){var e;const{duration:i}=null==t?void 0:t.target;isNaN(i)?null===(e=this.logger)||void 0===e||e.trace(`::VpaidMedia.onDurationChange() duration=${i}. video is not ready yet.`):(this.adDuration=i,this.trigger("AdDurationChange"))}onTimeUpdate(t){var e,i;let{duration:r,currentTime:o}=null==t?void 0:t.target;if(isNaN(r))return void(null===(e=this.logger)||void 0===e||e.trace(`::VpaidMedia.onDurationChange() duration=${r}. video is not ready yet.`));this.adDuration=r;const{adRemainingTime:n,options:{startTime:a}}=this;n||void 0===a||o===a||(o=a);const s=(100*(r-Math.min(o,r))^0)/100;s!==n&&(this.adRemainingTime=s,r=(100*r^0)/100,this.trigger("AdRemainingTimeChange"),s<r&&!this.hasAdVideoStart&&n>0&&n<=r&&(null===(i=this.logger)||void 0===i||i.log("::VpaidMedia.onTimeUpdate() trigger AdImpression and AdVideoStart",1),this.hasAdVideoStart=!0,this.trigger("AdImpression"),this.trigger("AdVideoStart")),s<.75*r&&n>=.75*r&&this.trigger("AdVideoFirstQuartile"),s<.5*r&&n>=.5*r&&this.trigger("AdVideoMidpoint"),s<.25*r&&n>=.25*r&&this.trigger("AdVideoThirdQuartile"),0===s&&n>0&&this.trigger("AdVideoComplete"))}}class Pu extends wu{constructor(t){var e;null===(e=null==t?void 0:t.logger)||void 0===e||e.trace("VpaidVideo.constructor()"),super(t)}initAd(t,e,i,r,o,n){return super.initAd(t,e,i,r,o,Object.assign(Object.assign({},n),{videoSlotCanAutoPlay:!0}))}prepareVideoSlot(t,e,i,r){var o,n,a,s,l;null===(o=this.logger)||void 0===o||o.trace("VpaidVideo.initAd.videoStart()",2),null===(a=null===(n=this.options)||void 0===n?void 0:n.saveVideoSlotParams)||void 0===a||a.call(n,t);const{mediaFile:d}=this.options||{};(null==d?void 0:d.scalable)?jd(t,{width:Rd(e),height:Rd(i)}):(null==d?void 0:d.width)&&jd(t,{width:Rd(d.width),height:Rd(null==d?void 0:d.height)}),t.src=(null===(l=null===(s=this.options)||void 0===s?void 0:s.mediaFile)||void 0===l?void 0:l.src)||"",jd(t,{display:r?"hidden":""}),t.load()}handleFailedStartVideo(t,e){var i,r,o,n;this.startedVideoWithoutSound=null,this.startVideoWithSoundFailed=!0;const a=`VpaidVideo initAd(${this}) failed video play with videoSlot.muted=${null==e?void 0:e.muted} videoSlot.volume=${null==e?void 0:e.volume} error=${t&&t.message||t}`;null===(i=this.logger)||void 0===i||i.warn(`${a} error:${t&&t.message||t}`),!e||(null==e?void 0:e.muted)&&!e.volume?this.trigger("AdError",a,Kc):(this.adVolume=0,this.videoSlotCanAutoPlay=!1,e.muted=!0,e.volume=0,null===(r=this.logger)||void 0===r||r.log(`VpaidVideo initAd(). One more try start media with videoSlot.muted=${e.muted} videoSlot.volume=0(${e.volume}) paused=${e.paused}`,1),Au(e),null===(n=null===(o=this.startMediaTag)||void 0===o?void 0:o.call(this,e))||void 0===n||n.then((()=>{this.startedVideoWithoutSound=!0})).catch((t=>{var e;const i=`VpaidVideo initAd(${this}) failed video play error=${t}`;null===(e=this.logger)||void 0===e||e.error(i),this.trigger("AdError",i,Kc)})))}resizeAd(t,e,i){var r;const{videoSlot:o,useExistsVideoSlot:n}=this;if(null===(r=this.logger)||void 0===r||r.trace(`VpaidVideo.resizeAd(${t}, ${e} useExistsVideoSlot=${n}`),n&&o)super.resizeAd(t,e,i);else{const{videoSlot:i,environmentVars:r,mediaFile:o}=this;if(!o)return;const{scalable:n}=o,{forceAspectRatio:a,slot:s}=r||{},l=this.getAdAspectRatio();let d,c=a||o.maintainAspectRatio;if(l&&n&&s){const i=o.width>o.height,r=t>e;let n;if(null===c){const i=o.width/o.height,r=t/e;c=100-100*(r<i?r/i:i/r)>10}!0===c&&(n=t/e<o.width/o.height),!1===c&&(n=t/e>o.width/o.height),i!==r&&(n=!0),r&&!i&&(n=!1),d=n?{width:t,height:t*l}:{height:e,width:e/l}}else d={width:o.width,height:o.height};i&&function(t,e){t&&jd(t,{width:Rd(e.width),height:Rd(e.height)})}(i,d)}return super.resizeAd(t,e,i)}getAdAspectRatio(){const{adWidth:t,adHeight:e,options:i}=this,{width:r,height:o}=i&&i.mediaFile||{};return r&&o?o/r:t&&e?e/t:9/16}}var Ou=function(t,e,i,r){return new(i||(i=Promise))((function(o,n){function a(t){try{l(r.next(t))}catch(t){n(t)}}function s(t){try{l(r.throw(t))}catch(t){n(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))};function Su(t,e){return Ou(this,void 0,void 0,(function*(){(t=Object.assign({},t)).mediaFiles=(t=>Object.keys(t).reduce(((e,i)=>{var r;const o=(null===(r=t[i])||void 0===r?void 0:r.length)?[].concat(t[i]):null;return(null==o?void 0:o.length)&&(t[i]=o.map((t=>{const e=null==t?void 0:t.mediaType;return Object.assign(Object.assign({},t),{mediaType:null!=e?e:i})}))),t}),{}))(t.mediaFiles);const{findMedia:i=(t=>Promise.resolve(t)),logger:r,saveVideoSlotParams:o,createVideoSlot:n,eventBus:a}=e,{duration:s}=t,l=((t,e)=>Object.keys(t).reduce(((i,r)=>{var o;return e&&!e.includes(r)||(null===(o=t[r])||void 0===o?void 0:o.length)&&(i=[...i,...t[r]]),i}),[]))(t.mediaFiles,hu||pu?["video/mp4"]:["video/webm","video/mp4"]);if(!l||!l.length)throw new Error("vpaidVideoCreator did not found appropriate mediaFiles");const d=yield i(l,s,r),c=null==d?void 0:d[0];if(c){null==r||r.log(`vpaidVideoCreator.create() Creative for playing: ${c.src} mediaFile=${JSON.stringify(c)}`,1,"color:green; font-weight:bold;");return{vpaid:new Pu({mediaFile:c,duration:s,saveVideoSlotParams:o,createVideoSlot:n,eventBus:a,logger:r}),mediaFile:c}}return{}}))}function _u(t,e){return e&&t?t.filter((t=>!e(t.src))):t}var Cu=function(t,e,i,r){return new(i||(i=Promise))((function(o,n){function a(t){try{l(r.next(t))}catch(t){n(t)}}function s(t){try{l(r.throw(t))}catch(t){n(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))};var Eu=function(t,e,i,r){return new(i||(i=Promise))((function(o,n){function a(t){try{l(r.next(t))}catch(t){n(t)}}function s(t){try{l(r.throw(t))}catch(t){n(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))};const Du=4e3;function Iu(t,e){return Eu(this,void 0,void 0,(function*(){const{duration:i,maxSizeKBytes:r=Du,logger:o}=e||{};if(!gu||i===1/0||gu&&fu<85)return t;const n=t.map((t=>new Promise((e=>{const{bitrate:n,src:a}=t;if(n&&i){const s=i*parseInt(n,10)/8;null==o||o.log(`filterMediaByWeight() calculated size of media ${a} is ${s} KBytes`);const l=s<r;l||null==o||o.warn(`filterMediaByWeight() media ${a} rejected: media's size ${s} KB exceeds maximum (${r} KB)`),e(l?t:void 0)}else a?(null==o||o.trace(`filterMediaByWeight() requesting size of file ${a}`),function(t,e){return Cu(this,void 0,void 0,(function*(){if(!t)throw new Error(`Invalid url(${t})`);const{body:i,timeout:r=5e3,headers:o={},method:n="GET",credentials:a="include"}=e||{},s=Object.assign(Object.assign({method:n,headers:o,body:i},"none"!==a?{credentials:a}:void 0),null==e?void 0:e.options),l=new AbortController,d=setTimeout((()=>l.abort()),r),c=yield fetch(t,Object.assign(Object.assign({},s),{signal:l.signal}));if(!c.ok)throw new Error(`HTTP error! Status: ${c.status}`);return clearTimeout(d),c}))}(a,{timeout:300,method:"HEAD",credentials:"none"}).then((i=>{if(i.status>400)return e(t);const n=parseFloat(i.headers.get("content-length")||"0")/1024;null==o||o.log(`filterMediaByWeight() got size ${n} KB of file ${a}`);const s=n<r;s||null==o||o.warn(`filterMediaByWeight() media ${a} rejected: media's size ${n} KB exceeds maximum (${r} KB)`),e(s?t:void 0)})).catch((i=>{null==o||o.warn(`filterMediaByWeight() media ${a} rejected with error ${i}`),e(t)}))):(null==o||o.warn("filterMediaByWeight() media rejected: no url"),e(void 0))}))));return Promise.all(n).then((t=>t.filter((t=>t))))}))}function Tu(t,e,i){const{width:r}=t;let o=0;return r&&!t.scalable&&(o=Math.abs(e-r)/e)>(null!=i?i:.1)&&(t=Object.assign(Object.assign({},t),{scalable:!0})),{mediaFile:t,widthDifference:o}}function Vu(t,e){return t.length?t.reduce(((t,i)=>Math.abs(t.width-e)<=Math.abs(i.width-e)?t:i)):void 0}function ku(){ku=function(){return t};var t={},e=Object.prototype,i=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",n=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(t,e,i){return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,i){return t[e]=i}}function l(t,e,i,r){var o=e&&e.prototype instanceof u?e:u,n=Object.create(o.prototype),a=new O(r||[]);return n._invoke=function(t,e,i){var r="suspendedStart";return function(o,n){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw n;return _()}for(i.method=o,i.arg=n;;){var a=i.delegate;if(a){var s=A(a,i);if(s){if(s===c)continue;return s}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===r)throw r="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r="executing";var l=d(t,e,i);if("normal"===l.type){if(r=i.done?"completed":"suspendedYield",l.arg===c)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(r="completed",i.method="throw",i.arg=l.arg)}}}(t,i,a),n}function d(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var c={};function u(){}function h(){}function p(){}var g={};s(g,o,(function(){return this}));var v=Object.getPrototypeOf,f=v&&v(v(S([])));f&&f!==e&&i.call(f,o)&&(g=f);var m=p.prototype=u.prototype=Object.create(g);function b(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function y(t,e){function r(o,n,a,s){var l=d(t[o],t,n);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==typeof u&&i.call(u,"__await")?e.resolve(u.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(u).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,s)}))}s(l.arg)}var o;this._invoke=function(t,i){function n(){return new e((function(e,o){r(t,i,e,o)}))}return o=o?o.then(n,n):n()}}function A(t,e){var i=t.iterator[e.method];if(void 0===i){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,A(t,e),"throw"===e.method))return c;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var r=d(i,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,c;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,c):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,c)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(i.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:_}}function _(){return{value:void 0,done:!0}}return h.prototype=p,s(m,"constructor",p),s(p,"constructor",h),h.displayName=s(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},b(y.prototype),s(y.prototype,n,(function(){return this})),t.AsyncIterator=y,t.async=function(e,i,r,o,n){void 0===n&&(n=Promise);var a=new y(l(e,i,r,o),n);return t.isGeneratorFunction(i)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(m),s(m,a,"Generator"),s(m,o,(function(){return this})),s(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var i in t)e.push(i);return e.reverse(),function i(){for(;e.length;){var r=e.pop();if(r in t)return i.value=r,i.done=!1,i}return i.done=!0,i}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(P),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(i,r){return a.type="throw",a.arg=t,e.next=i,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var n=this.tryEntries[o],a=n.completion;if("root"===n.tryLoc)return r("end");if(n.tryLoc<=this.prev){var s=i.call(n,"catchLoc"),l=i.call(n,"finallyLoc");if(s&&l){if(this.prev<n.catchLoc)return r(n.catchLoc,!0);if(this.prev<n.finallyLoc)return r(n.finallyLoc)}else if(s){if(this.prev<n.catchLoc)return r(n.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return r(n.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var n=o;break}}n&&("break"===t||"continue"===t)&&n.tryLoc<=e&&e<=n.finallyLoc&&(n=null);var a=n?n.completion:{};return a.type=t,a.arg=e,n?(this.method="next",this.next=n.finallyLoc,c):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),P(i),c}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var r=i.completion;if("throw"===r.type){var o=r.arg;P(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,i){return this.delegate={iterator:S(t),resultName:e,nextLoc:i},"next"===this.method&&(this.arg=void 0),c}},t}function xu(t,e,i,r,o,n,a){try{var s=t[n](a),l=s.value}catch(t){return void i(t)}s.done?e(l):Promise.resolve(l).then(r,o)}function ju(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function Ru(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ju(Object(i),!0).forEach((function(e){Mu(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ju(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Mu(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Nu(t,e){return Nu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Nu(t,e)}var Lu="VpaidVideo",Fu={startTime:0},Wu=function(t){var i,r;function a(e){var i,r,a,s;void 0===e&&(e={});var l=(null===(i=e)||void 0===i?void 0:i.log)||o.ZP;(l=(null===(r=l)||void 0===r||null===(a=r.getChildWriter)||void 0===a?void 0:a.call(r,Lu))||l).trace("VpaidVideo.constructor()"),s=t.call(this,Ru(Ru(Ru({},Fu),e),{},{ancestor:Lu,logger:l}))||this;var d=e,c=d.mp4media,u=d.mp4media,h=u.width,p=u.height;s.adWidth=h,s.adHeight=p,s.media=c,s.startedVideotWithoutSound=null,s.startVideoWithSoundFailed=null,s.setAdVolumeCounter=0;var g=new n.BH;return s.playerSuccessfullyStartedPromise=g.promise,s.playerSuccessfullyStartedResolve=g.resolve,s}r=t,(i=a).prototype=Object.create(r.prototype),i.prototype.constructor=i,Nu(i,r);var s=a.prototype;return s.initAd=function(i,r,o,a,s,l){var d,c=this;void 0===s&&(s={}),void 0===l&&(l={}),t.prototype.initAd.call(this,i,r,o,a,s,l);var u=l.videoSlotCanAutoPlay||s.videoSlotCanAutoPlay;this.videoSlotCanAutoPlay=u,"true"===u||"1"===u?this.videoSlotCanAutoPlay=!0:"false"!==u&&"false"!==u||(this.videoSlotCanAutoPlay=!1),d=this.videoSlot=l.videoSlot,this.slot=l.slot,this.logger.trace("VpaidVideo.initAd() environmentVars.videoSlot="+l.videoSlot+" videoSlotCanAutoPlay is "+this.videoSlotCanAutoPlay+" useExistsVideoSlot="+this.useExistsVideoSlot+" videoSlot="+this.videoSlot,2);return new Promise((function(o,a){(0,e.Re)(l.videoSlot,"video")&&(d=l.videoSlot,c.logger.track("VpaidVideo.initAd() Using environmentVars.videoSlot, videoSlotCanAutoPlay is "+c.videoSlotCanAutoPlay)),function(t,o){var n,a;void 0===t&&(t=c.videoSlot),void 0===o&&(o=!1),c.logger.trace("VpaidVideo.initAd.videoStart()",2),null===(n=c.options)||void 0===n||null===(a=n.saveVideoSlotParams)||void 0===a||a.call(n,t),(0,e.Zs)(t,{width:i+"px",height:r+"px"}),t.src=c.options.mp4media.src,(0,e.Zs)(t,{display:o?"hidden":""}),t.load()}(d=c._createVideoSlot(d),!0);var s=(0,e.VB)(d);if(s){var u=c._addDOMEventListener(d,"error",(function(t){var e=Gu(t),i=e.code,r=e.message,o=Error(r);o.code=i,a(o)})),h=function(){return s.then((function(){d.pause(),c.startedVideotWithoutSound=d.muted;var e=c.getAdVolume();t.prototype.setAdVolume.call(c,e,{forceTrigger:!0}),u&&c._removeDOMEventListener(d,"error",u),u=null,c._addDOMEventListener(d,"error",Xu.bind(c)),c.logger.log("VpaidVideo initAd() video.play() startPromise() video has been started successfully. Set it in pause. videoSlot.muted="+d.muted+" videoSlot.volume="+d.volume+" super.setAdVolume("+e+")",2,"green"),c.playerSuccessfullyStartedResolve(d),o(c)}))};c.logger.trace("VpaidVideo initAd() video.play() return promise"),h().catch((function(t){c.startedVideotWithoutSound=null,c.startVideoWithSoundFailed=!0;var i="VpaidVideo initAd("+c+") failed video play with videoSlot.muted="+d.muted+" videoSlot.volume="+d.volume+" error="+(t&&t.message||t);c.logger.warn(i+" error:"+(t&&t.message||t)),!d.muted||d.volume?(c.adVolume=0,c.videoSlotCanAutoPlay=!1,d.muted=!0,d.volume=0,c.logger.log("VpaidVideo initAd(). One more try start media with videoSlot.muted="+d.muted+" videoSlot.volume=0("+d.volume+") paused="+d.paused,1),s=(0,e.VB)(d),h().then((function(){c.startedVideotWithoutSound=!0})).catch((function(t){var e="VpaidVideo initAd("+c+") failed video play err="+t;c.logger.error(e),a(qc.clone(t,e,Kc))}))):a((0,n.Ku)(t,i,Jc))}))}else if(void 0===s)if(c.logger.warn("VpaidVideo initAd() video.play() do not return promise"),d.paused){var p="failed video autoplay";c.logger.error("VpaidVideo initAd() "+p);var g=Error(""+p);g.code=Kc,a(g)}else c.logger.log("VpaidVideo initAd() video autoplay started",1),o(c);else c.logger.error("VpaidVideo initAd() element is neither video nor audio tag"),a()}))},s._createVideoSlot=function(t){if(void 0===t&&(t=null),!this.options)return null;var i=this.slot,r=this.options,o=r.createVideoSlot,n=r.startTime;if(!t){var a=o(i);(t=null==a?void 0:a.getControlNode()).muted=!1===this.videoSlotCanAutoPlay||!this.adVolume,t.currentTime=n,t.volume=t.muted?0:this.adVolume,t.playsInline=!0,(0,e.Zs)(t,{width:"100%",display:"none"}),this.logger.trace("VpaidVideo._createVideoSlot, videoSlotCanAutoPlay is "+this.videoSlotCanAutoPlay)}return this._addDOMEventListener(t,"loadedmetadata",zu.bind(this)),this._addDOMEventListener(t,"loadeddata",Uu.bind(this)),this._addDOMEventListener(t,"durationchange",Bu.bind(this)),this._addDOMEventListener(t,"play",Zu.bind(this)),this._addDOMEventListener(t,"volumechange",qu.bind(this)),this._addDOMEventListener(i||t,"click",Qu.bind(this)),this.videoSlot=t,this.logger.log("VpaidVideo._createVideoSlot, videoSlot.muted="+t.muted),t},s.resizeAd=function(i,r,o){var a=this.videoSlot,s=this.useExistsVideoSlot,l=this.saveVideoSlotParams;if(this.logger.trace("VpaidVideo.resizeAd("+i+", "+r+" useExistsVideoSlot="+s),s)null==l||l(a),(0,e.Zs)(a,{width:i+"px",height:r+"px"});else{var d,c=this.videoSlot,u=this.environmentVars,h=this.options.mp4media,p=h.scalable,g=u||{},v=g.forceAspectRatio,f=g.slot,m=this.getAdAspectRatio(),b=v||h.maintainAspectRatio;if(m&&p&&f){var y,A=h.width>h.height,w=i>r;if(null===b){var P=h.width/h.height,O=i/r;b=100-100*(O<P?O/P:P/O)>10}!0===b&&(y=i/r<h.width/h.height),!1===b&&(y=i/r>h.width/h.height),A!==w&&(y=!0),w&&!A&&(y=!1),d=y?{width:i,height:i*m}:{height:r,width:r/m}}else d={width:h.width,height:h.height};this.logger.none("VpaidVideo.resizeAd() adWidth="+i+" adHeight="+r+" newVideoSlotSize="+JSON.stringify(d)+" adAspectRatio="+m,2,"blue"),(0,n.dN)(c,d)}return t.prototype.resizeAd.call(this,i,r,o)},s.activateMuteChangingEnable=function(){var t=this.videoSlot;t&&(t.wasClicked=!0)},s.startAd=function(){var i=this;this.logger.log("VpaidVideo startAd()",2,"blue"),this.playerSuccessfullyStartedPromise.then((function(){var r=i.videoSlot,o=(i.options||{}).startTime;i.logger.log("VpaidVideo startAd() playerSuccessfullyStartedPromise.then videoSlot.readyState="+(r&&r.readyState),2,"blue"),(4!==r.readyState&&(0,e.Re)(r,void 0===r.readyState)?new Promise((function(t){i.logger.trace("VpaidVideo startAd() video has not been downloaded yet: readyState="+r.readyState+". Waiting when will be ready.",1,"blue");r.addEventListener("canplaythrough",(function e(){r.removeEventListener("canplaythrough",e),i.logger.trace("VpaidVideo startAd() video has been downloaded: readyState="+r.readyState+".",2),t($u.call(i,r))}))})):$u.call(i,r)).then((function(){r.currentTime=o,(0,e.Zs)(r,{display:""}),i.logger.trace("VpaidVideo startAd() playPromise.then() calling super.startAd() .",1,"blue"),i._addDOMEventListener(r,"timeupdate",Zu.bind(i)),t.prototype.startAd.call(i)}))}))},s.stopAd=function(){return Hu.call(this),t.prototype.stopAd.call(this)},s.pauseAd=function(){return Hu.call(this),t.prototype.pauseAd.call(this)},s.resumeAd=function(){var i=this.videoSlot;return i&&(0,e.VB)(i),t.prototype.resumeAd.call(this)},s.expandAd=function(){this.trigger("AdError","Not supported",Yc)},s.collapseAd=function(){this.trigger("AdError","Not supported",Yc)},s.skipAd=function(){return Hu.call(this),t.prototype.skipAd.call(this)},s.setAdVolume=function(e,i){var r=this.videoSlot;return r&&(this.logger.trace("VpaidVideo setAdVolume("+e+") videoSlot.muted="+r.muted+" startedVideoWithoutSound="+this.startedVideotWithoutSound+" startVideoWithSoundFailed="+this.startVideoWithSoundFailed+" safari="+x.a1+" "),r.volume=e,r.muted&&e?r.paused||0!==r.currentTime?(!1===this.startedVideotWithoutSound||r.paused||r.currentTime>0)&&(r.muted=!1):r.muted=!1:r.muted||e||(r.muted=!0)),t.prototype.setAdVolume.call(this,e,i)},s.getAdVolume=function(){var e=this.videoSlot;return e&&(this.adVolume=x.vF||x.a1?e.muted?0:1:void 0!==e.volume?e.volume:0),t.prototype.getAdVolume.call(this)},s.getAdRemainingTime=function(){var t=this.videoSlot;return t?t.duration-t.currentTime:0},s.getAdAspectRatio=function(){var t=this.adWidth,e=this.adHeight,i=this.options,r=i&&i.mp4media||{},o=r.width,n=r.height;return o&&n?n/o:t&&e?e/t:9/16},s._destroy=function(){this.logger.trace("VpaidVideo.destroy()");var i=this._createdVideoSlot;i&&(0,e.Re)(i)&&(0,e.GA)(i),t.prototype._destroy.call(this)},a.create=function(t,e){e.playOnlyMpg;var i=e.shouldCheckMediaWeight,r=void 0===i||i,o=e.log,n=e.API,a=n.getViewportWidth,s=n.isMediaUrlBlocked,l=n.setSelectedCreative,d=n.saveVideoSlotParams,c=n.createVideoSlot;return new Promise((function(e,i){var n=function(){var e,i=(e=ku().mark((function e(i,n,d){var c,u;return ku().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=(null==a?void 0:a())||0,u=_u(i,s),e.abrupt("return",(r?Iu(u,{duration:n,logger:d}):Promise.resolve(u)).then((function(e){var i=Tu(Vu(e,c),c),r=i.mediaFile,n=i.widthDifference;n>0&&(null==o||o.trace("VpaidVideo difference between viewportWidth && mediaWidth more than 10% ("+n+"). Set media.scalable = true"));var a=t.rawDuration;return null==l||l(null==r?void 0:r.src,a),[r]})));case 3:case"end":return e.stop()}}),e)})),function(){var t=this,i=arguments;return new Promise((function(r,o){var n=e.apply(t,i);function a(t){xu(n,r,o,a,s,"next",t)}function s(t){xu(n,r,o,a,s,"throw",t)}a(void 0)}))});return function(t,e,r){return i.apply(this,arguments)}}();return Su(t,{findMedia:n,saveVideoSlotParams:d,createVideoSlot:c,logger:o}).then((function(t){e(null==t?void 0:t.vpaid)})).catch((function(t){null==o||o.warn("VpaidVideo error: "+t),i()}))}))},a}(Qc);function Hu(){var t=this.videoSlot;t&&t.pause()}function Uu(t){var e=t.target;this.hasAudio=(0,n.wf)(e),this.trigger("AdLoadedVideoData")}function zu(t){var e=t.target,i=e.videoWidth,r=e.videoHeight,o=e.duration;this.logger.trace("VpaidVideo @loadedmetadata"),this.adWidth&&this.adHeight||(this.logger.trace("VpaidVideo @loadedmetadata Updating ad dimensions ("+i+":"+r+")"),this.adWidth=i,this.adHeight=r),this.adDuration=o,this.trigger("AdLoaded")}function Bu(t){var e=t.target.duration;isNaN(e)?this.logger.trace("VpaidVideo.onDurationChange() duration="+e+". video is not ready yet."):(this.adDuration=e,this.trigger("AdDurationChange"))}function Zu(t){var e=t.target,i=e.duration,r=e.currentTime;if(isNaN(i))this.logger.trace("VpaidVideo.onDurationChange() duration="+i+". video is not ready yet.");else{this.adDuration=i;var o=this.adRemainingTime,n=this.options.startTime;o||r===n||(r=n);var a=(1e3*(i-Math.min(r,i))^0)/1e3;a!==o&&(this.adRemainingTime=a,i=(1e3*i^0)/1e3,this.trigger("AdRemainingTimeChange"),a<i&&o===i&&(this.logger.log("VpaidVideo.onTimeUpdate() trigger AdImpression and AdVideoStart",1),this.trigger("AdImpression"),this.trigger("AdVideoStart")),a<.75*i&&o>=.75*i&&this.trigger("AdVideoFirstQuartile"),a<.5*i&&o>=.5*i&&this.trigger("AdVideoMidpoint"),a<.25*i&&o>=.25*i&&this.trigger("AdVideoThirdQuartile"),0===a&&o>0&&this.trigger("AdVideoComplete"))}}function qu(t){var e=t.target;this.adVolume=e.volume,this.trigger("AdVolumeChange")}function Xu(t){var e=Gu(t),i=e.code,r=e.message;this.trigger("AdError",r,i)}function Gu(t){t.preventDefault();var e=t.currentTarget&&t.currentTarget.currentSrc,i=t.target&&t.target.error;return{code:i&&i.code>=1&&i.code<=3?$c:Jc,message:(i&&i.message||"Load error ")+(e?" source="+e:"")}}function Qu(t){t.preventDefault(),this.trigger("AdClickThru","",0,!0)}function $u(t){var e=this;return t.play().then((function(t){return e.logger.log("VpaidVideo.startAd() play() successfully."),t})).catch((function(i){return e.logger.warn("VpaidVideo.startAd() play() catch error="+i+". Try start play one time."),t.play().catch((function(t){var i="VpaidVideo playVideo("+e+") failed video autoplay";throw(0,n.Ku)(t,i,Kc)}))}))}function Ju(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function Yu(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Ju(Object(i),!0).forEach((function(e){Ku(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Ju(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Ku(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var th,eh=function(){function t(){}return t.create=function(t,e){var i,r,n,a=e&&e.getAPI&&e.getAPI()||{},s=a.logger||o.ZP,l=(null==s||null===(i=s.getChildWriter)||void 0===i?void 0:i.call(s,"::VpaidVideo"))||s,d=a.getControlUnionData,c=!!((null==d?void 0:d("vnCache"))||{strict:!1}).strict,u=!1!==(null==d||null===(r=d("vnHeavyAdIntervention"))||void 0===r?void 0:r.check),h=e.format&&e.format._getModuleDimensions&&function(){return e.format._getModuleDimensions().viewportWidth},p=e.isMediaUrlBlocked.bind(e),g=e.setSelectedCreative.bind(e),v=null==a?void 0:a.saveVideoSlotParams,f=Object.entries(null===(n=t)||void 0===n?void 0:n.mediaFiles).reduce((function(t,e){var i=e[0],r=e[1];return r&&(t[i]=Array.isArray(r)?r:[r]),t}),{});return f&&(t=Yu(Yu({},t),{},{mediaFiles:f})),Wu.create(t,{playOnlyMpg:c,shouldCheckMediaWeight:u,log:l,API:{getViewportWidth:h,isMediaUrlBlocked:p,setSelectedCreative:g,saveVideoSlotParams:v,createVideoSlot:function(t){return new Wd(e,t).getSlotNode()}}})},t}();function ih(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function rh(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ih(Object(i),!0).forEach((function(e){oh(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ih(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function oh(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function nh(t,e){return nh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},nh(t,e)}var ah="::ManualCountdown",sh=(null===o.ZP||void 0===o.ZP||null===(th=o.ZP.getChildWriter)||void 0===th?void 0:th.call(o.ZP,ah))||o.ZP,lh={increasePieceOfTime:1e3},dh=function(t){var e,i;function r(e){var i;return void 0===e&&(e={}),(i=t.call(this,rh(rh(rh({},lh),e),{},{tickHandler:ch}))||this).logger=e&&(e.logger||e.module&&e.module.logger||e.moduleAPI&&e.moduleAPI.logger)||sh,i.logger.log("::ManualCountdown"),i}return i=t,(e=r).prototype=Object.create(i.prototype),e.prototype.constructor=e,nh(e,i),r.prototype.start=function(){var e=this.getAdDuration(),i=this.getAdElapsedTime();!e||void 0!==i&&i>e||t.prototype.start.call(this)},r}(Ni);function ch(t){var e=t.elapsedTime,i=t.remainingTime,r=t.adRemainingTime,o=t.duration;if(this._trigger("AdDurationChange"),i<.75*o&&r>=.75*o&&this._trigger("AdVideoFirstQuartile"),i<.5*o&&r>=.5*o&&this._trigger("AdVideoMidpoint"),i<.25*o&&r>=.25*o&&this._trigger("AdVideoThirdQuartile"),i<=0&&r>0)return this.stop(),void this._trigger("AdVideoComplete");e>o&&(this.stop(),this._trigger("AdVideoComplete"))}function uh(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function hh(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?uh(Object(i),!0).forEach((function(e){ph(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):uh(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function ph(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function gh(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function vh(t,e){return vh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},vh(t,e)}var fh="VpaidProxy",mh="AD_DURATION_TIMER_ID",bh=function(t){var e,i;function r(e){var i,r;void 0===e&&(e={});var n=e&&e.ancestor&&e.ancestor+":"+fh||"::VpaidProxy",a=e&&(e.logger||e.module&&e.module.logger||e.moduleAPI&&e.moduleAPI.logger)||o.ZP,s=(null==a||null===(i=a.getChildWriter)||void 0===i?void 0:i.call(a,fh))||a;return(r=t.call(this,hh(hh({},e),{},{ancestor:n,logger:s}))||this).VpaidProxy=n,r.lastPendingCommands={},r._adWasLoaded=!1,r._countdown=null,r.fixedAdHeight=null,r}i=t,(e=r).prototype=Object.create(i.prototype),e.prototype.constructor=e,vh(e,i);var n,a,s,l=r.prototype;return l.getAdLinear=function(){return b(this.vpaid)?this.vpaid.getAdLinear():this.adLinear},l.getAdWidth=function(){return b(this.vpaid)?this.vpaid.getAdWidth():this.adWidth},l.getAdHeight=function(){return b(this.vpaid)?this.vpaid.getAdHeight():this.adHeight},l.getAdAspectRatio=function(){return b(this.vpaid)&&this.vpaid.getAdAspectRatio?this.vpaid.getAdAspectRatio():t.prototype.getAdAspectRatio.call(this)},l.getAdExpanded=function(){return b(this.vpaid)?this.vpaid.getAdExpanded():this.adExpanded},l.getAdSkippableState=function(){return b(this.vpaid)?this.vpaid.getAdSkippableState():this.adSkippableState},l.getAdRemainingTime=function(){var t=this._countdown,e=this.vpaid;return t?t.getAdRemainingTime():b(e)&&e.getAdRemainingTime()||this.adRemainingTime},l.getAdDuration=function(){var t=this.vpaid,e=this._countdown;this._checkingBanner;if(e)return e.getAdDuration();if(!this._countdown&&b(t)){var i=t.getAdDuration();i>0&&(this.adDuration=i)}return this.adDuration},l.getAdElapsedTime=function(){var e=this.vpaid;return b(e)&&e.getAdElapsedTime?e.getAdElapsedTime():t.prototype.getAdElapsedTime.call(this)},l.getAdVolume=function(){return b(this.vpaid)?this.vpaid.getAdVolume():this.adVolume},l.getAdCompanions=function(){return b(this.vpaid)?this.vpaid.getAdCompanions():this.adCompanions},l.getAdIcons=function(){return b(this.vpaid)?this.vpaid.getAdIcons():this.adIcons},l.handshakeVersion=function(t){return b(this.vpaid)?this.vpaid.handshakeVersion(t):t},l.initAd=function(t,e,i,r,o,n){this.trigger("AdError","Abstract method call",w.GENERAL_VPAID_ERROR)},l.resizeAd=function(t,e,i){void 0===i&&(i=this.viewMode),this.logger.trace(this.VpaidProxy+".resizeAd("+t+", "+e+")"),this.fixedAdHeight?(this.logger.log(this.VpaidProxy+".resizeAd("+t+", "+e+") adHeight("+this.fixedAdHeight+") is fixed, so it was not changed"),e=this.adHeight=this.fixedAdHeight):this.adHeight=e,this.adWidth=t,this.viewMode=i,this._adWasLoaded&&b(this.vpaid)?(delete this.lastPendingCommands.resizeAd,this.vpaid.resizeAd(t,e,i),this.logger.log(this.VpaidProxy+".resizeAd("+t+", "+e+", "+i+") executes IMMEDIATELY and clears pending command")):(this.lastPendingCommands.resizeAd=this.resizeAd.bind(this,t,e,i),this.logger.log(this.VpaidProxy+".resizeAd("+t+", "+e+", "+i+") as pending command ("+this.lastPendingCommands.resizeAd+")"))},l.startAd=function(){try{var t=this.vpaid,e=this._countdown;if(b(t))return e&&e.start(),t.startAd()}catch(t){this.trigger("AdError",""+t,w.GENERAL_VPAID_ERROR)}return!1},l.stopAd=function(){var t=this._countdown,e=this.vpaid;b(e)&&(t&&t.stop(),e.stopAd())},l.pauseAd=function(){var t=this._countdown,e=this.vpaid;b(e)&&(t&&t.stop(),e.pauseAd())},l.resumeAd=function(){var t=this._countdown,e=this.vpaid;b(e)&&(t&&t.start(),e.resumeAd())},l.expandAd=function(){return b(this.vpaid)&&this.vpaid.expandAd()},l.collapseAd=function(){return b(this.vpaid)&&this.vpaid.collapseAd()},l.skipAd=function(){var t=this._countdown,e=this.vpaid;b(e)&&(t&&t.stop(),e.skipAd())},l.stopCountdown=function(){var t=this._countdown;t&&t.stop()},l.setAdVolume=function(t,e){if(this._adWasLoaded&&b(this.vpaid)){delete this.lastPendingCommands.setAdVolume;var i=this.VpaidProxy+".setAdVolume("+t+") executes IMMEDIATELY and clears pending command";return(0===t||1===t?this.logger.log:this.logger.trace)(i),b(this.vpaid)&&(this.adVolume=t,1)&&this.vpaid.setAdVolume(t,e)}this.lastPendingCommands.setAdVolume=this.setAdVolume.bind(this,t,e),this.logger.log(this.VpaidProxy+".setAdVolume("+t+") as pending command ("+this.lastPendingCommands.setAdVolume+")")},l.onAdLoaded=function(){var t=this,e=this.vpaid,i=this._countdown,r=this._checkingBanner;if(this._addVPAIDEventListener(e,"AdDurationChange",Ph.bind(this)),!i&&!r&&b(e)){this._checkingBanner=!0;var o=e.getAdDuration();o<0?(this.logger.warn(this.VpaidProxy+".getAdDuration() duration="+o+". May be vpaid is a banner."),this._addTimeout(mh,(function(){yh.call(t,o)}),500),this._addVPAIDEventListener(e,"AdDurationChange",wh.bind(this))):this.adDuration=o}},l._destroy=function(){t.prototype._destroy.call(this),this.lastPendingCommands={};var e=this.vpaid;if(e&&"function"==typeof e._destroy)try{e._destroy()}catch(t){this.logger.warn(this.VpaidProxy+"._destroy() vpaid._destroy() error: "+(t&&(t.message||t)))}this.vpaid=null},l.getDebugInfo=function(){var t=this,e=this.vpaid;return(e&&Promise.resolve(e)||this.vpaidLoadPromise).then((function(t){return t&&t.getDebugInfo?t.getDebugInfo():Promise.resolve({})})).then((function(e){return{proxyOptions:t.options,options:e.options||{}}}))},l.getAdIframes=function(){var e=this.vpaid;return b(e)&&e.getAdIframes?e.getAdIframes():t.prototype.getAdIframes.call(this)},l.getModuleOptions=function(){return Promise.resolve({})},n=r,(a=[{key:"viewableImpressionWaitingInterval",get:function(){return b(this.vpaid)?this.vpaid.viewableImpressionWaitingInterval:void 0}}])&&gh(n.prototype,a),s&&gh(n,s),Object.defineProperty(n,"prototype",{writable:!1}),r}(v);function yh(t){var e=this,i=this.VpaidProxy+".getAdDuration() vpaid.getAdDuration() return "+t+". Switched to manual countdown",r=this.adDuration;isNaN(r)||r<=0?(i=i+".\n    Can not get duration from VAST, so set countdownDuration="+(r=1/0)+" sec,",this.trigger("vnManualCountdownCreated",{duration:r})):i=i+" with countdownDuration="+r+" sec.",this.logger.log(i,2,"green"),this._countdown=new dh({duration:r,VPAID_API:{trigger:this.trigger.bind(this)},logger:this.logger});var o=(this.options||{}).moduleAPI||{},n=o.inState,a=o.addVPAIDEventListener,s=n&&n(["playing"]),l=n&&n(["started","starting"]);return s||l?(this._countdown.start(),!s&&this.trigger("AdVideoStart")):a("AdStarted",(function(){return e.trigger("AdVideoStart")}),this),this.adDuration=r===1/0||r<=0?-2:r,this.logger.log(this.VpaidProxy+".createManualCountdown() setting adDuration="+this.adDuration,2),this.adDuration}function Ah(){this._countdown&&(this._countdown._destroy(),this._countdown=null)}function wh(){var t,e=this.vpaid,i=this._countdown;if(e&&(t=e.getAdDuration())>=0){if(this._removeTimeout(mh),i){Ah.call(this);var r=this.VpaidProxy+".adDurationChangingCheck() got @AdDurationChange. duration="+t+". Creating the ManualCountdown was canceled.";this.logger.log(r,1,"green")}this.adDuration!==t&&(this.adDuration=t,this.trigger("AdDurationChange"))}var o=!e||null==t||t<0;if(o){var n=this.VpaidProxy+".adDurationChangingCheck() duration="+t+". Need more checks.";this.logger.trace(n,1,"pink")}return o}function Ph(){var t,e=this.vpaid;e&&this.logger.trace("@AdDurationChange vpaid.getAdDuration="+(null==e||null===(t=e.getAdDuration)||void 0===t?void 0:t.call(e)))}function Oh(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function Sh(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Oh(Object(i),!0).forEach((function(e){_h(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Oh(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function _h(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Ch(t){void 0===t&&(t={}),this.savedOptions||(this.savedOptions=Sh({},this.options)),this.options=Sh(Sh({},this.savedOptions),t),Dh.call(this)}function Eh(t){var e=this;this.logger.trace(".updateOptionsFromVpaid options="+JSON.stringify(t,null,"\t")+" vpaid="+this.vpaid),t.format&&(this.format&&this.format.updateOptions&&this.format.updateOptions(t.format),delete t.format);var i=function(t,i){t&&t.forEach((function(t){return t&&e.destroyControl(t)})),i&&i.forEach((function(t){var i=t.name,r=t.action,o=e.getControlNode(i);o&&r&&r(o,e)}))},r=this.options,o=r.controlsActions;if(i(r.destroyControls,o),t){var n=t.controlsActions;i(t.destroyControls,n),delete t.controlsActions,delete t.destroyControls;var a=(t||{}).forceStartingVolume;if(void 0!==a)this.setAdVolume(a);else if("startingVolume"in t){var s=t.startingVolume;0!==s&&!s||s===this.adVolume||this.setAdVolume(s)}}Dh.call(this)}function Dh(){var t=this.options,e=t||{},i=e.maxAds,r=e.forceStartingVolume,o=(t||{}).startingVolume,a=!1!==this.options.isInsideTextContent;this.options.disableHoverAudio=void 0!==this.options.disableHoverAudio?this.options.disableHoverAudio:a,this.options.triggerAdStoppedAfterAdSkipped=(0,n.MV)(this.options.triggerAdStoppedAfterAdSkipped),this.options.canExecuteNoAd=(0,n.MV)(this.options.canExecuteNoAd),o=this.options.startingVolume=void 0!==r?r:void 0!==o?o:a?0:1;var s="";try{s=JSON.stringify(this.options,(function(t,e){return"logger"!==t?e:void 0}))}catch(t){}this.logger.trace(" applyOptions() isInsideTextContent="+a+" disableHoverAudio="+this.options.disableHoverAudio+" startingVolume="+o+" options="+s),this._adsLeft=i,this.adVolume=o,this.options.listenWindowMessages&&!this._messagesListener&&la.call(this)}function Ih(){var t=(0,d.en)((0,n.k$)(window,document))||{},e=t.startAdTimeout,i=t.vpaidInitAdTimeout,o=t.dataRequestTimeout,a=t.triggerAdStoppedAfterAdSkipped,s=t.timeout,l=t.disableSmoothVolumeChange,c=t.viqeoStarterUrl,u=t.mainContainerIsIframe,h=t.iframeRemoveDelay,p=t.forceStartingVolume,g=t.vn_show_containers,v=t.vn_flyroll_trace,f=t.vn_intersections_trace,m=t.vn_data_url;e&&(this.options.startAdTimeout=e),i&&(this.options.vpaidInitAdTimeout=i),o&&(this.options.dataRequestTimeout=o),c&&(this.options.viqeoStarterUrl=c),s&&(this.options.timeout=s),a&&(this.options.triggerAdStoppedAfterAdSkipped=a),null!==l&&(this.options.disableSmoothVolumeChange=(0,n.MV)(l)),void 0!==u&&(this.options.mainContainerIsIframe=(0,n.MV)(u)),void 0!==h&&(this.options.iframeRemoveDelay=h),void 0!==p&&(this.options.forceStartingVolume=parseFloat(p)),void 0!==g&&(0,r.RY)("show.containers",(0,n.MV)(g)),void 0!==v&&(0,r.RY)("flyroll.trace",(0,n.MV)(v)),void 0!==f&&(0,r.RY)("intersections.trace",(0,n.MV)(f)),void 0!==m&&(0,r.qd)("dataUrl",m)}function Th(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function Vh(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Th(Object(i),!0).forEach((function(e){kh(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Th(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function kh(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function xh(t,e){return xh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},xh(t,e)}var jh="VpaidJs",Rh=function(t){var i,a;function s(e){var i,r;void 0===e&&(e={});var a=e&&e.ancestor&&e.ancestor+":"+jh||"::VpaidJs",s=e&&(e.logger||e.module&&e.module.logger||e.moduleAPI&&e.moduleAPI.logger)||o.ZP;((null==s||null===(i=s.getChildWriter)||void 0===i?void 0:i.call(s,jh))||s).trace(a+".constructor()"),(r=t.call(this,Vh(Vh({},e),{},{ancestor:a}))||this).VpaidJs=a;var l=e,d=l.jsmedia,c=l.jsmedia,u=c.width,h=c.height,p=c.duration;r.adDuration=p||0,r.adWidth=u,r.adHeight=h,!u&&h>0&&(r.fixedAdHeight=h),r.wasClicked=!1,r.media=d,r.name=jh;var g=new n.BH;r.vpaidLoadPromise=g.promise,r.vpaidLoadResolve=g.resolve;var v=new n.BH;return r._videoStartedPromise=v.promise,r._videoStartedResolve=v.resolve,r.observer=null,r.vpaidEventListeners={},r}a=t,(i=s).prototype=Object.create(a.prototype),i.prototype.constructor=i,xh(i,a);var l=s.prototype;return l.toString=function(){return jh},l.initAd=function(t,i,r,o,n,a){var s=this;void 0===n&&(n={}),void 0===a&&(a={}),this.logger.log(this.VpaidJs+".initAd()");var l=this.options||{},d=l.module,c=l.ancestor,u=l.moduleAPI,h=l.isVpaidProvider,p=(u||{}).getMainModuleId,g=this.media;return new Promise((function(l,v){h&&Hh.forEach((function(t){var e=t[0],i=t[1];(window[e]||(window[e]=[])).push(window[i])}));var f=n.AdParameters,m=a.iframe,y=s.options.jsmedia,A=m&&m.contentWindow;if(A&&s.logger.trace(s.VpaidJs+".initAd() getVPAIDAd will be created inside the main iframe created by the vn_module."),!A&&m&&"DIV"===m.tagName){var P=(0,e.rS)(document,m.closest("body"));P&&P.length&&(A=P.pop().contentWindow,s.logger.trace(s.VpaidJs+".initAd() getVPAIDAd will be created inside the iframe received form viqeo."))}A||s.logger.trace(s.VpaidJs+".initAd() getVPAIDAd will be created inside the current window."),A||(A=window);var O=A.document,S=O.body,_=O.createElement("script");_.src=y.src,s._addDOMEventListener(_,"load",(function(){s.logger.log(s.VpaidJs+'.initAd() Successfully load "'+y.src+'"');var e=A,h=e.getVPAIDAd,m=e.getVnVPAIDAdProvider;if("function"!=typeof m&&"function"!=typeof h){var P="External script did not provide valid getVnVPAIDAdProvider() method ("+m+")";return s.logger.warn(s.VpaidJs+".initAd() "+P),(M=Error(P)).code=w.VPAID_JS_ERROR,void v(M)}var O=p?"("+p()+"):"+jh:c,S=u&&Vh({},u)||{};delete S.logger;var _={duration:s.adDuration,logger:s.logger,ancestor:O,moduleAPI:S,media:g};try{var C,E=f,D=null==S||null===(C=S.getControlUnionData)||void 0===C?void 0:C.call(S,"vnAdParametersReplace","mode");if("deprecated"===D)E=f.replace(/\n+/g," ");else if("replace"===D){var I=new RegExp('(?:"\\w*":\\s*)"(.*?)(?<!\\\\)"',"gs");E=f.replace(I,(function(t){return t&&t.length?t.replace(/(?:\r\n|\r|\n)/g,"\\n"):""}))}else E=f;var T=JSON.parse(E);T.vnVpaidProvider&&(_.vnVpaidProvider=T.vnVpaidProvider)}catch(t){s.logger.warn(s.VpaidJs+".initAd() JSON.parse(AdParameters) throws exception: "+t.message);try{s.logger.warn(s.VpaidJs+".initAd() trying parse with vnAdParametersReplace:replace mode");var V=new RegExp('(?:"\\w*":\\s*)"(.*?)(?<!\\\\)"',"gs"),k=JSON.parse(f.replace(V,(function(t){return t&&t.length?t.replace(/(?:\r\n|\r|\n)/g,"\\n"):""})));k.vnVpaidProvider&&(_.vnVpaidProvider=k.vnVpaidProvider)}catch(t){s.logger.error(s.VpaidJs+".initAd() JSON.parse(AdParameters) with vnAdParametersReplace:replace mode replaces throws exception: "+t.message)}}var x=(d||{}).logLevel;x&&(_.logLevel=x);var j=(_||{}).vnVpaidProvider,R=s.vpaid=m&&j?m(_):h(_);if(!b(R)){var M;P="External script returned invalid VPAID instance ("+R+")";return s.logger.warn(s.VpaidJs+".initAd() "+P),(M=Error(P)).code=w.VPAID_JS_ERROR,void v(M)}s.logger.log(s.VpaidJs+".initAd() Successfully retrieved VPAID instance by getVPAIDAd()"),s.vpaidLoadResolve(R);var L,F=s.videoSlot=Mh.call(s,d,a.videoSlot,t,i);d.getControlNode("videoSlot")||d.setControlData("videoSlot",((L={node:F})[N.Os]="solid",L));F&&F.parentElement&&d.setControlData("videoSlotParent",{node:F.parentElement}),Nh.call(s,R,F);try{var W=d.maxSkipTime;n&&n.AdParameters&&n.AdParameters.replace&&(n.AdParameters=n.AdParameters.replace("[MAXSKIPTIME]",W||"")),R.initAd(t,i,r,o,n,Vh(Vh({},a),{},{videoSlot:F})),~R.toString().indexOf("Module")&&Ch.call(R,{isInsideTextContent:!0}),l(s)}catch(t){s.logger.warn(s.VpaidJs+".initAd() Internal error "+t);var H=Error("Internal VpaidJs error ("+t+") stack:"+t.stack);H.code=w.VPAID_JS_ERROR,v(H)}})),s._addDOMEventListener(_,"error",(function(){var t="Error loading external script ("+_.src+")";s.logger.warn(s.VpaidJs+".initAd() ("+t+")");var e=Error(t);e.code=w.VPAID_JS_ERROR,v(e)})),S&&S.appendChild(_)}))},l.getMediaInfo=function(){var e=this;return t.prototype.getMediaInfo.call(this).then((function(t){var i=t||{},r=i.width,o=i.height;if(r>0||o>0)return t;var n=e.vpaid;return(n&&Promise.resolve(n)||e.vpaidLoadPromise).then((function(t){return t.getMediaInfo&&t.getMediaInfo()}))}))},l.getFormatOptions=function(){var t=this.vpaid;return(t&&Promise.resolve(t)||this.vpaidLoadPromise).then((function(t){return t.getFormatOptions&&t.getFormatOptions()}))},l.stopAd=function(){Fh.call(this,["AdStopped","AdSkipped","AdSkippableStateChange"]),t.prototype.stopAd.call(this)},l._destroy=function(){this.logger.trace(this.VpaidJs+".destroy()"),Fh.call(this),(this.options||{}).isVpaidProvider&&Hh.forEach((function(t){var e=t[0],i=t[1],r=window[e];if(r&&r.length){var o=r.pop();o&&(window[i]=o)}})),t.prototype._destroy.call(this)},l.activateMuteChangingEnable=function(){this.vpaid&&(this.wasClicked=!0)},l.getModuleOptions=function(){var e=t.prototype.getModuleOptions.call(this);return this.vpaidLoadPromise.then((function(t){var i=t.getModuleOptions?t.getModuleOptions():Promise.resolve({});return Promise.all([e,i]).then((function(t){return Vh(Vh({},t&&t.length?t[0]:{}),t&&t.length>1?t[1]:{})}))}))},l.getLinkedVpaid=function(){return this.vpaidLoadPromise},s.create=function(t,e){return new Promise((function(i,a){var l=t.mediaFiles,c=t.adParameters,u=t.rawDuration,h=t.duration,p="application/javascript",g="application/x-javascript",v=l[p]&&l[p][0]||l[g]&&l[g][0];if(v&&v.src&&!e.isMediaUrlBlocked(v.src)){var f=((0,d.en)((0,n.k$)(window,document))||{}).vn_providers_vpaid,m="vn_providers_vpaid";f&&(o.ZP.warn(" VpaidJs canCreate() "+m+"("+f+") was saved to sessionStorage",2,"color:#ff5722; font-size:1.5em"),(0,r.qd)(m,f)),f=(0,r.Xs)(m);var b=v.src.includes(m);f&&b&&(o.ZP.warn(" VpaidJs canCreate() "+m+"("+f+") was restored from sessionStorage",2,"color:#ff5722; font-size:1.5em"),v.src=f),b||e.setSelectedCreative(v.src,u,c),(e&&e.getAPI&&e.getAPI().logger||o.ZP).log("::VpaidJs.create("+v.src+")");var y,A,w,P=new s({module:e,isVpaidProvider:b,jsmedia:Vh(Vh({},v),{},{duration:h}),moduleAPI:e.getAPI(),ancestor:"("+(e&&e.mainModuleId)+")"});b&&(y=P._addVPAIDEventListener(P,"AdLoaded",(function(t){(w=(t||{}).selectedCreativeEventName)?A=P._addVPAIDEventListener(P,w,(function(){e.setSelectedCreative(v.src,u,c)})):e.setSelectedCreative(v.src,u,c)})),P._addVPAIDEventListener(P,"AdError",(function(){P.stopCountdown(),y&&P._removeVPAIDEventListener(P,"AdLoaded",y),A&&P._removeVPAIDEventListener(P,w,A)}))),i(P)}a()}))},s}(bh);function Mh(t,e,i,r){var o;void 0===e&&(e=null);var n,a=e;if(a)n="using existing videoSlot";else{n="videoSlot has been created for loaded external vpaid";var s=new Wd(t,{shouldSetControlData:!1,shouldStayCentered:!0,width:i,height:r});a=s&&s.getSlotNode()}return this.logger.log(this.VpaidJs+".initAd() "+n),t.setControlData("videoSlot",((o={node:a})[N.Os]="solid",o)),a}function Nh(t,e){var i=this;Lh.call(this,t,["AdLoaded","AdStarted","AdVideoStart"]);var r=this.vpaidEventListeners,o="AdLoaded",n=r.AdLoaded=function(t){i._adWasLoaded=!0,i.trigger(o,t);var e=i.lastPendingCommands.resizeAd;e&&(e(),i.logger.trace(i.VpaidJs+" @"+"AdLoaded execute last resizeAd pending command: "+e),i.trigger("slotSizeChanged",{shouldNotResize:!1}),delete i.lastPendingCommands.resizeAd),(e=i.lastPendingCommands.setAdVolume)&&(e(),i.logger.trace(i.VpaidJs+" @"+"AdLoaded execute last setAdVolume pending command: "+e),delete i.lastPendingCommands.setAdVolume),i.onAdLoaded()};this._addVPAIDEventListener(t,o,n),this._addVPAIDEventListener(t,"AdError",(function(t,e){i.stopCountdown(),Fh.call(i),i.trigger("AdError",t,e)}));var a=this._addDOMEventListener(e,"playing",(function(){i._removeDOMEventListener(e,"playing",a),i._videoStartedResolve()})),s="AdVideoStart";r[s]=this._addVPAIDEventListener(t,s,(function(t){e&&e.src&&e.src.length&&!e.paused?i._videoStartedPromise.then((function(){return i.trigger(s,t)})):i.trigger(s,t)}));var l="AdStarted";r.AdStarted=this._addVPAIDEventListener(t,l,(function(){wh.call(i)&&i._addTimeout("AD_DURATION_CHECK_TIMER_ID",wh.bind(i),500),i.trigger(l)})),r.AdVolumeChangeSecond=this._addVPAIDEventListener(t,"AdVolumeChange",(function(){var t=i.videoSlot,e=i.options.module;if(t&&e.vpaidJsVideoSlotShouldBeMuted()){var r=i.vpaid.getAdVolume(),o=t.muted,n=t.volume;r||x.vF||(r=o?0:n),(r>.999||r<.001?i.logger.log:i.logger.trace)(i.VpaidJs+" AdVolumeChange("+r+") videoSlot.muted="+o),o&&r>.999?t.muted=!1:!o&&r<.001&&(t.muted=!0)}}))}function Lh(t,e){var i=this;Wh.forEach((function(r){e&&e.includes(r)||("AdLoaded"===r?i._addVPAIDEventListener(t,r,(function(t){i.vpaidEventListeners[r]=i.trigger.bind(i,r)})):i._addVPAIDEventListener(t,r,i.vpaidEventListeners[r]=i.trigger.bind(i,r)))}))}function Fh(t){var e=this,i=this.vpaidEventListeners,r=this.vpaid;this.logger.log(this.VpaidJs+".unsubscribePassThrough() vpaid="+r),r&&i&&Object.keys(i).forEach((function(o){t&&t.includes(o)||(e._removeVPAIDEventListener(r,o,i[o]),delete i[o])}))}var Wh=["AdLoaded","AdStarted","AdStopped","AdSkipped","AdSkippableStateChange","AdSizeChange","AdLinearChange","AdDurationChange","AdExpandedChange","AdRemainingTimeChange","AdVolumeChange","AdImpression","AdVideoStart","AdVideoFirstQuartile","AdVideoMidpoint","AdVideoThirdQuartile","AdVideoComplete","AdVideoCompleteTrackOnly","AdClickThru","AdInteraction","AdUserAcceptInvitation","AdUserMinimize","AdUserClose","AdPaused","AdPlaying","AdLog","AdLoadedVideoData","slotSizeChanged","AdAudioDisabled","AdAudioEnabled","AdSizeForceChange","AdAudioOnlyStart","AdReadyToShow","vn_VPAIDCreated","vn_hideOverlayFormatWrapper","vn_setOverlayZIndex","vn_VideoSlotRemoved","vn_SelectedCreative"],Hh=[["vnCreateVPAIDAdSaved","createVPAIDAd"],["vnGetVPAIDAdSaved","getVPAIDAd"]];function Uh(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function zh(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Uh(Object(i),!0).forEach((function(e){Bh(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Uh(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Bh(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Zh(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qh(t,e){return qh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},qh(t,e)}var Xh="Module::VpaidImg";function Gh(){var t=this.image,e=t.width,i=t.height;this.originalSize={width:parseFloat(e),height:parseFloat(i)},this.adHeight=i,this.logger.trace("Module::VpaidImg metadata size: width: "+e+", height: "+i+"}}"),this.trigger("AdLoaded"),this.trigger("AdLoadedVideoData")}function Qh(t){t.preventDefault(),this.trigger("AdClickThru","",0,!0)}var $h=[Mc,eh,Rh,function(t){var i,r;function a(e){var i,r,n;void 0===e&&(e={});var a=e&&(e.logger||e.module&&e.module.logger||e.moduleAPI&&e.moduleAPI.logger)||o.ZP;(a=(null===(i=a)||void 0===i||null===(r=i.getChildWriter)||void 0===r?void 0:r.call(i,Xh))||a).trace("Module::VpaidImg.constructor()");var s=(n=t.call(this,zh(zh({},e),{},{ancestor:Xh,logger:a}))||this).options.media;n.media=s,n.image=null,n.name=Xh,n.originalSize={};var l=n.options.duration;return n._countdown=new dh({duration:l,VPAID_API:{trigger:n.trigger.bind(Zh(n))},logger:n.logger}),n}r=t,(i=a).prototype=Object.create(r.prototype),i.prototype.constructor=i,qh(i,r);var s=a.prototype;return s.initAd=function(i,r,o,n,a,s){var l=this;void 0===a&&(a={}),void 0===s&&(s={}),t.prototype.initAd.call(this,i,r,o,n,a,s);var d=this.options.media,c=this.image,u=this.slot=s.slot;if(!(0,e.Re)(c,"img")){var h=this.image=document.createElement("img");this._addDOMEventListener(u,"click",Qh.bind(this)),this._addDOMEventListener(h,"load",Gh.bind(this)),this._addDOMEventListener(h,"error",(function(t){l.trigger("AdError",String(t),w.GENERAL_VPAID_ERROR)})),s.slot.appendChild(h),h.src=d.src,this._addVPAIDEventListener(this,"error",(function(t){l.trigger("AdError",String(t),w.GENERAL_VPAID_ERROR)}),"error")}return Promise.resolve(this)},s.getModuleOptions=function(){return Promise.resolve({destroyControls:["spinner","volume","play"],controlsActions:[{name:"container",action:function(t){t&&(0,e.Zs)(t,{backgroundColor:"transparent"})}},{name:"vpaidSlot",action:function(t){t&&(0,e.Zs)(t,{textAlign:"center"})}}]})},s.resizeAd=function(e,i,r){var o=this.image,a=this.environmentVars,s=this.originalSize,l=(a||{}).slot;if(this.logger.trace("Module::VpaidImg.resizeAd("+e+", "+i+") image.width="+(o&&o.width)),o&&o.width&&a&&a.slot){var d=o.width,c=(s||{}).width;if(d>e||d<=e&&c>=d){var u=Math.min(e,s.width);u!==d&&(o.width=u,this.logger.trace("Module::VpaidImg.resizeAd("+e+", "+i+") change image size image.width="+o.width+" image.height="+o.height,2,"brown"))}var h=o.width,p=o.height;this.trigger("slotSizeChanged",{shouldNotResize:!0,height:p,width:h}),t.prototype.resizeAd.call(this,h,p,r),(0,n.dN)(null,{width:h,height:p},l,{width:e,height:p}),this.trigger("slotSizeChanged",{shouldNotResize:!0,width:null})}},s.startAd=function(){this.logger.log("Module::VpaidImg startAd()",2,"blue"),this._countdown.start(),this.trigger("AdDurationChange"),t.prototype.startAd.call(this),this.trigger("AdImpression"),this.trigger("AdVideoStart")},s.stopAd=function(){return this._countdown.stop(),t.prototype.stopAd.call(this)},s.pauseAd=function(){return this._countdown.stop(),t.prototype.pauseAd.call(this)},s.resumeAd=function(){return this._countdown.start(),t.prototype.resumeAd.call(this)},s.skipAd=function(){return t.prototype.skipAd.call(this)},s.getAdAspectRatio=function(){var t=this.adWidth,e=this.adHeight,i=this.image||this.options.media,r=i.width,o=i.height;return r&&o?o/r:t&&e?e/t:9/16},s.getAdRemainingTime=function(){return this._countdown.getAdRemainingTime()},s._destroy=function(){this.logger.trace("Module::VpaidImg.destroy()"),this._countdown._destroy(),t.prototype._destroy.call(this)},a.create=function(t,e){return new Promise((function(i,r){var o,s=t.mediaFiles,l=t.rawDuration,d=t.duration,c=e.format&&e.format._getModuleDimensions&&e.format._getModuleDimensions().viewportWidth||0,u=((null==s?void 0:s["image/png"])||[]).concat((null==s?void 0:s["image/jpg"])||[]).concat((null==s?void 0:s["image/gif"])||[]),h=u&&u.filter((function(t){return t.src})).reduce((function(t,e){return Math.abs(t.width-c)<Math.abs(e.width-c)?t:e}),{});(0,n.xb)(h)&&r(),null==e||null===(o=e.logger)||void 0===o||o.log("Module::VpaidImg.create("+h.src+")"),e.setSelectedCreative(h.src,l),i(new a({module:e,media:h,duration:d}))}))},a}(v)];function Jh(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function Yh(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Jh(Object(i),!0).forEach((function(e){Kh(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Jh(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Kh(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var tp="::VpaidCreator",ep=[Gd],ip=Mc,rp=function(){function t(t,e,i,r,n){var a,s=this;void 0===r&&(r=!1),this._canGetBackToCanvasVpaid=!1,this.dataXml=t,this.module=i;var l=i&&i.getAPI&&i.getAPI().logger||o.ZP;this.logger=(null==l||null===(a=l.getChildWriter)||void 0===a?void 0:a.call(l,tp))||l,this.logger.trace("::VpaidCreator.vpaidCreate("+t+") onlyReservedVpaid="+r);var d=Yh(Yh({},t),{adParameters:e}),c=d.isEmpty;if(this.isEmpty=c,c){var u=Error("No Ads VAST response after one or more Wrappers.");u.isEmpty=!0,u.code=w.NO_ADS_RESPONSE,this.instance=Promise.reject(u)}else{if(r)return void(this.instance=ip.create(d,i,!0));var h="audio"===n?ep:$h;this.logger.trace("::VpaidCreator try to create implementation for adType="+n),this.instance=h.reduce((function(t,e){return t.catch((function(){s.logger.trace("::VpaidCreator try to get "+e.name+" instance");var t=e.create(d,i);return t&&e!==Mc&&(s._canGetBackToCanvasVpaid=!0),t}))}),Promise.reject())}}var e=t.prototype;return e.getVpaidPromise=function(){var t=this;return this.isEmpty?this.instance:new Promise((function(e,i){var r=(t.module.getControlUnionData("vnBrowserCache")||{}).enabled;t.instance.then((function(t){r&&t&&t instanceof Rh&&i()||e(t)})).catch((function(e){e&&e.message&&t.logger.warn("::VpaidCreator getVpaidPromise() error: "+e.message);var r=new Error("Could not find supported MediaFile");r.code=w.MEDIA_FILE_NOT_FOUND,i(r)}))}))},e.canBackToReserveVpaid=function(){return this._canGetBackToCanvasVpaid},t}(),op=["video/mp4","video/webm","video/mpeg","audio/mp3","application/x-shockwave-flash","application/javascript","application/x-javascript","external/javascript","image/png","image/jpg","image/gif","text/html","audio/mpeg","audio/mp4","audio/aac","audio/aacp"];function np(t){var e=function(t){var e=t&&t.querySelectorAll(f+" > MediaFile");return!e||!e.length}(t),i=m(t);return{isEmpty:e,rawDuration:i,duration:(0,d.TD)(i),mediaFiles:op.reduce((function(e,i){return e[i]=function(t,e,i){void 0===i&&(i=!1);var r=t&&t.querySelectorAll(f+' > MediaFile[type="'+e+'"]');if(!r||!r.length)return null;var o=Array.from(i?r:[r[0]]).map((function(t){return{src:(0,d.FB)(t),width:Number(t.getAttribute("width"))||0,height:Number(t.getAttribute("height"))||0,bitrate:Number(t.getAttribute("bitrate"))||0,scalable:void 0===t.getAttribute("scalable")||(0,n.MV)(t.getAttribute("scalable")),maintainAspectRatio:null!==t.getAttribute("maintainAspectRatio")?"true"===t.getAttribute("maintainAspectRatio"):t.getAttribute("maintainAspectRatio"),delivery:t.getAttribute("delivery"),type:e}}));return i?o:o[0]}(t,i,!0),e}),{})}}var ap="vnTrackingParams",sp="::Extension[vnTrackingParams]";function lp(t){var e=t&&t.querySelector('Extension[type="vnTrackingParams"]');return e?{trackingParams:(0,d.UV)(e,{optionName:"Parameter"}),global:(0,d.sQ)(e,"global"),important:(0,d.sQ)(e,"important")||e.getAttribute("important")}:null}var dp="vnShowViqeo",cp="::Extension[vnShowViqeo]";function up(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function hp(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?up(Object(i),!0).forEach((function(e){pp(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):up(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function pp(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var gp="vnCheckDomain",vp="::Extension[vnCheckDomain]";var fp=function(t){var e=(0,d.sQ)(t,"global"),i=(0,d.sQ)(t,"important"),r={regexp:(0,d.sQ)(t,"regexp"),global:e,important:i};return(0,n.xb)(r)?null:r};function mp(t,e){return void 0===e&&(e="Extensions >"),(this.logger||o.ZP).trace(".parseVnCheckDomain()"),(0,d.hd)(t,gp,fp,{parentPrefix:e})}function bp(t,e){void 0===e&&(e="vnCheckDomain");var i=null==t?void 0:t[e],r=null==i?void 0:i.regexp,o=(null==i?void 0:i.global)||!1,n=(null==i?void 0:i.important)||!1;return i&&r?{regexp:r,global:o,important:n}:null}function yp(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function Ap(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?yp(Object(i),!0).forEach((function(e){wp(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):yp(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function wp(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Pp="vnAdParametersReplace",Op="::Extension[vnAdParametersReplace]";var Sp=function(t){var e=(0,d.sQ)(t,"global"),i=(0,d.sQ)(t,"important"),r={mode:(0,d.sQ)(t,"mode"),global:e,important:i};return(0,n.xb)(r)?null:r};function _p(t,e){return void 0===e&&(e="Extensions >"),(this.logger||o.ZP).trace(".parseVnAdParametersReplace()"),(0,d.hd)(t,Pp,Sp,{parentPrefix:e})}function Cp(t,e){void 0===e&&(e=Pp);var i=null==t?void 0:t[e],r=(null==i?void 0:i.mode)||"none",o=(null==i?void 0:i.global)||!1,n=(null==i?void 0:i.important)||!1;return i&&r?{mode:r,global:o,important:n}:null}function Ep(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function Dp(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Ep(Object(i),!0).forEach((function(e){Ip(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Ep(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Ip(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Tp="vnStableId",Vp="::Extension[vnStableId]",kp="stableId",xp="stableIdEncoded";var jp=function(t){var e,i,r,o=(0,d.sQ)(t,"urls"),a={urls:(null==o||null===(e=o.split)||void 0===e||null===(i=e.call(o,/\s/g))||void 0===i||null===(r=i.filter)||void 0===r?void 0:r.call(i,Boolean))||null};return(0,n.xb)(a)?null:a};function Rp(t,e){return void 0===e&&(e="Extensions >"),(this.logger||o.ZP).trace(".parseVnStableId()"),(0,d.hd)(t,Tp,jp,{parentPrefix:e})}function Mp(t,e){void 0===e&&(e="vnStableId");var i=null==t?void 0:t[e],r="object"==typeof(null==i?void 0:i.urls)&&null!==(null==i?void 0:i.urls)?Object.values(i.urls):null;return i&&r?{urls:r}:null}function Np(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function Lp(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Np(Object(i),!0).forEach((function(e){Fp(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Np(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Fp(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Wp(){var t={},e=this.environmentVars,i=this._disableExtensions,r=this.adParameters,o=void 0===r?{}:r,a=Lp(Lp({},e),o)||{},s=a.ext,l=a.extensions,d=a.format,c=s||{},u=c.vnShowViqeo,h=c.vnFormat;if(u&&i.indexOf("vnShowViqeo")<0){var p=u.important,g=fa(u);t.vnShowViqeo={options:g,important:p,global:!0}}if(h){var v=ja.call(this,h,null);v&&(v.global=!0,t.vnFormat=v)}if(d){var f=ja.call(this,d,null);f&&(f.global=!0,t.vnFormat=Lp(Lp({},t.vnFormat),f))}if(!(0,n.xb)(l)){var m={vnSets:Dd.bind(this),vnControls:es.bind(this),vnFormat:ja.bind(this),vnProhibitedWords:Os.bind(this),vnOTMTrackRecordable:Bl.bind(this),vnOTMTrackViewable:Fl.bind(this),vnDomainsBlockList:Ql.bind(this),vnMinPlayerSize:cn.bind(this),vnHeavyAdIntervention:sd.bind(this),vnAdChoice:fd.bind(this),vnCheckDomain:bp.bind(this),vnAdParametersReplace:Cp.bind(this),vnStableId:Mp.bind(this)};Object.entries(m).forEach((function(e){var i=e[0],r=(0,e[1])(l);r&&(void 0!==r.global&&(r.global=!0),t[i]=r)}))}return t}function Hp(t){if(!t||!t.querySelector){var e=new Error("Malformed data xml.");return e.code=w.NO_ADS_RESPONSE,e}var i=this._disableExtensions,r={},o=(0,d.bW)(t);o&&o.length>1&&(o=Array.from(o).filter((function(t){return null===t.getAttribute("sequence")})));var a=o&&o.length&&o[0],s=a.querySelectorAll("Impression");s&&(r.Impression=Array.from(s).map((function(t){return(0,d.FB)(t)}))),r.id=a&&a.getAttribute("id"),r.uniqueId=r.id+"_"+Math.random().toString(36).substring(2,5),r.AdSystem=(0,d.FB)(a,"AdSystem"),r.ClickThrough=(0,d.FB)(a,"ClickThrough");var l=a.querySelector("Wrapper");if(l){var c=(0,d.FB)(l,"VASTAdTagURI");if(!c)return this.logger.log("._parseDataXML() empty wrapperUrl",1),null;r.wrapperUrl=c}r.vnSets=_d.call(this,a),r.vnSetsApply=kd.call(this,a),r.vnControls=Ya.call(this,a),r.vnFormat=Ha.call(this,a),r.vnCreative=rl.call(this,a),r.vnNoAd=xo.call(this,a),r.vnCreativeBlock=sl.k.call(this,a),r.vnBrowserCache=cl.call(this,a),r.vnCache=pl.call(this,a),r.vnProhibitedWords=ws.call(this,a),r.vnDebug=Kl.call(this,a),r.vnAdChoice=pd.call(this,a),r.vnCheckDomain=mp.call(this,a),r.vnAdParametersReplace=_p.call(this,a),r.vnStableId=Rp.call(this,a);var u=r.vnSkipTime=ps.call(this,a),h=np(a);r.Media=Lp(Lp({},h),u),r.vnAdType=id.call(this,a),r.adType=function(t){var e=t.getAttribute("adType");return A.includes(e)?e:y}(a);var p=a.querySelectorAll("Tracking");r.Trackings=p&&Array.from(p).reduce((function(t,e){e&&Up(t,e.getAttribute("event"),(0,d.FB)(e));return t}),{})||{},r.adParameters=(0,d.Ou)(a),r.Impression.forEach((function(t){return Up(r.Trackings,"Impression",t)})),r.vnVisibleInventory=function(t){var e=t&&t.querySelector('Extension[type="vnVisibleInventory"]'),i=e&&e.querySelectorAll("url"),r=i&&Array.from(i).map((function(t){return(0,d.FB)(t)})),o=(0,n.MV)((0,d.sQ)(e,"global"));return(o||r&&r.length)&&{global:o,urls:r}}(a);var g=a.querySelectorAll("VideoClicks ClickTracking");g&&Array.from(g).forEach((function(t){Up(r.Trackings,"ClickTracking",(0,d.FB)(t))}));var v=a.querySelectorAll('Extension[type="vnCreative"] > *');v&&Array.from(v).forEach((function(t){t.tagName&&Up(r.Trackings,"vnCreative:"+t.tagName.toLowerCase(),(0,d.FB)(t))}));var f=a.querySelectorAll("ViewableImpression > *");f&&Array.from(f).forEach((function(t){t.tagName&&Up(r.Trackings,"ViewableImpression:"+t.tagName.toLowerCase(),(0,d.FB)(t))}));var m=a.querySelectorAll('Tracking[event="progress"]');return m&&Array.from(m).forEach((function(t){var e=(0,d.FB)(t),i=t.getAttribute("offset"),o=(0,d.TD)(i),n=(0,d.GM)(i);Up(r,"Progress",{url:e,offset:i,percentValue:n,timeValue:o})})),r.vnAfterplay=Us.call(this,a),r.vnAdEvents=Js.call(this,a)||{},r.vnPageChanged=bl.call(this,a)||{},r.vnEventsParams=tl.call(this,a)||{},r.vnTrackingParams=lp.call(this,a)||{},r.vnUnderplay=wl.call(this,a)||{},r.vnAdErrorsRules=ns.call(this,a)||{},r.vnHeavyAdIntervention=nd.call(this,a)||{},i.indexOf("vnShowViqeo")<0&&(r.vnShowViqeo=function(t){var e=t&&t.querySelector('Extension[type="vnShowViqeo"]');return e?{options:(0,d.UV)(e),global:(0,d.sQ)(e,"global"),important:(0,d.sQ)(e,"important")||e.getAttribute("important")}:null}(a)),r}function Up(t,e,i){t&&e&&i&&(t[e]=(t[e]||[]).concat(i))}function zp(t){var e=(this.options||{}).passUrlParams;if(!e||!e.length)return Promise.resolve(t);var i=(0,n.k$)(window,document),r=(0,d.en)(i),o=Object.keys(r).reduce((function(t,i){return~e.indexOf(i)&&(t[i]=r[i]),t}),{});return Promise.resolve((0,d.o3)(t,o))}function Bp(t){var e=this.advancedParams;if((0,n.xb)(e)||(0,n.xb)(e.pass))return Promise.resolve(t);var i,r,o=e.pass,a=e.pass,s=a._decorateName,l=a._decorateValue;s&&"function"==typeof s?(i=s,delete o._decorateName):i=function(t){return"pass_"+t},l&&"function"==typeof l?(r=l,delete o._decorateValue):r=function(t){return t},this.logger.trace(" advanced params data");var c=(0,d.o3)(t,Object.keys(o).reduce((function(t,e){return o[e]&&(t[i(e)]=r(o[e])),t}),{}));return Promise.resolve(c)}function Zp(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function qp(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Zp(Object(i),!0).forEach((function(e){Xp(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Zp(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Xp(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Gp(){var t=this;this.logger.trace(".checkInventoryObserving");var e=this.format,i=this.reachInventories,r=!(this.visibleInventoryWasSent||!e)&&e.getReachInventoryFactory();if(r){var o=r.id,n=r.waiterCreator,a=Qp.call(this);this.logger.log(".setInventoryObserving().",3);var s=i[o]=qp(qp({},r),{waiter:null,reached:!1,tracked:!1,trackingUrls:a});s.waiter=n().then((function(){s.reached=!0,$p.call(t)})),this.logger.trace(".checkInventoryObserving with id="+o+" ")}}function Qp(){var t=(this.getControlData("vnVisibleInventory")||{}).urls;return t&&t.length&&t||[]}function $p(){var t=this,e=this.reachInventories,i=Object.keys(e);return!this.visibleInventoryWasSent&&i&&i.length?new Promise((function(r){return i.reduce((function(i,o){return i.then((function(i){return!1===i?Jp.call(t,e[o]):(!0===i&&(Yp.call(t),r()),Promise.resolve(null))})).catch((function(i){return t.logger.error(".trackReachedInventories() error: "+(i&&i.message||i)),Jp.call(t,e[o])}))}),Promise.resolve(!1))})):Promise.resolve()}function Jp(t){var e=this;if(!this.visibleInventoryWasSent&&!t.tracked&&t.reached&&t.waiter){var i=Qp.call(this)||t.trackingUrls&&t.trackingUrls.length?t.trackingUrls:[];return t.tracked=!0,this.logger.trace(".trackReachedInventory. trackingUrls="+i+" ",2),Kp.call(this,t),i.length?(this.visibleInventoryWasSent=!0,this.logger.trace(".trackReachedInventory() trackStrongUrls: length="+i.length+" urls="+JSON.stringify(i),2),Jo.call(this,i).then((function(t){var i,r=t.length>1?"and "+(t.length-1)+" visibleInventory's urls":"";return e.logger.trace(".trackReachedInventory() "+(null!=(i=null==t?void 0:t[0])?i:"")+" "+r+" were tracked successfully"),!0})).catch((function(){e.logger.warn(".trackReachedInventory() "+i.length+" urls of visibleInventory were not tracked")}))):Promise.resolve(!1)}return Promise.resolve(!1)}function Yp(){var t=this;this.logger.log(".destroyVisibleInventories",1);var e=this.reachInventories,i=Object.keys(e);i&&i.length&&i.forEach((function(i){return Kp.call(t,e[i])}))}function Kp(t){var e=t.destroy;this.logger.trace(".trackReachedInventory() destroy visible inventory object("+t.id+")"),e&&e()}function tg(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function eg(t,e){return eg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},eg(t,e)}var ig="spinner",rg="Module::Control[spinner]",og=function(t){var i,r;function o(i){var r;(r=t.call(this,ig,i)||this).videoProgressId=null,r.oldCurrentTime=null,r.attemptsCounter=0,r.attemptLimit=i.getControlUnionData(ig,"attemptLimit")||3;var o=i.getControlNode("wrapper"),n=r.node=(0,e.rj)(o,50);return(0,e.Zs)(n,{zIndex:3,display:"none",width:"50px",height:"50px"}),i.setControlData(ig,{node:n}),r._addVPAIDEventListener(i,"AdVideoStart",lg.bind(tg(r),i)),r._addVPAIDEventListener(i,"AdPlaying",lg.bind(tg(r),i)),r._addVPAIDEventListener(i,"AdPaused",dg.bind(tg(r),i)),r._addVPAIDEventListener(i,"AdStopped",dg.bind(tg(r),i)),r._addVPAIDEventListener(i,"AdVideoComplete",dg.bind(tg(r),i)),r._addVPAIDEventListener(i,"AdSkipped",dg.bind(tg(r),i)),r._addVPAIDEventListener(i,"AdDestroyed",dg.bind(tg(r),i)),r._addVPAIDEventListener(i,"AdError",dg.bind(tg(r),i)),r}return r=t,(i=o).prototype=Object.create(r.prototype),i.prototype.constructor=i,eg(i,r),o.getName=function(){return ig},o}(Qi);function ng(t){var i=t.getControlNode(ig);i&&(0,e.Zs)(i,{display:"block"}),++this.attemptsCounter>this.attemptLimit&&t.trigger("AdError","getAdRemainingTime returns the same time 3 times in a row",w.TIMEOUT_OF_MEDIA)}function ag(t){var i=t.getControlNode(ig);this.attemptsCounter=0,i&&(0,e.Zs)(i,{display:"none"})}function sg(t){var e=t.getAdRemainingTime();e<0?ag.call(this,t):(Ue.call(t,"playing")&&e===this.oldCurrentTime?(this.logger.warn(rg+".videoProgress() getAdRemainingTime returns the same time. Spinner is visible. currentTime="+e+" oldCurrentTime="+this.oldCurrentTime),ng.call(this,t)):ag.call(this,t),this.oldCurrentTime=e)}function lg(t){this.logger.trace(rg+" onVideoStart() @AdVideoStart or @AdPlaying",2),clearInterval(this.videoProgressId),this.videoProgressId=setInterval(sg.bind(this,t),1e3)}function dg(t){clearInterval(this.videoProgressId),ag.call(this,t)}const cg={"Loading video...":{ru:" ..."},"Skip ad in {{x}} sec":{ru:"   {{x}} "},"Skip ad in":{ru:' <div style="font-size: smaller"> </div>'},"{{x}} sec":{ru:"{{x}} "},"Going after":{ru:'<div style="font-size: smaller">  </div>'},"Learn more":{ru:""},Advertisement:{ru:"",be:""},"Watch video":{ru:" "},"Watch video<br/>after ad":{ru:"</br> "},"Pull to skip<br/>{{x}}":{ru:",<br/> <br/>{{x}}"},"Push to watch<br/>360 video":{ru:",  <br/>360- "},"The ad will end in {{x}} sec":{ru:"   {{x}} "},"Click to get Videonow debug":{ru:"    Videonow"},Close:{ru:""},"Play again":{ru:"  "},"Open advertiser site":{ru:"   "}};let ug=!1,hg="en";const pg=Object.keys(cg).reduce(((t,e)=>Object.assign(Object.assign({},t),{[e.replace(/{{x}}/g,"")]:cg[e]})),{});function gg(){var t,e;let i;try{i=((null===(t=null===top||void 0===top?void 0:top.navigator)||void 0===t?void 0:t.language)||(null===(e=null===top||void 0===top?void 0:top.navigator)||void 0===e?void 0:e.userLanguage)||"en").substring(0,2)}catch(t){i=(navigator.language||navigator.userLanguage||"en").substring(0,2)}ug=!0,hg=i}const vg="white",fg={border:"none",margin:0,padding:0,width:"auto",overflow:"visible",background:"transparent",color:"inherit",font:"inherit"};class mg extends El{constructor(t){super(t),this.handleNodeClick=(t,e)=>i=>{var r,o;const n=e.innerText,a=()=>{(null==t?void 0:t.href)&&((t,e=!1)=>{if(!t)throw new Error(`openUrl(${t}) invalid url`);if(hu||e){const e=document.createElement("a");e.setAttribute("href",t),e.setAttribute("target","_blank");const i=document.createEvent("MouseEvents");i.initEvent("click",!0,!0),e.dispatchEvent(i)}else window.open(t,"_blank")})(t.href)};"function"==typeof(null==t?void 0:t.postDebugInfo)?(null===(r=null==i?void 0:i.preventDefault)||void 0===r||r.call(i),e.innerText="sending...",e.setAttribute("disabled","true"),this.isMenuVisible=!1,this.changeMenuVisibility(i),null===(o=t.postDebugInfo)||void 0===o||o.call(t).then((t=>{var e;null===(e=this.logger)||void 0===e||e.log(`TitlePlugin item menu @onclick postDebugInfo was posted to "${t}"`),a()})).finally((()=>{e.innerText=n,e.removeAttribute("disabled"),this.isMenuVisible=!0,this.changeMenuVisibility(i)}))):a()},this.domEvents=new yu,this.isMenuVisible=!1;const{getData:e}=t,i=e?e():t;this.slot=(null==i?void 0:i.slot)||window.document.body;const{eventBus:r}=this;r&&(this.onAdStartedHandler=r.subscribeOnce((()=>{this.start(),this.onAdStartedHandler=void 0}),"AdStarted"),(null==i?void 0:i.slot)||(this.onOtmContainerCreatedHandler=r.subscribe(((t,e)=>{const i=null==e?void 0:e.slot;i&&(this.slot=i,this.titleNode&&i.appendChild(this.titleNode),this.menuNode&&i.appendChild(this.menuNode))}),"OtmContainerCreated")))}start(){var t;null===(t=this.logger)||void 0===t||t.log("start TitlePlugin"),this.create()}stop(){var t,e,i,r,o;if(this.stopped)return;this.onOtmContainerCreatedHandler&&(null===(t=this.eventBus)||void 0===t||t.unsubscribe(this.onOtmContainerCreatedHandler,"OtmContainerCreated")),this.onAdStartedHandler&&(null===(e=this.eventBus)||void 0===e||e.unsubscribe(this.onAdStartedHandler,"AdStarted")),super.stop(),this.domEvents.unsubscribeAll();const{titleNode:n,menuNode:a}=this;null===(i=null==a?void 0:a.remove)||void 0===i||i.call(a),null===(r=null==n?void 0:n.remove)||void 0===r||r.call(n),null===(o=this.logger)||void 0===o||o.log("stop TitlePlugin")}create(){var t,e;const i=this.params,{menu:r,title:o}=i,n=this.titleNode=document.createElement("button");if(jd(n,Object.assign(Object.assign(Object.assign(Object.assign({},fg),{position:"absolute",zIndex:3,top:0,left:0,padding:"5px",cursor:(null===(t=null==r?void 0:r.items)||void 0===t?void 0:t.length)?"pointer":"default",color:"white",lineHeight:1}),null==o?void 0:o.css),{display:"inline-block"})),n.innerText=`${bg(Object.assign(Object.assign({},o),{name:(null==o?void 0:o.name)||"Advertisement"}))} `,this.slot.appendChild(n),null===(e=null==r?void 0:r.items)||void 0===e?void 0:e.length){const t=this.menuNode=this.createMenu();t&&this.slot.appendChild(t),this.domEvents.subscribe(n,"click",(t=>{this.changeMenuVisibility(t)})),this.domEvents.subscribe(document,"click",(t=>{this.isMenuVisible=!0,this.changeMenuVisibility(t)}))}else(null==o?void 0:o.href)&&"function"==typeof(null==o?void 0:o.postDebugInfo)&&this.domEvents.subscribe(n,"click",this.handleNodeClick(o,n))}changeMenuVisibility(t){null==t||t.stopPropagation(),this.isMenuVisible=!this.isMenuVisible,jd(this.menuNode,this.isMenuVisible?{display:"block"}:{display:"none"})}createMenu(){if(!this.titleNode)throw new Error("title node was not created");const t=this.params,{menu:e,title:i}=t,r=function(t,e=["top","left","right","bottom"]){return t?Object.entries(t||{}).reduce(((t,i)=>{const[r,o]=i;return e.includes(r)&&(t[r]=o),t}),{}):void 0}(null==i?void 0:i.css),o=parseFloat(getComputedStyle(this.titleNode).height)+parseFloat((null==r?void 0:r.top)||"0")+10;(null==r?void 0:r.top)&&delete r.top;const n=document.createElement("button");return jd(n,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},fg),{position:"absolute",zIndex:999999,top:Rd(o),left:0,padding:"0 3px",cursor:"default",backgroundColor:vg,color:"gray",borderRadius:"3px",border:"1px solid gray"}),r),null==e?void 0:e.css),{display:"none"})),this.changeMenuVisibility.bind(this),null==e||e.items.forEach((t=>{const e=bg(t);if(!e)return;const i=document.createElement("button");jd(i,Object.assign(Object.assign(Object.assign(Object.assign({},fg),{padding:"3px 10px",cursor:"pointer",borderRadius:"3px",margin:"5px 0"}),null==t?void 0:t.css),{position:"relative",display:"block"})),i.innerText=e,this.domEvents.subscribe(i,"click",this.handleNodeClick(t,i)),n.appendChild(i),vu||(this.domEvents.subscribe(i,"mouseenter",(()=>{var e,r;return jd(i,{backgroundColor:(null===(e=t.css)||void 0===e?void 0:e.hoverBgColor)||"#cacaca",color:(null===(r=t.css)||void 0===r?void 0:r.hoverColor)||"black"})})),this.domEvents.subscribe(i,"mouseleave",(()=>{var e,r;return jd(i,{backgroundColor:(null===(e=t.css)||void 0===e?void 0:e.backgroundColor)||vg,color:(null===(r=t.css)||void 0===r?void 0:r.color)||"gray"})})))})),n}}function bg(t,e){return t[e]||((t,...e)=>{var i,r,o,n;ug||gg();const a="string"==typeof t?{raw:[t]}:t,s=(null===(i=a.join)||void 0===i?void 0:i.call(a,""))||(null===(o=null===(r=a.raw)||void 0===r?void 0:r.join)||void 0===o?void 0:o.call(r,""));let l=null===(n=null==pg?void 0:pg[s])||void 0===n?void 0:n[hg];return"en"!==hg&&l||!String.raw?(e&&e.forEach((t=>{l=l.replace(/{{x}}/g,t)})),l||String.raw(a,e)):String.raw(a,e)})(null==t?void 0:t.name)}var yg;function Ag(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function wg(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Ag(Object(i),!0).forEach((function(e){Pg(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Ag(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Pg(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Og(t,e){return Og=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Og(t,e)}var Sg="title",_g="vnAdChoice";const Cg=function(t){var e,i;function r(e){var i;(i=t.call(this,Sg,e)||this).wrapper=e.getControlNode("wrapper");var r,o,n=Math.random().toString(36).substr(2,10),a=Qo.call(e,"vnCreative:debug")||{},s=a.urls,l=a.uniqueId,d=(e.getControlUnionData("vnCreative","debugFailed")||{}).url,c=(s||[])[0],u=c&&c.split&&c.split("?")[0];i.adChoiceItems=e.getControlUnionData(_g,"items")||[],u&&i.adChoiceItems.push({text:Fe(yg||(r=["Debug"],o||(o=r.slice(0)),r.raw=o,yg=r)),postDebugInfo:function(){return nn.call(e,n,c,l,d).then((function(){return c}))},href:u+"/"+n});var h=(e.getControlUnionData("title")||{}).css,p=i.getCssPositionsValues(h),g=e.getControlUnionData(_g,"title")||{},v=g.css,f=g.text;p.top&&delete p.top;var m={slot:e.getControlNode("wrapper"),title:{name:f,css:v?wg(wg({},p),v):wg({},h),postDebugInfo:i.adChoiceItems.length?void 0:function(){return nn.call(e,n,c,l,d).then((function(){return c}))},href:!i.adChoiceItems.length&&u&&u+"/"+n}};i.adChoiceItems.length&&(m.menu={css:v,items:i.adChoiceItems.map((function(t){return{name:t.text,href:t.href,css:t.css,postDebugInfo:t.postDebugInfo}}))});var b=(t=>new mg(t))(m);return b&&(b.start(),null!=b&&b.titleNode&&e.setControlData(Sg,{node:null==b?void 0:b.titleNode})),i}return i=t,(e=r).prototype=Object.create(i.prototype),e.prototype.constructor=e,Og(e,i),r.getName=function(){return Sg},r.prototype.getCssPositionsValues=function(t,e){return void 0===e&&(e=["top","left","right","bottom"]),Object.entries(t||{}).reduce((function(t,i){var r=i[0],o=i[1];return e.includes(r)&&(t[r]=o),t}),{})},r}(Qi);function Eg(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function Dg(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Ig(t,e){return Ig=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ig(t,e)}var Tg="wrapper",Vg=function(t){var i,r;function o(i){var r;r=t.call(this,Tg,i)||this;var o,n=i.getControlNode("iframe"),a=i.getControlUnionData(Tg,"css")||{},s=i.getControlNode(Tg);s||(s=r.node=(0,e.Xv)((null==n||null===(o=n.contentDocument)||void 0===o?void 0:o.body)||n,"div",function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Eg(Object(i),!0).forEach((function(e){Dg(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Eg(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({position:"relative",margin:"auto",width:"100%",height:"100%",boxSizing:"border-box",zIndex:0,color:"white",lineHeight:1.5,userSelect:"none",fontFamily:"Arial, Helvetica, sans-serif",fontSize:"14px"},a)),i.setControlData(Tg,{node:s}),setTimeout((function(){return i.trigger("slotSizeChanged")})));return s.classList&&s.classList.add("__vnm_"+i.mainModuleId+"_"),r}r=t,(i=o).prototype=Object.create(r.prototype),i.prototype.constructor=i,Ig(i,r);var a=o.prototype;return a.showMarginTop=function(){var t=this.node,i=this.module,r=(t&&getComputedStyle(t)||{}).paddingTop;parseFloat(r)<25&&((0,e.Zs)(t,{paddingTop:(0,n.Ug)(25)}),setTimeout((function(){return i.trigger("slotSizeChanged")}),1))},a.hideTopSpace=function(){var t=this.node,i=this.module,r=(t&&getComputedStyle(t)||{}).paddingTop;25===parseFloat(r)&&((0,e.Zs)(t,{paddingTop:0}),setTimeout((function(){return i.trigger("slotSizeChanged")}),1))},o.refreshControlData=function(t,e){t.setControlData(Tg,{node:e})},o}(Qi);function kg(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function xg(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?kg(Object(i),!0).forEach((function(e){jg(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):kg(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function jg(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Rg(t,e){return Rg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Rg(t,e)}var Mg="container",Ng=function(t){var i,r;function o(i){var r;r=t.call(this,Mg,i)||this;var o=i.getControlNode("wrapper"),n=r.node=(0,e.Xv)(o,"div",xg(xg(xg({position:"relative",width:"100%",height:"100%",textAlign:"center",background:"black",overflow:"hidden",zIndex:1},i.getControlUnionData(Mg,"css")),i.getControlUnionData("background","css")),i.getControlUnionData("containerBackground","css")));return i.setControlData(Mg,{node:n}),r}return r=t,(i=o).prototype=Object.create(r.prototype),i.prototype.constructor=i,Rg(i,r),o}(Qi);function Lg(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function Fg(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Wg(t,e){return Wg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Wg(t,e)}var Hg="containerShadow",Ug=function(t){var i,r;function o(i){var r;r=t.call(this,Hg,i)||this;var o=i.getControlNode("container"),n=r.node=(0,e.Xv)(o,"div",function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Lg(Object(i),!0).forEach((function(e){Fg(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Lg(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({position:"absolute",top:0,bottom:0,left:0,right:0,backgroundColor:"#8d8b8b",opacity:0,zIndex:-1},i.getControlUnionData(Hg,"css")));return i.setControlData(Hg,{node:n}),r}return r=t,(i=o).prototype=Object.create(r.prototype),i.prototype.constructor=i,Wg(i,r),o}(Qi);function zg(t,e){return zg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},zg(t,e)}var Bg="containerIframe",Zg=function(t){var i,r;function o(i){var r;r=t.call(this,Bg,i)||this;var o=new n.BH;r.createdPromise=o.promise,r.createdResolve=o.resolve;var a=i.getControlNode("container");function s(t){var r,o;this.logger.trace(".initIframe() @load"),this.loaded=!0;var n=(null==t||null===(r=t.contentWindow)||void 0===r||null===(o=r.document)||void 0===o?void 0:o.body)||t;(0,e.Zs)(n,{minHeight:"100%",padding:0,margin:0,textAlign:"center",overflow:"hidden",fontFamily:"Arial, Helvetica, sans-serif",fontSize:"14px"}),(0,e.Xv)(n,"div",{display:"inline-block",height:"100%",verticalAlign:"middle"}),this.node=t;var a={node:t},s=(i&&i.options||{}).iframeRemoveDelay;t&&"IFRAME"===t.tagName&&s&&(a.removeDelay=s),i.setControlData(Bg,a),this.logger.log("containerIframe.onFrameLoaded() sandboxed iframe was created and inited"),this.createdResolve(t)}return r.loaded=!1,xs(a,{shouldCreateIframe:!1,logger:r.logger}).then((function(t){s.call(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(r),t)})),r.logger.log(".containerIframe.onFrameLoaded() sandboxed iframe was appended"),r}return r=t,(i=o).prototype=Object.create(r.prototype),i.prototype.constructor=i,zg(i,r),o.prototype.isReady=function(){return this.createdPromise},o}(Qi);function qg(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function Xg(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?qg(Object(i),!0).forEach((function(e){Gg(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):qg(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Gg(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Qg(t,e){return Qg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Qg(t,e)}var $g="vpaidSlot";const Jg=function(t){var i,o;function n(i){var o;o=t.call(this,$g,i)||this;var n=i.getControlNode("containerIframe"),a=n&&n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.body||n,s={outline:"1px #ff0 dotted"},l=(0,r.L2)("show.containers"),d=(0,r.L2)("show.containers.vpaid_slot"),c=d&&Yg(d,s)||l&&Yg(l,s)||{},u=Xg(Xg({position:"absolute",top:0,left:0,width:"100%",height:"100%",textAlign:"justify",zIndex:2},i.getControlUnionData($g,"css")),c),h=o.node=(0,e.Xv)(a,"div",u);return i.setControlData($g,{node:h}),o}return o=t,(i=n).prototype=Object.create(o.prototype),i.prototype.constructor=i,Qg(i,o),n.refreshControlData=function(t,e){t.setControlData($g,{node:e})},n}(Qi);function Yg(t,e){return void 0===e&&(e={}),t?t.includes(":")&&t||e:null}function Kg(t,e){return Kg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Kg(t,e)}const tv=function(t){var e,i;function r(e){var i;return void 0===e&&(e={}),(i=t.call(this,e)||this).moduleAPI=e.moduleAPI,i.starting=!1,i.adRemainingTimeChecker=e.adRemainingTimeChecker,i.getTimeBeforeSkip=e.getTimeBeforeSkip,i}i=t,(e=r).prototype=Object.create(i.prototype),e.prototype.constructor=e,Kg(e,i);var o=r.prototype;return o.start=function(t){var e=this;if(void 0===t&&(t=7),!this.starting){this.starting=!0;var i=this.moduleAPI,r=this.getTimeBeforeSkip,o=i||{},n=o.getAdDuration,a=o.addVPAIDEventListener,s=o.removeVPAIDEventListener,l=n&&n(),d=r&&r();if(this.logger.trace(" RemainTimeChecker: adDuration="+l+" timeBeforeSkip="+d),l)this.logger.trace(" RemainTimeChecker: adDuration="+l+", so check adRemainingTime and call invokeRemainingTimeChecker()"),this.waitAdRemainingTimeAndCallInvokeRemainingTimeChecker(0);else{var c="manualCheck";this.logger.trace(" RemainTimeChecker @AdStarted: invokeRemainingTimeChecker() will be invoked in event AdDurationChange ");var u=a("AdDurationChange",(function(){s("AdDurationChange",u),e._removeTimeout(c),e.logger.trace("RemainTimeChecker @AdDurationChange: calls waitAdRemainingTimeAndCallInvokeRemainingTimeChecker()"),setTimeout(e.waitAdRemainingTimeAndCallInvokeRemainingTimeChecker.bind(e,0),1)}),this);--t>0&&(this.logger.trace(" RemainTimeChecker start(): did not get @AdDurationChange from vpaid. Let's do one more check manually after 500 ms. Remain "+t+" attempts"),this._addTimeout(c,(function(){e.starting=!1,e.start.call(e,t)}),500))}}},o.waitAdRemainingTimeAndCallInvokeRemainingTimeChecker=function(t){void 0===t&&(t=0);if(t>10)this.logger.warn(" RemainTimeChecker.waiteAdRemainingTimeAndCallInvokeRemainingTimeChecker()("+t+"): fail to call invokeRemainingTimeChecker() - to many attempts("+t+")");else{var e=this.moduleAPI||{},i=e.getAdRemainingTime,r=e.getAdDuration,o=r&&r();i&&i()&&o?this.invokeRemainingTimeChecker():(this.logger.trace(" RemainTimeChecker.waitAdRemainingTimeAndCallInvokeRemainingTimeChecker(): next attempt("+t+") to call invokeRemainingTimeChecker after 150 ms"),setTimeout(this.waitAdRemainingTimeAndCallInvokeRemainingTimeChecker.bind(this,t+1),150))}},o.invokeRemainingTimeChecker=function(){var t=this;this._addTimeout("RemainingTimeChange",(function(){t.adRemainingTimeChecker.call(t)&&t.invokeRemainingTimeChecker()}),500)},r}(l);var ev,iv,rv;function ov(t,e){return e||(e=t.slice(0)),t.raw=e,t}function nv(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function av(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?nv(Object(i),!0).forEach((function(e){sv(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):nv(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function sv(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function lv(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dv(t,e){return dv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},dv(t,e)}var cv="skipAdCountdown",uv="Module::Control[skipAdCountdown]",hv=function(t){var i,r;function o(i){var r;(r=t.call(this,cv,i)||this).moduleAPI=i.getAPI(),void 0===r.invisible&&(r.invisible=!1);var o=lv(r),a=o.invisible,s=o.moduleAPI,l=s.setControlData,d=s.getControlUnionData,c=s.getControlNode,u=s.addVPAIDEventListener,h=r.timeBeforeSkip=d(cv,"timeBeforeSkip"),p=d(cv,"totalTimeCountdown");if(r.totalTimeCountdown="show"===p||(0,n.MV)(p),!h&&!r.totalTimeCountdown)return lv(r);if(r.isSmallSizeModule=x.ai,r.starting=!1,!a){var g=c("wrapper"),v=d(cv,"css"),f=r.node=(0,e.Xv)(g,"div",av(av({position:"absolute",zIndex:1,top:"10px",right:(0,n.Ug)(10),padding:"5px 10px",lineHeight:"15px",color:"white",backgroundColor:"rgba(0, 0, 0, 0.289)",borderRadius:"3px",cursor:"default",pointerEvents:"none"},v),{},{display:"none"}));l(cv,{node:f})}var m=lv(r),b=m.logger,y=m.moduleAPI,A=y||{},w=A.getAdDuration,P=A.getAdRemainingTime;r.timeBeforeSkipChecker=new zi({getTimeBeforeSkip:function(){return h},shouldSetAdSkippableState:!1,moduleAPI:y,logger:b}),r._addDestroyableObject(r.timeBeforeSkipChecker);var O=r.remainTimeChecker=new tv({getTimeBeforeSkip:function(){return h},moduleAPI:y,logger:b,adRemainingTimeChecker:pv.bind(lv(r))});return r._addDestroyableObject(O),u("AdStarted",(function(){return O.start()}),lv(r)),u("AdVideoStart",(function(){return O.start()}),lv(r)),u("AdVideoComplete",gv.bind(lv(r)),lv(r)),u("AdSkippableStateChange",(function(){w&&P&&w()&&P()&&(r.logger.trace(uv+" @AdSkippableStateChange: calls adRemainingTimeChecker()",2,"pink"),setTimeout(pv.bind(lv(r)),1))}),lv(r)),u("vnFormatStateChanged",(function(t){w&&P&&w()&&P()&&(r.isSmallSizeModule=x.ai||t&&!0===t.isFloating,r.logger.trace(uv+" @vnFormatStateChanged: calls adRemainingTimeChecker() event.isFloating="+t.isFloating+" this.isSmallSizeModule="+r.isSmallSizeModule,2,"pink"),setTimeout(pv.bind(lv(r)),1))}),lv(r)),u("AdSkipAdPositionChanged",(function(t){var i=t.offsetWidth;if(!r.invisible){var o=c(cv);(0,e.Zs)(o,{right:(0,n.Ug)(i||10)})}})),r}return r=t,(i=o).prototype=Object.create(r.prototype),i.prototype.constructor=i,dv(i,r),o.getName=function(){return cv},o}(Qi);function pv(){var t=this.totalTimeCountdown,i=this.invisible,r=this.reservedSkipAdTimerHandler,o=this.timeBeforeSkipChecker,n=this.moduleAPI,a=n.getAdElapsedTime,s=n.getControlNode,l=n.getAdRemainingTime,d=n.getAdSkippableState,c=n.getAdDuration,u=this.timeBeforeSkip||0,h=d(),p=o?o.getAdElapsedTime():a(),g=l(),v=c();if(v<0)return this.logger.warn(uv+" .adRemainingTimeChecker():adDuration="+v),!0;g>v&&!r&&(this.logger.warn(uv+" .adRemainingTimeChecker():remainingTime("+g+") is greater than adDuration("+v+") timeBeforeSkip="+u+" sec"),this.reservedSkipAdTimerHandler=this._addTimeout("Module::Control[skipAdCountdown]:ReservedSkipAd",vv.bind(this),1e3*u)),this.logger.none(uv+" adRemainingTimeChecker():\ninvisible="+i+"\nadSkippableState="+h+"\ntimeBeforeSkip="+u+"\nadDuration="+v+"\nremainingTime="+g+"\ntotalTimeCountdown="+t+" ",2,"pink");var f=s(cv);if((u===1/0||u>v)&&!t||h&&(!t||t&&!g))return(0,e.Zs)(f,{display:"none"}),!1;if(g<0)return!0;if(this.logger.none(uv+" adRemainingTimeChecker():skipAdCountdown="+f,2,"pink"),!f&&!i)return!1;var m=0!==v?Math.round(Math.min(v,u)-p):g,b=m>=0?m:Math.round(g);if(this.logger.none(" @AdRemainingTimeChange "+m+":"+u+":"+v+" adElapsedTime="+p,1,"cyan"),b===1/0)(0,e.Zs)(f,{display:"none"});else if(!i){this.logger.none(" @AdRemainingTimeChange remainingTime="+g+" "+m+":"+u+":"+v+" adElapsedTime="+p+" this.isSmallSizeModule="+this.isSmallSizeModule,1,"orange");var y=this.isSmallSizeModule?Fe(ev||(ev=ov([""," sec"])),b):m>0&&u!==1/0&&u<=v?m>0?Fe(iv||(iv=ov(["Skip ad in "," sec"])),b):"":g!==1/0&&Fe(rv||(rv=ov(["The ad will end in "," sec"])),Math.round(g));y?(f.innerHTML=y,(0,e.Zs)(f,{display:"block"})):(0,e.Zs)(f,{display:"none"})}return this.targetTimeWasReached||g&&!(m<=0&&(u<=v||0===v))||(this.logger.trace(" Target time reached"),vv.call(this),this.targetTimeWasReached=!0),!0}function gv(){this.logger.trace(uv+" @AdVideoComplete"),this.logger.log(uv+" Video complete, countdown target time is not reached",1),vv.call(this)}function vv(){var t=this.remainTimeChecker,i=this.totalTimeCountdown,r=this.invisible,o=this.moduleAPI,n=o.getControlNode,a=o.setAdSkippableState,s=o.getAdRemainingTime;if(this.starting=!1,a(!0),!r){var l=s(),d=n(cv);d&&(!i||i&&!l)&&((0,e.Zs)(d,{display:"none"}),t&&t._destroy(),this.remainTimeChecker=null)}}function fv(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function mv(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?fv(Object(i),!0).forEach((function(e){bv(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):fv(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function bv(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function yv(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Av(t,e){return Av=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Av(t,e)}var wv="skipAd",Pv="Module::Control[skipAd]",Ov=function(t){var i,r;function o(i){var r;(r=t.call(this,wv,i)||this).moduleAPI=i.getAPI();var o=yv(r),n=o.invisible,a=o.logger,s=o.moduleAPI,l=s||{},d=l.setControlData,c=l.getControlUnionData,u=l.getControlNode,h=l.addVPAIDEventListener,p=r.timeBeforeSkip=c(wv,"timeBeforeSkip");if(!n&&p<1/0){var g=u("wrapper"),v=c(wv,"css")||{},f=r.node=(0,e.Xv)(g,"div",mv(mv({position:"absolute",zIndex:5,top:0,right:0,padding:"10px",cursor:"pointer",opacity:1},v),{},{display:"none"}),'<svg id="skipAd" width="25" height="25" viewBox="0 0 64 64"><style><![CDATA[g#vnSkipAd>path#cross{opacity:.5}g#vnSkipAd:hover>path#cross{opacity:1}g#vnSkipAd:hover>path#background{fill-opacity:.5}]]></style><g id="vnSkipAd"><path id="background" fill-opacity=".298" d="M64.055 16c0-8.832-7.173-16-16.017-16h-31.99C7.204 0 .03 7.167.03 16v32c0 8.83 7.174 16 16.018 16h31.99c8.844 0 16.017-7.17 16.017-16V16z"/><path id="cross" fill="#fff" d="M32.605 27.734 47.91 12.427l3.62 3.62L36.223 31.35 51.53 46.66l-3.62 3.617L32.606 34.97 17.298 50.278 13.68 46.66l15.306-15.31L13.68 16.046l3.618-3.62 15.307 15.308z"/></g></svg>',(function(){r.logger.trace(Pv+" @click"),i.skipAd()}));if(!x.ai)c(wv,"hover")&&((0,e.Zs)(f,{opacity:0}),r._addDOMEventListener(g,"mouseenter",(function(){return(0,e.Zs)(f,{opacity:1})})),r._addDOMEventListener(g,"mouseleave",(function(){return(0,e.Zs)(f,{opacity:0})})));d(wv,{node:f})}return h("AdSkippableStateChange",Sv.bind(yv(r))),r.timeBeforeSkipChecker=new zi({getTimeBeforeSkip:function(){return p},moduleAPI:s,logger:a}),r._addDestroyableObject(r.timeBeforeSkipChecker),Sv.call(yv(r)),r}return r=t,(i=o).prototype=Object.create(r.prototype),i.prototype.constructor=i,Av(i,r),o.getName=function(){return wv},o}(Qi);function Sv(){var t=this.module,i=this.invisible,r=t.getControlNode(wv);if(r&&!i&&!Ue.call(t,"afterplay")){var o=t.getAdSkippableState();this.logger.trace(Pv+" @AdSkippableStateChange()) adSkippableState="+o,1);var a=null;if(r)(0,e.Zs)(r,{display:o?"block":"none"}),a=(0,n.er)(r).offsetWidth;t.trigger("AdSkipAdPositionChanged",{offsetWidth:a})}}function _v(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function Cv(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?_v(Object(i),!0).forEach((function(e){Ev(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):_v(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Ev(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Dv(t,e){return Dv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Dv(t,e)}var Iv="logo",Tv=function(t){var r,o;function n(r){var o;o=t.call(this,Iv,r)||this;var n=r.getControlNode("wrapper"),a=r.getControlUnionData(Iv,"customerlogo")||{},s=a.logoSrc,l=a.logoHeight,d=a.logoWidth,c=s&&"<img src='"+s+"' "+function(t,e,i){void 0===e&&(e="=");void 0===i&&(i=" ");return t.reduce((function(t,i){var r=Object.keys(i)[0],o=i[r];return o&&t.push(""+r+e+o),t}),[]).join(i)}([{width:d},{height:l}])+">",u=r.getControlUnionData(Iv,"css"),h=o.node=(0,e.Xv)(n,"div",Cv(Cv({position:"absolute",zIndex:1,bottom:0,left:0,padding:"5px",cursor:"pointer"},e.al),u),c||r.getControlUnionData(Iv,"content")||'<svg width="60" height="20" fill-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414" clip-rule="evenodd" viewBox="0 0 60 20"><path fill="#aaa" d="M54.205 15.227c-.203.658-.703 1.19-1.36 1.19H2.697c-1.196 0-1.467-.5-1.192-1.19l3.97-11.354c.284-.918.634-1.19 1.292-1.19H56.34c1.183 0 1.337.598 1.19 1.19l-3.325 11.354z"/><path fill="#fff" d="M10.38 12.75a.496.496 0 0 1-.08.14.279.279 0 0 1-.14.082c-.06.018-.144.03-.25.035a8.882 8.882 0 0 1-.41.008c-.136 0-.252 0-.348-.003A3.677 3.677 0 0 1 8.907 13a.966.966 0 0 1-.162-.03.349.349 0 0 1-.102-.052.183.183 0 0 1-.06-.073.641.641 0 0 1-.032-.11L7.11 6.923a1.613 1.613 0 0 1-.05-.29c0-.07.02-.123.066-.158a.413.413 0 0 1 .22-.065c.104-.01.246-.015.428-.015.156 0 .277.004.364.01a.84.84 0 0 1 .2.036c.046.02.077.05.09.08a.79.79 0 0 1 .044.13l1.154 5.06h.005l2.01-5.03c.02-.05.04-.1.07-.14.03-.03.06-.06.11-.08.05-.02.13-.03.22-.04.09 0 .22-.01.38-.01s.28.01.36.02c.09.01.15.04.18.08s.03.09.02.16c-.02.07-.05.17-.1.28l-2.47 5.82zm3.48.05a.149.149 0 0 1-.04.092.24.24 0 0 1-.115.067c-.053.01-.122.03-.206.04-.09.01-.2.01-.33.01s-.24-.01-.32-.02c-.09-.01-.16-.03-.2-.04-.05-.02-.09-.04-.11-.07a.161.161 0 0 1-.03-.09l.54-6.19c0-.04.01-.07.04-.09.02-.03.06-.05.11-.07.05-.02.12-.03.21-.04.08-.01.19-.02.32-.02s.24 0 .32.01c.08.01.15.02.2.04.05.01.08.04.1.06.02.02.02.05.02.09l-.54 6.19zm5.05-3.145c.027-.31.015-.6-.034-.867a1.683 1.683 0 0 0-.29-.695 1.427 1.427 0 0 0-.577-.458c-.25-.11-.57-.165-.98-.165h-.68l-.39 4.46h.69c.36 0 .67-.047.93-.142.26-.094.48-.237.66-.428.18-.19.33-.43.43-.712.11-.283.18-.615.21-.993zm1.382-.046c-.053.6-.177 1.11-.37 1.54-.196.43-.452.77-.77 1.04-.317.27-.69.47-1.123.59-.44.12-.94.19-1.52.19h-1.57c-.12 0-.21-.04-.28-.1-.07-.07-.1-.18-.09-.32l.5-5.72c.01-.15.06-.26.14-.33.08-.07.18-.1.29-.1h1.69c.58 0 1.07.07 1.47.2.39.13.72.34.97.61.25.26.44.6.55.99.11.39.14.85.09 1.37zm4.008 2.85c-.01.09-.02.18-.036.24a.683.683 0 0 1-.052.16.256.256 0 0 1-.07.09c-.028.02-.056.02-.087.02H20.76c-.11 0-.202-.04-.272-.1s-.1-.18-.086-.33l.5-5.72c.013-.15.06-.26.143-.33.082-.07.178-.1.29-.1h3.274c.03 0 .05 0 .07.02.02.02.04.05.05.09.01.04.02.09.02.16s0 .15-.01.25c-.01.09-.02.17-.04.24-.01.07-.03.12-.05.16-.02.04-.05.07-.07.09-.03.02-.05.03-.08.03h-2.34l-.14 1.6H24c.03 0 .06.01.083.03.02.02.04.05.052.09.012.04.02.09.023.15 0 .06 0 .14-.01.24-.005.09-.02.18-.03.24a.691.691 0 0 1-.05.15c-.02.04-.045.07-.07.08-.03.01-.057.02-.09.02h-1.98l-.16 1.85h2.36c.03 0 .06.01.085.03.023.02.042.05.055.09.02.04.027.09.03.16.002.06 0 .15-.01.24z"/><path fill="#eee" d="M36.967 12.52a.531.531 0 0 1-.182.358.504.504 0 0 1-.17.09.706.706 0 0 1-.192.027h-.568c-.118 0-.22-.013-.303-.036-.085-.03-.16-.07-.227-.13s-.13-.15-.188-.26c-.06-.11-.122-.25-.192-.42l-1.363-3.06a12.01 12.01 0 0 1-.448-1.21h-.01c-.008.24-.02.48-.033.72-.01.25-.03.49-.05.75l-.3 3.43c0 .04-.01.07-.03.09-.02.03-.05.05-.1.07a.64.64 0 0 1-.19.05c-.07.01-.17.01-.3.01-.11 0-.21-.01-.29-.02a.655.655 0 0 1-.18-.05c-.04-.02-.07-.04-.08-.07-.01-.03-.02-.06-.01-.09l.52-5.9c.01-.16.07-.28.17-.36.1-.08.22-.12.35-.12h.72c.13 0 .24.01.32.03.09.02.16.06.23.11s.13.12.18.21c.06.09.11.2.16.33l1.07 2.39.18.42.18.42.17.41.15.41h.01c.01-.24.03-.49.04-.74.02-.26.04-.51.06-.74l.27-3.07a.3.3 0 0 1 .04-.1c.03-.03.06-.05.11-.07a.83.83 0 0 1 .2-.05c.08-.01.18-.01.3-.01.11 0 .21 0 .29.01.08.01.13.02.17.04.04.02.07.04.09.07.018.03.02.06.02.09l-.516 5.9zm5.45-2.82c.03-.345.032-.658.002-.94a1.925 1.925 0 0 0-.22-.725c-.11-.2-.27-.356-.48-.466-.21-.11-.47-.17-.8-.17-.33 0-.61.06-.84.18-.23.12-.43.28-.58.49-.16.2-.27.45-.35.72-.08.27-.14.56-.16.87-.03.36-.03.68-.01.96.03.28.1.53.21.73.11.2.27.35.47.46.21.1.47.16.8.16.33 0 .61-.06.84-.19.23-.12.42-.29.57-.5.15-.21.27-.46.35-.74.08-.28.13-.58.16-.89zm1.406-.07a5.071 5.071 0 0 1-.332 1.46c-.17.428-.4.793-.69 1.09-.29.3-.64.528-1.05.686-.41.156-.87.235-1.38.235-.51 0-.95-.06-1.32-.2-.36-.13-.66-.33-.89-.61-.23-.27-.39-.62-.47-1.04-.09-.42-.11-.92-.06-1.5.05-.53.16-1.01.33-1.43.18-.42.41-.78.7-1.08.3-.3.65-.52 1.05-.68.41-.16.87-.24 1.4-.24.5 0 .93.07 1.3.2s.67.34.9.61c.23.27.39.62.49 1.04.1.42.12.91.07 1.48zm6.907 3.015a.624.624 0 0 1-.1.195.35.35 0 0 1-.17.11 1.064 1.064 0 0 1-.278.053 7.818 7.818 0 0 1-.89 0 1.015 1.015 0 0 1-.272-.052.226.226 0 0 1-.137-.11.551.551 0 0 1-.054-.19l-.69-4.15h-.01l-1.36 4.16c-.03.08-.05.14-.09.19-.04.05-.09.09-.16.12s-.16.05-.28.05c-.12.01-.27.02-.45.02-.2 0-.36 0-.47-.01a.809.809 0 0 1-.27-.05.227.227 0 0 1-.14-.11.473.473 0 0 1-.06-.19l-.99-5.72c-.02-.12-.03-.21-.03-.28 0-.07.02-.12.07-.16.04-.04.11-.06.21-.07.1-.01.23-.01.4-.01.16 0 .28.01.38.01.09.01.16.02.2.04.04.02.07.05.09.08.01.04.02.09.02.15l.71 5.02 1.63-4.98c.02-.07.04-.12.07-.16.02-.04.06-.07.12-.09.05-.02.12-.04.22-.04.09-.01.21-.016.36-.016.16 0 .29 0 .38.01.09.007.17.02.22.04.05.02.08.057.1.098.02.04.03.1.04.168l.8 4.987h.01l1.59-5.01c.01-.06.03-.1.05-.14.02-.04.06-.07.11-.09.05-.03.12-.04.21-.05.08-.01.21-.01.37-.01.15 0 .26.01.34.017.08.01.14.03.17.07.04.034.05.09.032.16-.01.078-.034.17-.08.3l-1.99 5.7zm-22.97-1.457.27-3.067 1.7 1.54-1.97 1.54z"/><path fill="#fff" d="M31.12 9.866c-.055.45-.157.857-.305 1.223-.172.42-.405.79-.698 1.09-.294.3-.644.52-1.052.68-.407.15-.87.23-1.385.23-.51 0-.95-.07-1.32-.2a2.155 2.155 0 0 1-.896-.61 2.37 2.37 0 0 1-.478-1.05c-.09-.42-.11-.92-.06-1.5.048-.53.156-1.01.328-1.43.173-.43.406-.79.698-1.08.293-.3.643-.53 1.05-.69.408-.16.872-.24 1.393-.24.497 0 .93.06 1.298.19.37.13.668.33.9.61.23.27.393.61.487 1.03.083.37.11.8.08 1.3-.7-.73-1.194-1.39-2.06-1.84a1.762 1.762 0 0 0-.908-.22c-.327 0-.546.06-.775.18-.23.12-.423.29-.576.49-.15.2-.26.45-.34.72a5.111 5.111 0 0 0-.16 1.83c.03.28.1.53.21.73.11.2.27.36.48.46.21.103.48.16.8.16.33 0 .62-.05.84-.187 1.18-.707 1.41-.99 2.47-1.95z"/></svg><svg width="60" height="20" fill-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414" clip-rule="evenodd" viewBox="0 0 60 20"><path fill="#262053" d="M54.205 15.227c-.203.658-.703 1.19-1.36 1.19H2.697c-1.196 0-1.467-.5-1.192-1.19l3.97-11.354c.284-.918.634-1.19 1.292-1.19H56.34c1.183 0 1.337.598 1.19 1.19l-3.325 11.354z"/><path fill="#fff" d="M10.38 12.75a.496.496 0 0 1-.08.14.279.279 0 0 1-.14.082c-.06.018-.144.03-.25.035a8.882 8.882 0 0 1-.41.008c-.136 0-.252 0-.348-.003A3.677 3.677 0 0 1 8.907 13a.966.966 0 0 1-.162-.03.349.349 0 0 1-.102-.052.183.183 0 0 1-.06-.073.641.641 0 0 1-.032-.11L7.11 6.923a1.613 1.613 0 0 1-.05-.29c0-.07.02-.123.066-.158a.413.413 0 0 1 .22-.065c.104-.01.246-.015.428-.015.156 0 .277.004.364.01a.84.84 0 0 1 .2.036c.046.02.077.05.09.08a.79.79 0 0 1 .044.13l1.154 5.06h.005l2.01-5.03c.02-.05.04-.1.07-.14.03-.03.06-.06.11-.08.05-.02.13-.03.22-.04.09 0 .22-.01.38-.01s.28.01.36.02c.09.01.15.04.18.08s.03.09.02.16c-.02.07-.05.17-.1.28l-2.47 5.82zm3.48.05a.149.149 0 0 1-.04.092.24.24 0 0 1-.115.067c-.053.01-.122.03-.206.04-.09.01-.2.01-.33.01s-.24-.01-.32-.02c-.09-.01-.16-.03-.2-.04-.05-.02-.09-.04-.11-.07a.161.161 0 0 1-.03-.09l.54-6.19c0-.04.01-.07.04-.09.02-.03.06-.05.11-.07.05-.02.12-.03.21-.04.08-.01.19-.02.32-.02s.24 0 .32.01c.08.01.15.02.2.04.05.01.08.04.1.06.02.02.02.05.02.09l-.54 6.19zm5.05-3.145c.027-.31.015-.6-.034-.867a1.683 1.683 0 0 0-.29-.695 1.427 1.427 0 0 0-.577-.458c-.25-.11-.57-.165-.98-.165h-.68l-.39 4.46h.69c.36 0 .67-.047.93-.142.26-.094.48-.237.66-.428.18-.19.33-.43.43-.712.11-.283.18-.615.21-.993zm1.382-.046c-.053.6-.177 1.11-.37 1.54-.196.43-.452.77-.77 1.04-.317.27-.69.47-1.123.59-.44.12-.94.19-1.52.19h-1.57c-.12 0-.21-.04-.28-.1-.07-.07-.1-.18-.09-.32l.5-5.72c.01-.15.06-.26.14-.33.08-.07.18-.1.29-.1h1.69c.58 0 1.07.07 1.47.2.39.13.72.34.97.61.25.26.44.6.55.99.11.39.14.85.09 1.37zm4.008 2.85c-.01.09-.02.18-.036.24a.683.683 0 0 1-.052.16.256.256 0 0 1-.07.09c-.028.02-.056.02-.087.02H20.76c-.11 0-.202-.04-.272-.1s-.1-.18-.086-.33l.5-5.72c.013-.15.06-.26.143-.33.082-.07.178-.1.29-.1h3.274c.03 0 .05 0 .07.02.02.02.04.05.05.09.01.04.02.09.02.16s0 .15-.01.25c-.01.09-.02.17-.04.24-.01.07-.03.12-.05.16-.02.04-.05.07-.07.09-.03.02-.05.03-.08.03h-2.34l-.14 1.6H24c.03 0 .06.01.083.03.02.02.04.05.052.09.012.04.02.09.023.15 0 .06 0 .14-.01.24-.005.09-.02.18-.03.24a.691.691 0 0 1-.05.15c-.02.04-.045.07-.07.08-.03.01-.057.02-.09.02h-1.98l-.16 1.85h2.36c.03 0 .06.01.085.03.023.02.042.05.055.09.02.04.027.09.03.16.002.06 0 .15-.01.24z"/><path fill="#b1bb45" d="M36.967 12.52a.531.531 0 0 1-.182.358.504.504 0 0 1-.17.09.706.706 0 0 1-.192.027h-.568c-.118 0-.22-.013-.303-.036-.085-.03-.16-.07-.227-.13s-.13-.15-.188-.26c-.06-.11-.122-.25-.192-.42l-1.363-3.06a12.01 12.01 0 0 1-.448-1.21h-.01c-.008.24-.02.48-.033.72-.01.25-.03.49-.05.75l-.3 3.43c0 .04-.01.07-.03.09-.02.03-.05.05-.1.07a.64.64 0 0 1-.19.05c-.07.01-.17.01-.3.01-.11 0-.21-.01-.29-.02a.655.655 0 0 1-.18-.05c-.04-.02-.07-.04-.08-.07-.01-.03-.02-.06-.01-.09l.52-5.9c.01-.16.07-.28.17-.36.1-.08.22-.12.35-.12h.72c.13 0 .24.01.32.03.09.02.16.06.23.11s.13.12.18.21c.06.09.11.2.16.33l1.07 2.39.18.42.18.42.17.41.15.41h.01c.01-.24.03-.49.04-.74.02-.26.04-.51.06-.74l.27-3.07a.3.3 0 0 1 .04-.1c.03-.03.06-.05.11-.07a.83.83 0 0 1 .2-.05c.08-.01.18-.01.3-.01.11 0 .21 0 .29.01.08.01.13.02.17.04.04.02.07.04.09.07.018.03.02.06.02.09l-.516 5.9zm5.45-2.82c.03-.345.032-.658.002-.94a1.925 1.925 0 0 0-.22-.725c-.11-.2-.27-.356-.48-.466-.21-.11-.47-.17-.8-.17-.33 0-.61.06-.84.18-.23.12-.43.28-.58.49-.16.2-.27.45-.35.72-.08.27-.14.56-.16.87-.03.36-.03.68-.01.96.03.28.1.53.21.73.11.2.27.35.47.46.21.1.47.16.8.16.33 0 .61-.06.84-.19.23-.12.42-.29.57-.5.15-.21.27-.46.35-.74.08-.28.13-.58.16-.89zm1.406-.07a5.071 5.071 0 0 1-.332 1.46c-.17.428-.4.793-.69 1.09-.29.3-.64.528-1.05.686-.41.156-.87.235-1.38.235-.51 0-.95-.06-1.32-.2-.36-.13-.66-.33-.89-.61-.23-.27-.39-.62-.47-1.04-.09-.42-.11-.92-.06-1.5.05-.53.16-1.01.33-1.43.18-.42.41-.78.7-1.08.3-.3.65-.52 1.05-.68.41-.16.87-.24 1.4-.24.5 0 .93.07 1.3.2s.67.34.9.61c.23.27.39.62.49 1.04.1.42.12.91.07 1.48zm6.907 3.015a.624.624 0 0 1-.1.195.35.35 0 0 1-.17.11 1.064 1.064 0 0 1-.278.053 7.818 7.818 0 0 1-.89 0 1.015 1.015 0 0 1-.272-.052.226.226 0 0 1-.137-.11.551.551 0 0 1-.054-.19l-.69-4.15h-.01l-1.36 4.16c-.03.08-.05.14-.09.19-.04.05-.09.09-.16.12s-.16.05-.28.05c-.12.01-.27.02-.45.02-.2 0-.36 0-.47-.01a.809.809 0 0 1-.27-.05.227.227 0 0 1-.14-.11.473.473 0 0 1-.06-.19l-.99-5.72c-.02-.12-.03-.21-.03-.28 0-.07.02-.12.07-.16.04-.04.11-.06.21-.07.1-.01.23-.01.4-.01.16 0 .28.01.38.01.09.01.16.02.2.04.04.02.07.05.09.08.01.04.02.09.02.15l.71 5.02 1.63-4.98c.02-.07.04-.12.07-.16.02-.04.06-.07.12-.09.05-.02.12-.04.22-.04.09-.01.21-.016.36-.016.16 0 .29 0 .38.01.09.007.17.02.22.04.05.02.08.057.1.098.02.04.03.1.04.168l.8 4.987h.01l1.59-5.01c.01-.06.03-.1.05-.14.02-.04.06-.07.11-.09.05-.03.12-.04.21-.05.08-.01.21-.01.37-.01.15 0 .26.01.34.017.08.01.14.03.17.07.04.034.05.09.032.16-.01.078-.034.17-.08.3l-1.99 5.7zm-22.97-1.457.27-3.067 1.7 1.54-1.97 1.54z"/><path fill="#fff" d="M31.12 9.866c-.055.45-.157.857-.305 1.223-.172.42-.405.79-.698 1.09-.294.3-.644.52-1.052.68-.407.15-.87.23-1.385.23-.51 0-.95-.07-1.32-.2a2.155 2.155 0 0 1-.896-.61 2.37 2.37 0 0 1-.478-1.05c-.09-.42-.11-.92-.06-1.5.048-.53.156-1.01.328-1.43.173-.43.406-.79.698-1.08.293-.3.643-.53 1.05-.69.408-.16.872-.24 1.393-.24.497 0 .93.06 1.298.19.37.13.668.33.9.61.23.27.393.61.487 1.03.083.37.11.8.08 1.3-.7-.73-1.194-1.39-2.06-1.84a1.762 1.762 0 0 0-.908-.22c-.327 0-.546.06-.775.18-.23.12-.423.29-.576.49-.15.2-.26.45-.34.72a5.111 5.111 0 0 0-.16 1.83c.03.28.1.53.21.73.11.2.27.36.48.46.21.103.48.16.8.16.33 0 .62-.05.84-.187 1.18-.707 1.41-.99 2.47-1.95z"/></svg>',Oi.bind(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(o),i.g.HOME_URL));return c||(x.ai?(h.firstElementChild.style.display="none",h.lastElementChild.style.display=""):(h.lastElementChild.style.display="none",h.firstElementChild.style.display="",o._addDOMEventListener(h,"mouseenter",(function(){h.firstElementChild.style.display="none",h.lastElementChild.style.display=""})),o._addDOMEventListener(h,"mouseleave",(function(){h.lastElementChild.style.display="none",h.firstElementChild.style.display=""})))),r.setControlData(Iv,{node:h}),o}return o=t,(r=n).prototype=Object.create(o.prototype),r.prototype.constructor=r,Dv(r,o),n.getName=function(){return Iv},n}(Qi);var Vv;function kv(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function xv(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?kv(Object(i),!0).forEach((function(e){jv(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):kv(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function jv(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Rv(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Mv(t,e){return Mv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Mv(t,e)}var Nv="volume",Lv=(null===o.ZP||void 0===o.ZP||null===(Vv=o.ZP.getChildWriter)||void 0===Vv?void 0:Vv.call(o.ZP,"Module::Control[volume]"))||o.ZP,Fv=function(t){return t?'<svg width="40" height="40" viewBox="0 0 64 64"><style><![CDATA[g#vnVolumeOn>ellipse,g#vnVolumeOn>path{opacity:.7}g#vnVolumeOn:hover>ellipse{opacity:1;fill-opacity:.45}g#vnVolumeOn:hover>path{opacity:1}]]></style><g id="vnVolumeOn" fill="none"><ellipse cx="32" cy="32" fill="#000" fill-opacity=".298" stroke-width="2" rx="30" ry="30"/><path stroke-width="2" d="M38.5 39.885h13.047M26.14 52.95l13.518-13.52M26.14 12.703 39.66 26.22m-1.16-.517h12.596m-1.12-1.473v17.235M26.63 51.885v-38.22m-6.124 9.002v20.965m-5.8-24.265v28.065"/></g></svg>':'<svg width="40" height="40" viewBox="0 0 64 64"><style><![CDATA[g#vnVolumeOff>ellipse,g#vnVolumeOff>path{opacity:.7}g#vnVolumeOff:hover>ellipse{opacity:1;fill-opacity:.45}g#vnVolumeOff:hover>path{opacity:1}]]></style><g id="vnVolumeOff" fill="none"><ellipse cx="32" cy="32" fill="#000" fill-opacity=".298" stroke-width="2" rx="30" ry="30"/><path stroke-width="2" d="M36 39.885h13.047M23.64 52.95l13.518-13.52M23.64 12.703 37.16 26.22M36 25.703h12.596m-1.12-1.473v17.235M24.13 51.885v-38.22M11.61 53.417l41.772-41.77"/></g></svg>'},Wv=function(t){var i,r;function o(i){var r;r=t.call(this,Nv,i)||this;var o=i.options,a=o.disableHoverAudio,s=o.disableSmoothVolumeChange,l=i.getAdVolume();r.logger.trace(":constructor() disableHoverAudio="+a+" startingVolume="+l+" mobile="+x.ai+" safari="+x.ai);var d=i.getControlNode("wrapper"),c=function(t){if(!0!==t.handled){t.preventDefault(),t.stopPropagation(),t.handled=!0;var e=i.getAdVolume();i.setAdVolume(e?0:1,{smoothUpdate:!0})}},u=r.node=(0,e.Xv)(d,"div",xv({position:"absolute",zIndex:1,bottom:0,right:0,width:"40px",height:"40px",padding:"10px",cursor:"pointer",stroke:"white",display:"none",boxSizing:"content-box"},i.getControlUnionData(Nv,"css")),Fv(l),c);r._addDOMEventListener(u,"touchend",c),r._updateVolumeTimeoutId=null;var h=Rv(r);function p(t,e,i){Lv.none(".updateVolume("+t.toFixed(2)+", "+e.toFixed(2)+", "+i+")"),h.cancelVolumeUpdate();var r=(0,n.uZ)(t+i,0,1);(i<0&&r<e||i>0&&r>e)&&(r=e),h.originalSetAdVolume(r,{invoker:this}),r!==e?this._updateVolumeTimeoutId=setTimeout(p.bind(this,r,e,i),16):zv.call(this)}return i.setControlData(Nv,{node:u}),r._addVPAIDEventListener(i,"AdExpandedChange",Bv.bind(i)),r._addVPAIDEventListener(i,"AdVolumeChange",Zv.bind(i)),r._addVPAIDEventListener(i,"AdVideoComplete",Hv.bind(Rv(r))),r._addVPAIDEventListener(i,"AdDestroyed",Uv.bind(Rv(r))),r._addVPAIDEventListener(i,"AdAudioDisabled",qv.bind(i)),r._addVPAIDEventListener(i,"AdAudioEnabled",Xv.bind(i)),r._addVPAIDEventListener(i,"AdLoadedVideoData",Gv.bind(i)),r._addVPAIDEventListener(i,"AdVideoStart",Gv.bind(i)),r.originalSetAdVolume=r._patchMethod(i,"setAdVolume",(function(t,e){void 0===e&&(e={});var i=xv(xv({},{step:.05,invoker:null,smoothUpdate:null}),e),r=i.step,o=i.invoker,n=i.smoothUpdate;this.logger.trace(".setAdVolume("+t+", params:"+JSON.stringify(e,["step","invoker","smoothUpdate"])+") ");var a=this.getAdVolume(),l=!o||o===h;if(!this.useExistsVideoSlot&&!l&&!this.canChangeVolume()&&(t>0||a>0))return void this.logger.warn("setAdVolume() attempt to set volume="+t+" was ignored");if(zv.call(this),a!==t){if(s||l&&!n)return h.cancelVolumeUpdate(),h.originalSetAdVolume(t,{invoker:this}),void this.logger.trace("setAdVolume("+t+") form module.setAdVolume()");var d=r*(a>t?-1:1);p.call(this,a,t,d)}})),x.ai||a||x.a1||Qv.call(Rv(r),i),r.logger.trace("constructor: at first setup volume to default value of Module = module.setAdVolume("+l+")"),i.setAdVolume(l,{step:1,invoker:Rv(r)}),r.canChangeVolume=i.canChangeVolume.bind(i),r}r=t,(i=o).prototype=Object.create(r.prototype),i.prototype.constructor=i,Mv(i,r);var a=o.prototype;return a.cancelVolumeUpdate=function(){clearTimeout(this._updateVolumeTimeoutId),this._updateVolumeTimeoutId=null},a.updateInProgress=function(){return null!=this._updateVolumeTimeoutId},o.getName=function(){return Nv},o}(Qi);function Hv(){this.logger.trace("@AdVideoComplete Clearing updateVolume timeout ("+this._updateVolumeTimeoutId+")",2),this.cancelVolumeUpdate()}function Uv(){this.logger.trace("@AdDestroyed Clearing updateVolume timeout ("+this._updateVolumeTimeoutId+")",2),this.cancelVolumeUpdate()}function zv(){var t=this.getControlNode(Nv),e=Math.ceil(this.getAdVolume());t&&(t.innerHTML=Fv(e))}function Bv(){var t=this.getAdExpanded(),e=this.getAdVolume();this.setAdVolume(+t?e:0,{step:1}),this.logger.trace("onAdExpandedChange() adExpanded="+t+" adVolume="+e)}function Zv(){zv.call(this)}function qv(){this.logger.trace("@AdAudioDisabled",2);var t=this.getControlNode(Nv);(0,e.Zs)(t,e.al)}function Xv(){this.logger.trace("@AdAudioEnabled",2);var t=this.getControlNode(Nv);(0,e.Zs)(t,{display:"block",visibility:"visible"})}function Gv(){var t=this.vpaid.hasAudio;void 0===t&&(t=this.vpaid.getAdVolume()>-1);var i=this.getControlNode(Nv);i&&(0,e.Zs)(i,{display:t?"block":"none"})}function Qv(t){var e=this;if(!this.mouseEventsAlreadySet){this.logger.trace("initMouseEvents()");var i=t.getControlNode("container");this._addDOMEventListener(i,"mouseenter",(function(){e.logger.trace("@mouseleave adVolume(1)"),t.setAdVolume(1,{invoker:e})})),this._addDOMEventListener(i,"mouseleave",(function(){e.logger.trace("@mouseleave adVolume(0)"),t.setAdVolume(0,{invoker:e})})),this.mouseEventsAlreadySet=!0}}var $v;function Jv(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function Yv(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Jv(Object(i),!0).forEach((function(e){Kv(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Jv(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Kv(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function tf(t,e){return tf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},tf(t,e)}var ef="play",rf=(null===o.ZP||void 0===o.ZP||null===($v=o.ZP.getChildWriter)||void 0===$v?void 0:$v.call(o.ZP,"Module::Control[play]"))||o.ZP;function of(){rf.trace("@AdPaused");var t=this.getControlNode(ef);(0,e.Zs)(t,{display:""})}function nf(){rf.trace("@AdPlaying");var t=this.getControlNode(ef);(0,e.Zs)(t,{display:"none"})}var af=function(t){var i,r;function o(i){var r,o=function(t){!0!==t.handled&&(t.stopPropagation(),t.preventDefault(),t.handled=!0,i.resumeAd())},n=(r=t.call(this,ef,i)||this).node=(0,e.Xv)(i.getControlNode("wrapper"),"div",Yv(Yv({position:"absolute",zIndex:3,top:0,right:0,bottom:0,left:0,width:"inherit",background:"rgba(0, 0, 0, .7)",cursor:"pointer"},i.getControlUnionData(ef,"css")),{},{display:"none"}),'<svg width="64" height="64"><circle cx="30.868" cy="31.255" r="30.066" fill="none" stroke="#fff" transform="translate(1.2 .813)"/><path fill="#fff" d="M23.817 49V17L50 33 23.817 49z"/></svg>',o);return r._addDOMEventListener(n,"touchend",o),(0,e.Zs)(n.firstChild,{position:"absolute",top:"50%",left:"50%",margin:"-32px 0 0 -32px"}),i.setControlData(ef,{node:n}),r._addVPAIDEventListener(i,"AdPaused",of.bind(i)),["AdVideoStart","AdStarted","AdResumed","AdPlaying"].forEach((function(t){r._addVPAIDEventListener(i,t,nf.bind(i))})),r}return r=t,(i=o).prototype=Object.create(r.prototype),i.prototype.constructor=i,tf(i,r),o.getName=function(){return ef},o}(Qi);function sf(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function lf(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?sf(Object(i),!0).forEach((function(e){df(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):sf(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function df(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function cf(t,e){return cf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},cf(t,e)}var uf,hf="progress",pf="progressBar",gf=function(t){var i,r;function o(i){var r;r=t.call(this,hf,i)||this;var o=i.getControlNode("wrapper"),n=r.node=(0,e.Xv)(o,"div",lf({position:"absolute",zIndex:2,bottom:0,left:0,width:"100%",height:"2px",background:"rgba(0, 0, 0, .5)"},i.getControlUnionData(hf,"css"))),a=(0,e.Xv)(n,"div",lf({position:"absolute",width:"0%",height:"2px",background:"#aab445"},i.getControlUnionData(pf,"css")));return i.setControlData(hf,{node:n}),i.setControlData(pf,{node:a}),r._addVPAIDEventListener(i,"AdVideoStart",vf.bind(i)),r._addVPAIDEventListener(i,"AdVideoComplete",ff.bind(i)),r._addVPAIDEventListener(i,"AdRemainingTimeChange",mf.bind(i)),r}r=t,(i=o).prototype=Object.create(r.prototype),i.prototype.constructor=i,cf(i,r);var n=o.prototype;return n.hide=function(){var t=this.node;t&&(this.isHidden=!0,(0,e.Zs)(t,{display:"none"}))},n.restore=function(){var t=this.node,i=this.isHidden;t&&i&&(this.isHidden=!1,(0,e.Zs)(t,{display:""}))},o.getName=function(){return hf},o}(Qi);function vf(){var t=this.getControlNode(pf);t&&(0,e.Zs)(t,{width:"0%"})}function ff(){var t=this.getControlNode(pf);t&&(0,e.Zs)(t,{width:"100%"})}function mf(){var t=this.getControlNode(pf);if(t){var i=this.getAdDuration(),r=1-this.getAdRemainingTime()/i;(0,e.Zs)(t,{width:100*r+"%"})}}function bf(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function yf(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Af(t,e){return Af=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Af(t,e)}var wf,Pf="advLogo",Of=(null===o.ZP||void 0===o.ZP||null===(uf=o.ZP.getChildWriter)||void 0===uf?void 0:uf.call(o.ZP,"Module::Control[advLogo]"))||o.ZP,Sf=function(t){var i,r;function o(i){var r;r=t.call(this,Pf,i,!0)||this;var o=i.getControlNode("wrapper"),n=i.getControlUnionData(Pf,"css")||{};n.width&&n.height||(n.width="160px",n.height="40px");var a=parseInt(n.width,10),s=parseInt(n.height,10),l=r.node=(0,e.Xv)(o,"div",function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?bf(Object(i),!0).forEach((function(e){yf(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):bf(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({position:"absolute",zIndex:4,left:0,marginTop:"10px",backgroundRepeat:"no-repeat",cursor:"pointer",visibility:"hidden"},n));x.ai||(r._addDOMEventListener(l,"mouseenter",(function(){return(0,e.Zs)(l,{opacity:.8})})),r._addDOMEventListener(l,"mouseleave",(function(){return(0,e.Zs)(l,{opacity:1})})));var d=i.getControlUnionData(Pf,"url");r._addDOMEventListener(l,"click",(function(){i.vpaid?i.vpaid.trigger("AdClickThru",d||null,null,!0):Oi.call(i,d)})),i.setControlData(Pf,{node:l});var c=getComputedStyle(o).marginBottom,u=Math.max(l.offsetHeight+10,parseInt(c,10));return(0,e.Zs)(o,{marginBottom:u+"px"}),r._addVPAIDEventListener(i,"AdSizeChange",_f.bind(i,a,s)),r._addVPAIDEventListener(i,"AdStarted",Cf.bind(i)),r}return r=t,(i=o).prototype=Object.create(r.prototype),i.prototype.constructor=i,Af(i,r),o.getName=function(){return Pf},o}(Qi);function _f(t,i){Of.trace("@AdSizeChange",2);var r=this.getControlNode(Pf),o=this.getControlNode("callButton"),n=this.getAdWidth(),a=i/t,s=Math.min(.3*n,t),l=Math.min(s*a,i),d=0;this.format.isFloatingMode()&&(d=10,o||(s+=20,l+=20)),(0,e.Zs)(r,{left:d+"px",backgroundSize:s+"px "+l+"px",width:s+"px",height:l+"px"}),this._addTimeout("callButtonIsReady",Ef.bind(this),0)}function Cf(){var t=this.getControlNode(Pf);(0,e.Zs)(t,{visibility:"visible"})}function Ef(){var t=this.getControlNode(Pf),i=this.getControlNode("callButton"),r=(i&&i.offsetHeight||0)-t.offsetHeight;if(r>0){var o=window.getComputedStyle(i).marginTop;(0,e.Zs)(t,{marginTop:r/2+parseInt(o,10)+"px"})}}function Df(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function If(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Df(Object(i),!0).forEach((function(e){Tf(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Df(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Tf(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Vf(t,e){return Vf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Vf(t,e)}var kf="callButton",xf=(null===o.ZP||void 0===o.ZP||null===(wf=o.ZP.getChildWriter)||void 0===wf?void 0:wf.call(o.ZP,"Module::Control[callButton]"))||o.ZP,jf="#f8f8f8";function Rf(){xf.trace("@AdSizeChange",2);var t=this.getControlNode(kf),i=this.getControlNode("advLogo"),r=this.getAdWidth(),o=i?10:0,n=i&&i.offsetWidth||0,a=getComputedStyle(t).borderWidth,s=2*parseInt(a,10),l=this.format.isFloatingMode(),d=Math.min(.1*r,33),c=.3*r;r<640&&(c=r-n-o-10-s);var u=0;l&&(c=r-n-o-10-s-20,d=33,u=9),(0,e.Zs)(t,{right:u+"px",width:c+"px",height:d+"px"}),this._addTimeout("advLogoIsReady",Nf.bind(this),0)}function Mf(){var t=this.getControlNode(kf);(0,e.Zs)(t,{visibility:"visible"})}function Nf(){var t=this.getControlNode(kf),i=this.getControlNode("advLogo"),r=(i&&i.offsetHeight||0)-t.offsetHeight;if(r>0){var o=getComputedStyle(i).marginTop;(0,e.Zs)(t,{marginTop:r/2+parseInt(o,10)+"px"})}}var Lf,Ff,Wf=function(t){var i,r;function o(i){var r;r=t.call(this,kf,i,!0)||this;var o=i.getControlNode("wrapper"),n=i.getControlUnionData(kf,"css")||{},a=r.node=(0,e.Xv)(o,"div",If(If({position:"absolute",zIndex:4,right:0,top:"100%",height:"33px",padding:"5px",marginTop:"10px",backgroundColor:jf,border:"1px solid rgba(0, 0, 0, 0.5)",borderRadius:"3px",cursor:"pointer",visibility:"hidden",alignItems:"center",justifyContent:"center"},n),{},{display:"flex"}),_s),s=a.querySelector("svg");if(s&&(0,e.Zs)(s,{height:"100%"}),(0,e.Xv)(a,"span",{padding:"10px 10px 10px 0",color:"#000",lineHeight:"15px",textAlign:"center"},i.getControlUnionData(kf,"text")||"  "),i.setControlData(kf,{node:a}),!x.ai){var l=i.getControlUnionData(kf,"hoverBackgroundColor");r._addDOMEventListener(a,"mouseenter",(function(){return(0,e.Zs)(a,{backgroundColor:l||"#dedede",border:"1px solid rgba(0, 0, 0, 0.75)"})})),r._addDOMEventListener(a,"mouseleave",(function(){return(0,e.Zs)(a,{backgroundColor:n.backgroundColor||jf,border:"1px solid rgba(0, 0, 0, 0.5)"})}))}var d=i.getControlUnionData(kf,"url");r._addDOMEventListener(a,"click",(function(){i.vpaid?i.vpaid.trigger("AdClickThru",d||null,null,!0):Oi.call(i,d)}));var c=getComputedStyle(o).marginBottom,u=Math.max(a.offsetHeight+20,parseInt(c,10));return(0,e.Zs)(o,{marginBottom:u+"px"}),r._addVPAIDEventListener(i,"AdSizeChange",Rf.bind(i)),r._addVPAIDEventListener(i,"AdStarted",Mf.bind(i)),r}return r=t,(i=o).prototype=Object.create(r.prototype),i.prototype.constructor=i,Vf(i,r),o.getName=function(){return kf},o}(Qi);function Hf(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function Uf(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Hf(Object(i),!0).forEach((function(e){zf(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Hf(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function zf(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Bf(t,e){return Bf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Bf(t,e)}var Zf="moreInfo",qf=(null===o.ZP||void 0===o.ZP||null===(Lf=o.ZP.getChildWriter)||void 0===Lf?void 0:Lf.call(o.ZP,"Module::Control[moreInfo]"))||o.ZP,Xf="#fff",Gf="rgba(0, 0, 0, 0.2)",Qf="rgba(0, 0, 0, 0.5)",$f=function(t){var i,r;function o(i){var r;r=t.call(this,Zf,i,!0)||this;var o,n,a=i.getControlNode("wrapper"),s=i.getControlUnionData(Zf,"css")||{},l=r.node=(0,e.Xv)(a,"div",Uf(Uf({position:"absolute",zIndex:4,padding:"10px",borderRadius:"2px",transition:"0.3s",color:s.color||Xf,border:"1px solid "+(s.color||Xf),textShadow:"1px 1px 19px rgba(0, 0, 0, 0.7)",backgroundColor:s.backgroundColor||Gf,cursor:"pointer",visibility:"hidden",alignItems:"center",justifyContent:"center"},s),{},{display:"flex"}));(0,e.Xv)(l,"span",{lineHeight:"15px",textAlign:"center"},i.getControlUnionData(Zf,"text")||Fe(Ff||(o=["Learn more"],n||(n=o.slice(0)),o.raw=n,Ff=o))),i.setControlData(Zf,{node:l});var c=i.getControlUnionData(Zf,"hoverBackgroundColor"),u=i.getControlUnionData(Zf,"hoverColor");x.ai?(0,e.Zs)(l,{backgroundColor:c||Qf,color:u||Xf,borderColor:u||Xf,textShadow:"1px 1px 19px rgba(0, 0, 0, 0.7)"}):(r._addDOMEventListener(l,"mouseenter",(function(){return(0,e.Zs)(l,{backgroundColor:c||Qf,color:u||Xf,borderColor:s.color||Xf,textShadow:"1px 1px 19px rgba(0, 0, 0, 0.85)"})})),r._addDOMEventListener(l,"mouseleave",(function(){return(0,e.Zs)(l,{backgroundColor:s.backgroundColor||Gf,color:s.color||Xf,borderColor:s.color||Xf,textShadow:"1px 1px 19px rgba(0, 0, 0, 0.7)"})})));var h=i._getLastDataXml(),p=(0,d.FB)(h,"ClickThrough");return p&&r._addDOMEventListener(l,"click",(function(){i.vpaid?i.vpaid.trigger("AdClickThru",p||null,null,!0):Oi.call(i,p)})),Kf.call(i),r._addVPAIDEventListener(i,"AdSizeChange",Jf.bind(i)),r._addVPAIDEventListener(i,"AdStarted",Yf.bind(i)),r}return r=t,(i=o).prototype=Object.create(r.prototype),i.prototype.constructor=i,Bf(i,r),o.getName=function(){return Zf},o}(Qi);function Jf(){qf.trace("@AdSizeChange",2);var t=this.getControlNode(Zf),i=this.format.isFloatingMode()?"hidden":"visible",r=this.getAdWidth()*(x.ai?.3:.22);(0,e.Zs)(t,{width:r+"px",visibility:i}),Kf.call(this)}function Yf(){var t=this.getControlNode(Zf);(0,e.Zs)(t,{visibility:"visible"})}function Kf(){var t=this.getControlNode(Zf),i=this.getControlNode("title"),r=this.getControlNode("wrapper"),o=i&&parseInt(getComputedStyle(i).height,10)||r&&parseInt(getComputedStyle(r).paddingTop,10)||0,a=parseInt(getComputedStyle(t).width,10),s=(this.getControlUnionData(Zf,"position")||"bottom").toLowerCase(),l=this.getAdWidth(),d=this.getAdHeight(),c=this.getControlUnionData(Zf,"marginV")||"10%",u=this.getControlUnionData(Zf,"marginH")||"5%",h={};~s.indexOf("top")?h.top=(0,n.Ug)(tm(c,d)+o):~s.indexOf("bottom")&&(h.bottom=(0,n.Ug)(tm(c,d))),~s.indexOf("left")?h.left=(0,n.Ug)(tm(u,l)):~s.indexOf("right")?h.right=(0,n.Ug)(tm(u,l)):h.left=(0,n.Ug)(.5*l-a/2),(0,e.Zs)(t,h)}function tm(t,e){var i=(0,d.GM)(t);return null!=i?i*e:parseFloat(t)}function em(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function im(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function rm(t,e){return rm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},rm(t,e)}var om,nm="bottomBorder",am=function(t){var i,r;function o(i){var r;(r=t.call(this,nm,i,!0)||this)._prevIsFloatingMode=null;var o=i.getControlNode("wrapper"),n=i.getControlUnionData(nm,"css")||{};r._displayNoneForEmbeddedMode=n&&"none"===n.display;var a=getComputedStyle(o).marginBottom;a=parseInt(a,10);var s=r.node=(0,e.Xv)(o,"div",function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?em(Object(i),!0).forEach((function(e){im(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):em(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({position:"absolute",zIndex:4,left:0,top:"calc(100% + "+a+"px)",height:"15px",width:"100%",marginBottom:"15px",borderTop:"1px solid rgb(248, 248, 248)",background:"radial-gradient(ellipse farthest-side at 50% -30%, rgba(0, 0, 0, 0.15), rgba(97, 97, 97, 0.0) 95%)"},n));return i.setControlData(nm,{node:s}),r._addVPAIDEventListener(i,"AdSizeChange",sm.bind(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(r),i,a)),r}return r=t,(i=o).prototype=Object.create(r.prototype),i.prototype.constructor=i,rm(i,r),o.getName=function(){return nm},o}(Qi);function sm(t,i){var r=t.getControlNode(nm),o=t.getControlNode("iframe"),a=t.getControlNode("wrapper"),s=t.format.isFloatingMode();if(this._prevIsFloatingMode!==s){var l=Di.call(t).floatOutsideHeight;s?((0,e.Zs)(r,{display:"none"}),(0,e.Zs)(a,{marginBottom:(0,n.Ug)(i)}),(0,e.Zs)(o,{height:(0,n.Ug)(l)})):this._displayNoneForEmbeddedMode||((0,e.Zs)(r,{display:"block"}),(0,e.Zs)(a,{marginBottom:(0,n.Ug)(i+30)}),(0,e.Zs)(o,{height:(0,n.Ug)(l)})),l!==Di.call(t).floatOutsideHeight&&setTimeout((function(){return t.trigger("slotSizeChanged")}))}this._prevIsFloatingMode=s}function lm(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function dm(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?lm(Object(i),!0).forEach((function(e){cm(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):lm(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function cm(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function um(t,e){return um=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},um(t,e)}var hm="debugOverlay";const pm=function(t){var i,r;function o(i){var r;(r=t.call(this,hm,i)||this).detectContainer=function(){var t,e,i=r.module.getControlNode("vpaidSlot")||r.module.getControlNode("wrapper"),o=null==i||null===(t=i.querySelector)||void 0===t?void 0:t.call(i,"iframe");try{var n;e=null==o||null===(n=o.contentWindow)||void 0===n?void 0:n.document}catch(t){}var a=e||i;a&&r.container!==a&&(r.container=a,r.stopTapholdTimer(),r.removeListeners(),r.addListeners()),r.detectContainerTimer=setTimeout((function(){clearTimeout(r.detectContainerTimer),r.detectContainer()}),500)},r.addListeners=function(){r._addDOMEventListener(r.container,"pointerdown",r.startTapholdTimer),r._addDOMEventListener(r.container,"pointerup",r.stopTapholdTimer),r._addDOMEventListener(r.container,"pointerleave",r.stopTapholdTimer)},r.removeListeners=function(){r._removeDOMEventListener(r.container,"pointerdown",r.startTapholdTimer),r._removeDOMEventListener(r.container,"pointerup",r.stopTapholdTimer),r._removeDOMEventListener(r.container,"pointerleave",r.stopTapholdTimer)},r.startTapholdTimer=function(){clearTimeout(r.tapholdTimer),r.tapholdTimer=setTimeout((function(){r.openOverlay()}),r.delay)},r.stopTapholdTimer=function(){clearTimeout(r.tapholdTimer)},r.openOverlay=function(){r.node.style.display="block",r.module.pauseAd&&r.module.pauseAd(),r._addDOMEventListener(r.container,"click",r.skipEventPropagation,{capture:!0,once:!0})},r.skipEventPropagation=function(t){t.stopPropagation()},r.openDebugLink=function(){r.debugUrl&&Oi(r.debugUrl+"/"+r.debugId),r.closeOverlay()},r.closeOverlay=function(t){t&&(t.preventDefault(),t.stopPropagation()),r.node.style.display="none",r._removeDOMEventListener(r.container,"click",r.skipEventPropagation)},r.debugId=Math.random().toString(36).substring(2,11);var o=i.getControlUnionData(hm,"delay");r.delay="number"!=typeof o||Number.isNaN(o)?5e3:o,r.detectContainer();var n=Qo.call(i,"vnCreative:debug")||{},a=n.urls,s=n.uniqueId,l=(a||[])[0];r.debugUrl=l&&l.split&&l.split("?")[0];var d,c,u=i.getControlUnionData(hm,"css"),h=r.node=(0,e.Xv)(r.module.getControlNode("wrapper"),"a",dm(dm({position:"absolute",zIndex:6,top:0,left:0,cursor:"pointer",backgroundColor:"rgba(0,0,0,0.5)",width:"100%",height:"100%"},u),{},{display:"none"}),"",(function(){})),p=(0,e.Xv)(h,"div",{position:"absolute",zIndex:7,top:"50%",left:"50%",padding:"20px",paddingRight:"30px",color:"gray",cursor:"pointer",lineHeight:1,fontSize:"20px",backgroundColor:"white",maxWidth:r.container.getBoundingClientRect().width/2+"px",transform:"translateX(-50%) translateY(-50%)",borderRadius:"4px",display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center"},Fe(om||(d=["Click to get Videonow debug"],c||(c=d.slice(0)),d.raw=c,om=d)));return(0,e.Xv)(p,"button",{position:"absolute",border:"none",margin:"0",padding:"0",width:"auto",overflow:"visible",background:"transparent",color:"black",font:"inherit",lineHeight:"18px",fontSize:"18px",top:"4px",right:"4px",cursor:"pointer",display:"block"},"",r.closeOverlay),l&&r._addDOMEventListener(h,"click",(function(t){t.preventDefault(),r.logger.log("debugOverlay @onclick");var e=((null==i?void 0:i.getControlUnionData("vnCreative","debugFailed"))||{}).url;nn.call(i,r.debugId,l,s,e).then((function(){return r.openDebugLink()}))})),i.setControlData(hm,{node:h}),r}return r=t,(i=o).prototype=Object.create(r.prototype),i.prototype.constructor=i,um(i,r),o.prototype._destroy=function(){clearTimeout(this.detectContainerTimer),this.stopTapholdTimer(),this._removeDOMEventListener(this.container,"click",this.skipEventPropagation),t.prototype._destroy.call(this)},o.getName=function(){return hm},o}(Qi);function gm(){var t=Symbol("collectionFieldName");this[t]=[],this.pushControlIntoCollection=function(e){return this[t].push(e),e},this.getControlInstance=function(e){var i=this[t].filter((function(t){return t.name===e}))[0];return void 0===i&&this.logger.none(".getControlInstance("+e+") Unable to find control ("+i+")"),i},this.destroyControls=function(){this.logger.trace(".destroyControls()");var e=[];return this[t].forEach((function(t){var i=t&&t.getName&&t.getName();i&&e.push(i),t._destroy()})),this[t]=[],e},this.destroyUIControls=function(){var t=this;this.logger.trace(".destroyUIControls()");var e=[];return fm.forEach((function(i){var r=i&&i.getName&&i.getName();r&&e.push(r),t.destroyControl(r)})),this.destroyControl("spinner"),this.destroyControl("title"),e.push("spinner","title"),e},this.clearControlsCollection=function(){this[t]=[]},this.destroyControl=function(e){var i=this;this[t]=this[t].filter((function(t){return!t.getName||t.getName()!==e||(t._destroy(),i.logger.trace(' destroyControl(). Control "'+e+'" has been destroyed'),!1)}))},this.hideControl=function(e){var i=this;ym(this[t],e,(function(t){t.hide&&(t.hide(),i.logger.trace(' hideControl(). Control "'+e+'" has been hidden'))}))},this.restoreControl=function(e){var i=this;ym(this[t],e,(function(t){t.restore&&(t.restore(),i.logger.trace(' restoreControl(). Control "'+e+'" has been restored'))}))}}var vm=[Vg,Ng,Zg,Ug,Jg],fm=[hv,Ov,Tv,Wv,af,gf,Sf,Wf,$f,am];function mm(t,e){var i=this;void 0===t&&(t=!1),void 0===e&&(e=!1);var r=this.getControlUnionData("adSpectorControls"),o="1"===r;this.logger.log("._createControls() vpaidIsExternal="+t+" onlyInterfaceControls="+e+" adSpectorControlsValue="+r);var a=this.fixedFormat;if(a){var s=this.destroyUIControls();s&&s.length&&s.forEach((function(t){i.getControlNode(t)&&i.setControlData(t,{node:null})})),Object.entries(this.fixedControlsSlots||{}).forEach((function(t){var e=t[0],r=t[1];r&&i.setControlData(e,{node:r}),"vpaidslot"===e.toLowerCase()&&(r.innerHTML="")}));var l=this.format;l&&l.updateControlsLayout&&l.updateControlsLayout()}else{var d=this.destroyControls();d&&d.length&&d.forEach((function(t){i.getControlNode(t)&&i.setControlData(t,{node:null})}))}var c=t&&!o?fm.filter((function(t){var e=i.getControlUnionData(t.getName(),"enableWithVPAID");return(0,n.MV)(e)})):fm;this._useExistsVideoSlot&&(this.logger.trace('._createControls() We have ready videoSlot, set css: {background: "none" } for container'),this.setControlData("container",{css:{background:"none"}}));var u=a?[]:[].concat(vm);return this.options.hideSpinnerControl||u.push(og),this.options.hideTitleControl||u.push(Cg),u.push(pm),[].concat(e?[]:u,c).reduce((function(t,e){return t.then((function(){var t;try{t=new e(i),i.pushControlIntoCollection(t)}catch(t){i.logger.none(""+(t&&t.message||t))}return t&&t.isReady?t.isReady():Promise.resolve()}))}),Promise.resolve()).then((function(){return bm.call(i),!0}))}function bm(){var t=this,i=this.getControlNode("wrapper"),r=Di.call(this).paddingTop,o=this.getControlNode("title"),n=this.getControlNode("logo");i&&r&&o&&0===o.getBoundingClientRect().height&&n&&0===n.getBoundingClientRect().height&&((0,e.Zs)(i,{paddingTop:0}),setTimeout((function(){return t.trigger("slotSizeChanged")})))}function ym(t,e,i){t.some((function(t){return!(!t.getName||t.getName()!==e)&&(i(t),!0)}))}var Am="::Extension[controls]",wm={adlabel:"title",countdown:"skipAdCountdown",soundbtn:"volume",logo:"logo"},Pm={"-1":{display:"none"},0:{display:"none"},1:{display:""},TL:{position:"absolute",top:"10px",right:"auto",bottom:"auto",left:"10px"},TR:{position:"absolute",top:"10px",right:"10px",bottom:"auto",left:"auto"},BL:{position:"absolute",top:"auto",right:"auto",bottom:"10px",left:"10px"},BR:{position:"absolute",top:"auto",right:"10px",bottom:"10px",left:"auto"}};var Om="::Extension[vnTargetedWords]";var Sm;function _m(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function Cm(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Em="subtitle",Dm="::Extension[vnSubtitles]",Im=(null===o.ZP||void 0===o.ZP||null===(Sm=o.ZP.getChildWriter)||void 0===Sm?void 0:Sm.call(o.ZP,Dm))||o.ZP,Tm={srt:function(t){var e=/(\d+)\n([\d:.,]+)\s*-->\s*([\d:.,]+)\n((?:.|\n)+)/m,i=t.replace(/^[^\S\n]*(.+)[^\S\n]*$/gm,"$1").replace(/\r/g,"\n").split("\n\n");Im.trace(Dm+" Total raw chunks: "+i.length);var r=i.map((function(t){var i=e.exec(t);return i?{id:i[1],startTime:(0,d.TD)(i[2]),endTime:(0,d.TD)(i[3]),text:i[4]}:(Im.warn(Dm+" Invalid data chunk ("+t+")"),null)}));Im.trace(Dm+" Total parsed objects: "+r.length);var o=r.filter(Boolean);return Im.trace(Dm+" Total filtered objects: "+o.length),o}},Vm=function(t){var e=t.type,i=t.data;Im.trace(Dm+".parseSubtitles("+e+")");var r=Tm[e.toLowerCase()];if("function"!=typeof r)return Im.warn(Dm+" Data type ("+e+") is not supported"),null;var o=r(i);return Array.isArray(o)?o:(Im.warn(Dm+" Unable to parse data"),null)},km=function(t){return Im.trace(Dm+".processSubtitles()"),function(t){return Im.trace(Dm+".readSubtitles()"),new Promise((function(e){var i=t.querySelector("data");if(i){var r=(0,d.FB)(i);Im.trace(Dm+" Using subtitles data from VAST");var o=i.getAttribute("type");if(!o)throw new Error("Data type is not defined");e({type:o,data:r})}else{var n=t.querySelector("url");if(!n)throw new Error('Neither "data" nor "url" provided');var a=(0,d.FB)(n);Im.trace(Dm+" Fetching subtitles data from "+a);var s=n.getAttribute("type");if(!s)throw new Error("Url type is not defined");Si(a).then((function(t){Im.trace(Dm+" Data loaded"),e({type:s,data:t.target.responseText})})).catch((function(t){throw new Error("Data request error ("+t+")")}))}}))}(t).then(Vm)};function xm(){var t=this.getAdAspectRatio(),i=this.getControlNode("wrapper"),r=(0,e.Xv)(i,"div",function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?_m(Object(i),!0).forEach((function(e){Cm(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):_m(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({display:"none",position:"absolute",zIndex:5,bottom:t<=1?"10%":"25%",left:"50%",transform:"translateX(-50%)",padding:"5px",borderRadius:"3px",color:"white",background:"rgba(0, 0, 0, 0.3)",fontSize:"10pt",lineHeight:1.3,textAlign:"center",whiteSpace:"pre",pointerEvents:"none"},this.getControlUnionData(Em,"css")));this.setControlData(Em,{node:r})}function jm(){var t=this.getControlNode("subtitle");(0,e.Zs)(t,{display:"none"}),t.innerHTML=""}function Rm(t){var i=this.getControlNode("subtitle"),r=this.getAdElapsedTime(),o=t.find((function(t){var e=t.startTime,i=t.endTime;return e<=r&&r<i}));o?((0,e.Zs)(i,{display:""}),i.innerHTML=o.text):((0,e.Zs)(i,{display:"none"}),i.innerHTML="")}var Mm=[function(t){return new Promise((function(e){var i,r=t&&t.getAPI&&t.getAPI()||{},n=r.logger||o.ZP;((null==n||null===(i=n.getChildWriter)||void 0===i?void 0:i.call(n,Od))||n).trace(""+Od);var a=r.getLastParameters(),s=a&&a.vnSets;if(s){var l=s.global;r.setControlData(Pd,s,l)}e(t)}))},function(t){return new Promise((function(e){var i,r=t&&t.getAPI&&t.getAPI()||{},n=r.getControlUnionData,a=r.getControlRawUnionData,s=r.getControlUnionDataGlobal,l=r.setControlData,d=r.getLastParameters,c=r.updateLastParameters,u=r.logger||o.ZP,h=(null==u||null===(i=u.getChildWriter)||void 0===i?void 0:i.call(u,Td))||u;h.trace(""+Td);var p,g=d(),v=g&&g.vnSetsApply;if(v){var f=v.important,m=v.global;l(Id,{sets:v,important:f},m),p=v}var b=((p?n:s)(Id)||{}).sets,y=b&&Object.keys(b).filter((function(t){return!Vd.includes(t)}));if(!y||!y.length)return e(t);var A=a("vnSets")||{},w=A&&Object.keys(A);return w&&(w=w.filter((function(t){return!Vd.includes(t)}))),w&&w.length?(y.forEach((function(t){if(w.includes(t)){var e=A[t],i=e&&Object.keys(e).filter((function(t){return!Vd.includes(t)}));i&&i.forEach((function(i){var r=e[i],o=b[t].orderIndex;r&&(void 0!==o&&(r.orderIndex=p?o:-1),c(i,r))}))}else h.warn(Td+' key "'+t+'" is not belongs to the available sets')})),e(t)):e(t)}))},dn,function(t){return new Promise((function(e){var i,r=t&&t.getAPI&&t.getAPI()||{},n=r.logger||o.ZP,a=(null==n||null===(i=n.getChildWriter)||void 0===i?void 0:i.call(n,As))||n,s=r.getLastParameters,l=r.setControlData,d=r.getControlUnionData,c=r.trackStrongUrls;a.trace(""+As);var u=(s()||{}).vnProhibitedWords||{};[].concat(u).forEach((function(t){var e,i=t.pattern,r=t.global,o=t.selector,n=t[N.Os],a=d(ys)||{},s=a.pattern,c=a.selector;l(ys,ms(ms({},t),{},((e={})[N.Os]=n||(i||i!==s)&&(o||o!==c)?"solid":"",e)),r)}));var h=d(ys)||{},p=h.pattern,g=h.selector,v=h.trackings,f=h.fatal;if(p){var m=new RegExp(p,"i"),b=function(t){var e;try{(e=window.top.document.querySelectorAll(t))&&e.length||(e=window.top.document.querySelectorAll("body"))}catch(t){}if(!e||!e.length)try{e=document.querySelectorAll(t)}catch(t){}e&&e.length||(e=document.querySelectorAll("body"));return Array.from(e).map((function(t){return t.innerText||t.textContent})).join("\n")}(g)||"";a.trace(As+" Matching: "+p);var y=b.match(m);if(y){c(v);var A=Error(As.substring(2)+" Pattern matched: "+y);throw A.fatal=!!f,A}a.log(As+" Pattern not matched: "+p)}e(t)}))},Gl,function(t){return new Promise((function(e){var i,r=t&&t.getAPI&&t.getAPI().logger||o.ZP,n=(null==r||null===(i=r.getChildWriter)||void 0===i?void 0:i.call(r,Om))||r;n.trace(""+Om);var a=t._getLastDataXml(),s=a&&a.querySelector('Extensions > Extension[type="vnTargetedWords"]');if(s){n.trace(Om+" Init");var l=(0,d.sQ)(s,"fatal"),c=s&&s.querySelector("words");if(!c)return void e(t);var u=(0,d.FB)(c).replace(/[,\s]+$/g,"").split(/\s*,\s*/i).join("|"),h=new RegExp(u,"i"),p=(function(t){var e;try{e=document.querySelectorAll(t)}catch(t){}return e&&e.length||(e=document.querySelectorAll("body")),Array.from(e).map((function(t){return t.textContent||t.innerText})).join("\n")}((0,d.FB)(s,"selector"))||"").match(h);if(n.trace(Om+" Matching: "+u),!p){var g=new Error(Om+" Pattern not matched: "+u);throw g.fatal=!!l,g}n.log(Om+" Pattern matched: "+p),qo.call(t,'Extension[type="vnTargetedWords"] targetedMetrics')}e(t)}))},function(t){return new Promise((function(e){var i,r=t&&t.getAPI&&t.getAPI().logger||o.ZP,n=(null==r||null===(i=r.getChildWriter)||void 0===i?void 0:i.call(r,Am))||r;n.trace("init "+Am);var a=t._getLastDataXml(),s=a&&a.querySelector('Extensions > Extension[type="controls"]');if(s){n.log(Am+" Init");var l=s.querySelectorAll("control");if(l&&l.length)Array.from(l).forEach((function(e){var i=e.getAttribute("id"),r=e.getAttribute("layout");n.trace(Am+" "+i+": "+r),wm[i]?t.setControlData(wm[i],{css:Pm[r]||{}}):n.warn(Am+" "+i+" is not valid name for control")})),n.log(Am+" Layout applied");else{var c=(0,d.FB)(s);"1"!==c&&"0"!==c||(n.warn(Am+" Adspector controls detected with value="+c),t.setControlData("adSpectorControls",c))}}e(t)}))},function(t){return new Promise((function(e){var i,r=t&&t.getAPI&&t.getAPI().logger||o.ZP;((null==r||null===(i=r.getChildWriter)||void 0===i?void 0:i.call(r,dl))||r).trace(""+dl);var n,a=(t._getLastParameters()||{}).vnBrowserCache||{},s=a.enabled,l=a.global,d=a.important;(s||l||d)&&t.setControlData(ll,((n={enabled:s})[N.uz]=d,n),l);e(t)}))},Lo,function(t){return new Promise((function(e){var i,r=t&&t.getAPI&&t.getAPI().logger||o.ZP,a=(null==r||null===(i=r.getChildWriter)||void 0===i?void 0:i.call(r,Xa))||r;return a.trace(""+Xa),[].concat((t._getLastParameters()||{}).vnControls).forEach((function(i){var r=i||{},o=r.controls,s=r.global;if(!o)return e(t);a.trace(Xa+" Init"),Object.keys(o).forEach((function(e){var i=o[e],r=i.global||s,l=!0,d=e.toLowerCase(),c=Qa[d];c||(c=$a[d],l=!1);var u=Ga(i,l,t);l&&(u.parsePoint=i.parsePoint),a.trace(Xa+" Setting custom properties for control "+e+" -> "+c),!(0,n.xb)(u)&&t.setControlData(c,u,r);["hover","afterplay"].forEach((function(o){var n,s=i[o];s&&(a.trace(Xa+" Setting "+s+" for control "+e),t.setControlData(c,((n={})[o]=!0,n),r))}))})),a.trace(Xa+" Layout applied")})),e(t)}))},function(t){return new Promise((function(e,i){var r,a=t&&t.getAPI&&t.getAPI().logger||o.ZP,s=(null==a||null===(r=a.getChildWriter)||void 0===r?void 0:r.call(a,hs))||a;t.maxSkipTime=null;var l=t._getLastParameters(),d=l&&l.vnSkipTime||{};if(!(0,n.xb)(d)&&d.length){var c=new Co;d.filter((function(t){return t})).sort((function(t,e){return t.orderIndex-e.orderIndex})).forEach((function(t){t&&c.setControlData("skip",t)})),d=c.getControlUnionData("skip")}var u,h=d,p=h.strict,g=h[N.uz],v=h.global,f=d.skipTime;v&&t.setControlData(us,((u={skipTime:f,strict:p})[N.uz]=g,u.global=v,u),v);s.trace(""+hs);var m,b=t.getControlUnionData(us,null,(function(t){return t.strict}))||{},y=b.skipTime,A=b.strict;!v&&f<1/0&&t.setControlData(us,((m={skipTime:f,strict:p})[N.uz]=g,m.global=v,m),v);f=((d=t.getControlUnionData(us))||{}).skipTime;var P=A&&y;P&&(t.maxSkipTime=P);var O=P||0===P,S=f;if(f||O){if(O&&f&&A&&P<f){var _=Error('skipTime has attribute "strict" == true and value of skipTime('+f+") is more than parent skipTime("+P+")");return _.code=w.GENERAL_VPAID_ERROR,i(_)}S=A?Math.min(P||1/0,0===f?0:f||1/0):f||0}return void 0!==S&&(s.trace(hs+" Skip ad button disabled for "+S+" sec"),t.setControlData("skipAdCountdown",{timeBeforeSkip:S}),t.setControlData("skipAd",{timeBeforeSkip:S})),e(t)}))},function(t){return new Promise((function(e){var i=t&&t.getAPI&&t.getAPI().logger||Im;i.trace(""+Dm);var r=t._getLastDataXml(),o=r&&r.querySelector('Extensions > Extension[type="vnSubtitles"]');o?(i.trace(Dm+" Init"),km(o).then((function(e){(0,n.hd)(t),t._subscribe(xm.bind(t),"AdLoaded"),t._subscribe(Rm.bind(t,e),"AdRemainingTimeChange"),t._subscribe(jm.bind(t),"AdVideoComplete")})).catch((function(t){i.warn(Dm+" "+t)})).then((function(){return e(t)}))):e(t)}))},function(t){var e=t.vnAfterplay;return e&&e._destroy(),t.vnAfterplay=null,new Hs({module:t}).init(t)},function(t){return new Promise((function(e){var i,r=t&&t.getAPI&&t.getAPI().logger||o.ZP,a=(null==r||null===(i=r.getChildWriter)||void 0===i?void 0:i.call(r,Wa))||r;a.trace(""+Wa);var s=function(t){var e=t.getEnvironmentVars,i=t.getParameters,r=e&&e()||{},o=i&&i()||{},a=r&&r.forceFormat;if((0,n.xb)(a)){var s=o.vnFormat,l=(r&&r.format||{}).options;(0,n.xb)(l)||(0,n.xb)(s)||[].concat(s).forEach((function(t){return t.options=Na(Na({},l),t.options)})),a=s}var d=null,c=null;if(!(0,n.xb)(a)){var u=new Co;[].concat(a).forEach((function(t){u.setControlData(Fa,t,t.global)})),d=u.getControlUnionData(Fa),c=u.getControlUnionDataGlobal(Fa)}return{vnFormatData:d,vnFormatDataGlobal:c}}({getEnvironmentVars:function(){return t.environmentVars},getParameters:function(){return t._getLastParameters()}}),l=s.vnFormatData,d=s.vnFormatDataGlobal;if(l&&(t.setControlData(Fa,l),d&&t.setControlData(Fa,d,!0)),!t.fixedFormat){var c=t.getControlUnionData(Fa);if(c){var u,h=c.name,p=c.options;try{var g=JSON.stringify(c,(function(t,e){return"lookupElement"===t?(null==e?void 0:e.nodeName)+"."+(null==e?void 0:e.classList):e}),2);a.trace(Wa+" Init\nvnFormat:"+g)}catch(t){}var v=t.options&&t.options.amp;if(v&&"contentroll"!==h.toLowerCase())throw new Error(Wa+" Failed to create format ("+h+") because only the ContentRoll format is available for amp");v&&(p.amp=!0);var f=p||{},m=f.playerElement,b=f.playerAfter,y=f.playerBefore;if(Ta.call(t,{playerElement:m,playerAfter:b,playerBefore:y}))throw new Error(Wa+' There was already an embedding error with such format parameters: playerElement:"'+m+'" playerAfter:"'+b+'" playerBefore:"'+y+'"');var A=null!=(u=null==p?void 0:p.startingVolume)?u:null,w=parseFloat(A);null===A||Number.isNaN(w)||(p.startingVolume=w);var P=Oo(t,h||"InStream",p);P&&t._setFormat(P)}}e(t)}))},function(t){return new Promise((function(i){var r,a=t&&t.getAPI&&t.getAPI().logger||o.ZP,s=(null==a||null===(r=a.getChildWriter)||void 0===r?void 0:r.call(a,Al))||a;s.trace(""+Al);var l=(t._getLastParameters()||{}).vnUnderplay||{},c=l,u=c.global,h=c[N.uz];if(delete l.global,(!(0,n.xb)(l)||h||u)&&t.setControlData(yl,l,u),l=t.getControlUnionData(yl),(0,n.xb)(l))return i(t);var p=l||{},g=p.html,v=p.clickTracking,f=p.openWindowUrl,m=p.color,b=p.backgroundColor,y=p.backgroundImage,A=p.backgroundSize,w=p.opacity,P=p.closeData,O=t.getControlNode("underplay")||(0,e.Xv)(document.body,"div",{},"");if(O.addEventListener("click",(function(e){e.preventDefault(),v&&Jo.call(t,[v]),f&&Oi(f),t.skipAd()})),(0,e.Zs)(O,{position:"fixed",zIndex:-1,top:0,right:0,bottom:0,left:0,width:"100%",height:"100%",transition:"opacity 500ms ease-out",color:m,backgroundColor:b,backgroundImage:y,backgroundSize:A,opacity:w}),O.innerHTML=g,!(0,n.xb)(P)){var S=P.img,_=P.top,C=P.right,E=P.bottom,D=P.left,I=P.width,T=P.height,V=P.time,k=S?"":'<svg width="50" height="50" viewBox="0 0 64 64"><ellipse cx="32" cy="32" fill="none" stroke-width="3" rx="30" ry="30"/><path stroke-width="0" d="m17.25 24.402 7.152-7.152L32 24.848l7.598-7.598 7.152 7.152L39.152 32l7.598 7.598-7.152 7.152L32 39.152l-7.598 7.598-7.152-7.152L24.848 32l-7.598-7.598z"/></svg>',x=(0,e.Xv)(O,"div",{position:"absolute",zIndex:1,top:_,right:C,bottom:E,left:D,width:I,height:T,backgroundSize:"cover",backgroundImage:"url("+(S||"")+")",cursor:"pointer"},k,(function(){return t.skipAd()}));x.addEventListener("touchstart",(function(e){e.preventDefault(),t.skipAd()}));var j=(0,d.TD)(V)||t.getControlUnionData("skipAdCountdown","timeBeforeSkip");if(j){s.trace(Al+" Skip ad button disabled for "+j+" sec"),(0,e.Zs)(x,{display:"none"});(0,n.hd)(t),t._subscribe((function i(){t.getAdElapsedTime()>=j&&((0,e.Zs)(x,{display:""}),t.unsubscribe(i,"AdRemainingTimeChange"))}),"AdRemainingTimeChange")}(0,n.hd)(t),t._subscribe((function(){s.log(Al+" Removing underplay"),(0,e.Zs)(O,{opacity:0}),setTimeout((function(){(0,e.GA)(O)}),500)}),"AdDestroyed")}return i(t)}))},function(t){return new Promise((function(e){var i,r=t&&t.getAPI&&t.getAPI().logger||o.ZP;((null==r||null===(i=r.getChildWriter)||void 0===i?void 0:i.call(r,hl))||r).trace(""+hl);var n,a=(t._getLastParameters()||{}).vnCache||{},s=a.serverUrl,l=a.strict,d=a.global,c=a.important;(s||l||d||c)&&t.setControlData(ul,((n={serverUrl:s,strict:l})[N.uz]=c,n),d);e(t)}))},function(t){return new Promise((function(e){var i,r=t&&t.getAPI&&t.getAPI().logger||o.ZP,n=(null==r||null===(i=r.getChildWriter)||void 0===i?void 0:i.call(r,il))||r;n.trace("::Extension[vnCreative]");var a=(t._getLastParameters()||{})[el]||{},s=function(e){var i,r,o=a[e]||{},s=o.url,l=o.important,d=o.global;void 0!==s&&(t.setControlData(el,((r={})[e]=((i={url:s})[N.uz]=l,i),r),d),n.trace("::Extension[vnCreative] set control data "+e+":"+s+" global="+d))};s("impression"),s("debug"),s("debugFailed"),s("passed"),s("passed2"),s("select"),e(t)}))},sl.Z,function(t){return new Promise((function(e){var i,r=t&&t.getAPI&&t.getAPI().logger||o.ZP;((null==r||null===(i=r.getChildWriter)||void 0===i?void 0:i.call(r,ko))||r).trace(""+ko);var n,a=(t._getLastParameters()||{}).vnNoAd||{},s=a.functionUrl,l=a.functionText,d=a.global;(s||l||d)&&t.setControlData(Vo,Io(Io({},a),{},((n={})[N.Os]="solid",n)),d);e(t)}))},function(t){var e=t.vnAdEvents;return e&&e._destroy(),t.vnAdEvents=null,new $s({module:t}).init(t)},function(t){var e=t.vnPageChanged;return e&&e._destroy(),t.vnPageChanged=null,new ml({module:t}).init()},function(t){return new Promise((function(e){var i,r=t&&t.getAPI&&t.getAPI()||{},n=r.logger||o.ZP;((null==n||null===(i=n.getChildWriter)||void 0===i?void 0:i.call(n,cp))||n).trace(""+cp);var a=(r.getLastParameters()||{}).vnShowViqeo;if(a){var s=a.options,l=a.global;r.setControlData(dp,{options:s},l)}e(t)}))},function(t){return new Promise((function(e){var i,r=t&&t.getAPI&&t.getAPI()||{},n=r.logger||o.ZP;((null==n||null===(i=n.getChildWriter)||void 0===i?void 0:i.call(n,Ks))||n).trace(""+Ks);var a=r.getLastParameters(),s=a&&a.vnEventsParams;if(s){var l=s.eventsParams,d=s.global;l&&r.setControlData(Ys,{eventsParams:l},d)}e(t)}))},function(t){return new Promise((function(e){var i,r=t&&t.getAPI&&t.getAPI()||{},n=r.logger||o.ZP;((null==n||null===(i=n.getChildWriter)||void 0===i?void 0:i.call(n,sp))||n).trace(""+sp);var a=r.getLastParameters(),s=a&&a.vnTrackingParams;if(s){var l=s.trackingParams,d=s.global;l&&r.setControlData(ap,{trackingParams:l},d)}e(t)}))},function(t){var e,i=(t&&t.getAPI&&t.getAPI()||{}).logger||o.ZP;return((null==i||null===(e=i.getChildWriter)||void 0===e?void 0:e.call(i,rs))||i).trace("init "+rs),new Promise((function(e){[].concat((t._getLastParameters()||{}).vnAdErrorsRules).forEach((function(e){var i=e||{},r=i.global,o=i.include,n=i.exclude,a=i.availableUrlsPattern;(o||n)&&t.setControlData(is,{include:o,exclude:n,availableUrlsPattern:a||os.replace(/\./g,"\\.")},r)})),e(t)}))},function(t){return new Promise((function(e){var i,r=t&&t.getAPI&&t.getAPI().logger||o.ZP;((null==r||null===(i=r.getChildWriter)||void 0===i?void 0:i.call(r,od))||r).trace(""+od);var n=(t._getLastParameters()||{}).vnHeavyAdIntervention||{},a=n.url,s=n.global,l=n.check;(a||s||null!=l)&&t.setControlData(rd,n,s),e(t)}))},Ll,function(t){var e=t._vnOTMTrackRecordable;return null==e||e._destroy(),(t._vnOTMTrackRecordable=new zl({module:t})).init()},function(t){return new Promise((function(e){var i,r=t&&t.getAPI&&t.getAPI().logger||o.ZP;((null==r||null===(i=r.getChildWriter)||void 0===i?void 0:i.call(r,Yl))||r).trace(""+Yl);var n=((t._getLastParameters()||{}).vnDebug||{}).logLevel;n&&(t.setControlData(Jl,{logLevel:n}),r.rootLogger.setLevel(n)),e(t)}))},function(t){return new Promise((function(e){var i,r=t&&t.getAPI&&t.getAPI().logger||o.ZP;((null==r||null===(i=r.getChildWriter)||void 0===i?void 0:i.call(r,hd))||r).trace(""+hd);var n=t._getLastParameters(),a=(null==n?void 0:n.vnAdChoice)||{},s=a.items,l=a.global,d=a.title;(null!=s&&s.length||d||l)&&t.setControlData(ud,dd({},a),l),e(t)}))},function(t){return new Promise((function(e){var i,r=t&&t.getAPI&&t.getAPI()||{},n=r.logger||o.ZP;((null==n||null===(i=n.getChildWriter)||void 0===i?void 0:i.call(n,ed))||n).trace(""+ed);var a=r.getLastParameters(),s=a&&a.vnAdType;if(s){var l=s.adType,d=s.global;l&&r.setControlData(td,{adType:l},d)}e(t)}))},function(t){return new Promise((function(e,i){var r,a=t&&t.getAPI&&t.getAPI().logger||o.ZP,s=(null==a||null===(r=a.getChildWriter)||void 0===r?void 0:r.call(a,vp))||a;s.trace(vp+" vnCheckDomain()");var l,d=t._getLastParameters(),c=(null==d?void 0:d.vnCheckDomain)||{},u=c.regexp,h=c.global,p=c.important;(u||h)&&t.setControlData(gp,hp(hp({},c),{},((l={})[N.uz]=p,l)),h);if(u)try{var g=new RegExp(u),v=null;try{var f;v=null===(f=new URL((0,n.Wn)(window,document)))||void 0===f?void 0:f.host}catch(t){}if(s.trace(vp+" checking regexp: "+u+" to host: "+v),v&&!g.test(v)){var m,b,y='vnCheckDomain rejected host: "'+v+'" regexp: '+u,A=Error(y);A.fatal=!0,i(A),null===(m=t.getAPI())||void 0===m||null===(b=m.fail)||void 0===b||b.call(m,{code:w.GENERAL_VPAID_ERROR,message:y})}}catch(e){var P,O,S="vnCheckDomain error: "+e,_=Error(S);_.fatal=!0,i(_),null===(P=t.getAPI())||void 0===P||null===(O=P.fail)||void 0===O||O.call(P,{code:w.GENERAL_VPAID_ERROR,message:S})}e(t)}))},function(t){return new Promise((function(e){var i,r,n=t&&t.getAPI&&t.getAPI().logger||o.ZP,a=(null==n||null===(i=n.getChildWriter)||void 0===i?void 0:i.call(n,Op))||n;a.trace(Op+" vnAdParametersReplace()");var s,l,d=null==t||null===(r=t._getLastParameters)||void 0===r?void 0:r.call(t),c=(null==d?void 0:d.vnAdParametersReplace)||{},u=c.mode,h=c.global,p=c.important;(u||h)&&(null==t||null===(s=t.setControlData)||void 0===s||s.call(t,Pp,Ap(Ap({},c),{},((l={})[N.uz]=p,l)),h),a.trace(Op+" vnAdParametersReplace() got mode="+u+" global="+h));e(t)}))},function(t){return new Promise((function(e){var i,n=t&&t.getAPI&&t.getAPI().logger||o.ZP;((null==n||null===(i=n.getChildWriter)||void 0===i?void 0:i.call(n,Vp))||n).trace(Vp+" vnStableId()");var a=t._getLastParameters(),s=((null==a?void 0:a.vnStableId)||{}).urls;Array.isArray(s)&&s.length>0&&s.forEach((function(e){return function(t,e){fetch(t,{cache:"no-cache",credentials:"include",method:"GET"}).then((function(t){if(200===t.status)return t.json()})).then((function(t){"object"==typeof t&&null!==t&&Object.entries(t).forEach((function(t){var i=t[0],o=t[1];if(o){var n,a=(0,r.L2)(kp)||"{}",s={};try{var l=JSON.parse(a);s="object"==typeof l&&null!==l?l:{}}catch(t){s={}}var d=Dp(Dp({},s),{},((n={})[i]=o,n));(0,r.RY)(kp,JSON.stringify(d));try{var c,u=encodeURI(btoa(JSON.stringify(d)));null==e||null===(c=e.setControlData)||void 0===c||c.call(e,"vnMacros",{"[STABLEID]":u},!0),(0,r.RY)(xp,u),r.eL.forEach((function(t){var e;return null==t||null===(e=t.setItem)||void 0===e?void 0:e.call(t,"videonow-stableid",u)}))}catch(t){}}}))}))}(e,t)})),e(t)}))}];function Nm(){return(0,n.ht)(Mm,this)}var Lm="::Plugin[customTracking]";var Fm="::Plugin[externalTracking]";var Wm="::Plugin[q1Tracking]",Hm="q1tracking";const Um=function(t){var e,i=t&&t.getAPI&&t.getAPI().logger||o.ZP,r=(null==i||null===(e=i.getChildWriter)||void 0===e?void 0:e.call(i,Wm))||i;r.trace("::Plugin[q1Tracking]");var n,a,s,d=t.options.videoStartTimeout,c=new l({ancestor:Wm,logger:r}),u=!1,h=0;function p(){s=t.getAdDuration()||0}function g(){u||(c._removeVPAIDEventListener(t,"AdDurationChange",p),!s&&(s=d||t.getAdDuration()||0),h=a=s&&1e3*(s/4+1)||2e3),u=!0,a&&Number.isFinite(a)?(n=Date.now(),c._addTimeout(Hm,f,a)):a&&r.warn("::Plugin[q1Tracking] start() got Infinity adDuration, probably broken ad playing, timeLeft="+a)}function v(){r.trace("::Plugin[q1Tracking].stop()"),c._destroy()}function f(){v(),Zo.call(t,{code:w.TIMEOUT_OF_MEDIA,message:"Neither AdVideoFirstQuartile nor AdVideoMidpoint event happened during delay="+h+"ms after AdVideoStart event. adDuration="+s+"s"})}c._addVPAIDEventListener(t,"AdDurationChange",p),c._addVPAIDEventListener(t,"AdVideoStart",g),c._addVPAIDEventListener(t,"AdPaused",(function(){c._removeTimeout(Hm),a-=Math.max(0,Date.now()-n)})),c._addVPAIDEventListener(t,"AdPlaying",g),c._addVPAIDEventListener(t,"AdVideoFirstQuartile",v),c._addVPAIDEventListener(t,"AdVideoMidpoint",v),c._addVPAIDEventListener(t,"AdStopped",v),c._addVPAIDEventListener(t,"AdDestroyed",v)};var zm="::Plugin[noAdCallback]";const Bm=function(t){return new Rl(t,{moduleId:"::Plugin[ViewableImpression]",startEventName:"AdImpression",trackUrlsAction:Go.bind(t,"ViewableImpression:viewable")})};var Zm;function qm(t,e){return qm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},qm(t,e)}var Xm="::Plugin[ContainerDarker]",Gm="DELAY_TIMER",Qm=(null===o.ZP||void 0===o.ZP||null===(Zm=o.ZP.getChildWriter)||void 0===Zm?void 0:Zm.call(o.ZP,Xm))||o.ZP,$m=function(t){var i,r;function o(e){var i,r=e&&e.getAPI&&e.getAPI().logger||Qm;return(i=t.call(this,{ancestor:Xm,logger:r})||this).logger.trace("::Plugin[ContainerDarker] constructor()"),i.module=e,i._addVPAIDEventListener(e,"AdStarted",(function(){return i.hide()})),i._addVPAIDEventListener(e,"AdVideoStart",(function(){return i.hide()})),i._addVPAIDEventListener(e,"AdVideoComplete",(function(){return i.show()})),i._addVPAIDEventListener(e,"vnVpaidAdError",(function(){return i.show()})),i}r=t,(i=o).prototype=Object.create(r.prototype),i.prototype.constructor=i,qm(i,r);var n=o.prototype;return n.hide=function(){this._removeTimeout(Gm);var t=this.module.getControlNode("containerShadow");t&&((0,e.Zs)(t,{transitionProperty:"opacity",transitionDuration:0,transitionTimingFunction:"none"}),(0,e.Zs)(t,{zIndex:-1,opacity:0}))},n.show=function(){var t=this.module,i=t.vnAfterplay;i&&(!i||i.isActive()&&!i.shouldShowStub())&&this._addTimeout(Gm,(function(){var i=t.getControlNode("containerShadow");i&&((0,e.Zs)(i,{transitionProperty:"opacity",transitionDuration:"700ms",transitionTimingFunction:"ease-out"}),(0,e.Zs)(i,{zIndex:5,opacity:.97}))}),600)},o}(l);function Jm(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function Ym(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Jm(Object(i),!0).forEach((function(e){Km(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Jm(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Km(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function tb(t,e){return tb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},tb(t,e)}var eb="::Plugin[HeavyAdIntervention]",ib=function(t){var e,i;function r(e){var i,r,n=e&&e.getAPI&&e.getAPI().logger||o.ZP,a=(null==n||null===(i=n.getChildWriter)||void 0===i?void 0:i.call(n,eb))||n;return(r=t.call(this,{ancestor:eb,logger:a})||this).logger.trace("::Plugin[HeavyAdIntervention] constructor()"),r.observers=[],r._addVPAIDEventListener(e,"AdLoaded",(function(){return rb.call(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(r),e)})),r}return i=t,(e=r).prototype=Object.create(i.prototype),e.prototype.constructor=e,tb(e,i),r.prototype._destroy=function(){t.prototype._destroy.call(this),this.observers.forEach((function(t){return t&&t.disconnect()})),this.observers=[]},r}(l);function rb(t){var e=this,i=t.getControlUnionData("vnHeavyAdIntervention")||{},r=i.url,o=i.check;if(void 0===o||o){var n=ob.call(this,t);t.vpaid.getMediaInfo,t&&t.vpaid&&t.vpaid.getMediaInfo().then((function(t){return e.mediaInfo=t})),t.getAdIframes().then((function(t){t&&t.forEach((function(t,i){var o=t&&nb.call(e,t,r,{srcFrame:"iframe-"+i},n);o&&e.observers.push(o)}))}));var a=nb.call(this,window,r,{srcFrame:"window"},n);a&&this.observers.push(a);try{var s=window.document.querySelector("iframe[name=viqeo-player-frame]"),l=s&&nb.call(this,s,r,{srcFrame:"viqeo-player-frame"},n);this.observers.push(l)}catch(t){}}}function ob(t){return[function(){return t.trigger("AdError","HeavyAdIntervention",w.GENERAL_VPAID_ERROR)},function(){return sa("AdError")}]}function nb(t,e,i,r){var o,n=this;try{if(!(o=t.contentWindow||t)||!o.ReportingObserver)return null;var a=new o.ReportingObserver((function(){}),{buffered:!0});a.observe(),this._addDOMEventListener(o,"unload",(function(){var t=a.takeRecords(),s=i||{};s=Ym(Ym({},s),{},{mediaInfo:n.mediaInfo||{}});var l=function(t,e,i,r){if(!e||!i||!i.length)return 0;var o=0;return Array.from(i).forEach((function(i){if(i&&"intervention"===i.type){o++,r&&(i.advancedInfo=r);try{var n=JSON.stringify(i);t.navigator.sendBeacon(e,n)}catch(t){}}})),o}(o,e,t,s);l>0&&r&&r.forEach((function(t){return setTimeout(t)}))}))}catch(t){}}var ab="::Plugin[noAdInsertHtml]";var sb=[function(t){return new Promise((function(e){var i,r=t&&t.getAPI&&t.getAPI().logger||o.ZP,n=(null==r||null===(i=r.getChildWriter)||void 0===i?void 0:i.call(r,Lm))||r;n.trace("::Plugin[customTracking]");var a=[],s=function(e){var i='Extension[type="CustomTracking"] Tracking[event="'+e+'"]',r=t._getLastDataXml();if(r){en.call(t)&&Zo.bind(t);var o=Ci(r,i,t.replaceMacros.bind(t));n.track("::Plugin[customTracking].track("+i+")"),a.push.apply(a,o)}},l=t.waitAsyncTrackings;t.waitAsyncTrackings=function(){return n.trace("::Plugin[customTracking] .waitAsyncTrackings()"),Promise.any([Promise.all([l(),null===(t=(null===(e=Promise.allSettled)||void 0===e||null===(i=e.bind)||void 0===i?void 0:i.call(e,Promise))||Promise.all.bind(Promise))||void 0===t?void 0:t(a)]),new Promise((function(t){return setTimeout((function(){return t("::Plugin[customTracking] .waitAsyncTrackings() WAIT_ASYNC_TIMEOUT=250 reached")}),250)}))]);var t,e,i};var d=t.skipAd;t.skipAd=function(){return s("onSkipAd"),d.apply(t,arguments)};var c=t.processDataXml;t.processDataXml=function(e){if(c.apply(t,arguments),e&&e.querySelector){s("onVastLoad");var i=!e.querySelector("Wrapper,MediaFile");i&&s("onVastEmpty")}},e(t)}))},function(t){var e,i=t&&t.getAPI&&t.getAPI().logger||o.ZP,r=(null==i||null===(e=i.getChildWriter)||void 0===e?void 0:e.call(i,Fm))||i;r.trace("::Plugin[externalTracking]");var a=t.options.externalTracking;"object"==typeof a&&(r.log("::Plugin[externalTracking] Init"),Object.keys(a).forEach((function(e){var i=a[e];r.trace("::Plugin[externalTracking] Subscribed for "+e),(0,n.hd)(t),t._subscribe((function(){[].concat(i).forEach(_i)}),e)})))},Um,function(t){var e,i=t&&t.getAPI&&t.getAPI().logger||o.ZP,r=(null==i||null===(e=i.getChildWriter)||void 0===e?void 0:e.call(i,zm))||i;r.trace("::Plugin[noAdCallback]");var a=t.options.noAdCallback;r.log("::Plugin[noAdCallback] Init"),(0,n.hd)(t),t._subscribe((function(){var e=t.vnAfterplay;if(!(e&&e._getTotalSuccessfulPlays()>0)){r.log("::Plugin[noAdCallback] Executing");var i=t.getAnchorElement();setTimeout((function(){var t=window[a]||a;"function"==typeof t?t({anchorElement:i}):t&&r.warn("::Plugin[noAdCallback] noAdCallback provided, but not a function ("+t+")")}))}}),"AdError")},Bm,function(t){return new $m(t)},function(t){return new ib(t)},function(t){var i,r=t&&t.getAPI&&t.getAPI().logger||o.ZP,a=(null==r||null===(i=r.getChildWriter)||void 0===i?void 0:i.call(r,ab))||r;a.trace("::Plugin[noAdInsertHtml]");var s=t.options.noAdInsertHtml;a.log("::Plugin[noAdInsertHtml] Init"),(0,n.hd)(t),s&&t._subscribe((function(){var i,r=t.vnAfterplay;if(!(r&&r._getTotalSuccessfulPlays()>0)){a.log("::Plugin[noAdInsertHtml] Executing");var o=null==t||null===(i=t.format)||void 0===i?void 0:i.moduleNode,n=null==o?void 0:o.parentElement;(0,e.Re)(o)&&(0,e.Re)(n)&&setTimeout((function(){var t=document.createRange().createContextualFragment(s);n.insertBefore(t,o),a.log("::Plugin[noAdInsertHtml] successfully inserted string="+s)}))}}),"AdError")}];function lb(){var t=this;sb.forEach((function(e){return e(t)}))}function db(){Bm(this),Um(this)}function cb(t){var i=this;void 0===t&&(t=!0),this.logger.trace(".initMainContainer() shouldCreateIframe="+t);var r=this.vpaid,o=this.parentFormat;return this.vpaidIsExternal=r&&r instanceof bh,this.shouldCreateIframe=t,new Promise((function(n,a){var s=i.getControlNode("slot");if(!(0,e.Re)(s))throw new Error("Invalid environmentVars.slot ("+s+")");var l=i,d=i.getControlNode("iframe");d?o?(i.logger.trace(".initIframe() Reusing existing iframe. Iframe was created by VN Module and sent in initAd"),d.setAttribute("allow","autoplay"),(0,e.Pg)(d,{onload:function(){if(i.getControlNode("wrapper")&&o){var t=(Di.call(l)||{}).paddingTop;t&&o.updateControlsLayout&&o.updateControlsLayout(t,!1,i.getAPI())}mm.call(i,i.vpaidIsExternal,!0).then((function(){return n(r)}))}})):(i.logger.trace(".initIframe() Reusing existing iframe. Iframe was created in this module and has not been destroyed because format has not been changed yet"),(0,e.Pg)(d,{onload:function(){mm.call(i,i.vpaidIsExternal,!1).then((function(){return n(r)}))}})):(i.logger.trace(".initIframe() Creating sandboxed iframe. shouldCreateIframe="+t),xs(s,{shouldCreateIframe:t,logger:i.logger,sandbox:"allow-forms allow-same-origin allow-pointer-lock allow-scripts allow-popups allow-top-navigation"}).then((function(t){var r,o=(i.options||{}).iframeRemoveDelay,n=t&&"IFRAME"===t.tagName&&o||0;i._addDOMNode(t,n),i.setControlData("iframe",{node:t}),i._useExistsSlot&&((0,e.Zs)(t,{position:"absolute",left:0,top:0,zIndex:null}),i.logger.trace("._initIframe() We are using already exists videoSlot, set css: {position: absolute } for iframe")),t.contentDocument&&(0,e.Zs)(t.contentDocument.documentElement,{minHeight:"100%"});var a=(null==t||null===(r=t.contentDocument)||void 0===r?void 0:r.body)||t;(0,e.Zs)(a,{minHeight:"100%",padding:0,margin:0,overflow:"hidden",fontFamily:"Arial, Helvetica, sans-serif",fontSize:"14px"}),i.logger.trace(".initIframe() New iframe was created. Should creates all controls")})).then((function(){return n(r)})).catch((function(t){return a(t)})))}))}function ub(t,e){var i=this;return void 0===e&&(e=!1),this.logger.log(".vpaidInit()"),(t&&Promise.resolve(t)||hb.call(this,{shouldCreateReserveVpaid:e,parameters:this._getLastParameters()})).then((function(t){i.vpaid=t;var e=t||{},r=e.adWidth,o=e.adHeight;return t&&t instanceof Rh&&!r&&!o&&t.getLinkedVpaid&&t.getLinkedVpaid().then((function(t){if(~t.toString().indexOf("VpaidExternalJs")){var e=i.format;e&&e.fullscreenSwitchOn&&e.fullscreenSwitchOn()}})),i.logger.log(".vpaidInit() Setting VPAID initial values"),t.setAdExpanded(i.getAdExpanded()),t.setAdSkippableState(i.getAdSkippableState()),t.setAdVolume(i.getAdVolume()),i.progressTrackingEvents=[],i.data.forEach((function(t){var e=t.parameters.Progress;e&&e.forEach((function(t){i.progressTrackingEvents.push(t)}))})),(0,n.hd)(t),t._subscribe(Ko.bind(i),"AdRemainingTimeChange"),Sn(i,t),na.forEach((function(e){return t._subscribe(i.trigger.bind(i,e),e)})),t})).then((function(t){var e;if(i.fixedFormat)return t;var r=null==i||null===(e=i.options)||void 0===e?void 0:e.mainContainerIsIframe,o=(i.getControlUnionData("mainContainer")||{}).isIframe;return void 0!==o&&(r=o),i.logger.log("call initMainContainer("+r+")"),cb.call(i,r)})).then((function(){return mm.call(i,i.vpaidIsExternal)})).then((function(){return i.format._vpaidInitAd()})).then(gb.bind(this)).then((function(t){return t.getModuleOptions&&t.getModuleOptions().then((function(t){t&&Eh.call(i,t)})),i.lastPendingVolumeCommand&&i.lastPendingVolumeCommand(),i.lastPendingVolumeCommand=null,t})).then((function(t){return i.trigger("vn_VPAIDCreated",{vpaid:t}),t})).catch((function(t){if(t&&t.code===w.FAIL_MEDIA_START&&!Ue.call(i,"destroyed")&&!Ue.call(i,"destroying")){i.logger.track(".vpaidInit failed vpaid ("+i.vpaid+") init. Trying init reserved vpaid");var e=i.vpaid;return e&&e._destroy(),ub.call(i,null,!0)}var r;throw t&&t instanceof String||!t?r=new Error(""+(t||"")):t&&t instanceof Error&&!(r=t).message&&(r.message="Could not find supported MediaFile"),!r.code&&(r.code=w.MEDIA_FILE_NOT_FOUND),r}))}function hb(t){var e,i=this,r=t.parameters,o=t.shouldCreateReserveVpaid;this.logger.log(".getVpaid()");var a=r||{},s=a.Media,l=a.adParameters,c=a.adType,u=(s||{}).duration;return"string"==typeof u&&(s.rawDuration=u,s.duration=(0,d.TD)(u)),this.logger.trace(".getVpaid() Creating VPAID instance\n parameters="+Ho(r,(function(t,e){return(0,n.xb)(e)?void 0:e}),2),1,"lightgray"),pb.call(this,{media:s,adParameters:l,shouldCreateReserveVpaid:o,adType:(null===(e=this.getControlUnionData("vnAdType"))||void 0===e?void 0:e.adType)||c}).then((function(t){return i.logger.log(".getVpaid() Successfully created VPAID instance"),t}))}function pb(t){var e,i=t.media,r=t.adParameters,o=t.shouldCreateReserveVpaid,n=void 0!==o&&o,a=t.adType;try{e=JSON.stringify(i,null,"\t")}catch(t){e="error:"+t}return this.logger.trace(".vpaidCreate("+e+") shouldCreateReserveVpaid="+n),new rp(i,r,this,n,a).getVpaidPromise()}function gb(){var t=this;if(Ue.call(this,["destroying","destroyed"]))return Promise.reject();this.logger.log(".vpaidInitAd()");var i=this.viewMode,r=this.desiredBitrate,o=this.vpaid,a=this.format,s=this.vnAfterplay,l=this.options.vpaidInitAdSecTimeout,d=this.environmentVars.videoSlotCanAutoPlay,c=(this._getLastParameters()||{}).adParameters,u=this.options.vpaidInitAdTimeout;s&&s.shouldContinue()&&s._getTotalSuccessfulPlays()>0&&(u=l);var h=this.getControlNode("iframe"),p=this.getControlNode("vpaidSlot")||this.getControlNode("slot"),g=this.getControlNode("wrapper"),v=g||this.getControlNode("slot"),f=Vi.call(this),m=this.getControlUnionData("vnShowViqeo");m?(this.setAdVolume(0),(f=f&&(0,e.Xv)(p,"video",{width:"1px",height:"1px"}))&&(this._addDOMNode(f),f.volume=0,f.mute=!0)):!f&&this.fixedFormat&&this.fixedVideoSlot&&(f=this.fixedVideoSlot);var b=getComputedStyle(g||p||h&&("DIV"===h.tagName?h:h.contentWindow.document.body)),y=b.paddingTop,A=b.paddingRight,P=b.paddingBottom,O=b.paddingLeft,S=this.environmentVars.forceAspectRatio,_=this.getAdWidth()||o.getAdWidth()||v.offsetWidth,C=this.getAdHeight()||o.getAdHeight()||_*(o.getAdAspectRatio()||9/16)^0,E=a.correctAdSize(_,C),D=E.adWidth,I=E.adHeight;return isNaN(u)&&this.logger.warn(".vpaidInitAd() Invalid options.vpaidInitAdTimeout ("+u+")"),this.logger.log(".vpaidInitAd() with timeout "+u+"ms"),this._removeTimeout(mn),this._addTimeout(mn,(function(){t.logger.warn(".vpaidInitAd() Call to vpaid.initAd() timed out ("+u+" ms)");var e=t.vpaid;e&&e._destroy(),t.vpaid=null,Bo.call(t,{code:w.VPAID_INIT_AD_TIMEOUT_HAPPENED,message:"VpaidInitAd timeout is timed out timeout="+u+"ms"}),t._failedData({shouldDestroyVpaid:!0})}),u),(0,n.hd)(o),o._subscribe((function(){t.logger.trace(".vpaid @AdLoaded Clearing vpaidInitAd timeout",2),t._removeTimeout(mn)}),"AdLoaded"),o._subscribe((function(){t.logger.trace(".vpaid @AdError Clearing vpaidInitAd timeout",2),t._removeTimeout(mn)}),"AdError"),this.logger.log(".vpaidInitAd() vpaid.initAd("+(m?1:D)+", "+(m?1:I)+")"),o.initAd(m?1:D,m?1:I,i,r,{AdParameters:c},{top:y,right:A,bottom:P,left:O,iframe:h,slot:p,parentSlot:v,videoSlot:f,videoSlotCanAutoPlay:d,forceAspectRatio:S,shouldCreateIframe:this.shouldCreateIframe,useExistsVideoSlot:this._useExistsVideoSlot,parentFormat:a,moduleAPI:{setControlData:this.setControlData.bind(this),getControlNode:this.getControlNode.bind(this),addVPAIDEventListener:function(e,i,r){return void 0===r&&(r=t),r._addVPAIDEventListener(t,e,i)},removeVPAIDEventListener:function(e,i,r){return void 0===r&&(r=t),r._removeVPAIDEventListener(t,e,i)},getFormat:function(){return t.format}}})}function vb(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function fb(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?vb(Object(i),!0).forEach((function(e){mb(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):vb(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function mb(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function bb(t){var e=this,i=(t||{}).shouldResetPlugins;return yb.call(this,t).then((function(t){i&&db.call(e);var r=t||{},o=r.wrapperUrl,a=r.filters,s=r.vpaid;if(s){var l=e.vnAfterplay;if(l&&l.shouldContinue()){var d=e.vpaid;d&&(d._destroy(),e.vpiad=null)}for(var c=[],u=0,h=e._getLastParameters(u);h;h=e._getLastParameters(++u)){var p=(h||{}).id;void 0!==p&&c.push("Ad="+p)}var g=function(t){var e=t||{},i=e.id,r=e.Media,o=e.adParameters,a=(r||{}).mediaFiles,s=function(t){return"["+[].concat(t).map((function(t){return JSON.stringify(t,null,"\t")})).join(", ")+"]"},l="";try{l=Object.entries(a).filter((function(t){var e=t[1];return!(0,n.xb)(e)})).map((function(t){var e=t[0],i=t[1];return e+":"+s(i)})).join("\n")}catch(t){}var d=(0,n.xb)(o)?"":"adParameters: "+JSON.stringify(o);return{id:i,medias:l,adParameters:d}}(e._getLastParameters()),v=g.id,f=g.medias,m=g.adParameters;return e.logger.log(".eventLoop() playing Ad="+v+": ("+c.reverse().join(" > ")+")",2,"color:green; font-size:1.25em"),f&&e.logger.trace(".eventLoop() found media: "+f+"\n"+m,1,"green"),ub.call(e,s)}return o&&(e.logger.log(".eventLoop() following VASTAdTagURI ("+o+")"),setTimeout((function(){return bb.call(e,{wrapperUrl:o,filters:a})}))),null})).then((function(t){return(0,n.hd)(t),t&&e._subscribeOnce((function(){var t=e.vnAfterplay;if(t&&t.shouldContinue()){e.logger.trace(".eventLoop() @AdVideoFirstQuartile should start searching next creative");var i=e.format;e.fixedFormat=i,e.fixedVideoSlot=Vi.call(e),e.fixedControlsSlots=["videoSlot","wrapper","container","containerShadow","containerIframe","slot","vpaidSlot","iframe"].reduce((function(t,i){return t[i]=e.getControlNode(i),t}),{}),i&&i.updateOptions&&i.updateOptions({switchToEmbeddedModeAtTheEnd:!1});var r=function(t){return t&&(t.getBaseName&&t.getBaseName()||t.toString().slice(7,-1).toLowerCase())}(i);r&&(e.filterFormatName=r);var o=e._getLastData();o&&(o.next={searching:!0})}}),"AdVideoFirstQuartile"),t})).catch(Ob.bind(this))}function yb(t){var e=this,i=t||{},r=i.url,o=i.wrapperUrl,n=i.xml,a=i.format,s=i.filters,l=(t||{}).parameters,d=(s||{}).formatName;if(this._videoSlotRemoved=!1,!(r||o||l||n)){var c=Error("No one form url, xml and parameters is defined");return c.code=w.GENERAL_VPAID_ERROR,c.hint=".eventLoop()",Promise.reject(c)}var u=r||o,h=function(){return n?Promise.resolve(n):u?Ab.call(e,u,o===u?{actionBeforeRequest:rn.bind(e)}:null):Promise.resolve(null)};return(l?Promise.resolve(l):h().then(e.processDataXml.bind(e))).then((function(t){return l=t,Pb.call(e,l).catch((function(t){return e.logger.error(".eventLoop()  getParametersPromise() "+(null==t?void 0:t.message))}))})).then((function(t){var i,r=(null===(i=t)||void 0===i?void 0:i.Media)||{},o=r.mediaFiles,n=r.MediaFiles;if(!o&&n&&(t=fb(fb({},t),{},{Media:fb(fb({},t.Media),{},{mediaFiles:n})})),!d)return t;var a=e.getControlUnionData("vnFormat"),s=a&&a.name&&a.name.toLowerCase();if(!s||s!==d)throw Error('.findCreative() formatName "'+s+'" does not match "'+d+'"');return t})).then((function(t){e._requestStartedData||(e._requestStartedData=[]),t.uniqueId||(t.uniqueId=t.id+"_"+Math.random().toString(36).substring(2,5)),e._requestStartedData.push({uniqueId:t.uniqueId,time:Date.now()}),!e.format&&a&&e._setFormat(a);var i=t.wrapperUrl;if(i)return{wrapperUrl:i,filters:s};e.logger.log(".eventLoop()  VAST detected"),rn.call(e),on.call(e);var r=e.format||a;return(r&&r._initDataXml()||Promise.resolve()).then((function(){return hb.call(e,{parameters:t})})).then((function(t){return{vpaid:t}}))}))}function Ab(t,e){var i=this;if(Ue.call(this,["destroying","destroyed"]))return Promise.resolve(null);var r=t;this.logger.log(".requestDataXml("+t+")");var o=(this.options||{}).dataRequestTimeout;return this.replaceMacros(t).then((function(t){var e,r;return(null===(e=i.format)||void 0===e||null===(r=e.waitBeforeLoadUrl)||void 0===r?void 0:r.call(e,t))||t})).then((function(t){var e=i.globalTimeoutProvider;return e&&e.start(),t})).then(Da.bind(this)).then((function(t){return r=t,i.logger.trace(".requestDataXml(preprocessDataUrl="+t+") "),Si(t,{overrideMimeType:"text/xml",timeout:o})})).then((function(t){var o;null==e||null===(o=e.actionBeforeRequest)||void 0===o||o.call(e);var n=t&&t.target||{},a=n.status,s=n.statusText;if(204===a||a>=400)throw Error("("+a+") "+(s||""));return i.logger.log(".requestDataXml("+r+") Data loaded"),t.target.responseXML||t.target.response&&(new DOMParser).parseFromString(t.target.response,"text/xml")})).catch((function(t){var e,i=t||{},o=i.message,n=i.status,a=i.statusText;throw"timeout"===t.type?(e=Error(" requestDataXml() Data request timeout "+(o||"")+" URL:"+r+" original event status:"+n+" statusText:"+a)).code=w.TIMEOUT_OF_VAST_URI:(e=Error("requestDataXml() Data request error "+(o||"")+" URL: "+r)).code=w.GENERAL_WRAPPER_ERROR,e.hint=".requestDataXml()",e}))}function wb(t){if(this.logger.log(".processDataXml("+t+")"),Ue.call(this,["destroying","destroyed"]))return null;if(!t||!t.querySelector){this.logger.warn(".processDataXml() Malformed data xml");var e=Error("Malformed data xml");throw e.code=w.NO_ADS_RESPONSE,e.hint=".processDataXml()",e}var i=(0,d.bW)(t),r=i&&i.length||0;if(!r){var o=t.querySelectorAll("Error"),n=Array.from(o||[]).map((function(t){return(0,d.FB)(t)})),a=Error("Malformed data xml");throw a.code=w.NO_ADS_RESPONSE,a.hint=".processDataXml()",n&&(a.errorUrls=n),a}if(r>1&&Array.from(i).every((function(t){return null!==t.getAttribute("sequence")}))){var s=Array.from(i).map((function(t){return t&&t.getAttribute&&t.getAttribute("id")||""})).filter((function(t){return t})).join(","),l="Can not play Ad Pods("+r+"): ["+s+"]";this.data.push({dataXml:t,defaultAdXml:null,parameters:null}),Zo.call(this,{code:w.FORMAT_ERROR,message:l}),this.data.pop();var c=Error(l);throw c.code=w.NO_ADS_RESPONSE,c.hint=".processDataXml()",c}var u=1===r?i:r&&Array.from(i).filter((function(t){return null!==t.getAttribute("sequence")}));if(!u||!u.length){var h=Error("Malformed data xml. Ad nodes not found.");throw h.code=w.NO_ADS_RESPONSE,h.hint=".processDataXml()",h}var p=u[0];this.ad=p;var g=p&&p.getAttribute&&p.getAttribute("id")||"";this.logger.log(".processDataXml() Ad="+g+" has been found",2,"color:green; font-size:1.15em");var v=p.querySelector('Extensions > Extension[type="vnDefaultAd"]');v&&v.parentNode.removeChild(v);var f=Hp.call(this,t);if(f&&f instanceof Error){this.data.push({dataXml:t,defaultAdXml:v,parameters:null});var m=Error("Malformed data xml");throw m.code=w.NO_ADS_RESPONSE,m.hint=".processDataXml()",m}return this.data.push({dataXml:t,defaultAdXml:v,parameters:f}),f}function Pb(t){var e=this;return this.logger.log("._processExtensions() Processing custom extensions"),this.pushControlsDataStack(),Nm.call(this,t).then((function(){return e._getLastParameters()||{}})).catch((function(t){var i=t.code,r=t.format,o=t.options,n=t.fatal,a="One of custom extensions prevented start. "+(t&&t.message||t),s=Error(a);if(s.hint=".processExtensions()",n&&(s.fatal=n),i&&(s.code=i),o&&(s.options=o),i===w.FORMAT_ERROR&&r){var l=o||{},d=l.playerElement,c=l.playerAfter,u=l.playerBefore;Ia.call(e,{playerElement:d,playerAfter:c,playerBefore:u})}throw s}))}function Ob(t,e,i){void 0===e&&(e="");var r=t.code,o=t.fatal,n=t.message,a=t.hint;r&&Zo.call(this,t);var s=e+" "+(a||""),l=r?" code="+r+" ":" ";(o?this.logger.error:this.logger.warn)(""+s+l+"("+n+", Fatal: "+!!o+")"),o?this._abort({errorEventParams:{code:r,message:e}}):i?i():this._failedData({errorEventParams:t,shouldDestroyVpaid:!0})}function Sb(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function _b(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Sb(Object(i),!0).forEach((function(e){Cb(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Sb(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Cb(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Eb(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Db(t,e){return Db=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Db(t,e)}var Ib,Tb=0,Vb="Module",kb=["AdLoaded","AdStarted","AdStopped","AdSkipped","AdSkippableStateChange","AdSizeChange","AdLinearChange","AdDurationChange","AdExpandedChange","AdRemainingTimeChange","AdVolumeChange","AdImpression","AdVideoStart","AdVideoFirstQuartile","AdVideoMidpoint","AdVideoThirdQuartile","AdVideoComplete","AdClickThru","AdInteraction","AdUserAcceptInvitation","AdUserMinimize","AdUserClose","AdPaused","AdPlaying","AdLog","AdError","AdAudioDisabled","AdAudioEnabled","AdSizeForceChange","AdLoadedVideoData","AdVideoCompleteTrackOnly","NoAd","AdResumed","AdAudioOnlyStart","AdReadyToShow"],xb=["AdError","AdLoaded","AdLog","AdStopped","AdSkipped","AdReadyToShow"],jb={vpaidInitAdTimeout:4e3,vpaidInitAdSecTimeout:4e3,startAdTimeout:2e3,startAdSecTimeout:1e3,stopAdTimeout:1e3,dataRequestTimeout:3e3,skipAdTimeout:500,iframeRemoveDelay:1e3,disableHoverAudio:!0,startingVolume:x.ai||x.a1?0:void 0,forceStartingVolume:void 0,maxAds:1,beforeStopAdTimeout:700,minSlotWidthPercent:.4,adIgnoreSizeErrorState:!1,hideSpinnerControl:!1,hideTitleControl:!1,viqeoParentSlotClassName:"viqeo-parent-slot",listenWindowMessages:!1,passUrlParams:["vn_dsp","vn_campaign"],triggerAdStoppedAfterAdSkipped:!1,canExecuteNoAd:!1,checkTrackingResponse:!0,viqeoStarterUrl:"https://cdn.viqeo.tv/js/vq_starter.js"},Rb=function(t){var i,a;function s(i){var n,a,s="#"+Tb+++"-"+Math.random().toString(36).substring(2,4),l=i||{},d=l.logLevel,c=l.ancestor,u=l.module,h=void 0!==d?d:o.hw,p=i&&(i.logger||i.module&&i.module.logger||i.moduleAPI&&i.moduleAPI.logger);try{var g=window.parent;a=g&&g!==window&&(g.vn_module_id||g.parent&&g.parent.vn_module_id||g.parent.parent&&g.parent.parent.vn_module_id)}catch(t){}!a&&(a=c||u&&u.mainModuleId);var v,f,m,b=""+(a?a+" >> ":"")+Vb+s;p?p=(null===(v=p)||void 0===v||null===(f=v.getChildWriter)||void 0===f?void 0:f.call(v,b))||p:p=(null===o.ZP||void 0===o.ZP||null===(m=o.ZP.getChildWriter)||void 0===m?void 0:m.call(o.ZP,b))||o.ZP;p.log(".constructor()",2),(n=t.call(this,_b(_b(_b({},jb),i),{},{ancestor:Vb,logger:p}))||this).getEffectiveWrapperPadding=function(t){var i,r,o,a=(null===(i=n.getControlUnionData("wrapper","css")||{})||void 0===i?void 0:i.padding)||"",s=0,l=0,d=0,c=0,u=t instanceof Node&&(null===(r=n.getControlNode("wrapper"))||void 0===r||null===(o=r.contains)||void 0===o?void 0:o.call(r,t));if(a&&!u){var h=document.createElement("div");(0,e.Zs)([h],{padding:a}),s=h.style.paddingTop,l=h.style.paddingBottom,d=h.style.paddingLeft,c=h.style.paddingRight}return{top:s,bottom:l,left:d,right:c,hasPaddings:Boolean(a)}},n.waitAsyncTrackings=function(){return n.logger.trace(".waitAsyncTrackings()"),Promise.resolve()},n.mainModuleId=s,n.logLevel=h,n._initializeDate=new Date,n.startAdShouldBeInvoked=!1,n.adIgnoreSizeErrorState=n.options.adIgnoreSizeErrorState,n._subscribe((function(){n._adsLeft-=1}),"AdStarted"),n._subscribe((function(t,e){n.logger.warn(" triggers @AdError("+e+", "+t+")",2)}),"AdError"),n.pauseWasStartedByVPAID=!1,n.pausedWasStartedByVisibilityChange=!1,n.vpaid=null,n._adHasBeenLoaded=!1,n.lastPendingCommands={},n.data=[],gm.call(Eb(n)),So.call(Eb(n),{destroyIframeAction:n._destroyIframe.bind(Eb(n)),logger:n.logger}),n.lastPendingVolumeCommand=null,n.reachInventories={},n._trackedErrorsFormats={},n._useExistsVideoSlot=!1,n.visibleInventoryWasSent=!1,n._adImpressionHappened=!1,n._completeWasTracked=!1,n._adStarted=!1,n.isVpaidStartAdWasInvokedOnce=!1,n._manualAdditionalSEQ=0,n.videoSlotStylesObserver=null,n.logger.trace(".constructor() Processing plugins"),lb.call(Eb(n));var y=Fb.bind(Eb(n)),A=Hb.bind(Eb(n));return n._moduleCharacteristicsRelations={"[LOCATION]":Wb.bind(Eb(n)),"[SIZE]":y,"[SQUARE]":y,"[VISIBILITY]":y,"[WIDTH]":A,"[HEIGHT]":A,"[ACTUAL-WIDTH]":A,"[ACTUAL-HEIGHT]":A,"[SEQ]":Bb.bind(Eb(n)),"[SEQ_FORMAT]":Zb.bind(Eb(n)),"[STABLEID]":function(){return(0,r.L2)(xp)||""}},n.logger.trace(".constructor() Done"),n}a=t,(i=s).prototype=Object.create(a.prototype),i.prototype.constructor=i,Db(i,a);var l=s.prototype;return l.toString=function(){return Vb},l.initAd=function(e,i,o,a,s,l){var c,u=this;void 0===s&&(s={}),void 0===l&&(l={}),this.logger.log(".initAd("+e+", "+i+", "+o+", "+s+", "+l+")",2),t.prototype.initAd.call(this,e,i,o,a,s,l),this._adStarted=!1,this._adImpressionHappened=!1,this._adVideoWasStarted=!1,this._disableExtensions=[];var h=l||{},p=h.disableExtensions,g=h.advancedParams;if(this.advancedParams=g,p)if(Array.isArray(p))this._disableExtensions=p;else try{this._disableExtensions=[].concat(JSON.parse(p))}catch(t){}s||(s={});var v=s.mainContainerIsIframe;void 0!==v&&(this.options.mainContainerIsIframe=(0,n.MV)(v)),Ih.call(this),Ch.call(this);var f,m=s.isABTesting,b=s.AdParameters||s,y="string"==typeof b;if(y)try{f=JSON.parse(b)}catch(t){if(!f)try{f=(0,d.en)("?"+b.trim())||b||{}}catch(t){}}else f="object"==typeof b?_b({},b):{};this.adParameters=f;var A=(0,r.Xs)("dataUrl");A?this.logger.log(".initAd() dataUrl ["+A+"] was restored from session storage[] ",2,"color:#ff5722; font-size:1.5em"):A=s.dataUrl||f.dataUrl,this.logger.log(".initAd() adParametersRaw="+b+" \nadParameters="+JSON.stringify(f||{},null,"\t"));var P=null,O=null,S=null,_=f||{},C=_.vnDebugDelay,E=_.vnDebugAdLoadedDelay,D=_.vnDebugErrorReason,I=_.vnDebugErrorReasonCode;if(C)return this.logger.log(".initAd() vnDebugDelay="+C+" vnDebugAdLoadedDelay="+E,2,"color:#ff5722; font-size:1.5em"),E>0&&setTimeout((function(){return u.trigger("AdLoaded")}),E),void setTimeout((function(){u.trigger("AdError",D||"",I||w.GENERAL_VPAID_ERROR)}),C);if(b.vnData){var T={};try{T=JSON.parse(b.vnData)}catch(t){}if(T.parameters)this.logger.log(".Getting parsed parameters from creativeData.AdParameters"),S="string"==typeof T.parameters?JSON.parse(T.parameters):T.parameters;else if(T.key)try{this.logger.log(".Getting parsed parameters from sessionStorage by key "+T.key),S=JSON.parse(sessionStorage.getItem(T.key))}catch(t){}T.disableExtensions&&(this._disableExtensions=this._disableExtensions.concat(T.disableExtensions),this.logger.log("Got disableExtensions")),T.dataUrl&&(A=T.dataUrl,this.logger.log("Got dataUrl from vnData")),T.dataXml&&(P=(0,d.ON)(T.dataXml),this.logger.log("Got dataXml from vnData")),S&&Array.isArray(S)||T.disableExtensions||T.dataUrl||T.dataXml||(ze.call(this)&&this.trigger("AdError","Parsed parameters is not valid",w.GENERAL_VPAID_ERROR),this._destroy())}else if(!y||A||f.dataXml)f.dataXml&&(P=(0,d.ON)(f.dataXml));else try{O=JSON.parse(b)}catch(t){this.logger.log(".initAd() failed parse adParameters")}var V,k=this.options.timeout||s.timeout||f.timeout;k&&(V=this.globalTimeoutProvider=new gn(k,Nb.bind(this,k),this.logger),this._addDestroyableObject(V),V.start());var x=this.environmentVars||{},j=x.videoSlot,R=x.iframe,M=x.parentFormat;this.parentFormat=M;var L=!!R;R&&this.logger.track(".initAd() iframe="+R);var F,W=this._useExistsVideoSlot=!!(j&&j.load&&j.play&&j.pause);W&&this.setControlData("videoSlot",((F={node:j})[N.Os]="solid",F));this._useExistsSlot=!!l.slot,this.setControlData("slot",((c={node:l.slot})[N.Os]="solid",c)),this.logger.trace(".initAd() useExistsIframe="+L+" useExistsVideoSlot="+W);var H,U=l.format||{},z=U.name,B=void 0===z?"InStream":z,Z=U.options;this.logger.trace(".initAd() Initializing format ("+B+")");try{if(!(H=Oo(this,B,Z))){var q=".initAd() Unable to initialize format ("+B+")";return this.logger.error(q),void this._abort({errorEventParams:{code:w.FORMAT_ERROR,message:q}})}this._setFormat(H)}catch(t){var X=".initAd() Unable to initialize format ("+B+") "+t;return this.logger.warn(X),void this._abort({errorEventParams:{code:t.code||w.GENERAL_VPAID_ERROR,message:X}})}if(this.logger.trace(".initAd() Processing data starting..."),!S){var G=Wp.call(this);(0,n.xb)(G)||(this.data.push({dataXml:null,defaultAdXml:null,parameters:G}),Nm.call(this).then((function(){var t;H?t=un(u):l.slot&&0!==e&&(t=function(t,e){var i=t.getControlData(sn)||{},r=i.size,o=i.fatal,n=(r||{}).width;if(!n)return null;if(e>0&&e<n){var a=pn(t),s=a.topWindow,l=a.contentParent;return hn("\n    Width: "+e+";\n    Viewport: "+(s?s.innerWidth:"Unknown")+";\n    Container width: "+l.offsetWidth+";\n    Ratio: "+e/l.offsetWidth,!!o)}return null}(u,e)),t&&Zo.call(u,t,!0)})).catch((function(t){return u.logger.error(".initAd() executeExtensions "+(null==t?void 0:t.message))})),this.pushControlsDataStack())}if(S){this.logger.trace(".initAd() execute _processParsedTreeNode() with vnParsedParameters"),this.data.push({parameters:S.shift()});var Q=this._getLastParameters();this._disableExtensions&&this._disableExtensions.forEach((function(t){Q&&delete Q[t]})),S.forEach((function(t){return u.data.push({parameters:t})}));var $=(this.data[0]||{}).parameters;this.mainProc=function(t,e,i){void 0===i&&(i={}),bb.call(this,_b({parameters:t,format:e},i))}.bind(this,$,H),this.mainProc()}else O?(this.logger.trace(".initAd() we have adParametersData"),this.data.push({dataXml:null,defaultAdXml:null,parameters:O}),(0,n.xb)(O)?Ob.call(this,{code:w.NO_ADS_RESPONSE,message:"Empty data"},".initAd()"):(this.mainProc=function(t,e,i){void 0===i&&(i={}),bb.call(this,_b({parameters:O,format:e},i))}.bind(this,O,H),this.mainProc())):P?(this.logger.trace(".initAd() execute processDataXml() with dataXml"),this.mainProc=function(t,e,i){void 0===i&&(i={}),bb.call(this,_b({xml:t,format:e},i))}.bind(this,P,H),this.mainProc()):A?(m&&(A=A+(~A.indexOf("?")?"&":"?")+"ver=v2.51.17"),this.logger.trace(".initAd() we have dataUrl="+A),V&&V.pause(),Bp.call(this,A).then((function(t){return zp.call(u,t)})).then((function(t){u.mainProc=function(t,e,i){void 0===i&&(i={}),bb.call(this,_b({url:t,format:e},i))}.bind(u,t,H),u.mainProc()}))):this.logger.error(".initAd() Error: neither dataXml nor dataUrl nor adParametersData provided")},l.resizeAd=function(t,i,r,o){void 0===r&&(r=this.viewMode),void 0===o&&(o=!1);var a=this._adHasBeenLoaded,s=this.vpaid,l=this.format,d=Ii.call(this,Vb)||{};if(a){d=this.savedAdParams=[],this.lastPendingCommands.resizeAd&&delete this.lastPendingCommands.resizeAd,this.logger.trace(".resizeAd("+t+", "+i+", "+r+")");var c=!o&&(0,n.s6)(this.adWidth,t)||(0,n.s6)(this.adHeight,i);this.adWidth=t,this.adHeight=i,this.viewMode=r;var u=this.getControlNode("container"),h=this.getControlNode("vpaidSlot"),p=Vi.call(this),g="absolute"!==(h&&getComputedStyle(h)||{}).position;if(g&&this.logger.log(' was detected that vpaid changed vpaidSlot position from "absolute"',2,"pink"),p&&(0,e.Re)(p)&&"hidden"!==getComputedStyle(p).display&&p.clientHeight){var v=this.getControlNode("videoSlotParent");v&&p.parentElement!==v&&(this.logger.warn(".videoSlot was removed from start place. So we can not provide videoSlot anymore."),this.setControlData("videoSlot",{node:null}),(0,e.Zs)(p,{top:"0",left:"0",margin:"0"}),p=null)}if(c&&s&&(d.push((function(){return s.resizeAd(t,i,r)})),s.resizeAd(t,i,r)),u){var f=(l&&l.getOptions()||{}).setSizeByMedia,m=u.getBoundingClientRect()||{},b=m.width,y=m.height;if(p&&(y>0||g)){this._saveVideoSlotParams(p);var A=this.getEffectiveWrapperPadding(p),w={position:"absolute",left:"calc(50% + "+(0,n.Ug)(A.left)+")",top:"calc(50% + "+(0,n.Ug)(A.top)+")",marginLeft:(0,n.Ug)(-t/2),marginTop:(0,n.Ug)(-i/2),width:"calc("+(0,n.Ug)(t)+" - "+(0,n.Ug)(A.left)+" - "+(0,n.Ug)(A.right)+")",height:"calc("+(0,n.Ug)(i)+" - "+(0,n.Ug)(A.top)+" - "+(0,n.Ug)(A.bottom)+")",boxSizing:"border-box",zIndex:A.hasPaddings?10:"unset"};(0,e.Zs)(p,w);var P=null;this.videoSlotStylesObserver=new MutationObserver((function(t){t.forEach((function(t){"attributes"!==t.type||p.style.left===w.left&&p.style.top===w.top||P||(P=setTimeout((function(){P=null}),1e3),(0,e.Zs)(p,{left:w.left,top:w.top}))}))})),(0,e.Re)(p)&&this.videoSlotStylesObserver.observe(p,{attributes:!0,childList:!1,subtree:!1})}else if((0,n.MV)(f)){var O=this.getControlNode("wrapper"),S=O&&Di.call(this),_=S.floatOutsideHeight,C=S.floatInsideHeight,E=i+(_||0)-(C||0);if(O){var D={height:(0,n.Ug)(E)};(0,e.Zs)(O,D),d.push({node:O,styles:D})}var I=this.getControlNode("iframe");if(I){var T={height:(0,n.Ug)(E)};(0,e.Zs)(I,T),d.push({node:I,styles:T})}}else if(!p&&h&&y>0){var V=Math.min(t,b),k=Math.min(i,y),x=this.getEffectiveWrapperPadding(p),j={position:"absolute",left:"calc(50% + "+(0,n.Ug)(x.left)+")",top:"calc(50% + "+(0,n.Ug)(x.top)+")",marginLeft:(0,n.Ug)(-V/2),marginTop:(0,n.Ug)(-k/2),width:"calc("+(0,n.Ug)(V)+" - "+(0,n.Ug)(x.left)+" - "+(0,n.Ug)(x.right)+")",height:"calc("+(0,n.Ug)(k)+" - "+(0,n.Ug)(x.top)+" - "+(0,n.Ug)(x.bottom)+")",boxSizing:"border-box",zIndex:x.hasPaddings?10:"unset"};(0,e.Zs)(h,j),d.push({node:h,styles:j})}if(u){var R={textAlign:(0,e.Re)(p)&&"absolute"===p.style.position?"initial":"center"};(0,e.Zs)(u,R),d.push({node:u,styles:R})}Ti.call(this,Vb,d)}}else{!!this._AdVideoStartWasHappenedAtLeastOnce&&!Ue.call(this,"playing","pausing","paused")&&d&&!d.length?(0,n.Dp)(d,this.logger,"Module .resizeAd(). State="+this.state):(this.lastPendingCommands.resizeAd=this.resizeAd.bind(this,t,i,r),this.logger.log(".resizeAd("+t+", "+i+", "+r+") as pending command ("+this.lastPendingCommands.resizeAd+")"))}},l.startAd=function(t){var e=this;if(Be.call(this)){var i=(t||{}).checkVisibility,r=this.format&&this.format.getStartMethod&&"manual"===this.format.getStartMethod();if(this.logger.log(".startAd() state="+this.state+" checkVisibility="+i+" isManualStart="+r,1),i&&!r)this.logger.log(".startAd() Command was ingnored. state="+this.state+" checkVisibility="+i+" isManualStart="+r,1);else if(i&&r){this.logger.trace(".startAd() starting with check visibility"),this.startingWithCheckVisibility=!0;var o=this.format;He.call(this,"waitStarting"),o&&o._updateModuleState&&o._updateModuleState()}else if(Ue.call(this,["loaded","complete"])||this.startingWithCheckVisibility&&Ue.call(this,"waitStarting")){this.startingWithCheckVisibility=!1,this.logger.trace(".startAd() starting"),He.call(this,"starting");var a=this.vpaid,s=this.options,l=this.vnAfterplay,d=(s||{}).startAdTimeout,c=(s||{}).startAdSecTimeout;l&&l.shouldContinue()&&l._getTotalSuccessfulPlays()>0&&(d=c),d?(this.logger.log(".startAd() start ModuleStartAdTimerId for waiting @AdStarted "+d+" ms"),this._addTimeout(fn,(function(){e.logger.warn(".startAd() the waiting time ("+d+" ms) for @AdStarted event has expired"),e._restoreVideoSlotParams(),a&&a.stopAd(),Bo.call(e,{code:w.START_AD_TIMEOUT_HAPPENED,message:"StartAd timeout is timed out timeout="+d+"ms"}),e._failedData({shouldDestroyVpaid:!0})}),d),(0,n.hd)(a),a._subscribeOnce((function(){e.logger.trace(".startAd() Clearing ModuleStartAdTimerId timeout",2),e._removeTimeout(fn)}),"AdStarted"),a._subscribeOnce((function(){e.logger.warn(".startAd() vpaid.@AdError -> Clearing vpaid @AdStarted timeout"),e._removeTimeout(fn)}),"AdError")):this.logger.log(".startAd() without timeout for waiting @AdStarted",1),this.globalTimeoutProvider&&this.globalTimeoutProvider.start(),this._vpaidStartAdWasInvoked=!0,this.isVpaidStartAdWasInvokedOnce=!0,this._vpaidStartAdInvokesTime=Date.now(),a.startAd()}else Ue.call(this,["playing","started"])||(this.logger.trace(".startAd() postpone"),this.startAdShouldBeInvoked=!0)}},l.pauseAd=function(t){this.pausedWasStartedByVisibilityChange=!(!t||!t.method||"onvisibilitychange"!==t.method.toLowerCase()),this.logger.log(".pauseAd() pausedWasStartedByVisibilityChange="+this.pausedWasStartedByVisibilityChange+" state="+this.state,1),Ue.call(this,["playing","started"])&&(He.call(this,"pausing"),this.vpaid.pauseAd())},l.resumeAd=function(){this.logger.log(".resumeAd()",1),Ue.call(this,["paused","pausing"])&&(He.call(this,"resuming"),this.vpaid.resumeAd())},l.stopAd=function(t){var e=this,i=(t||{}).force;this.logger.log(".stopAd() state="+this.state,1);var r=Ue.call(this,["destroying","destroyed"]);if(r||Ue.call(this,["stopped","stopping"])){var o=r&&".stopAd() state="+this.state+". module was already destroyed,"||".stopAd() state="+this.state+". stopAd() was already been invoked or event @AdStopped has already been received,";return this.logger.log(o,2,"pink"),void(this._adStoppedTriggered||(this._adStoppedTriggered=!0,this.trigger("AdStopped"),sa.call(this,"AdStopped")))}Ue.call(this,"stopped")||He.call(this,"stopping");var a=this.vpaid,s=this.options,l=this.format,d=this.vnAfterplay,c=(s||{}).stopAdTimeout,u="ModuleStopAdTimerId";if(i&&d&&(d._destroy(),d=this.vnAfterplay=null),d&&d.shouldShowStub()&&d.manualRun&&!Ue.call(this,"afterplay")&&d.manualRun(),(!d||!d.shouldShowStub())&&l&&l.hide&&l.hide(),a&&!this._adStoppedWasCalled)try{(0,n.hd)(a),a._subscribe((function(){e.logger.warn(".stopAd() vpaid.@AdError -> Clearing vpaid @AdStopped timeout"),e._removeTimeout(u)}),"AdError"),a._subscribe((function(){e.logger.trace(".stopAd() Clearing vpaid @AdStopped timeout",2),e._removeTimeout(u)}),"AdStopped"),a.stopAd()}catch(t){var h=t;(!h.code||h.code<w.GENERAL_LINEAR_ERROR)&&((h=new Error(t)).code=w.VPAID_JS_ERROR),Zo.call(this,h),this.logger.error(".stopAd(): "+h)}this._adStoppedWasCalled?En.call(this):c&&this._addTimeout(u,(function(){e.logger.warn(".stopAd() the waiting time "+c+" for @AdStopped event has expired, Force trigger @AdStopped"),En.call(e)}),c)},l.skipAd=function(){var t=this;this.logger.trace(".skipAd()");var e=this.getAdSkippableState();if(!Ue.call(this,"skipping")&&e){var i="ModuleSkipAdTimerId",r=this.vpaid,o=this.options.skipAdTimeout;He.call(this,"skipping"),this._restoreVideoSlotParams(),r&&((0,n.hd)(r),r._subscribeOnce((function(){t.logger.trace(" @AdSkipped Clearing skipAd timeout"),t._removeTimeout(i)}),"AdSkipped"),setTimeout((function(){return r.skipAd()}),1)),o&&this._addTimeout(i,(function(){t.logger.warn(".skipAd() Timed out ("+o+") force trigger @AdSkipped"),Dn.call(t)}),o)}},l.getAdRemainingTime=function(){return this.vpaid&&this.vpaid.getAdRemainingTime()||0},l.getAdElapsedTime=function(){return this.vpaid&&this.vpaid.getAdElapsedTime()||t.prototype.getAdElapsedTime.call(this)},l.getAdDuration=function(){return this.adDuration>=0&&this.adDuration||(this.vpaid?this.adDuration=this.vpaid.getAdDuration():0)},l.getAdAspectRatio=function(){var e=this.vpaid;return e&&e.getAdAspectRatio()||t.prototype.getAdAspectRatio.call(this)},l.processDataXml=function(t){return wb.call(this,t)},l.setAdVolume=function(e,i){if(!Be.call(this))return null;var r=(i=_b(_b({},{invoker:null}),i)).invoker,o=this.getControlInstance("volume"),n=!r;this.logger.trace(" setAdVolume("+e+", params="+JSON.stringify(i,["step","invoker","smoothUpdate"])+") this.vpaid="+this.vpaid+" isOutsideRequest="+n+" this._useExistsVideoSlot="+this._useExistsVideoSlot+" volumeControl="+o),this._useExistsVideoSlot&&n&&o&&(o.cancelVolumeUpdate(),this.logger.log(" make volumeControl.cancelVolumeUpdate() and vpaid.setAdVolume("+e+")"));var a=this.canChangeVolume();if(this.vpaid&&(!e||a))return this.vpaid.setAdVolume(e,i),t.prototype.setAdVolume.call(this,e,i);e&&!a&&this.logger.warn(" setAdVolume() attempt to set adVolume="+e+" was ignored (state="+this.state+")"),this.logger.trace(" setAdVolume("+e+") as pending command"),this.canChangeVolume()&&(this.lastPendingVolumeCommand=this.setAdVolume.bind(this,e,i))},l._destroy=function(){var e=this,i=(this.options||{}).iframeRemoveDelay;if(!Ue.call(this,["destroying","destroyed"])){i&&(this._delayRemovingControls={containerIframe:{delay:i}}),this.lastPendingCommands={},He.call(this,"destroying"),aa.call(this,this.vnShowViqeo?["AdStarted"]:[]);var r=this.vpaid,o=this.globalTimeoutProvider;this._restoreVideoSlotParams(),this._removeTimeout(vn),o&&o.stop(),this.logger.trace(".destroy() Destroying"),this._subscribeOnce((function(){e.logger.trace(".destroy() Removing controls"),e.clearControlsCollection(),r&&((0,n.hd)(r),e.logger.trace(".destroy() Removing VPAID"),r._subscribeOnce((function(){e.logger.trace(".destroy() VPAID removed"),e.vpaid=null}),"AdDestroyed"),r._destroy()),e.vnAdEvents&&e.vnAdEvents._destroy(),e.vnPageChanged&&e.vnPageChanged._destroy(),e.format=null,e.data=[],He.call(e,"destroyed"),e.logger.log(".destroy() Destroyed",2)}),"AdDestroyed"),t.prototype._destroy.call(this)}},l._restoreVideoSlotParams=function(){var t,i;null===(t=this.videoSlotStylesObserver)||void 0===t||null===(i=t.disconnect)||void 0===i||i.call(t);var r=this.getControlNode("videoSlotSavedNode"),o=(this.getControlUnionData("videoSlotSavedData")||{}).savedCss;if(r&&o&&o.length){var n=(o[0]||{style:{}}).style;this.logger.trace("._restoreVideoSlotParams() styles="+JSON.stringify(n)),r.style="",n&&(0,e.Zs)(r,n)}},l._saveVideoSlotParams=function(t){var e,i;if(this._useExistsVideoSlot){var r=this.getControlUnionData("videoSlotSavedData"),o=this.getControlNode("videoSlotSavedNode"),n=(t&&t||o||{}).style,a=n?{style:{width:n.width,height:n.height}}:null,s=(r||{}).savedCss;(s||(s=[])).push(a),this.setControlData("videoSlot",((e={node:o||t,savedCss:s})[N.Os]="solid",e)),this.setControlData("videoSlotSavedNode",((i={node:o||t})[N.Os]="solid",i)),this.setControlData("videoSlotSavedData",{savedCss:s}),this.logger.trace("_saveVideoSlotParams() saved css="+JSON.stringify(s))}},l._setFormat=function(t){this.logger.log(".setFormat("+t+")"),this.format=t,this._destroyIframe(),t.hasReachInventoryFactory&&t.hasReachInventoryFactory()&&!(0,n.xb)(this._getLastParameters())&&Lo(this),Gp.call(this);var e=t.getModuleOptions();e&&(this.logger.trace("._setFormat() updateOptionsFromFormat options="+JSON.stringify(e,null,"\t")),Ch.call(this,e)),(0,n.hd)(t),t._subscribe(Lb.bind(this),"vnFormatStateChanged",t),this.anckorElement=t.getAnchorElement&&t.getAnchorElement();var i=t.getSlotSize&&t.getSlotSize()||{},o=i.width,a=i.height;this.setControlData("vnMacros",{"[WIDTH]":o||0,"[HEIGHT]":a||0,"[STABLEID]":(0,r.L2)(xp)||""});var s=un(this);s&&Zo.call(this,s,!0)},l._getLastDataXml=function(t){void 0===t&&(t=0);var e=this.data;if(!e||e.length<t)return null;var i=e[e.length-(t+1)];return i&&i.dataXml},l._getLastData=function(t){void 0===t&&(t=0);var e=this.data;return!e||e.length<t?null:e[e.length-(t+1)]},l._getLastDefaultAdXml=function(t){void 0===t&&(t=0);var e=this._getLastData(t);return e&&e.defaultAdXml},l._getLastParameters=function(t){void 0===t&&(t=0);var e=this._getLastData(t);return e&&e.parameters},l._updateLastParameters=function(t,e,i){void 0===i&&(i=0);var r=this.data;if(r&&!(r.length<i)){var o=r.length-(i+1),n=r[o];if(!n)throw Error("_updateLastParameters. Out of index ["+o+"]. data.length="+r.length+" step="+i);this.logger.trace("._updateLastParameters() key="+t+" value="+JSON.stringify(e,null,"\t"));var a=n.parameters;a||(a=n.parameters={});var s=a[t];a[t]=s?[].concat(s,e).sort((function(t,e){return(t.orderIndex||0)-(e.orderIndex||0)})):e}},l._failedData=function(t){var e=this,i=t||{},r=i.shouldAbort,o=void 0!==r&&r,n=i.shouldResetPlugins,a=i.shouldDestroyVpaid,s=(t||{}).errorEventParams,l=(this.options||{}).canExecuteNoAd;this.logger.warn(".failedData"),this._adStarted=!1,this._adImpressionHappened=!1,this._adVideoWasStarted=!1,this.lastPendingCommands={},this._adHasBeenLoaded=!1,this._completeWasTracked=!1;var d=this._trackPassed;(this._track2Passed||!d?Promise.resolve():on.call(this)).then((function(){e._trackPassed=!1,e._track2Passed=!1;var i,r,d=e.vnAfterplay,c=e.vpaid;if(c&&a&&(c._destroy&&c._destroy(),e.vpaid=null),e._adsLeft<0&&(!d||!d.shouldContinue())){var u=(e.options||{}).maxAds;return e.logger.warn(".failedData() maxAds("+u+") option exceeded"),s||(s={code:w.GENERAL_VPAID_ERROR,message:"maxAds("+u+") option exceeded"}),void e._abort({errorEventParams:{code:s.code,message:s.message,cancel:s.cancel}})}Bo.call(e,{code:(null===(i=s)||void 0===i?void 0:i.code)||w.DEFAULT_AD_NEXT_WITHOUT_ERROR_CODE,message:"Proceed to next vnDefaultAd. "+((null===(r=s)||void 0===r?void 0:r.message)||"No specific error message was passed.")});var h=null,p=null;do{var g=e.getControlUnionData("vnNoAd")||{};e.popControlsDataStack();var v=e.data.pop()||{};h=v.defaultAdXml;var f=void 0;if(f=null!=v&&v.dataXml||h?p=g:p,(!e.data.length&&!h||o)&&!e._runningVnNoAd){if(d&&d.shouldContinue()){var m=e.mainProc,b=d._getTotalSuccessfulPlays(),y=d._getSuccessfulPlays();if(m&&y>0){var A=d._incCycleCounter();return e.logger.log(".No more Ads. "+b+" Ads has been played from "+d._getContinueNumber()+". cycleCounter="+A+".\n Start again!",2,"color:blue;font-size:1.2em;font-weight:bold"),void m()}e.logger.log(". No additional advertisements out of the required "+d._getContinueNumber()+" were played. Exit.")}else e.logger.track(".failedData() No more defaultAd canExecuteNoAd="+l);var P=s||{},O=P.code,S=P.message;return O||(s={code:w.GENERAL_VPAID_ERROR,message:S||"No playable sources found"}),void(f&&!0===l?(e._runningVnNoAd=!0,Ro(e,f).then((function(){return e.logger.log(".executing vnNoAd")})).catch((function(){return e._abort({errorEventParams:{code:s.code,message:s.message,cancel:s.cancel}})})).finally((function(){d&&!d.shouldContinue()&&e._abort({errorEventParams:{code:s.code,message:s.message,cancel:!1}})}))):e._abort({errorEventParams:{code:s.code,message:s.message,cancel:s.cancel}}))}}while(e.data.length&&!h||o);var _=(t||{}).logMessage;e.logger.log(_||".failedData() Processing next defaultAd",2);var C=e.filterFormatName;!d&&c&&c._destroy&&c._destroy(),aa.call(e),bb.call(e,{xml:h,filters:C?{formatName:C}:{},shouldResetPlugins:n}).then((function(t){return e.trigger("vnProceedToNextDefaultAd",t)}))}))},l._abort=function(t){var e=this;this.logger.track("._abort() params="+JSON.stringify(t)),this.waitAsyncTrackings().then((function(t){e.logger.trace(".waitAsyncTrackings() done result="+("string"==typeof t?t:Ho(t)))})).catch((function(t){e.logger.trace(".waitAsyncTrackings() got reject "+((null==t?void 0:t.message)||t))})).finally((function(){e.logger.trace("._abort() executing after waitAsyncTrackings()");var i=(t||{}).errorEventParams||{},r=i.code,o=i.message,n=i.cancel;e.format&&e.format.abort(),e.vnShowViqeo||n||!ze.call(e)||(e.trigger("AdError",o||"",r),sa.call(e,"AdError")),e._destroy()}))},l._replay=function(){var t=this.vpaid;t&&t._destroy&&t._destroy(),this._useExistsVideoSlot||this.setControlData("videoSlot",{node:null}),this.vpaid=null,this._adStarted=!1,this._adImpressionHappened=!1,this._adVideoWasStarted=!1,this.lastPendingCommands={},this._adHasBeenLoaded=!1,this._completeWasTracked=!1,this._initializeDate=new Date,ub.call(this)},l._destroyIframe=function(){var t=this,e=this.vnAfterplay;if(this.environmentVars&&this.environmentVars.iframe||e&&e.shouldContinue())return!1;var i=this.getControlUnionData("iframe")||{},r=i.node,o=i.removeDelay;return r?(r.onload=null,o?setTimeout((function(){return t._removeDOMNode(r)}),o):this._removeDOMNode(r),this.logger.trace(" _destroyIframe(). iframe has been destroyed.")):this.logger.trace(" _destroyIframe() iframe does not exists. nothing to destroy."),this.setControlData("iframe",{node:null}),!0},l._applyLayout=function(t){var e=this;Object.keys(t).forEach((function(i){var r=e.getControlUnionData(i,"css"),o=t[i]||{};r=_b(r?_b({},r):{},o),e.setControlData(i,{css:r})}))},l.isMediaUrlBlocked=function(t){var e=this.getControlUnionData("vnCreativeBlock","urls");if(!e)return!1;var i=Object.keys(e).some((function(i){return t.split("?")[0].replace(/^(https*:)*\/\//,"").toLowerCase()===e[i]}));return i&&this.logger.track(" isMediaBlocked() "+t+" has been blocked"),i},l.setSelectedCreative=function(t,e,i){void 0===i&&(i=null);var r=encodeURIComponent(t);if(r&&(this._media=r),i=i&&i.replace&&i.replace(/[\t\n\r ]/gi,""),this.setControlData("vnMacros",{"[ASSETURI]":r,"[ASSETDURATION]":e,"[ASSETADPARAMS]":i}),tn.call(this)){var o=Qo.call(this,"vnCreative:select")||{},n=o.urls,a=o.uniqueId,s=(n||[])[0];this.logger.track(" vnCreative:select post("+s+")"),s&&this.replaceMacros(s,a).then(_i)}},l.replaceMacros=function(t,e){var i,o=this;t=t.replace(/%%SITE%%/g,location&&location.hostname||"").replace(/%%SCHEME%%/g,location&&location.protocol||"").replace(/%%.*?%%/g,""),null==this||null===(i=this.setControlData)||void 0===i||i.call(this,"vnMacros",{"[STABLEID]":(0,r.L2)(xp)||""},!0);var a=Date.now(),s=/(\[TIME])|(\[TIME_L])|(\[TIME_G])|(\[TIME_W])|(\[REQUEST_STARTED])/g.test(t),l={};try{l=(0,d.en)(t)}catch(t){return Promise.reject(t)}return Ub.call(this,l).then((function(){var i=(o.getControlUnionData("vnTrackingParams")||{}).trackingParams,r=_b(_b({},o.getControlUnionData("vnMacros")),i);if(s){var l=Mb.call(o,e)||null;r["[REQUEST_STARTED]"]=l||-1,r["[TIME]"]=l?a-l:-1,r["[TIME_L]"]=l?a-l:-1,r["[TIME_G]"]=a-o._initializeDate,r["[TIME_W]"]=a.valueOf()}var d=0===o.getAdVolume(),c=!(0,n.s6)(o.getAdWidth(),window.innerWidth)&&!(0,n.s6)(o.getAdHeight(),window.innerHeight);return r["[PLAYERSTATE]"]=[d?"muted":null,c?"fullscreen":null].filter(Boolean).join(","),o.substituteMacroValue(t,r)}))},l.substituteMacroValue=function(t,e){var i=e||this.getControlUnionData("vnMacros");return i?Object.keys(i).reduce((function(t,e){return t&&t.replace(e,i[e])}),t):t},l.canChangeVolume=function(){return this.logger.none(" canChangeVolume(): this.state="+this.state),Ue.call(this,["started","playing","paused","loaded"])},l.vpaidJsVideoSlotShouldBeMuted=function(){return this.options&&this.options.vpaidJsVideoSlotShouldBeMuted},l.isVpaidJs=function(){return this.vpaid&&~this.vpaid.toString().indexOf("VpaidJs")},l.getAnchorElement=function(){return this.anckorElement},l.trigger=function(e){for(var i=this,r=arguments.length,o=new Array(r>1?r-1:0),n=1;n<r;n++)o[n-1]=arguments[n];var a=!0;this._adHasBeenLoaded&&!this._adStoppedTriggered||xb.includes(e)||(a=!1),kb.includes(e)||(a=!1);var s=a?t.prototype.trigger:t.prototype.triggerInternal,l=this.getControlUnionData("vnEventsParams")||{},d=l.eventsParams,c=d&&d[e];Ub.call(this,c).then((function(t){o.length&&"object"==typeof o[0]?(o[0]=_b(_b({},o[0]),t),s.apply(i,[].concat(e,o))):s.apply(i,[].concat(e,o,t))}))},l.getAPI=function(){var t=this;return{getMainModuleId:function(){return t.mainModuleId},getFormat:function(){return t.format},getVpaid:function(){return t.vpaid},setControlData:this.setControlData.bind(this),getControlUnionData:this.getControlUnionData.bind(this),getControlUnionDataGlobal:this.getControlUnionDataGlobal.bind(this),getControlRawUnionData:this.getControlRawUnionData.bind(this),getControlRawUnionDataGlobal:this.getControlRawUnionDataGlobal.bind(this),getControlNode:this.getControlNode.bind(this),getVideoSlot:Vi.bind(this),getControlInstance:this.getControlInstance.bind(this),getLastParameters:this._getLastParameters.bind(this),updateLastParameters:this._updateLastParameters.bind(this),getOptions:function(){return _b({},t.options)},getEnvironmentVars:function(){return _b({},t.environmentVars)},extendEnvironmentVars:function(e){return(0,N.l7)(t.environmentVars,e)},getAdWidth:function(){return t.getAdWidth()},getAdHeight:function(){return t.getAdHeight()},getIndents:Di.bind(this),saveVideoSlotParams:this._saveVideoSlotParams.bind(this),getAdAspectRatio:this.getAdAspectRatio.bind(this),getAdSkippableState:this.getAdSkippableState.bind(this),setAdSkippableState:this.setAdSkippableState.bind(this),getAdRemainingTime:this.getAdRemainingTime.bind(this),getAdElapsedTime:this.getAdElapsedTime.bind(this),getAdDuration:this.getAdDuration.bind(this),resizeAd:this.resizeAd.bind(this),setWrapperSize:zb.bind(this),inState:Ue.bind(this),startAd:this.startAd.bind(this),pauseAd:this.pauseAd.bind(this),resumeAd:this.resumeAd.bind(this),trackStrongUrls:Jo.bind(this),addVPAIDEventListener:function(e,i,r){return void 0===r&&(r=t),r._addVPAIDEventListener(t,e,i)},removeVPAIDEventListener:function(e,i,r){return void 0===r&&(r=t),r._removeVPAIDEventListener(t,e,i)},isVpaidJs:this.isVpaidJs.bind(this),trigger:this.trigger.bind(this),logger:this.logger,getState:function(){return t.state},getTotalSuccessfulPlays:function(){return t.vnAfterplay&&t.vnAfterplay._getTotalSuccessfulPlays()||0},AdVideoStartWasHappenedAtLeastOnce:function(){return t._AdVideoStartWasHappenedAtLeastOnce},getSavedAdParams:Ii.bind(this),saveAdParams:Ti.bind(this),abort:function(e){return void 0===e&&(e={code:w.GENERAL_VPAID_ERROR,message:"module aborted"}),t._failedData({shouldAbort:!0,shouldDestroyVpaid:!0,errorEventParams:e})},fail:function(e){return void 0===e&&(e={code:w.GENERAL_VPAID_ERROR,message:"module failed"}),t._failedData({shouldAbort:!1,shouldDestroyVpaid:!0,errorEventParams:e})},restoreVideoSlotParams:function(){return t._restoreVideoSlotParams()}}},l.getAdIframes=function(){var t,e=this.vpaid,i=this.getControlNode("iframe");try{t=null!=i.contentWindow}catch(e){t=!1}var r=[];return e&&e.getAdIframes&&(r=r.concat(e.getAdIframes())),r=r.concat(Promise.resolve(t?i:window)),Promise.all(r).then((function(t){return t.filter((function(t){return t}))}))},s}(v);function Mb(t){var e=this._requestStartedData;if(!e||!e.length)return null;for(var i=e.length-1;i>=0;i--){var r=e[i]||{},o=r.uniqueId,n=r.time;if(t===o)return n}return null}function Nb(t){var e="Global timeout is timed out timeout="+t+"ms";this.logger.warn(e),this._removeTimeout(mn),this._removeTimeout(fn),Zo.call(this,{code:w.GLOBAL_TIMEOUT_HAPPENED,message:e}),this._failedData({shouldDestroyVpaid:!0,shouldAbort:!0,errorEventParams:{code:w.GENERAL_VPAID_ERROR,message:e}})}function Lb(t){this.trigger("vnFormatStateChanged",t),t&&"isFloating"in t&&(this.adIgnoreSizeErrorState=!0===t.isFloating)}function Fb(){var t=this,e=function(e){var i=_b(_b({},{intersectionRatio:0,visibility:0,moduleSquare:0,screenSquare:0,relationSize:null}),e);return t.setControlData("vnMacros",{"[SQUARE]":i.moduleSquare},!0),t.setControlData("vnMacros",{"[VISIBILITY]":i.visibility},!0),t.setControlData("vnMacros",{"[SIZE]":i.relationSize},!0),i};try{var i,r,o=Vi.call(this),a=o&&o.clientHeight?o:(i=this.getControlNode("slot"))&&i.clientHeight?i:(r=this.getControlNode("iframe"))&&r.clientHeight?r:null;return a?n.h_.call(this,a).then((function(t){return e(t)})):Promise.resolve(e())}catch(t){var s=t&&(t.message||t);return this.logger.error(s),Promise.resolve(e())}}function Wb(){try{var t=(0,n.Wn)(window,document),e=t&&encodeURIComponent(t);return this.setControlData("vnMacros",{"[LOCATION]":e||"null"}),Promise.resolve(e)}catch(t){var i=t&&(t.message||t);return this.logger.error(i),Promise.resolve()}}function Hb(){var t=this.format,e=t.getSlotSize&&t.getSlotSize()||{},i=e.width,r=e.height;return this.setControlData("vnMacros",{"[WIDTH]":i||0,"[HEIGHT]":r||0,"[ACTUAL-WIDTH]":i||0,"[ACTUAL-HEIGHT]":r||0},!0),Promise.resolve({width:i,height:r})}function Ub(t){var e=this;return new Promise((function(i){var r=[];if(!(0,n.xb)(t)){var o=e._moduleCharacteristicsRelations;r=(t&&Object.keys(t).map((function(e){return t[e]}))).reduce((function(t,e){var i=o[e];return i&&!t.some((function(t){return t===i}))&&t.push(i),t}),[])}return(!r&&Promise.resolve()||Promise.all(r.map((function(t){return t()})))).then((function(){var r=t&&Object.keys(t).reduce((function(i,r){return t[r]&&(i[r]=e.substituteMacroValue(t[r])),i}),{})||{};i(r)}))}))}function zb(t){this.logger.trace(".setWrapperSize("+t+")");var i=this.getControlNode("wrapper");return i&&(0,e.Zs)(i,{height:(0,n.Ug)(t)}),i}function Bb(){var t=this.vnAfterplay,e=this._manualAdditionalSEQ,i=(t&&t._getTotalSuccessfulPlays()||e||0)+1;return this.setControlData("vnMacros",{"[SEQ]":i},!0),i}function Zb(){var t=this.vnAfterplay,e=this.format,i=t&&t._getTotalSuccessfulPlays()||0;return this.setControlData("vnMacros",{"[SEQ_FORMAT]":i>0&&e&&e.getBaseName&&e.getBaseName()||""}),i}var qb=(null===o.ZP||void 0===o.ZP||null===(Ib=o.ZP.getChildWriter)||void 0===Ib?void 0:Ib.call(o.ZP,"ModuleWindowFns"))||o.ZP;window.createVPAIDAd=function(t){return qb.log("Requested new module instance via window.createVPAIDAd()"),new Rb(t)},window.getVPAIDAd=function(t){return qb.log("Requested module instance via window.getVPAIDAd()"),new Rb(t)}})()})();