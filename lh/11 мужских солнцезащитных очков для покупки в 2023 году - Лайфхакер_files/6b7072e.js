(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{1161:function(e,t,n){"use strict";n(936)},1162:function(e,t,n){var o=n(7)(!1);o.push([e.i,":root{--base-button-height:48px;--base-button-width:100%}",""]),e.exports=o},1163:function(e,t,n){"use strict";n(937)},1164:function(e,t,n){var o=n(7)(!1);o.push([e.i,".base-button[data-v-7387153f]{font-family:PTRoot,Arial,sans-serif;font-style:normal;font-weight:700;font-size:16px;line-height:24px;color:#000;background:#ed5e42;border:none;display:flex;justify-content:center;align-items:center;color:#fff;width:var(--base-button-width);height:var(--base-button-height);cursor:pointer;text-decoration:none}@media(hover:hover){.base-button[data-v-7387153f]:hover{background:#d44b3f}}",""]),e.exports=o},1169:function(e,t,n){"use strict";n(939)},1170:function(e,t,n){var o=n(7)(!1);o.push([e.i,".base-auto-loading[data-v-7a3b2774]{min-width:1px;min-height:1px}",""]),e.exports=o},1171:function(e,t,n){"use strict";n(941)},1172:function(e,t,n){var o=n(7)(!1);o.push([e.i,".recipes__container[data-v-468d6ce0]{width:640px}@media(min-width:768px){.recipes__container_error[data-v-468d6ce0]{margin-bottom:24px}}.recipes__card[data-v-468d6ce0]{margin-bottom:16px}@media(min-width:768px){.recipes__card[data-v-468d6ce0]{margin-bottom:24px}}.recipes__top[data-v-468d6ce0]{background-color:#fff;border:1px solid #e7e7e7;border-top:0;padding-bottom:16px}@media(min-width:768px){.recipes__top[data-v-468d6ce0]{border:1px solid #e7e7e7}}.recipes__title[data-v-468d6ce0]{padding-left:16px;padding-right:16px;font-family:Commissioner,Trebuchet,sans-serif;font-style:normal;font-weight:600;font-size:22px;line-height:30px;color:#000}.recipes__title+.recipes__paginator[data-v-468d6ce0]{margin-top:18px}@media(min-width:768px){.recipes__title[data-v-468d6ce0]{padding-left:24px;padding-right:24px;font-family:Commissioner,Trebuchet,sans-serif;font-style:normal;font-weight:600;font-size:26px;line-height:34px;color:#000}}@media(min-width:768px)and (min-width:768px){.recipes__title[data-v-468d6ce0]{font-size:28px;line-height:36px}}.recipes__paginator[data-v-468d6ce0]{background-color:transparent}.recipes__paginator_bottom[data-v-468d6ce0]{margin-top:10px;margin-bottom:26px}@media(min-width:768px){.recipes__paginator_bottom[data-v-468d6ce0]{margin-top:14px;margin-bottom:38px}}.recipes__paginator_top[data-v-468d6ce0]{padding-top:0;padding-bottom:0}.recipes__show-more[data-v-468d6ce0]{font-family:PTRoot,Arial,sans-serif;font-style:normal;font-weight:700;font-size:16px;line-height:24px;color:#000;background:#ed5e42;border:none;display:flex;justify-content:center;align-items:center;color:#fff;width:auto;height:48px;cursor:pointer;text-decoration:none;margin-left:16px;margin-right:16px;margin-bottom:16px}@media(hover:hover){.recipes__show-more[data-v-468d6ce0]:hover{background:#d44b3f}}@media(min-width:768px){.recipes__show-more[data-v-468d6ce0]{margin-bottom:24px;margin-left:0;margin-right:0}}.recipes__list[data-v-468d6ce0]{max-width:100vw}",""]),e.exports=o},1422:function(e,t,n){"use strict";n.r(t);n(18),n(14),n(19),n(20);var o=n(12),r=n(11),c=n(2),d=(n(31),n(23),n(79),n(16),n(17),n(1)),l=n(26),h=n(15),f=n(250),m=n(1054),v=d.default.extend({name:"BaseButton",props:{text:{type:String,required:!0},tagName:{type:String,default:"button"}}}),_=(n(1161),n(1163),n(3)),w=Object(_.a)(v,(function(){var e=this,t=e.$createElement;return(e._self._c||t)(e.tagName,{tag:"component",staticClass:"base-button"},[e._v(e._s(e.text))])}),[],!1,null,"7387153f",null).exports,x=n(101),y=n(1058),k=d.default.extend({name:"BaseAutoLoading",components:{LhIntersectionObserver:h.LhIntersectionObserver},props:{fetching:{type:Boolean,required:!0},options:{type:Object,default:function(){return{rootMargin:"".concat(window.innerHeight,"px 0px ").concat(1.5*window.innerHeight,"px 0px")}}}},watch:{fetching:function(e){var t=this;e||setTimeout((function(){try{var e=t.$refs.container.$el;t.needLoadNewItems(e)&&t.emitLoadNewItems()}catch(e){}}),500)}},methods:{emitLoadNewItems:function(){this.fetching||this.$emit("load-new-items")},needLoadNewItems:function(e){var rect=e.getBoundingClientRect();return rect.top>0&&rect.top<=1.5*window.innerHeight||rect.top<=0}}}),C=(n(1169),Object(_.a)(k,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("LhIntersectionObserver",{ref:"container",staticClass:"base-auto-loading",attrs:{options:e.options},on:{appear:e.emitLoadNewItems}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.fetching,expression:"fetching"}],staticClass:"base-auto-loading__content"},[e._t("placeholder")],2)])}),[],!1,null,"7a3b2774",null).exports),O=n(136),j=n(68),P=n(801),L=n(4),T=n(131),$=n(9),R=n(0),A=n(5),E=n(6),S=n(940),I=n(150);function F(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function D(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?F(Object(source),!0).forEach((function(t){Object(c.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):F(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var H={5:!1,10:!1,15:!1,20:!1,25:!1,30:!1,35:!1,40:!1,45:!1,50:!1,55:!1,60:!1,65:!1,70:!1,75:!1,80:!1,85:!1,90:!1,95:!1,100:!1},M=d.default.extend({name:"Recipes",components:{RecipeCard:m.a,BaseButton:w,LhThePaginator:h.LhThePaginator,WidgetsRendererContainer:x.a,RecipeCardPlaceholder:y.a,BaseAutoLoading:C,RecipeErrorContainer:function(){return n.e(9).then(n.bind(null,1436))},LazyHydrate:f.a,ThePaginatorWrapper:function(){return n.e(89).then(n.bind(null,1437))},LhIntersectionObserver:h.LhIntersectionObserver},mixins:[O.a,j.a],layout:"recipes",props:{slug:{type:String,default:""},activePage:{type:String,default:"1"}},data:function(){return{page:{title:"",total:1},recipes:[],autoLoading:{fetching:!1,page:1,count:3},scrollEventSent:D({},H),seo:null}},fetch:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,o,r,c,d,l,h,f,m,v,_,w,x,y,k,C,O,j,P,L,T,$;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$wordpressApi.fetchRecipes(+e.activePage,e.currentPath);case 3:if(200!==(n=t.sent).status){t.next=13;break}e.recipes=n.data.recipes.map(e.normalizeRecipe).map((function(e){return Object.freeze(e)})),e.page.title=null!==(o=null===(r=n.data)||void 0===r?void 0:r.title)&&void 0!==o?o:"",e.page.total=null!==(c=null===(d=n.data)||void 0===d?void 0:d.totalPage)&&void 0!==c?c:1,n.data.seo&&(e.seo=n.data.seo),e.$store.commit(R.wb,{fullPath:e.$route.fullPath,data:{ingredients:null!==(f=null===(m=n.data)||void 0===m||null===(v=m.taxonomies)||void 0===v?void 0:v.ingredients)&&void 0!==f?f:[],dishTypes:null!==(_=null===(w=n.data)||void 0===w||null===(x=w.taxonomies)||void 0===x?void 0:x.dishTypes)&&void 0!==_?_:[],cuisines:null!==(y=null===(k=n.data)||void 0===k||null===(C=k.taxonomies)||void 0===C?void 0:C.cuisines)&&void 0!==y?y:[],keywords:null!==(O=null===(j=n.data)||void 0===j||null===(P=j.taxonomies)||void 0===P?void 0:P.keywords)&&void 0!==O?O:[],cookingMethods:null!==(L=null===(T=n.data)||void 0===T||null===($=T.taxonomies)||void 0===$?void 0:$.cookingMethods)&&void 0!==L?L:[]}}),e.$store.commit(R.Dc,{newState:null!==(l=null===(h=n.data)||void 0===h?void 0:h.isUserLoggedIn)&&void 0!==l&&l}),t.next=14;break;case 13:throw new Error("error in pages/Recipes fetch hook");case 14:t.next=21;break;case 16:throw t.prev=16,t.t0=t.catch(0),e.$sentry.captureException(t.t0),new Error(t.t0);case 21:case"end":return t.stop()}}),t,null,[[0,16]])})))()},head:function(){var e;return this.seo?D(D({},this.seo.title?{title:this.seo.title}:{}),{},{meta:[].concat(Object(o.a)(this.seo.description?[{hid:"description",name:"description",content:this.seo.description}]:[]),Object(o.a)(this.seo.title?[{hid:"og:title",property:"og:title",content:this.seo.title}]:[]),Object(o.a)(this.seo.ogImage?[{hid:"og:image",property:"og:image",content:this.seo.ogImage}]:[]),Object(o.a)(this.seo.description?[{hid:"og:description",property:"og:description",content:this.seo.description}]:[]),Object(o.a)(this.seo.canonical?[{hid:"og:url",property:"og:url",content:this.seo.canonical}]:[]),Object(o.a)(this.seo.description?[{hid:"description",name:"description",content:this.seo.description}]:[]),Object(o.a)(this.seo.title?[{hid:"twitter:title",property:"twitter:title",content:this.seo.title}]:[]),Object(o.a)(this.seo.description?[{hid:"twitter:description",property:"twitter:description",content:this.seo.description}]:[]),Object(o.a)(this.seo.ogImage?[{hid:"twitter:image",property:"twitter:image",content:this.seo.ogImage}]:[]),Object(o.a)(this.seo.title?[{hid:"recipe_page_title",name:"recipe_page_title",content:this.seo.title}]:[]),[{hid:"twitter:card",property:"twitter:card",content:"summary_large_image"},{hid:"p:domain_verify",name:"p:domain_verify",content:"0558f72dfd09e37b1cabc45d3c18d081"}],Object(o.a)(null!==(e=this.seo)&&void 0!==e&&e.robots?[{hid:"robots",name:"robots",content:this.seo.robots}]:[])),link:Object(o.a)(this.seo.canonical?[{hid:"canonical",rel:"canonical",href:this.seo.canonical}]:[])}):{}},computed:D(D(D({},Object(l.mapState)(["folders","user"])),Object(l.mapGetters)({getReactionState:R.U,getDislikes:R.P,getLikes:R.R,getCommentsCount:"getCommentsCount"})),{},{isAuthenticatedInWordpress:function(){return this.$store.state.isAuthenticatedInWordpress},isHomePage:function(){return Object($.k)(this.$route.name)},eventPosition:function(){return this.isHomePage?"recipe-main":"recipe-filters"},showBottomPaginator:function(){return!this.isHomePage&&Object($.l)(this.$route.name)},showTopPaginator:function(){return!this.isHomePage&&+this.activePage>1&&Object($.l)(this.$route.name)},showTitle:function(){return Boolean(this.page.title&&(!this.isHomePage||this.isHomePage&&+this.activePage>1))},betweenRecipesWidgets:function(){return this.$store.getters.currentBetweenRecipes},recipesAndWidgets:function(){return Object(T.a)(this.recipes,this.betweenRecipesWidgets,5,1,!1)},autoLoadingEnabled:function(){return this.isHomePage&&this.autoLoading.page<=this.autoLoading.count},showMoreButtonVisible:function(){return this.isHomePage&&!this.autoLoadingEnabled},user:function(){return this.$store.state.user},currentPath:function(){return"/recipes/"+this.slug},showMoreLink:function(){return"/recipes/page/".concat(this.autoLoading.count+2,"/")},containerClass:function(){return D({},this.$fetchState.error?{recipes__container_error:!0}:{})}}),watch:{user:function(){this.fetchFavorites({params:{post_ids:this.getRecipesIds().join()}})},recipes:function(){this.fetchPostsData(this.getRecipesIds())}},mounted:function(){var e,t,n,o,r;null===(e=window)||void 0===e||null===(t=e.dataLayer)||void 0===t||null===(n=t.push)||void 0===n||n.call(t,{page_title:null!==(o=null===(r=this.seo)||void 0===r?void 0:r.title)&&void 0!==o?o:null})},deactivated:function(){this.scrollEventSent=D({},H)},methods:D(D({},Object(l.mapActions)({updateLike:R.Xb,updateDislike:R.Rb,fetchReactions:R.C,fetchCommentsCount:R.y,fetchViewsCount:R.F,fetchFavorites:R.I})),{},{getEditLinkHref:L.g,normalizeRecipe:P.b,getRecipesIds:function(){return this.recipes.map((function(e){return e.id}))},fetchPostsData:function(e){this.fetchReactions(e),this.fetchCommentsCount(e),this.fetchViewsCount(e),this.fetchFavorites({params:{post_ids:e.join()}})},onLoadNewItems:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.autoLoading.fetching=!0,t.next=4,e.$wordpressApi.fetchRecipes(e.autoLoading.page+1,e.$route.path);case 4:r=t.sent,c=r.data.recipes.map(e.normalizeRecipe).map((function(e){return Object.freeze(e)})),(n=e.recipes).push.apply(n,Object(o.a)(c)),e.fetchPostsData(c.map((function(e){return e.id}))),e.autoLoading.page+=1,t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),e.$sentry.captureException(t.t0);case 14:return t.prev=14,e.autoLoading.fetching=!1,t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[0,11,14,17]])})))()},onShowMore:function(){Object(A.a)(E.b.showMore,E.b.home,"/recipes/")},onShare:function(data){var e=Object(S.a)(data.socialNetwork),t=data.slug,label=this.isHomePage?E.c.home:E.c.taxonomy;Object(A.a)(e,t,label)},onUpdateLike:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var o,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o={category:E.b.likes,action:Object(L.j)(e.url),label:t.isHomePage?E.c.home:E.c.taxonomy},n.next=3,t.updateLike({analyticsData:o,id:e.id});case 3:return r=n.sent,n.next=6,Object(I.checkAccessTokenAndDoAction)(t,r);case 6:case"end":return n.stop()}}),n)})))()},onUpdateDislike:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var o,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o={category:E.b.dislikes,action:Object(L.j)(e.url),label:t.isHomePage?E.c.home:E.c.taxonomy},n.next=3,t.updateDislike({analyticsData:o,id:e.id});case 3:return r=n.sent,n.next=6,Object(I.checkAccessTokenAndDoAction)(t,r);case 6:case"end":return n.stop()}}),n)})))()},onToComments:function(e){var t=this.isHomePage?E.a.home:E.a.taxonomy;Object(A.a)(E.b.toComments,t,Object(L.j)(e))},onAppear:function(e){var t=this;Object.keys(this.scrollEventSent).forEach((function(n){if(!t.scrollEventSent[n]&&+n<=e){var o=t.isHomePage?E.b.home:E.b.taxonomy;Object(A.a)(E.a.scrollCards,o,n),t.scrollEventSent[n]=!0}}))}})}),B=(n(785),n(1171),Object(_.a)(M,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"recipes__container",class:e.containerClass},[e.$fetchState.error?n("RecipeErrorContainer"):e.$fetchState.pending?n("div",{staticClass:"recipes__placeholders",attrs:{"data-jest":"placeholder"}},e._l(5,(function(e){return n("RecipeCardPlaceholder",{key:e})})),1):n("main",{staticClass:"recipes",attrs:{"data-jest":"main"}},[e.showTitle||e.showTopPaginator?n("div",{staticClass:"recipes__top"},[e.showTitle?n("h1",{staticClass:"recipes__title",attrs:{"data-jest":"title"}},[e._v(e._s(e.page.title))]):e._e(),e.showTopPaginator?n("ThePaginatorWrapper",{staticClass:"recipes__paginator recipes__paginator_top",attrs:{total:e.page.total,active:+e.activePage,routeBeginning:e.currentPath,isTrailingSlash:!0,pagePrefix:"page/"}}):e._e()],1):e._e(),n("div",{staticClass:"recipes__list"},[e._l(e.recipesAndWidgets,(function(t,o){return[e._l(t.first,(function(t,r){return[(r+1)%5==0?n("LhIntersectionObserver",{key:t.id,on:{appear:function(t){e.onAppear(5*(o+1))}}},[n("RecipeCard",{key:t.id,staticClass:"recipes__card",attrs:{"gtm-event-position":e.eventPosition,cookingTime:t.totalTime,isCookingTimeVisible:!0,url:t.url,title:t.title,covers:t.images,folders:e.folders,user:e.user,favorite:e.$store.getters.getArticleFavorite(t.id),showAdminControlsPanel:e.isAuthenticatedInWordpress,viewsCount:e.$store.getters.getViewsCount(t.id),linkToEdit:e.getEditLinkHref(t.id),viewsLoading:e.$_mixin_updatingViewsCount_getLoadingViews(t.id),likes:e.getLikes(t.id),dislikes:e.getDislikes(t.id),reactionState:e.getReactionState(t.id),commentsEnabled:t.commentsEnabled,commentsCount:e.getCommentsCount(t.id),coverLoading:"lazy",openCommentsInNewTab:!0},on:{"update-like":function(n){return e.onUpdateLike(t)},"update-dislike":function(n){return e.onUpdateDislike(t)},"click-on-restore-button":function(n){return e.$_mixin_updatingViewsCount_updateViewsCount(t.id)},"favorite-delete":function(n){return e.$_mixin_onFavoriteDelete(n,{id:t.id,title:t.title,url:t.url})},"favorite-create-folder-and-add":function(n){return e.$_mixin_onFavoriteCreateFolderAndAdd(n,{id:t.id,title:t.title,url:t.url})},"favorite-create-folder-and-transfer":function(n,o){return e.$_mixin_onFavoriteCreateFolderAndTransfer(n,o,{id:t.id,title:t.title,url:t.url})},"favorite-transfer-to-folder":function(n,o){return e.$_mixin_onFavoriteTransferToFolder(n,o,{id:t.id,title:t.title,url:t.url})},"favorite-add-to-folder":function(n){return e.$_mixin_onFavoriteAddToFolder(n,{id:t.id,title:t.title,url:t.url})},"favorite-deferred":e.$_mixin_onFavoriteDeferred,share:e.onShare,"to-comments":function(n){return e.onToComments(t.url)}}})],1):[n("RecipeCard",{key:t.id,staticClass:"recipes__card",attrs:{"gtm-event-position":e.eventPosition,cookingTime:t.totalTime,isCookingTimeVisible:!0,url:t.url,title:t.title,covers:t.images,folders:e.folders,user:e.user,favorite:e.$store.getters.getArticleFavorite(t.id),showAdminControlsPanel:e.isAuthenticatedInWordpress,viewsCount:e.$store.getters.getViewsCount(t.id),linkToEdit:e.getEditLinkHref(t.id),viewsLoading:e.$_mixin_updatingViewsCount_getLoadingViews(t.id),likes:e.getLikes(t.id),dislikes:e.getDislikes(t.id),reactionState:e.getReactionState(t.id),commentsEnabled:t.commentsEnabled,commentsCount:e.getCommentsCount(t.id),coverLoading:"lazy",openCommentsInNewTab:!0},on:{"update-like":function(n){return e.onUpdateLike(t)},"update-dislike":function(n){return e.onUpdateDislike(t)},"click-on-restore-button":function(n){return e.$_mixin_updatingViewsCount_updateViewsCount(t.id)},"favorite-delete":function(n){return e.$_mixin_onFavoriteDelete(n,{id:t.id,title:t.title,url:t.url})},"favorite-create-folder-and-add":function(n){return e.$_mixin_onFavoriteCreateFolderAndAdd(n,{id:t.id,title:t.title,url:t.url})},"favorite-create-folder-and-transfer":function(n,o){return e.$_mixin_onFavoriteCreateFolderAndTransfer(n,o,{id:t.id,title:t.title,url:t.url})},"favorite-transfer-to-folder":function(n,o){return e.$_mixin_onFavoriteTransferToFolder(n,o,{id:t.id,title:t.title,url:t.url})},"favorite-add-to-folder":function(n){return e.$_mixin_onFavoriteAddToFolder(n,{id:t.id,title:t.title,url:t.url})},"favorite-deferred":e.$_mixin_onFavoriteDeferred,share:e.onShare,"to-comments":function(n){return e.onToComments(t.url)}}})]]})),t.second.length?n("WidgetsRendererContainer",{key:o,attrs:{recipesWidgetDisplayType:"big-tiles",widgets:t.second}}):e._e()]}))],2),e.autoLoadingEnabled?n("BaseAutoLoading",{attrs:{fetching:e.autoLoading.fetching},on:{"load-new-items":e.onLoadNewItems},scopedSlots:e._u([{key:"placeholder",fn:function(){return e._l(3,(function(e){return n("RecipeCardPlaceholder",{key:e})}))},proxy:!0}],null,!1,1150655638)}):e._e(),e.showBottomPaginator?n("ThePaginatorWrapper",{staticClass:"recipes__paginator recipes__paginator_bottom",attrs:{total:e.page.total,active:+e.activePage,routeBeginning:e.currentPath,isTrailingSlash:!0,pagePrefix:"page/"}}):e._e(),e.showMoreButtonVisible?n("nuxt-link",{staticClass:"recipes__show-more",attrs:{"data-jest":"show-more",to:e.showMoreLink},nativeOn:{click:function(t){return e.onShowMore.apply(null,arguments)}}},[e._v("Показать ещё")]):e._e()],1)],1)}),[],!1,null,"468d6ce0",null));t.default=B.exports},936:function(e,t,n){var content=n(1162);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(8).default)("145f277e",content,!0,{sourceMap:!1})},937:function(e,t,n){var content=n(1164);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(8).default)("289339ba",content,!0,{sourceMap:!1})},939:function(e,t,n){var content=n(1170);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(8).default)("51a3c9d9",content,!0,{sourceMap:!1})},941:function(e,t,n){var content=n(1172);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(8).default)("285343d8",content,!0,{sourceMap:!1})}}]);