!function(n){var t,e,r;t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},e=/[&<>"'\/]/g,r=function(n){return t[n]},function(){var n={"&":"\\u0026",">":"\\u003e","<":"\\u003c","\u2028":"\\u2028","\u2029":"\\u2029"},t=/[&><\u2028\u2029]/g,e=function(t){return n[t]}}();n.$a=function(n){var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:{};var e={},r=function(o){if(o in e)return e[o].$a;if(!n[o])throw new ReferenceError("module "+o+" is not found");var u=e[o]={$a:{}};return n[o].call(t,u,u.$a,r,t),u.$a};return r(0)}([function(n,t,e,r){const o=e(1);var u=window;var i=e(6),a=i._$a,c=i._$b,s=u.parent,l="https://music.yandex.ru",f=function(n,t){s.postMessage(JSON.stringify({event:n,data:t,xstorage:!0}),l)},_=f.call,w=_.bind({}.hasOwnProperty),d=_.bind(u.addEventListener),h=function(n){this._$c=n};h.prototype={_$d:function(n,t){w(c,n)&&this._$c.setItem(n,t)},_$e:function(n){w(c,n)&&this._$c.removeItem(n)},_$f:function(){for(var n,t={},e=Object.keys(c),r=0,o=e.length;r<o;r++)null!=(n=this._$c.getItem(e[r]))&&(t[e[r]]=n);return t}};var y=function(n){return new h(new o(n))},E={local:y("localStorage"),session:y("sessionStorage"),memory:y("memoryStorage")};if(!E.local&&!E.session&!E.memory)f("error",{error:"No available storages"});else{var m={};m[a._$g]=function(n){f(a._$h,{requestId:n,local:E.local&&E.local._$f(),session:E.session&&E.session._$f(),memory:E.memory&&E.memory._$f()})},m[a._$i]=function(n,t,e,r){null==r?E[t]._$e(e):E[t]._$d(e,r),f(a._$j,{requestId:n,storage:t,key:e,value:r})},d(u,"storagechanged",(function(n){const t=n.detail;if(t&&t.key&&!w(c,t.key))return;let e="unknown";t.storage&&w(E,t.storage)&&(e=t.storage),t.key?f(a._$j,{storage:e,key:t.key,value:t.newValue}):f(a._$k,{storage:e})})),d(u,"storage",(function(n){if(n.key&&!w(c,n.key))return;let t="unknown";for(var e in E)if(w(E,e)&&E[e]&&E[e]._$c.getProto()===n.storageArea){t=e;break}n.error?f(a._$l,{event:n.action,error:n.error.message}):n.key?f(a._$j,{storage:t,key:n.key,value:n.newValue}):f(a._$k,{storage:t})})),d(u,"message",(function(n){if((n.origin||n.originalEvent.origin)===l){var t;try{t=JSON.parse(n.data)}catch(e){t={error:e}}var e=t.error,r=t.event,o=t.data,u=t.requestId;try{if(e)throw Error(e);if(null==u)throw Error("No request id");if(!w(E,o.storage)||!E[o.storage])throw Error("Storage unavailable");if(!w(m,r)||"function"!=typeof m[r])throw Error("Action is not defined");m[r](u,o.storage,o.key,o.value)}catch(e){f(a._$l,{requestId:u,error:e.message})}}})),m[a._$g]()}},function(n,t,e,r){const o=e(2),u=e(4),i=e(5),a="GET_ITEM",c="SET_ITEM",s="REMOVE_ITEM",l="GET_PROTO",f=function(n){const[t,e,r]=f.storages;switch(n){case"localStorage":this.storage=t.isAvailable()?t:this.getAvailableStorage();break;case"sessionStorage":this.storage=e.isAvailable()?e:this.getAvailableStorage();break;case"memoryStorage":this.storage=r.isAvailable()?r:this.getAvailableStorage();break;default:this.storage=this.getAvailableStorage()}};f.storages=[new o,new u,new i],f.prototype.getAvailableStorage=function(){return f.storages.find(n=>n.isAvailable())},f.prototype.performAction=function(n,t={key:null,value:null}){this.storage.isAvailable()||(this.storage=this.getAvailableStorage());const e=this.storage,{key:r,value:o}=t;switch(n){case a:return e.getItem(r);case c:return e.setItem(r,o);case s:return e.removeItem(r);case l:return e.getProto();default:throw new TypeError(`Storage action of type "${n}" doesn't exist`)}},f.prototype.getItem=function(n){return this.performAction(a,{key:n})},f.prototype.setItem=function(n,t){return this.performAction(c,{key:n,value:t})},f.prototype.removeItem=function(n){this.performAction(s,{key:n})},f.prototype.getProto=function(){return this.performAction(l)},n.$a=f},function(n,t,e,r){const o=e(3),u="STORAGE_TEST_ITEM",i=function(){};(i.prototype=new o).getItem=function(n){return localStorage.getItem(n)},i.prototype.setItem=function(n,t){return localStorage.setItem(n,t)},i.prototype.removeItem=function(n){localStorage.removeItem(n)},i.prototype.isAvailable=function(){try{return window.localStorage.setItem(u,u),window.localStorage.getItem(u),window.localStorage.removeItem(u),!0}catch(n){return!1}},i.prototype.getProto=function(){return this.isAvailable()?window.localStorage:null},n.$a=i},function(n,t,e,r){const o=function(){};o.prototype.getItem=function(){throw new Error("Cannot call abstract method")},o.prototype.setItem=function(){throw new Error("Cannot call abstract method")},o.prototype.removeItem=function(){throw new Error("Cannot call abstract method")},o.prototype.isAvailable=function(){throw new Error("Cannot call abstract method")},o.prototype.getProto=function(){throw new Error("Cannot call abstract method")},n.$a=o},function(n,t,e,r){const o=e(3),u="STORAGE_TEST_ITEM",i=function(){};(i.prototype=new o).getItem=function(n){return sessionStorage.getItem(n)},i.prototype.setItem=function(n,t){return sessionStorage.setItem(n,t)},i.prototype.removeItem=function(n){sessionStorage.removeItem(n)},i.prototype.isAvailable=function(){try{return window.sessionStorage.setItem(u,u),window.sessionStorage.getItem(u),window.sessionStorage.removeItem(u),!0}catch(n){return!1}},i.prototype.getProto=function(){return this.isAvailable()?window.sessionStorage:null},n.$a=i},function(n,t,e,r){const o=e(3),u={bubbles:!1,cancelable:!1,detail:null},i={url:void 0,storage:"memory",key:null,newValue:null,oldValue:null},a=function(){this.storage={}};(a.prototype=new o).getItem=function(n){return this.storage[n]},a.prototype.setItem=function(n,t){const e=this.storage[n],r=Object.assign({},i,{url:document.URL,key:n,oldValue:e,newValue:t}),o=Object.assign({},u,{detail:r});window.dispatchEvent(new CustomEvent("storagechanged",o)),this.storage[n]=t},a.prototype.removeItem=function(n){const t=this.storage[n],e=Object.assign({},i,{url:document.URL,key:n,oldValue:t,newValue:null}),r=Object.assign({},u,{detail:e});window.dispatchEvent(new CustomEvent("storagechanged",r)),delete this.storage[n]},a.prototype.isAvailable=function(){return window&&"function"==typeof window.dispatchEvent},a.prototype.getProto=function(){return{}},n.$a=a},function(n,t,e,r){var o=e(7)(["Ya_Music_Player_Type","Ya_Music_Player_Format","Ya_Music_Player_HQ","Ya_Music_Player_Volume","Ya_Music_Player_Speed","Ya_Music_Player_Volume_Gamma","Ya_Music_Player_Equalizer","Ya_Music_Player_CD","Ya_Music_Player_ID","Ya_Music_Player_FL","Ya_Music_Player_LV","Ya_Music_Player_SessionTime","Ya_Music_Player_SessionLastPlay","Ya_Music_Player_LA"]);t._$a={_$j:"update",_$k:"clear",_$l:"error",_$h:"dump",_$i:"update",_$g:"dump"},t._$b=o},function(n,t,e,r){var o=e(8);n.$a=function(n){return n.forEach((function(n){o[n]=!0})),o}},function(n,t,e,r){n.$a=function(){var n;try{n=Object.create(null)}catch(t){n={}}return n}}])}("undefined"==typeof module?{}:module);